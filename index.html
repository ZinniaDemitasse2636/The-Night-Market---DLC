<!DOCTYPE html>
<html data-init="no-js">
<head>
<meta charset="UTF-8" />
<title>The Night Markets Forgotten Memories</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<!--

SugarCube (v2.36.1): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url('data:application/octet-stream;base64,d09GRgABAAAAADLAAA8AAAAAWHgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+IEkIY21hcAAAAdgAAAG8AAAF3rob9jFjdnQgAAADlAAAABMAAAAgBtX/BGZwZ20AAAOoAAAFkAAAC3CKkZBZZ2FzcAAACTgAAAAIAAAACAAAABBnbHlmAAAJQAAAI6gAADv+gJOpzGhlYWQAACzoAAAAMwAAADYY1IZaaGhlYQAALRwAAAAgAAAAJAfCBClobXR4AAAtPAAAAJEAAAFMBfb/0WxvY2EAAC3QAAAAqAAAAKhjiHI5bWF4cAAALngAAAAgAAAAIAFjDA9uYW1lAAAumAAAAY0AAAL94+zEpHBvc3QAADAoAAACHAAAA11cG/YjcHJlcAAAMkQAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZNZgnMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGF4EMgf9z2KIYg5imAYUZgTJAQDSIQumAHic7dTVbltRAETR7dpNCikzQ8rMzMxt/M39mHnsU1/TfZz5jFpaV7pXJunMDLAZmOqaZjD5y4Tx+uPTyeL5lG2L5zN+L94zG8+ztr7ulXH1fra4bvK9M79xiWW2sNXPbWeFHexkF7vZw172sZ8DHOQQhznCUY5xnBOc5BSnOcNZVjnHeS5wkUtc5gpX/f3r3OAmt7jNHe5yj/s84CGPeMwTnvKM57zgJa94zRve8o73fOAjn/jMF77yje/84Ce/WGPun1zi/2tlXKbp3Xyc44bFyZanSWokJDXOOjXSk/LUSXn+pEwCKTNBaqQqZU5IjX+XMjukTBEp80TKZJEyY6RMGylzR8oEkjKLpEwlKfNJyqSSMrOkTC8pc0zKRJMy26RMOSnzTsrkk7IDpGwDKXtByoaQsiukbA0p+0PKJpGyU6RsFyl7RmosQcrukbKFpOwjKZtJyo6Ssq2k7C0pG0zKLpOy1aTsNymbTsrOk7L9pNwBUi4CKbeBlCtByr0g5XKQckNIuSak3BVSLgwpt4aUq0PK/SHlEpFyk0i5TqTcKVIuFim3i5QrRso9I+WykXLjXOYNzP8BuAPUwHicY2BAAxIQyBz0PwuEARJsA90AeJytVml300YUHXlJnIQsJQstamHExGmwRiZswYAJQbJjIF2crZWgixQ76b7xid/gX/Nk2nPoN35a7xsvJJC053Cak6N3583VzNtlElqS2AvrkZSbL8XU1iaN7DwJ6YZNy1F8KDt7IWWKyd8FURCtltq3HYdERCJQta6wRBD7HlmaZHzoUUbLtqRXTcotPekuW+NBvVXffho6yrE7oaRmM3RoPbIlVRhVokimPVLSpmWo+itJK7y/wsxXzVDCiE4iabwZxtBI3htntMpoNbbjKIpsstwoUiSa4UEUeZTVEufkigkMygfNkPLKpxHlw/yIrNijnFawS7bT/L4vead3OT+xX29RtuRAH8iO7ODsdCVfhFtbYdy0k+0oVBF213dCbNnsVP9mj/KaRgO3KzK90IxgqXyFECs/ocz+IVktnE/5kkejWrKRE0HrZU7sSz6B1uOIKXHNGFnQ3dEJEdT9kjMM9pg+Hvzx3imWCxMCeBzLekclnAgTKWFzNEnaMHJgJWWLKqn1rpg45XVaxFvCfu3a0ZfOaONQd2I8Ww8dWzlRyfFoUqeZTJ3aSc2jKQ2ilHQmeMyvAyg/oklebWM1iZVH0zhmxoREIgIt3EtTQSw7saQpBM2jGb25G6a5di1apMkD9dyj9/TmVri501PaDvSzRn9Wp2I62AvT6WnkL/Fp2uUiRen66Rl+TOJB1gIykS02w5SDB2/9DtLL15YchdcG2O7t8yuofdZE8KQB+xvQHk/VKQlMhZhViFZAYq1rWZbJ1awWqcjUd0OaVr6s0wSKchwXx76Mcf1fMzOWmBK+34nTsyMuPXPtSwjTHHybdT2a16nFcgFxZnlOp1mW7+s0x/IDneZZntfpCEtbp6MsP9RpgeVHOh1jeUELmnTfwZCLMOQCDpAwhKUDQ1hegiEsFQxhuQhDWBZhCMslGMLyYxjCchmGsLysZdXUU0nj2plYBmxCYGKOHrnMReVqKrlUQrtoVGpDnhJulVQUz6p/ZaBePPKGObAWSJfIml8xzpWPRuX41hUtbxo7V8Cx6m8fjvY58VLWi4U/Bf/V1lQlvWLNw5Or8BuGnmwnqjapeHRNl89VPbr+X1RUWAv0G0iFWCjKsmxwZyKEjzqdhmqglUPMbMw8tOt1y5qfw/03MUIWUP34NxQaC9yDTllJWe3grNXX27LcO4NyOBMsSTE38/pW+CIjs9J+kVnKno98HnAFjEpl2GoDrRW82ScxD5neJM8EcVtRNkja2M4EiQ0c84B5850EJmHqqg3kTuGGDfgFYW7BeSdconqjLIfuRezzKKT8W6fiRPaoaIzAs9kbYa/vQspvcQwkNPmlfgxUFaGpGDUV0DRSbqgGX8bZum1Cxg70Iyp2w7Ks4sPHFveVkm0ZhHykiNWjo5/WXqJOqtx+ZhSX752+BcEgNTF/e990cZDKu1rJMkdtA1O3GpVT15pD41WH6uZR9b3j7BM5a5puuiceel/TqtvBxVwssPZtDtJSJhfU9WGFDaLLxaVQ6mU0Se+4BxgWGNDvUIqN/6v62HyeK1WF0XEk307Ut9HnYAz8D9h/R/UD0Pdj6HINLs/3mhOfbvThbJmuohfrp+g3MGutuVm6BtzQdAPiIUetjrjKDXynBnF6pLkc6SHgY90V4gHAJoDF4BPdtYzmUwCj+Yw5PsDnzGHQZA6DLeYw2GbOGsAOcxjsMofBHnMYfMGcdYAvmcMgZA6DiDkMnjAnAHjKHAZfMYfB18xh8A1z7gN8yxwGMXMYJMxhsK/p1jDMLV7QXaC2QVWgA1NPWNzD4lBTZcj+jheG/b1BzP7BIKb+qOn2kPoTLwz1Z4OY+otBTP1V050h9TdeGOrvBjH1D4OY+ky/GMtlBr+MfJcKB5RdbD7n74n3D9vFQLkAAQAB//8AD3icrXsLcFzlleZ//v+++nb37dfte/VotVrdrW5JltuKpO6WJVluPyXbsmOEbGRjO4KVjWPZlsM4QIU4IYGlgCE2yxqKIQkJg2GreKQCTCZb1CZkiswjzOwOmSTATNVWTZLdDUwSMrVDsomD23vOf69assFAqgbk+773P4//nPOdc/5mwNjFl8WjosbaWblmxiOmIlTGYXzb11M7Z2ohAMbZCcZ5iG9prZl4whfwGju05xtttitUdwXYEUgkbQtWga5lC+XBaqJI285qpb8dVEc8Gnm5L5QM/f58yAlB399a7dD0mWAmdAqaMvBmKPKX9TdDwSjod9yhx03FAPcvI6Gk2lV33XoXUtKgL8C6Wa0WSzXbVjhg6JoqIPShCK0FOvOuE48K1V4B1VUQAVevugmP7Fz2CmTzW5/8+ZGP/+Kp7h/8oI4MuOZ7M5B9IvujH2Wf+PnCAjzn8ZK6AieMKRcvXnxWWSWCzGARlPcqtqs21WZzEBFgYIVDAYWzVJIrXBlH+hXGlWNM00GAJmYZ8sKBzTJFVZVppijqDFMVdTIWLa0o5JrdaHusPZGIG1IjFhQGK2mAZEe56kJnR1bTY7ZT7eivFGODBTdma3pHtlCNDVbwmgMHx/aO4R8ffeet5/ZCG6TfuV03IaSJU3oIzKsGO9+5PV+BwU5xqnOQx1aO8fW71yvD9fPn55/fA22PmsaFvfSgwZ8wzPiFvZ2DUMnzJ2hHVDMmHucPsSRrq7UQo4DMAV/AW7CANw/Zru3NIx20bBEpXwukArlxxOPReibaG63/SyQyiftzcBy3k1HuOHgjEgFHnkYfh4VodDJC4138Ff8hv5PlWbrWmm2O6grNEgGNCWGnbFtRm1Z04gzQPPWvkqMWF4eWU8DB267Df+gNe84bBvfRpfNI5Ny5yAmHDh5/PPLuByMlekDS9DsRR73nWHetwBShSO5PqCBQONO4E2wGlSvYZG6gMzeQ09SWFZC0tWION3oOVVXGTbGM+hrAzQj0O25yoN8R8YzzRsaZdzLwhpsGPEm783hAJ9+kq286eDX5pn/VydDjvk7i8EuchU21JJ3DNOqFzeABmywPcNXxhu/wB+3whrqwVw7Cn1j8vPfdDH6O7PR3fDV/Cb85wua/waSit309grZJHHOhHEQ9CA7zTGVCUb0ZvXzc1lrRe5Af+4An0aSL9op0IU9y6vRFtAYGKy7KJGFbQrdg2dXqGAwWilld0zUy9xLqd6A/zeFuy7gzYFmBOwOhZ6NNhZakm8YTI7S1pyM1mM032V26qevXGlzZ8+TKvROlB/BBkO9ACDalB7OZuBnuC5tRcAItpalENNOfhajVH1A2a1HjbHZ4N4r54oWLz4qPoe4jrMo2sonapm5QRQBQ3XycKVxwRRxjQuVCnWc6mrzOZ5FvBiraOmia5FubYRpok8n0ioRTKOQMNbWiszxYWAFZrQ1sB+dDJTFYghzyiBN3oB857ndIAha4Se/+YGUtjAkXXUO2xPE2eoe3TWPeMOXmzNi+j9w1HghvVbSAmu4c6nFac6MgbzXFU2baDr1241+98TfHtU/9t7df+MzU4msmfPYj06Wbw8Gqohda0/FkSyiyvtPGG/FsMKq1pLqmPvndkye/+y+08eYIHEJZpFmJra2Nop/VWuKcCwPvgRhnGlOFps6iIdAEmFVAKh53jblZyBU6nAFdbfX03tGwioZ9oGnEyDSWTQCyFzhoR+s/jdjgWLmc3L2K21zEmXCsM5aDm4g9Ny5v0PZVb+dY9Rcd/sl5eTiPj0nTaeiU+BhhW2qbuzJcUy2Nc2gCrjBkxWCqZiArGgOuwSzjAlDb5L91XfpvfYbpij6ZRIUWYoVcLqC2+UqNLddsMrekY3GZztVl2uQjpl4xjedIM+Uybc/r5viShuHgcgXuwQtpuoMHz8utCe/s8S+Y/7xMaYu2DX1yDrez3lp3cyyKdop+HLcLi878Uh9SKOSlj73cOIUFRVKVKHhaSS9JP452RCcYoJ3w85bz8Ckp9VN4xeZj9atpH4FnPCV4OtiDNIVYCrWwsbauK81VxUlaQnA+riFBisoUsiU0LbQpASCmmRAwg1MNJoH19uQ6WpriUV1jIQjphA5QjosiTfiy1tF+kPJKMTFYpAu6lkx40odnTv7VjYtC/QtTJyGH9HmMnKamGrcaqmaagRsMUwR9WeLmwsQREvIRevSvYa8uVFXo9Sc0w5A8/Rp5+jcxhXLuYAOIx/pbY+ggFp0FV8lNoLNAEQvyDkwBZR9T1ZC6xR0qFgsybix3DJcR7iIGwCsCHHQM0nYKVSBXQZPnqG7KDZiqrn8K524gpN9ghAx42k4GsvF3nohnA0kbnglkC9mrl7h4Db2TommKcVE1QOPRd97K5WJxsKO5nIjHbHtx/og3kK8iWys1he/EkKlqCbFOB6iKQp5Q5Yp6DB0AsjmPvHEFSGsoFraPaVpI2zLc2lmudErjJ/eeQwbKPoRBZulcwhwXYc6i1SdiEpiCF+KrFOIrAzKaHdhQ79tw4MAGuJv4rt8sQQu80jloGnnDfNVJBa+vn1WjSg1d8NHrg44FbTgdJ5+T77yy/gDI5wY7633yTbI7+CdyMDyEL2paDd0BvZjyfIYXH2/H+aqjDfXUisgnk3rFYMePoyZBegWanQpM5hKdlUSU1JnoQH2iG1d90IYADi0JPV2/oxMEeB7apm+aBngFw/ObMjzHzv7dgzyOh48fHZnmO9c8Wv+2RAGwHiP20UNnzx46mvYxyaMixDpZX22lQqQgRDqG4kYcMo92cpypAOo0Ti+iSYXJRGc5l8wvQhPfqpE0SYa7nDwkeQyh26OOlbecqVumoCwJ8+mDm+9/5T4eOyOt+4wk8WjavYTIG+7nD5Li2cWv8zGkMYoz51q2u3Y1JQSwfcumSn9JUxW0CZIWQ5isqKCo8zoGFPybx/lyHD2w4AaCBw7Ap1HIxAaHyZlr1tXG1owMt7h5Ox5QmxF4Iv6vDhaQoTFAYADuYIlnLa7b7RwtiOBDtVK1dbyCMXXxn5azOIIKfLFKaQP9K3HKIMYEQosvhkIWH23TQ9wIpCq9M4WxycnJsQIUYrEJ/bPGuOZohfHVzdmMaAmHm418c7DU3xdoyYPebFktPJtpHu7fefjw4R0VHiNTa06ZUTPe09a1sdTUVNrYtbo3nth11VW7tBa1d/U1a1t71rdG2u1IJNkWDYdbUs0pnnFT+OloWzISsdsjqVpvy9prqrNjed41POfPx2+J7TIXaWP5Wgf5bvToBEvpppQYOXPOJoda4gTQE6TsNK8sAvUSSHBFygfnfM9wL+8aK/Bddv0tZ8SufyKZ7ml7s20iCWdsPpPu4YVaXuur/2M6WX8riReTE21vtPUAnn4iyTxdf0vJ+/QM0pwsUL4D5BmUBQEeXpaU4W6RtExzN1In7eT9qHPpIoUdqAzSrdyHIPo1JNRps1uioCWJyIm2U/JG8oO4aZMXozF8b4RupRd5JJv7Nn8ZeUyxjlrakhJHcwO2gHMUDgGLR0MmS0GrIoMRWos0K81LUnPZYgmkw6sM8HtCoQTaT9y0Wu3f/MZuCYfijhMPhUVQNdL2hY8kMroS/8UvEqqeSfC/xzPV07k3vsqyrL+2ykYnhJjEz45OLIdbu4ncrbrWhImzltU7oqqaXAEdMWiHxPsSdvuF70K6/xf6FejjL13YBvFVP+UXrkwnyelZjBcltoLypQIoEmsoiDUw4C2QFS/I/J6yx5ybWOOqaMad0kJlKo+ElAdLqvRTMqOsgucuM64j3hgHU1H1mIkQ084Oje3eXT1lZwL1nwaD0BZMNfFTcHpv+sf7v6LEo4oZMlRbFNqH9tb60nEN0UkQ0mYawZNpR878eFuD1lWsl/Jb9J5iMbPlDKnkh3raBmS66U1M9Jm5rKUmMel1dKLOcxrVSgf5dJqU4o0g0pJyTlV37x4bytpCATOG8VUT4+m9cPoURiakE34ZMes/wbB0Roun+2p7h9oLSlwzQqZq2eIr+xe2/Rhp5QF8hHn5Hh/FfM9ibs32UrNG+l22ZbrnJ8N+fERAcD6YCp6nuPc2Aq/vWXiMfzKaye/BDfzTLPwe33MT8ns4P/y0uiLBdyZw3qRvNvGZegjF6H+escXvreOnkD7zm7IkADTbJEkU4sdw1jmwzpTj42smHLB82ijenjfx9YsXkccR+B5+I1azGtQk+4maTpnLlsBL75E7O1IPea+mzfPmUwQt00FJoG+nPxN/zruZzZprTljyx2GpXiHdYWBZtcINeB+2xVP16/GT9euDwf00TbqgK5gK7QvCmfp/wPn15WDa3BcM1l/Hy8F9wZQ31nf4Q2IjjrXyG+BnzXnMmqXiTuB5CLa01gINjvb8mesSTwHuSAEtzm8anp+uvwbdprkfhUs0wCNIxH6TP1l/vf6aPDThK0TXI5I+tjj+SX/8wIcaPxWX4y+CqsCiEIiAIzhsKrgfh+6qv+4L4RETPl6/zqMKukki9AA96OseZb3Zk7UKVKxZKt65tpR1J9p1sTGgP5Z4ah+KEzl73R/xEfr+I8H5fchlN/Jr0n0c3fSGkrz+vbhd5m2ZWltThDeKUaKh3WTZXWauS+WomBdMkjGvOCRuT9YfcIZxk0x24/5cT3q8redxe8TpTsLn03b9LIaFo/I0eQ7uxtjQm6rffI4elnTcJfbwX/qRFyG+Vw+SaJdyFIpugk0WXCcnaZFo1323viNAWHZPvk1+ugfjTf2sbcPR5LDT442bhwPj6Z5z9qi9wr8B85Ji51yXb3tISxlpSUtaZEYnFX8ZbHI6C8vk4ll2h5/YdRQbM0CUbSmXHsd5rH5zWz7fBnc/5iA1NLANwyQZ2+5JjiYfQ4mle+BxJA1prT9g+770dv4zTz9RnTPp+JlY4DJKoroOucmyT4fnsGIeFC3H9EtmB+qnGyP6413tPvs4BhIwipskDKakeIg+KKTgbl92JBkkHn1J3c8t+9ia2vBKhMFkGBJtEjrGDIzKE1SeAgTJiDAVRYpKmSGwMlksJor5gUWgjKlXYS0gurS4neaYflXJnaWBUjDKNAVhkWoF1WhHz7uJ2PapE8NHJkulySPD62/qVmLapMq10a997JqvnphQarc8dO3UQ2smYr38pfOWszK6fTs+eBKfHy4j8t2uWNrWnbDx5CNfe+TkxrHVE/EEW4ynxM9H2FhtpAeE2tnGFUH1J4xXChxD5hACLNXbLgOA3WU353rI37Y44SipbwdxwED/mEC0rOmuIzmlGkw7SBzNxZ6NN3519+zXRhV1Uosp3TdtGD68s4eXJo8uzHVtjyXc85gC9MYmRh+euuaRk+vhAG43Tm3RLGW7Clp52Oesq3N7dKVjnW9KxCdWjyFvi/nUs+Ja5CnPxtn+2t4NnVwLrELw76JqDMz1MacMGJoR0I5RVsA1lR/DLEdonLJLQWnOMcSamKlrszLnWWZ3mzcVOjsrnYWynTfVNmQ6aQFxrWtL9SQtgjqsojbxf5lp+qquSF1rVGyk02qZZEEKRkPdlv9ff3LVQ6MTFMas8xSft3fNVbd+vqg1KaF5w7RwBsirUye24UVXDS3oIcj/nz+56mF6qQlUAQ++gGoNytcxFG7P98DWMXMoHIL/6l/Z7p1riv8ko2oiyiru129WsSrmUjO1XdtWc0Pr7miOoWOV9YUQ07WQPmsCisWYDge5puAUAI3NIk6EQACmaQ+BGRaAwOSemV1TH90+vnlDrZBNFOi/nEUlLL96lYx5VZLqB5zDQLFQzGm6KuUX89L6YqxRuaPsCwXYTlJE1EVJt9ycWTo8bereoW7Wv38ewfOzmgI/N42Kn53LatjTxUCv85zbEyg+Y5hTcDddq99M2ysc8/51lABfjZ++8KvSxvUlnpCj7U+mIG3vR8yhXSbXEbaB3cDmatdds4lrhi9Z8hskNo2hkI+RQHWN6fMIUwKGFZiNhDmCNq6BoR1gejCoTzNdD86woB6cPDh33YFr91w99dHJLePr1tp525NylKZkzJtthLplN+ADzhOxjpiN1trRPwb/vhKfqIcMg8Mr3DDqd38o4cM36y9KWa+Tsn7v4/ocj134Vcg2TZsf/ABFKH4tYwrtObZYYxoF3QiQC+PjATwUho5+W8MkQlOOqUDxnlMNjZpsfB8zjJCxZe2afKeTjXeuboqT2XcOlsACB6XROFhWch7AeNy/VsZfx4fO5Aj8EjTVRPjLdtrmTS1NX7Azce6kmjZnnHf+1iuBiG0duzsmQTiZPzfjEoTGAqZ7xqt/nmmai8gXOWb0/sG9z8vyyPNOZjKDf9DlRgmQR93keVlHOU/9RTkfH8W8ieTQzWpsc21DGRM0Xw4soAUWDEDPtMB0oS9I5qeXC0PhMySPyTWjuYFctn9JEgWLp6FSXdz71TeSgzuQBmnXVHPXGqWhIhXkF+H2lQXxVqiSO5OthN9CQQSazmBOhdycwSgoZRJvQ28Yz8SVltDiwd3PUxMLN9De1dWehinH5783RvA9xhpyoHgnWAfGvE3sqtqOFT25rGIoMB4GBa0NAaepg2KYyiwVijQqFKGtopEeUFFYgQCboj0jZ8cCk7U1Q2W3MBBLjMRi0SCKxO0od6gD6Muon6Q35JGLDZS9DEpfLNZTA4aqrmrD0rwHCAO8Cs/Ur4a3J0Lql9WU4RfBJiYySfg+cviqaczLvipt59LuhbjXflPdSuRLUUd/9VV422jRv6SF/NbehYrcQ1p2AZ6jd80L5+kSRwE3WV+OVGTs9GvnU6yLDbJsrZ2aE+iijskqPtuHgTAktgz0r+xtaUaslZRRH6FKlRJrBwO9bK+lef8YXipg7j8GSJjM+GRPmSApRv6n//T4VrH3qqbRaNxoqoxSNMfwD6MV18yPulftrX+xZ7gXeka7vMCPgf2aQ8+N4bPuaKz7lg2LIGjjTT3x4T4jvubPYKL+cFtPTxscwm0DA+yVNaMjbFNt/cE9k+sUpoxgas8Gu1qjhG7GqUu+oAFel8B2gTDcgt+54If2XXv1VVsmVvRkM4m4TnnrYCGLtt5foc4F2rWO/NrIbxENvBHUy0WJBYqEg8hbyklAxoATvupfHMCZ3wAHaASEAFz/Y7pUPh+ZumWK7z65G1KGftgMJro0NbIzrOvbm1sCuhL9tBGKtrof1aLaZkdRjS4zYhzSDTDVw4bldnrPGtubWgKGiH0adR1JuR9VI/qErSgB72HMk0emp2+anr6F7kfTydZ+zdKSO0EdDRuTqaip3xAIjapaLa1aWqg/kmqNQEiXzza3ZFbqId3euezR4Iiqbkj5j7ZEIeTX7X4n9vLvLmKL2mAXILVUp0WPoyLCVJVGQ+/yNlGhjP8PNLq4y9vNy9rPrn+eW36OaPmdX0nTF7EIpu9XPlvW1XMgOiHbSHIL1ji1nsbpBdbAyXtlTRwjSHuCqyJvkjfAVEiMe317oeLEURlNKa/CI7tfVLxLp5qb4tFwUFVYJ3R6/STHqy1Xi1R9RLvvd6lSPIba14rZoo6zwa3w/7L18OGzRwC+N7B52+HD2zYPfA8OP3iIH9kyjkd4Fdwj9x85skUPzfXhQd9cSN96mB+97yjgoYUXvZ7kxYu/UW7mL7Eo+rwKK9byTKWsSWWz6N8VBaZxB5ShgDJZHerscm0J6L1at2fNGPH4CqQNZ+gAGTeaPZVNBB52IJ7nt/uI3N/B0707Do+8vmEH37rpdTLX8eEDd47Xr564Y3aIj+67azM8Q4dwYHjpHbJoOu1/8OkH++lk4s59Y2Lo+tsevG1ukA/N3uHb9f9TbkFebNRET61I/GEuOEtdCkxKcdfISpPptmSn01kdVNF4Y4NjHF1rWnh0cxWZKImsJdKcKPPIkZR5RIoYkcJ7dh665dDOHqV/4jgc2ILXkYz77zgwypGsH1zKst/L+ir6nJVsPdtR2zaC4aQTZC9CR4p0jigDQ6gmexJcUeeXdbS0xY7WslzDdpPF8uryAPX0L+tqoVNFD5QrFi7rbKGXwYnkJGCpwra4XMZe1th6JZcOCL0VgV445HepqL+l5jVdKMHP1VeH89a/WtYaK2/9Z/g4noyFYduzjf6WpSS0FIKDRovrC4aaQ9ZArQ9b1r/K58P0Yhi/4Msl4WPhFbUuzCTBb1OitsjmCVsAn+Qs3eokTJ1FeEQlI1nGXNlfnbS8tcc/sYz4wU8vsbd+lr/UII5u7mncOYBJ+WKc+5jsETe/L03AXCfmN4IlTVnCOYiVSxyWr5h45up7d/Lpu568c7ey4zRcu6yjzk9P3Xvu3im5qb9yaf98ab2AwZIsy0Zrq6nXxkG22zi121ScGiC71IoiZwcZqlAmzUCmvaU5GgkkzaQfoNCjlKimWnxvGhtR5b4r0roYFX59BZLFsvVB5NMRIVAGQ65bJoBsRuaFbLJM/0n3nZCLlZaWYKj+efWy88WezKv+yiG5dKnN23mX2uUJbi5bY+Rc4XgxBrHXGnlYb637gwLPEuXVBmD1ViiIyzgRfl5f9NddvfoB9NDxw0clWD9KV0FbdhMMjzfc+H7uJXEG8fo6Ns4O1q5fU+KCCq16PhXG3JuJcczFw6GwEaLSBXkQwNwF4DgLs1AgHDqA2FToAXEgCDpj+jTudDaDgUmnGsaG9bWx1UOVctJGzBlDf2HJWgZyh1HHkeV53RK5WC6Gc8fr45AzKSByxwlWHShTsxydSgfVLhALUZsXOiS8w0TlVOdJ006bC4ZayA43j7cN9WCqeCgYDTvGJzKnKG0Jn7ou6KSC18Frs8FUk2Jch1frv65/kWLdMMbf2fWfDKac4HFdaYpb8HY9ZDXZhnEylEgHP7t2L6YMcO46M22b111HA113zoFBDJQUpy/WLx6B36K+MxQdmlHBKerm0BIJKqUu68GgoLY0VSpexdChJiDC1WpC9qwK1cQYpS7U0BW0JAzeMrX6P+hRI2Dy4z/hqqmb4gS3jG8GLT77P1Ue5E4wfOFTFoioAS8NYVYZhv9umJapaPV6hct6wHdkHiowcqVYnvUivt5Qa+3vK/X2dBXy2Uy6pclBE4pR4XkwxWHTtq93vH+tv0l2U6pFvbNRePWrv51uBFbBWmgHbw/upXv+0LnRc1AxL/RjLrVgmvx/yP0Fq1KJxarV2A+PHct2HDvWwbvxJIYX60/THfzHrcdGH7shQm/iC2l6E/fXRumtaPU/ybeyx+p34UkVL0LJv9PAUHOomzL1w8q9uZaYoV3SIOoujHBKKii60eKMxhJHXUMgTQW0InVqqErq22AbYN6BHOMkFCMtlpWLDDc/0NM23tYLZ1uGMX5ZrWfPtkQj+chQ61lZiH+gZSiai0Sbz4JhDbeswXd2PSVr8E/twqtr8KXdu690Q2KpI6jHMMuhBjdRdbG9iQslEae6YVhDV7gBdOiHgK4iKtSERkv4yOpAP8ZMpimmNqtSRuUFG50FDD2AeaYRNrasGS0P2LTwuGDncpRJNtZ5Fpev85SVhMY6T3ewBJrtjAFIs8XZi95eSXOXLJkW75wKaXmE7afkst1TsjBDJxP3v3I//kG6Z9R+ce7WnfcfrvHRo6fPnT46CpteTMJZ7yXKMb2XTlHieMpspgUYLz+k3UsJV/LFTWNH7vvT08eHlfWHHtx+69yLSbZMRhHWhDn2SG0oYCC3qE/B0qAKuZqPg+b5XkErlwWmYkKlMkNY2eLmUAqF3OJinmKjrPIhuK1/W/IJ6z8kh5K1D2aK+/UTWqOzkz1fC4xVOgKKKqgjZqKV9nhTGGOgUGnZjiK4Mq8jJFKOMwJ0UxSLdlO/Ymvrtq8H3/UG+nBNcG0e7Vh79xt/yOf37KklDMPYaeyc3LZ1y8hwT671KoP8BApooL9agOqYUm2FATeRptTcdeQGxexmC3pWyw2u5ZSr4l9xsLCKW+DaaeqxVskXZql+XdTggY9NDrcHk331MoTzqZSj3fGlCe3GxJQT6IsGjeBkQOGQO53v+VKSb9E1EVMQ5vKs2/R7axiimWAmiVCh4/MZ1eYrecvvMWx9oa71KppmNkVhBs6G6m+veHkw8amOFi0QFY4pTI7RrikRxSd1jgBaCeytDEHmYSsUN/HTEEyqQVQ6ppY4937ER/nPmMXaWK6W8TvQy1cj+s28wcIlS70LHqQsSoS5rB18abP70ubwv0VMqrRhJALnb2SJXZ76vg7pAPc9++oF2+s8XzLyZUMt/3ajhy35encPGy4n+lIy4Xvvou1JERMJFmTa8zqHldSwlaBa9k6VC63heDzM/3cYttfndDMiKlbIwCN7eV2F8FS61toUNZhCzHltUoKChwg/yah6WVnr8jIXJer+ultoizj14CWn/GfvvEU5uIjTdtnx8nw86K1TlzWF5QsXBhYXGlw+3rLk/5IB/G8+gzZuYUagPa8ByoUaWfiRIuA35I4CrJOMVariLtOCaKD+Ryq3gvWTwSDci1AAfVtQi7zzsmWE4F5Vq/+RPKDe8714vX5SVSVGuXjxa2K/iCyN42qyOkbLkXwt6FIjmt5sRsHC11VB2yANZQl1HL+GWjFC9Em4Vx7Q2oKTeB2+oKkeL3xEkBU015zWlri4VEBrpICIlwZ7Eso2mgSVKs8GLeJN5YsLnmn7Lh7/45KS6ncSg5I/Por8NcaWi7UW27Te2JeyTGPqPg3VS9j2CzJyeznjn1qaGXCrpsq8ro655n7+1zi3WwkBRkGuRl5e3eMyi6L0TvDJcnYwTnM14fWG5Xyh5nXVLya56BmNJRUi25oYoiGRJBGXdaO+Rb1Y9R861mlZYzodsf21K8/wZ1mC8I75Hr9viTsF+fsW5BzxTSO1IFQNz6DJvnC/lPv9L6Ab4KcvfJU6gC94y9NfMP31s7i5XY5RIn6LJqKRxjAKDuOVppiQA65ycUhaEvVeQya8dVuF6uCYKClVFADVGd5FyGt9RTWAAgg50ahiNFm2YkcCarHv3QTW/6Jna0TY0VA0FEpnMkbciKJ0RGSrrMN/XzzKfy7p3saOsq21cUl7FVQ2Dboqxg8D38S4hnxooL2bGRU1qurqAtP1Q1M7xzd3Sd4MKlx9aN7cxtWq/1OQAi25ohrK0s0ilVHwbgmKVNGWD1T/IMmcmd2u68h5MhPsLpW6Mf7ZEUPfceC+0zfhdXy9uTm5cQffujnZrMQFzmZdv+n0HyDOnl33Z4RjOcFoIL338N50IIpBxBEd9+2+7fV+vGGHQ5Y18NCTDw1EwkITYRu/JwZe9fPMI+IfxFUsyjbSqvKhAcwt168pdedsTBbTzZxTnRzRxQyV/if8uggP8y2VcpqWw7iyTmgJOy3GuEu5oK35P5xC0L6GZFag308hopD9/6r3KyoE7rKG5Tqi3D9z8s6TM/3+7mEeeCxiPDanxdWDjxmRxwKIeebmVFVePajGtTl5VaWLcGDdLdMVpbTvxD0n9pWUyvQtew1RfioQFOU/1vU/Lotg4KmyMEz9nnuM2OINTVu8ETPuuUeXPuNZUcFYEmd9rFRbYSxfVUjLiN9dFerqyvd2yKWFBEEB548Fup3m1PWnBQHUERnjyKYur0O1v1pBfvl30u2Hnj4EwydOw/CBOyd23vd4+YefpuUbvHb84elmO9HXD1P3Tq1f48YM5VZ17msH5/d1fPtmWQndeOwTd1EnZNeXbtwsoBRbcbJ29T3T0GbGDO+3J95aen6KxViWDVCHL8i5wsPAxPLfE1FDb55RmQnmCYgrEoijOyX+6KeDoE66Tt5ONjkSgheKBA9LqL6qpqchU0E7QaSYtJ3+irSVimrrmpLJU3ej0gsK6vTRXbdlEXtnb9u17Z9B+Un9m9Hg5rmoE93YF4zCPwZ31H9b/6f6b3cEgzvAgAIYO4IwfMe64Q03nOX3fXzD8Lo7brzrLtiCz85tCkajwb6N0b9LJD738MOfSxTs2x7mj3yGsEgjzzBYB9Xw2hGCYAZOzYWG2uR6nFlvxlJeEZfO732ziNsX84be4ffMGz7/gRmQb1dyTX8Q/dtArU8Hb8Wybmgod53NBlQOilxbg9mPCIstK3sTAzE7O5BMJuTKkvJgwfulBskXM0CBMymXLQrpkSoDMVmJ6aA2QjGG4SJkRk38g5sd61dtYGoQ4St+jHY+U23r4aVWOEjtseoMnDgvfwCEm2+hp6r/X91AK4zYkU3HMVEaxnR3qBfqPzn+/wHPnsOreJxjYGRgYABi1vIsoXh+m68M3MwvgCIMt5YoxkDp2P9f/2exVDAHAbkcDEwgUQAz1Qu/AHicY2BkYGAO+p/FwMBS9v/r/68sFQxAERQQDACh8QbyeJxdT0sVwzAMy49AkAxAkbT3UQiAITGAISmAYQiA9th4ttUs7Q568UeSlVidiwSkB3PUPg+ESd6ZD/+8v7HyrtzwghY89ZB6BcyrYqc6RZhw48YhaA1Wc/v1PQtdeXJ/HppUmFM597nvBVK7D+Z+E8/uQZLBgDyaz3Llvxx02S3c/Hv813JrznryZP4F+6lSfQAAAAAAAAAAUAC2ATABaAGyAfoCJAKwAzYDmgQSBFwExgUyBbQF/AZOBvwHRAe2B/YISgigCPIJGglCCWQJignACgAKQAp2CroLAAtGC4oL8gxcDPINng5iDuYPag/6EF4RIBGGEeQSShKYEyQTbhOyFAoUYhS+FVoVphYoFooXHBeGGFoYnhjGGOwZChlOGXgZrBneGhwaWhqgGtIbLhvyHHQc2B1QHZ4d/wABAAAAUwBtAAYAAAAAAAIAIAAwAHMAAAB2C3AAAAAAeJx1kN9q2zAUh39q0441YxcbjN3tXJWWEcc1lEGvWkLbXZeSu8JUV/6T2VKQlY48w95ifYa9zt6jd/vFESUUYiP5O5/O8ZEE4AP+QWH9nHKsWeEdozXv4A0uIu/Sf488IN9G3sMQPyLv0/+MfICv+BV5iI/4wz+owVtGM/yNrPBZfYm8g/fqW+Rd+svIA/Jd5D18UovI+/S/Ix9gqp4iD3GoniduvvR1WQU5mhxLlmap3C/FUdVWN6IXoXK+k3MpnA2maVySuza0ZlToUZ07292YctFov6k2eWp8VzsrJ0m6qa+NNV4H87Dq1j2WWQiFFN61chX7yNy7mclDUoUwPxuPN/tjAoc5lvCoUaJCgOCI9pjfDGk/BPfMEGaus2pYaDQ0GgtWVP1Kx/ico2BkaQ0zGnKCnHNL09KNuK451721rLqhLfmfht5vzdrmp7Sr3nUfC07YL92afU1r+wrd7/Dh5WwdHrmLjDawanUK3+9acPXqPML7Wq3NaHL6pL+1QHuGMd8t5/8PvPGO3QAAAHicbZLnlpswEIV9DRiwvZtseu89Ib333vvmBWRZYMVC0pHEEufpg8BO/kTncOfTaLgMOtPr97o17P1/baKPACEiDBAjQYohRhhjDevYhu3YwA7sxC7sxh7sxT7sxwEcxCEcxhEcxTEcxwmcxCmcxhmcxTmcxwVcxCVkuIwruIpruI4buIlbuI07uIt7uI8HeIhHeIwneIpneI4XeIlXeI03eIt3eI8P+IhP+Iwv+Ipv+I5N/OiF1hEz9JKxUrtFrDl1lWF9NR9QIikToRaVjUouKxvOmNBjLxnlhgo2DbnM1djLKrNGnGPScSUzItzGv93yPP2bSQSX84z9cqFQdJ56yZRmMhW8mLlJJSaBI0XYPDaZKDUviZmvr6DrNjJMi0WcK1MTM02mqpbZlJtEsNx5SI238jSodJtoS7qv+BpPw67IY9xU+dg5TXjROTWwdGrIOzWhT+uA0jolxqjaZrSOnCF2Nmq16651EYpMm1fakAul9SJQeR5QVYQlk1VkZ8SwoVNFIVjWnKQrlBGdMToftdoZjrs77DajqXKrS02YEFxbbtdWkG0x44JJVUS5aBqKSlJwmhDrmOF2Hv9Wqsy4TNqoKhfmSrrQKuNSL5nvPG6p0s0AkEWkSWVZMy1Kx3ljk03qLuZ14lTmB8gNGmByGrGfjLrhlhJV2f7SaIneNF1ypQNbybBUSgZswQaWEUNngeay1/sD4l/60HicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA=') format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0\00a0"}[data-icon-after]:after{content:"\00a0\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor:after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}@media (prefers-reduced-motion:reduce){#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay:not(.open){-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>
<style id="style-ui-bar" type="text/css">#story{margin-left:20em;-webkit-transition:margin-left .2s ease-in;-o-transition:margin-left .2s ease-in;transition:margin-left .2s ease-in}#ui-bar.stowed~#story{margin-left:4.5em}@media screen and (max-width:1136px){#story{margin-left:19em}#ui-bar.stowed~#story{margin-left:3.5em}}@media screen and (max-width:768px){#story{margin-left:3.5em}}#ui-bar{position:fixed;z-index:50;top:0;left:0;width:17.5em;height:100%;margin:0;padding:0;-webkit-transition:left .2s ease-in;-o-transition:left .2s ease-in;transition:left .2s ease-in}#ui-bar.stowed{left:-15.5em}#ui-bar-tray{position:absolute;top:.2em;left:0;right:0}#ui-bar-body{height:90%;height:calc(100% - 2.5em);margin:2.5em 0;padding:0 1.5em}#ui-bar.stowed #ui-bar-body,#ui-bar.stowed #ui-bar-history{visibility:hidden;-webkit-transition:visibility .2s step-end;-o-transition:visibility .2s step-end;transition:visibility .2s step-end}@media (prefers-reduced-motion:reduce){#story{-webkit-transition:margin-left 0s;-o-transition:margin-left 0s;transition:margin-left 0s}#ui-bar{-webkit-transition:left 0s;-o-transition:left 0s;transition:left 0s}}#ui-bar{background-color:#222;border-right:1px solid #444;text-align:center}#ui-bar a{text-decoration:none}#ui-bar hr{border-color:#444}#ui-bar-history [id|=history],#ui-bar-toggle{font-size:1.2em;line-height:inherit;color:#eee;background-color:transparent;border:1px solid #444}#ui-bar-toggle{display:block;position:absolute;top:0;right:0;border-right:none;padding:.3em .45em .25em}#ui-bar.stowed #ui-bar-toggle{padding:.3em .35em .25em .55em}#ui-bar-toggle:hover{background-color:#444;border-color:#eee}#ui-bar-history{margin:0 auto}#ui-bar-history [id|=history]{padding:.2em .45em .35em}#ui-bar-history #history-jumpto{padding:.2em .665em .35em}#ui-bar-history [id|=history]:not(:first-child){margin-left:1.2em}#ui-bar-history [id|=history]:hover{background-color:#444;border-color:#eee}#ui-bar-history [id|=history]:disabled{color:#444;background-color:transparent;border-color:#444}#ui-bar-body{line-height:1.5;overflow:auto}#ui-bar-body>:not(:first-child){margin-top:2em}#story-title{margin:0;font-size:162.5%}#story-author{margin-top:2em;font-weight:700}#menu ul{margin:1em 0 0;padding:0;list-style:none;border:1px solid #444}#menu ul:empty{display:none}#menu li{margin:0}#menu li:not(:first-child){border-top:1px solid #444}#menu li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-transform:uppercase}#menu li a:hover{background-color:#444;border-color:#eee}#menu a,#ui-bar-history [id|=history],#ui-bar-toggle{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#menu-core li[id|=menu-item] a:before,#ui-bar-history [id|=history],#ui-bar-toggle:before{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-bar-toggle:before{content:"\e81d"}#ui-bar.stowed #ui-bar-toggle:before{content:"\e81e"}#menu-item-saves a:before{content:"\e82b\00a0"}#menu-item-settings a:before{content:"\e82d\00a0"}#menu-item-restart a:before{content:"\e82c\00a0"}#menu-item-share a:before{content:"\e82f\00a0"}</style>
<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
</head>
<body>
	<div id="init-screen">
		<div id="init-no-js"><noscript>JavaScript must be enabled to play.</noscript></div>
		<div id="init-lacking"><p>Browser lacks capabilities required to play.</p><p>Upgrade or switch to another browser.</p></div>
		<div id="init-loading"><div>Loading&hellip;</div></div>
	</div>
	<tw-storydata name="The Night Markets Forgotten Memories" startnode="78" creator="Twine" creator-version="2.7.1" format="SugarCube" format-version="2.36.1" ifid="B243BD51-D894-4182-B9C8-AD51E586A999" options="" tags="" zoom="1" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">

img.float-left {
	float: left;
}
img.float-right {
	float: right;
}

@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap');
@import url('https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap');

@font-face {
  font-family: "Open Dyslexic";
  src: url("fonts/OpenDyslexic.woff")format("woff"),
	   url("fonts/OpenDyslexic.woff2")format("woff2"),
	   url("fonts/OpenDyslexic.ttf")format("ttf");
}

@font-face {
  font-family: "Open Dyslexic";
  src: url("fonts/OpenDyslexic-Bold.woff")format("woff"),
	   url("fonts/OpenDyslexic-Bold.woff2")format("woff2"),
	   url("fonts/OpenDyslexic-Bold.ttf")format("ttf");
  font-weight: bold;
}

@font-face {
  font-family: "Open Dyslexic";
  src: url("fonts/OpenDyslexic-Italic.woff")format("woff"),
	   url("fonts/OpenDyslexic-Italic.woff2")format("woff2"),
	   url("fonts/OpenDyslexic-Italic.ttf")format("ttf");
  font-style: italic;
}

/* ------------------------

DEFAULT/DARK MODE DISPLAY COLOURS

------------------------ */

:root {
  --bodyfont: 'EB Garamond', serif;  
  --font-color: #170f0c;
  --passage-bg: 219,212,210; 
  --passage-box-shadow: 151,131,124;
  --passage-border: #6b4f44;
  --link: #5d2a14;
  --linkhover: #77432e;
  --border: #6b4f44; 
  
  --buttontext: #FCF7EF;
  --buttonBG: #6B4F44;
  --buttonBorder: #887269;
  
  --buttonTextHover: #FCF7EF;
  --buttonBGHover: #665852;
  --buttonBorderHover: #8c827e;
  
}

/* ------------------------

DARK MODE DISPLAY COLOURS

------------------------ */

html.displaymode:root {
	--font-color: #faf3e8;
    --passage-bg: 20,13,13;
    --passage-box-shadow: 107,79,68;
    --passage-border: #cca85e;
    --link: #e7c075;
    --linkhover: #EBCC90;
    --border: #6b4f44;
  
    --buttontext: #faf3e8;
    --buttonBG: #725244;
    --buttonBorder: #64483b;
    --buttonTextHover: #faf3e8;
    --buttonBGHover: #8f6755;
    --buttonBorderHover: #64483b;
}

/* ------------------------

DEFAULT BODY & PASSAGE APPEARANCE

------------------------ */

/*BODY*/

body {
    background-image: url("images/Cover bg.png");
    background-attachment: fixed;
    border-color: transparent;
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    background-color: rgb(3,2,2);
  	color: var(--font-color);
    font-family: var(--bodyfont);
  	font-size: 18px;
}


/*PASSAGES*/

.passage {
  overflow-y: scroll; 
  padding: 1em;
  height: auto;
  width: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
  font-size: 1.6em;
  background-color: rgba(var(--passage-bg), 0.8);
  box-shadow: 6px 10px rgba(var(--passage-box-shadow), 0.3);
  border: 1px solid var(--passage-border);
}

/*LINKS

This styling affects ALL anchors, which includes basic links and anything that uses the HTML element <a> (for example <a data-passage="PassageName"></a>). If you want to revert back to normal and remove the decoration, delete the line "padding-left: 1em;" from a { and delete everything on a::before.

If you want to change the symbol, copy/paste any unicode symbol you want into the content property.*/

a {
  color: var(--link);
  padding-left: 1em;
}

a:hover {
  font-weight: bold;
  text-decoration: none;
  color: var(--linkhover);
}

a::before {
  content: '✦'; 
  font-weight: 400; 
  font-style: normal;
  font-size:0.7em;
  margin-right: 1em;
}

/* ------------------------

SIDEBAR

------------------------ */

#ui-bar {
  background-color: var(--passage-bg);
  color: #FCF7EF;
  background-image: url("images/Lantern pattern.png");
  background-repeat: no-repeat;
  background-position: center;
  background-size: cover;
  border-right: 1px solid var(--passage-border);
  text-align: center;
}

#story-title {
	margin: 0;
	font-size: 162.5%;
}

#story-author {
	margin-top: 2em;
	font-weight: bold;
}

#menu ul {
    margin: 1em 0 0;
    padding: 0;
    list-style: none;
    border: 1px solid transparent;
}

#menu ul:empty {
	display: none;
}

#menu li {
	margin: 0;
}
#menu li:not(:first-child) {
	border-top: none;
}
#menu li a {
	display: block;
	padding: 0.25em 0.75em;
	border: none;
	color: #FCF7EF;
	text-transform: uppercase;
}

#menu li a:hover {
	background-color: transparent;
  	color: #EBCC90; 
}

ul#menu-story li a::before {
  content: none; 
  font-weight: 400; 
  font-style: normal;
  font-size: 1em;
  margin-right: 1em;
}

ul#menu-core li a::before {
  font-weight: 400; 
  font-style: normal;
  font-size: 1em;
  margin-right: 1em;
}

#ui-bar-toggle,
#ui-bar-history [id|="history"] {
	font-size: 1.2em;
	line-height: inherit;
	color: #FCF7EF;
	background-color: transparent;
	border: 1px solid transparent;
}
#ui-bar-toggle {
	display: block;
	position: absolute;
	top: 0;
	right: 0;
	border-right: none;
	padding: 0.3em 0.45em 0.25em;
}
#ui-bar.stowed #ui-bar-toggle {
	padding: 0.3em 0.35em 0.25em 0.55em;
}
#ui-bar-toggle:hover {
	background-color: transparent;
	border-color: transparent;
  	color: #EBCC90; 
}

#ui-bar-history [id|="history"]:hover {
	background-color: transparent;
	border-color: transparent;
  	color: #EBCC90; 
}
#ui-bar-history [id|="history"]:disabled {
	color: #444;
	background-color: transparent;
	border-color: transparent;
}


/* ------------------------

DIALOG BOXES AND POP-OUTS

------------------------ */

#ui-overlay {
	background-color: #000;
}
#ui-overlay.open {
	opacity: 0.8;
}
#ui-dialog {
	max-width: 66em;
}

#ui-dialog.open {
	opacity: 1;
}

#ui-dialog-titlebar {
	background-color: rgba(var(--passage-bg));
	min-height: 24px;
  	border-top: 0.5px solid var(--passage-border);
  	border-right: 0.5px solid var(--passage-border);
  	border-left: 0.5px solid var(--passage-border);
  	border-bottom: none;
  	padding: 0.5em;
}

#ui-dialog-title {
	margin: 0;
	padding: 0.2em 3.5em 0.2em 0.5em;
	font-size: 1.5em;
	text-align: center;
	text-transform: uppercase;
}

#ui-dialog-close {
	cursor: pointer;
	font-size: 120%;
	margin: 0;
	padding: 0;
	width: 3.6em;
	height: 92%;
	background-color: transparent;
	border: none;
	transition-duration: 200ms;
  	color: var(--link);
}

#ui-dialog-close:hover {
	background-color: transparent;
  	color: var(--linkhover);
}

#ui-dialog-body {
	background-color: rgb(var(--passage-bg));
	border-right: 0.5px solid var(--passage-border);
  	border-left: 0.5px solid var(--passage-border);
  	border-bottom: 0.5px solid var(--passage-border);
  	border-top: none;
	text-align: left;
	line-height: 1.5;
	padding: 1em;
}

#ui-dialog-body {
	overflow: auto;
	min-width: 920px;
	height: 92%; 
	height: calc(88% - 2.1em); 
}

/*adjusts size of dialog boxes for mobile*/

@media only screen and (max-width: 940px) {

#ui-dialog-body {
	overflow: auto;
	min-width: 280px;
	height: 92%; 
	height: calc(88% - 2.1em); 
}  
  
}

@media only screen and (max-width: 280px) {

#ui-dialog-body {
	overflow: auto;
	min-width: 200px;
	height: 92%; 
	height: calc(88% - 2.1em); 
}  
  
}

/* ------------------------

BUTTONS

------------------------ */

button {
  text-transform: uppercase; 
  font-weight: normal;
  color: var(--buttontext);
  background-color: var(--buttonBG);
  border: 1px solid var(--buttonBorder);
  font-size: 0.9em;
  letter-spacing:0.1em;
}

button:hover {
  text-transform: uppercase; 
  font-weight: normal;
  color: var(--buttonTextHover);
  background-color: var(--buttonBGHover);
  border: 1px solid var(--buttonBorderHover);
}

#ui-dialog-body.saves .empty {
	color: var(--border);
	speak: none;
	text-align: center;
	user-select: none;
}
#ui-dialog-body.saves .datestamp {
	font-size: 75%;
	margin-left: 1em;
  	font-weight: bold;
  	color: var(--border);  
}

#ui-dialog-body.settings button[id|=setting-control].enabled {
    color: var(--buttontext);
  	background-color: var(--buttonBG);
    border: 1px solid var(--buttonBorder);
}

#ui-dialog-body.settings button[id|=setting-control].enabled:hover {
    color: var(--buttonTextHover);
  	background-color: var(--buttonBGHover);
    border: 1px solid var(--buttonBorderHover); 
}

/* ------------------------

SCROLLBAR

------------------------ */

 ::-webkit-scrollbar {
  width: 8px;
  background-color: transparent;  
  }

 ::-webkit-scrollbar-track {
   -webkit-box-shadow: inset 0 0 6px rgba(3,2,2,0);
  border-radius: 10px,
 }

 ::-webkit-scrollbar-thumb {
   -webkit-box-shadow: inset 0 0 6px rgba(3,2,2,0.6);
  border: 1px solid rgba(233, 231, 231, 0.4);
  border-radius:10px;
  width: 5px;
 }

/* ------------------------

FONT SELECTION

------------------------ */

html.font-montserrat:root {
  --bodyfont: 'Montserrat', sans-serif; 
}

html.font-comicneue:root {
  --bodyfont: 'Comic Neue', cursive;
}

html.font-OpenDyslexic:root {
  --bodyfont: 'Open Dyslexic', sans-serif;
}


/* ------------------------

FONT SIZE

Rather than changing the fontsize in the body (which can lead to some formatting issues on different viewport sizes), I've set this to change the font size only on the passages and any dialog boxes (i.e. character sheet).

------------------------ */

html.fontsize-small .passage {
 	font-size: 75%;  
}

html.fontsize-small #ui-dialog-body {
 	font-size: 75%;  
}

html.fontsize-small .passage {
 	font-size: 120%;  
}

html.fontsize-small #ui-dialog-body {
 	font-size: 120%;  
}

html.fontsize-medium .passage {
 	font-size: 130%;  
}

html.fontsize-medium #ui-dialog-body {
 	font-size: 130%;  
}

html.fontsize-large .passage {
 	font-size: 140%;  
}

html.fontsize-large #ui-dialog-body {
 	font-size: 140%;  
} 

html.fontsize-extralarge .passage {
 	font-size: 150%;  
}

html.fontsize-extralarge #ui-dialog-body {
 	font-size: 150%;  
} 


/* ------------------------

SETTINGS DROPDOWN

------------------------ */

input, select, textarea {
    color: #FCF7EF;
    background-color: #6B4F44;
    border: 1px solid #887269;
  	font-weight: normal;
  	font-size: 0.9em;  
}


input, select, textarea:hover {
    color: var(--buttontext);
    background-color: var(--buttonBG);
    border: 1px solid var(--buttonBorder);
    padding: 0.4em;
}

#ui-dialog-body.settings button[id|="setting-control"] {
	color: var(--buttontext);
	background-color: var(--buttonBG);
	border: 1px solid var(--buttonBorder);
	padding: 0.4em;
}

select#setting-control-font option[value="0"] {
  font-family: 'EB Garamond', serif; 
  font-weight: normal;
}

select#setting-control-font option[value="1"] {
  font-family: 'Montserrat', sans-serif;
  font-weight: normal;
}

select#setting-control-font option[value="2"] {
  font-family: 'Comic Neue', cursive;
  font-weight: normal;
}

select#setting-control-font option[value="3"] {
  font-family: "Open Dyslexic", sans-serif;
  font-weight: normal;
}

/* ------------------------

OPACITY TOGGLE

------------------------ */

html.opacity .passage {
  background-color: rgba(var(--passage-bg), 1.0);
}


/* ------------------------

IMAGE FADE

------------------------ */

.imagefade {
        
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;

    -webkit-animation: myfirst 5s ; /* Chrome, Safari, Opera */
    animation: myfirst 5s ;
  }

  /* Chrome, Safari, Opera */
  @-webkit-keyframes myfirst {
    from {opacity: 0.2;}
    to {opacity: 1;}
  }

  /* Standard syntax */
  @keyframes myfirst {
    from {opacity: 0.2;}
    to {opacity: 1;}
  }</style><script role="script" id="twine-user-script" type="text/twine-javascript">// SAVE TITLES



// SAVE SLOTS

Config.saves.slots = 10;

// SETTINGS

// font selection
var settingFontNames = ["EB Garamond", "Montserrat", "Comic Neue", "Open Dyslexic"];
var settingFontHandler = function () {
	var $html = $("html");
	$html.removeClass("font-montserrat font-comicneue font-OpenDyslexic");

	switch (settings.font) {
	case "Montserrat":
		$html.addClass("font-montserrat");
		break;	
	}
	
	switch (settings.font) {
	case "Comic Neue":
		$html.addClass("font-comicneue");
		break;	
	}
	
	switch (settings.font) {
	case "Open Dyslexic":
		$html.addClass("font-OpenDyslexic");
		break;	
	}	
};
Setting.addList("font", {
	label    : "Change the font style.",
	list     : settingFontNames,
	onInit   : settingFontHandler,
	onChange : settingFontHandler
}); 

// Font Size
var settingFontSizeNames = ["100%", "120%", "140%", "160%"];
var settingFontSizeHandler = function () {
	var $html = $("html");
	$html.removeClass("fontsize-small fontsize-medium fontsize-large fontsize-extralarge");	
	
	switch (settings.fontsize) {
	case "100%":
		$html.addClass("fontsize-small");
		break;	
	}
	switch (settings.fontsize) {
	case "120%":
		$html.addClass("fontsize-medium");
		break;	
	}
	switch (settings.fontsize) {
	case "140%":
		$html.addClass("fontsize-large");
		break;	
	}
	
	switch (settings.fontsize) {
	case "160%":
		$html.addClass("fontsize-extralarge");
		break;	
	}

};
Setting.addList("fontsize", {
	label    : "Change the font size.",
	default:	"100%",
	list     : settingFontSizeNames,
	onInit   : settingFontSizeHandler,
	onChange : settingFontSizeHandler
});

// Opacity Toggle
var settingOpacityHandler = function () {
	if (settings.opacity) { // is true
		$("html").addClass("opacity");
	}
	else { // is false
		$("html").removeClass("opacity");
	}
};
Setting.addToggle("opacity", {
	label    : "Toggle the background opacity.",
	default  : false,
	onInit   : settingOpacityHandler,
	onChange : settingOpacityHandler
});


// Change Display Mode
var settingDisplayModeHandler = function () {
	if (settings.displaymode) { // is true
		$("html").addClass("displaymode");
	}
	else { // is false
		$("html").removeClass("displaymode");
	}
};
Setting.addToggle("displaymode", {
	label    : "Toggle dark mode.",
	default  : true,
	onInit   : settingDisplayModeHandler,
	onChange : settingDisplayModeHandler
});
</script><tw-passagedata pid="1" name="Hazel 1" tags="" position="800,300" size="100,100">&lt;img src=&quot;images/Wisp 5.png&quot; style=&quot;float: left;&quot; height=&quot;175&quot; width=&quot;200&quot;&gt;Hazel had been young once. Though the innocence of youth had rarely touched her cheeks.  Unlike most girls her age, she did not get the privilege of frolicking through the market streets, chasing balls between the gaps among the stalls. She was not shooed from doorsteps because sticky fingers had managed to snag another bun.  Hazel had worked from the time she was little, sweeping the shop or bundling herbs for her mother.  Her fingers could tie the quickest knots, her tonics were sought far and wide. Yet, this very bright, very energetic little girl was shrouded in drab clothing. She kept her head down.

Oh, she would smile politely at the people she passed within the market but she held her sibling&#39;s hand more often than not, begging to not be left alone.  While Hazel Albright was native to the Night Market, she was not one to ever have belonged here.  She belonged in a world filled with fresh flowers and sunlight. Somewhere in which a spring rain placed everything in vibrant bloom.  Her smile was far too bright for a world of darkness.  

Yet, there was no escape.

Born to a woman with a strong foothold within the walls, Hazel had been set up to live in the market forever.

It was why I gave her a corner of the world. An entire little place she could call her own. With a meandering creek and rolling meadow hills.  Little white flowers that bloomed as she walked by.

And when she cried on her knees, blood spilling hot and wet between her fingertips, I did not mind.  I turned a blind eye, in fact. For Hazel had never asked for this life.

I understood that.

Just a little.

[[Next|Hazel 2]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;

</tw-passagedata><tw-passagedata pid="2" name="Hazel 2" tags="" position="800,425" size="100,100">&lt;img src=&quot;images/Wisp 3.png&quot; style=&quot;float: left;&quot; height=&quot;175&quot; width=&quot;200&quot;&gt;Skidding around a corner, Hazel came to a stop just outside a group of stalls. She panted, looking around and trying to hide from the footsteps that were running after her.  There were three of them today. All of which said they would string her up for the witch she was. Never mind that Hazel couldn’t even make her cauldron float yet.

Panting, she ducked beneath an awning of thickly woven tapestries, down beneath a series of crates that made up a counter, and hid between the slats of the stalls. She saw them then.  Three pairs of legs ran by her, stopping for a moment as they tried to suss her out.

“Come out, come out, girlie,” one of them sneered. “Want to see how deep that witch blood runs.”

Hazel scooted backwards, curling her knees to her chest and tucking her head down.  She counted her heartbeats, focusing on keeping her breaths calm. Surely they wouldn’t find her here.  There was no possible way for it.  She was too well hidden. Too well–

The screams erupted through the market, startling Hazel within her hiding spot.  Her fingers curled against the slats as she looked outwards. Two of the boys were floating midair, their heads flung back and their mouths torn open in agony. The other boy was trying his hardest to pull them down as market goers rushed forward, attempting to help the three.  With wide eyes, Hazel stumbled out of her hiding spot, running from the scene, tears on her cheeks.

Rounding a corner she ran smack dab into someone yelping loudly as she tried to scramble away. “I didn’t do it!” she yelled. “I didn’t do it!”

“Whoa,” the man said kindly. His hands were a map of faded scars that ran across deep colored skin.  When she looked up, she saw black eyes flickering back at her, his head tilted to the side, his coiled hair falling just past his ears.  “Didn’t do what, little one?”

The screams were still echoing and Hazel looked over her shoulder.

“Oh that?” the man laughed. “Why would I think a little sprite like you would have done that?” Gently, he began leading her away from the horrid sound.  “Were they bothering you?” he asked. “They looked as if they were bothering you.”

“No,” she said quickly. “No, of course they aren’t. It was nothing.”

“So it was something.”

Hazel felt her heart beat faster. She wasn’t even supposed to be in this portion of the market. There was just a little unicorn that lived at the edge of town and Hazel had never seen one before. Just once, she wanted to see that kind of creature with her own eyes.  Luck was said to bestow upon anywhere who had the privilege to look at them with pure intention. But the boys had been there and Lucinda Albright’s daughter was an easy target to spot.

As they came to the quieter portion of the Spice District, the man knelt down in front of her.  His eyes were so dark they were almost black. But his face was kind, his neck lined with pretty jewels. &lt;img src=&quot;images/Laikin.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

“I’m Laikin,” he said.  “I saw what those boys were doing, Hazel.  I can’t say I am sad about what just happened to them.”

“I am!” she protested. “You don’t do bad when bad is done to you,” she sniffed.

Laikin smiled. His teeth were pointed and unnaturally white.  “And why’s that?”

“Because two wrongs don’t make a right,” Hazel said, wiping at her face. “And I want to be better than them.”

“You are better than them,” Laikin pointed out.  “You did nothing to them. In fact, you walked away. But the world sees and punishes people like that. And if the world is too busy, there are special people who will do it for them. Don’t shed a tear for the ones who only looked to do you harm.”

Hazel sniffed, not sure how she felt about that, but happy to be away from the situation. She frowned though, as she listened to the man. “I didn’t tell you my name was Hazel.”

“You didn’t,” he agreed. “I heard the boys saying it.”  Hazel couldn’t remember the boys even knowing her name. She was always referred to as the little witch accompanied by awful sneers. Though she supposed it was possible. “I have to go, Hazel.  But I want you to remember something for me.  Remember that the world sees all. Bad will happen to bad people and good will happen to good.”

“I haven’t had much good happen to me lately,” she confessed.

Laikin only smiled. “You will.”  Getting up, he bid her farewell, but not before paying the local shop vendor enough to feed Hazel all the food she could eat. Hazel walked back to her home that night with a full belly, having almost forgotten about the day and the boys that had screamed so terribly.

Just as she was outside Apothecary Alley, she heard a small tumble, and looked around with a frown.  A dirty little kitten came out from behind the three tiered fountain, looking up at her with bright green eyes.

“Oh,” Hazel breathed. “Oh you poor thing. Are you lost?” The cat came up, weaving between her legs. Hazel immediately scooped it up and snuggled it close. It was clear it had no home. “Would you like some cream?” she asked. “I’m not allowed to have pets but maybe we could sneak you in?” The cat began purring then, snuggling close to her neck.

Hazel giggled. “You sound like Mama’s billows for the fire.  Would you like to be called that? Mr. Billows?” The way the cat mewed at her caused Hazel’s nose to wrinkle in amusement. Children were resilient that way. They had a remarkable ability to forget horror when faced with delight.

Good things happen to good people, Hazel recalled.  She held Mr. Billows close.  He would be her good thing.

[[Next|Hazel 3]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="3" name="Hazel 3" tags="" position="800,575" size="100,100">&lt;img src=&quot;images/Wisp 5.png&quot; style=&quot;float: left;&quot; height=&quot;175&quot; width=&quot;200&quot;&gt;Pulling the muffins out of the oven, Hazel tried not to wrinkle her nose. The tops were nearly black and there was something that smelled oddly like fish wafting from the muffin tray. Setting them on the counter, she stared at them, a puff of gray smoke pluming above them right before they folded in.

“I told you,” Milo said from her side. “I’m hopeless.”

“You’re not hopeless,” Hazel told him. “I think you might just be out of practice.”

“How can you be out of practice when you have no practice?”

Hazel tried to put on a brave smile. “I bet they taste wonderful. Sometimes even the ugliest of foods will surprise you.”

Milo looked between her and the failed attempt at baking. “Hazel. It smells like cod.”

“And?”

“And it was supposed to be blueberry.”

Digging out a spoon , Hazel scooped one out of the pan and plated it.  She meant to cut it in half but it crumbled in a gelatinous goop of off colored purple and a sluggish oatmeal like gray.

“I think it will be wonderful,” she told him firmly. Milo needed praise so he wouldn’t immediately just give up on something. Hazel didn’t want to be responsible for him giving up on baking altogether.  But as she reached down to take a bite, Milo grabbed the spoon from her hand and threw it across the room.

“I’m not letting you die,” he said incredulously.

There was a small part of Hazel that was so insanely happy he had done that.  She was almost certain the muffin was going to start moving soon. “Maybe we should just try again,” she suggested.  At Milo’s groan, she dumped the offending muffins and got out another bag of flour. “Come on. You never get anything right on your first try.”

“That was my fifth.”

&lt;img src=&quot;images/Muffins.png&quot; style=&quot;float: right;&quot; height=&quot;425&quot; width=&quot;350&quot;&gt;“You never get anything right on your fifth try.”  She began cleaning up around them, giving them a fresh space to bake. Milo had been here since the morning, spending time with her since Lucinda was gone on one of her Outland trips.  He promised to do whatever she wanted all day and of course that had meant breakfast. It was now mid-afternoon and they had only munched on random snacks because all of Milo’s cooking attempts were somewhat terrifying if looked at too hard.

Hopping up on the counter, Milo grabbed a rag, starting to dry the dishes Hazel was washing.  “Mal going to come over?” he asked.

She froze, hand hovering above a plate. “No. I think he’s busy. You know Mal.”

Milo frowned. “You two still fighting?”

“I wouldn’t say we are fighting.”  Malcolm had come home a month ago, excitement on his face as he picked her up and twirled her around. He had gotten himself his own place. Somewhere within the heart of the market but underground so as not to be bothered by too many. Like Hazel, he enjoyed his solitude. The place had a garden for Hazel and a little loft he had turned into a room for her. As he had once promised, Malcolm had returned, intending to have Hazel live with him. 

Hazel had said no.

As Milo began stacking the dried dishes, he looked at her out of the corner of his eye. “The new place is nice,” he said. “It’s spacious. Got a killer kitchen.”

“I’ll have to go visit it.” She tried to keep the smile on her face. The pride she felt for Malcolm was unshakable.  He had followed his dreams.  It was just sad that his dreams didn’t include a good portion of his family.

Milo sighed. “Why aren’t you living with him, Haze? You don’t need to stay here.”

“Here is my home.”

“No, Mal is your home,” he said firmly, that age-old temper of his bursting in a quick flame. “I’m your home.”

“I don’t see you living with Malcolm,” she pointed out.

Milo’s face screwed up. “Fuck no. He’s a clean freak. But he loves you and he wants you safe.  Don’t stay here with your mom. Just pack a bag and I’ll take you to him now.” Before Lucinda could stop them.

“Milo,” Hazel turned off the water. “I like it here. Things have been better with Mom since Mal left. I think they just didn’t get along. But Mom needs me and I enjoy taking care of her.”

“That is such bullshit.  It’s about as big of a case of bullshit as those muffins.” Hopping off the counter, he shook his head, gesturing wildly around them. There wasn’t a single sign of the Albright children within the home.  There never had been. Lucinda was neat and orderly and preferred her children not to be seen or heard. “He has a great place for you, Hazel. And if you don’t want to live with him forever, that’s fine, but at least get out of here.”

Turning, she looked at him steadily, her face a mask of resolve.  “Milo, no. I’m not leaving.”

“Why?”

“Because Mom needs me.”

“And what about you, huh? What do you need?”

It was a question that had been asked before. One Milo liked to toss her way during conversations like this. She never answered. What did Hazel need? She hadn’t really questioned it.  It used to be that she thought she needed her brother but then he had left. And she had learned life could be lived without him.  Lucinda had taught her that.

“I hate seeing you rot here,” Milo said when faced with her silence.

“I’m not rotting.”

“You are. You just don’t know it yet.”

“I hate that you think that,” Hazel said sadly.  She could feel Milo’s stare. The way he looked at her sadly. It was as if her decision to stay disappointed him and Malcolm to no end. They didn’t see Lucinda like she did though. They didn’t see the way that she actually cared for her children. Hazel did though. She didn’t want to abandon her mother like everyone else. Like Malcolm, like her father. Like Lucinda’s friends.  She just didn’t.

When Milo laid a hand on her, she realized her breaths were coming fast.  “Forget it,” he said, trying to ease her panic. “I’m sorry I brought it up.  Today was about us spending time together.”

She nodded, more than happy to push aside the claws that were squeezing her heart into ribbons. “Would you like to cook more muffins?”

“I would love to.”

She knew he didn’t. But that was the admirable thing about Milo. He did things even when he hated them. He did them because he knew he was needed.  Hazel would always love him for that.

[[Next|Hazel 4]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="4" name="Hazel 4" tags="" position="800,700" size="100,100">&lt;img src=&quot;images/Bundle 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;150&quot;&gt;Hazel sighed as she set down her basket. Broken glass lay at the bottom of the thick woven wicker, while blue-black sludge burned a hole through the fibers. She would have to weave another one before market day tomorrow.  Along with creating a stronger vial to contain her brews.  She wondered if she could make unbreakable glass.

“How’d it go?”

Malcolm was sitting at the small table near the back of the shop. They had only just managed to get the hexes cleared from the area. Her, Milo and Malcolm had to rip up floorboards and replace some of the side wall.  A lot could be said about her mother, but there was one thing that held true even after death. The woman was thorough.

“It was okay.” Pushing the basket aside, Hazel tried to hide it behind a large cluster of jars filled with the latest honeysuckle harvest.  It tipped off the counter, however, sending a clattering array of multicolored glass across the mahogany floors.  A sizzling pop sounded as the sludge began working on the recently mopped boards, eating away at the foundation of the shop, where blood still stained the concrete.
Malcolm frowned, standing and walking over to his sister as she frantically grabbed a few poultices from behind the counter and dumped them over the scorch marks. An ashen smear would mar the floor until she could afford a board replacement, but at least the rot was no longer spreading.

“Why are there so many broken bottles?” Malcolm was looking down at them; the jagged bits of blue and green that he knew had been whole when his sister had set out this morning. She had gone to sell at the local co-op. Trying to show the rest of the market that her goods were different from their mother’s. That she wanted to heal. To help. Not to kill.

“Hazel,” he started hesitantly.  She didn’t look him in the eye. Hazel had seen the blind rage within Malcolm’s gaze far too often over the years. She didn’t want to see it again. “I knew I shouldn’t have let you go alone,” he muttered, berating himself more than he was her.

Sweeping up the rest of the glass, Hazel pushed her curls from her face. “It’s fine, Malcolm.  Change takes time.  They look at me, and they only see Mother.”  They had taken the tonics from her basket.  Thrown them on the floor and stomped them to bits.  Her stall, the little wood one she had woven wildflowers among, had been burned in her absence.  Smeared within the soot were the words “Begone Witch”.  It was good that Malcolm had not come with her this morning. There was little doubt in her mind that he would have found who was responsible, calling on Milo for help. She didn’t need to give the two of them an excuse for violence.

“You’re not Mom,” Malcolm said firmly. “Anyone that takes two seconds to talk to you can see you’re not Mom.”

“Mom wasn’t always like Mom either,” Hazel whispered to him. Dumping the glass in the bin by the counter, she sighed.  She couldn’t be certain, of course, but she had always imagined her mother in her youth. Vibrant. Resilient.  In love with love and life.  Why else would she have had children?  “It’s okay. It really is.  I understand why people are so hesitant around me.” Shame was peeking at the tips of her ears as she shuffled her feet back and forth. “They say I look like her, you know.”

“You don’t,” Malcolm said firmly. “Even if you did, it’s not an excuse for them to be the way they are. It’s ridiculous, Hazel. You should just get rid of this place and be done…”

“No.”

Her words snapped through the air like a whip.  Around her, several flames guttered to a stop. The room grew dark while the will-o-wisps outside the window flitted away.  Hazel eyed the change, wrapping her arms around her waist and digging her nails into her sides.  She was not her mother. She was not her mother. &lt;img src=&quot;images/Wisp 2.png&quot; style=&quot;float: right;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;

Warm arms wrapped around her. Ones that had gained so much muscle the last few years.  Changed into something strong and capable.  They had both grown up when the other wasn’t looking.

“I know this place means something to you,” Malcolm whispered, resting his head on top of her own. “And if this is where you want to be, I’ll help you get it all changed up.  But Hazel, if someone hurts you, if this gets too dangerous, you can’t just keep doing this to prove a point.”

“What else do I have, Malcolm?”

“What do you mean, what else do you have? You have me. You have Milo.  You…”

She pulled back when he trailed off, giving him a soft but sad smile. “All I have ever known is this shop.  I worked here from the time I could walk. I love this place, and I hated seeing what Mom did to it.  You have your art and your work. Milo eventually is going to leave once he can get enough money.  I want this. I want this place. The Night Market deserves to see the truth about these walls.”

Malcolm only looked at her sadly. “It’s hard to see the truth when the path here is guarded by vengeful spirits and the cackling echo of our mother&#39;s final words.”

There was nothing to say to that.  It had taken both of them days to even traverse that alley again and when they did, they could only hear their mother&#39;s shouts following them until they ran from the alley, tears coating their cheeks.

“Let me come to the market with you tomorrow.”

“No.” Twisting from his hold, she tried to brush him aside.

“Let Milo come with you to the market tomorrow.”

“An even bigger no.”  With a determined breath, Hazel straightened her apron.  The shop was still in a state of shabbiness that would just not do. She only needed to drum up a bit more coin.  Find a bit more time. “I’m going to do this. People in this world just need a little kindness. If I cave so quickly, then I am no better than them.”

“You are a hundred times better than them.”

She nodded. “Which is why I will rise to the occasion and heal them all with a good heart.  It’s what the world needs, Malcolm. We don’t fight hatred with more hatred. We fight it with love and understanding.”

Kissing her forehead, Malcolm sighed. “You’re better than all of us, Hazel.  By miles.”
“Thank you. And yes, I am.”  Digging in her leather satchel, she grinned at him.  “I got you some new paint, by the way. With the few tonics I did sell. I was hoping you could capture how the garden looks at night. When the pink wisps are playing.”

Malcolm stared down at the powders in her hand.  There had been a time they had to steal just for him to create.  Steal and hide. That was their childhood.  Or Hazel knew it to be Malcolm’s, at least.  Steal and hide and hope that their mother didn’t tear up the floorboards to burn his pictures in the hearth.  It was the first thing Hazel had done to erase the nightmare.  Every picture Malcolm had ever drawn was pinned to the wall now in some odd conglomeration of wallpaper that was an eyesore to her brother, but a reminder to herself of how far they had already come.

Taking the paints from her hand, Malcolm nodded at her. “I’ll paint,” he said.  “While you harvest.”

Hazel grinned, the beat of her heart suddenly much lighter.  “Good. I was thinking I could bring some chilling tonics to the market tomorrow. The heat is starting to get bad, and I’m sure everyone would appreciate a bit of cold.”

Above them, filtered light shined through on the two Albright siblings as the wisps watched over them through painted windows.  The day had been long, and the years ahead would be longer. But as Hazel looked towards her brother, she felt relief.  As long as she had Malcolm, she knew she could keep fighting.

[[Next|Hazel 5]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="5" name="Hazel 5" tags="" position="800,825" size="100,100">&lt;img src=&quot;images/Wisp 2.png&quot; style=&quot;float: left;&quot; height=&quot;175&quot; width=&quot;200&quot;&gt;“What do we do, Mr. Billows?”

Hazel sat, legs curled beneath her, staring into the small fire in the upper area of her home.  The little area was hidden by stacks of books and grain barrels piled high but nearly empty.  It used to be her mother’s. The place she sat and composed her spells.  The sigils she had burned into the floor were all but faded now.

It was darker back here than the rest of the shop, the walls lined with dusty old jars, swimming with things Hazel would rather not think about. The hearth back here was made of bleach white bone and the altar that was placed in front of it looked to be marble. Hazel knew better of course. Her mother was never one to make something of such importance out of such a common material.

In her lap, the gray cat was curled, purring and offering comfort.  Hazel ran her fingers softly through his mane, knowing he must have sensed her discontent. It wasn’t often he decided to stay.

“I mean, I know I should tell them. About Malcolm. About the Gatekeeper. But…” she sighed. “I don’t want them to be mad at me.”

Before her, a bowl of glass sat on a dais. It was colored a dripping black and stood in jagged protrusions from a chipped golden bowl.  A soft glow of sickly deep green glowed from the depths of it.

“Do you think they’ll be mad?” she whispered. Mr. Billows nudged at her palm, licking at her fingers and nipping at the pad of her thumb.  “They seem sweet,” she said.  “Lost and confused but very sweet. I want to help them, Billows. I really do. But…”  she trailed off, staring into the bowl.  She had begun the spell four days ago. Tonight was supposed to be the fruition of her labor.

“Oh, Billows,” she sighed. “I just want everyone to be happy.”

The light from within began to flicker, rising with crackling smoke into the surrounding air.  The floorboards creaked and shuddered and the screams from the alley beyond became louder and louder.  Hazel sat up a little straighter, holding Billows close to her chest and staring hopefully at the dais. Black sludge began to drip down the side, pooling on the ground and creating a small vortex.  The nebulous reach began to flow outwards in vine-like tremors, filling the dips in the floor.

“Come on,” Hazel whispered. “Just a little more. Just a….”

She yelped as the jars around her began to shatter, viscous liquid dripping from lacquered shelves with the remnants of old bones and suspicious looking mounds of flesh.  Smoke rose in a plume above the bowl and the sizzling of acidic burns across peeling wallpaper singed the air with rot.  Immediately, Hazel rushed to the cat who had jumped from her arms at the first sign of danger. &lt;img src=&quot;images/Cauldron.png&quot; style=&quot;float: right;&quot; height=&quot;500&quot; width=&quot;400&quot;&gt;

“Oh, Mr. Billows, are you okay?” she asked, her eyes shining bright with worry as she scooped the cat up and held him tightly to her chest.  Billows only leaned into her, licking the blood from her cheek and bumping his head against her, as if to ask her the same question.

Hazel slumped back down into her chair.  “Why won’t it work?” she asked, her voice cracking. “Why won’t any of this work? I don’t get it. I’ve followed the directions. I’ve made all the proper sacrifices.  How much more do I need to give?”

Tears began to slip down her cheeks, ones she wiped at angrily.  A painting hung across the way. One old and burned around the edges.  Malcolm had painted it for their mother when he was little. Chubby little fingers making crude figures of trees and butterflies.  Their mother had thrown it away. Tossed it in the pile of things that needed to be burned.

That night, Hazel had saved the small painting. Sneaking out from their room amongst Malcolm’s soft weeping. From the embers of the fire, she had plucked it, keeping it under their shared bed.  Now, she hung it above the altar.  A promise that she would save him as well.

“You were supposed to be home already,” she told the picture. “But I suppose you just can’t get here.  Maybe your injuries are worse than you thought or the Night Market is just taking longer to call you back.  But I’ll find you,” she promised.  “I’ll bring you home if you can’t get to us.”

Every day she waited. Every day she stared at that door, wondering if the next person to walk through would be him. He would sweep her up in his strong arms. Twirl her around like he had so many times before.  He would hold her close and laugh as she wept, telling her he was finally home. That he had kept his promise.  Hazel could feel it in her bones. Her brother would return one day. He would.

Against her, Mr. Billows meowed, knocking Hazel out of her reverie.  She blinked at the large gray cat. “You’re right. We do need to clean up.  We have a house guest and this is entirely improper for them to live in.” Again, Mr. Billows meowed. “No,” she blushed. “Of course not! I mean, well, yes. They are nice to look at, but that’s not why I’ve been cooking so much. I just want them to feel comfortable. Things have been scary for them.”

When Mr. Billows meowed, knowingly, Hazel felt a thick coat of heat spread even further across her cheeks.

“I think Milo is coming for dinner and cards tonight,” she said happily, scratching the cat behind his ears, paying him back for any insinuation he meowed at her about their new house guest.  “Won’t that be nice?” Mr. Billows hissed. “Really now, Mr. Billows. You need to try and like him. Just a bit.”

As she left the upper landing, the bowl on the dais tipped over.  Old and congealed blood spread across the floor and beneath the floorboards, their mother&#39;s old sigils burning bright.

[[Next|Hazel 6]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="6" name="Hazel 6" tags="" position="800,950" size="100,100">&lt;img src=&quot;images/Wisp 5.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;200&quot;&gt;The wisps were gathered at the gate when I got home that night.  They hovered around the knots of pine, chittering across the latch in excitement. I raised a brow towards them, the temptation to ask them what exactly they were up to was quite strong.  They wove around the strips of wood, causing small sprigs of valley lilies to bloom along thick braids of grapevine.  Reaching out, I brushed them away, pushing the gate open.  The day had been fraught with several deliveries, all of which had taken me further into the market than I had been before. I was looking forward to a hot cup of tea and then sleep.

But as I stepped through, the smell of a bubbling stew greeted me. Something thick and earthy.  I looked up towards the bent iron chimney where lavender smoke usually puffed from the cracks within the broken vent.  It wasn’t rumbling with use today.  An unusual sight since it oftentimes felt like Hazel was always bent over that cauldron, mixing brews or at least soups.

“Over here.”

I heard Hazel’s voice come from around the corner of the apothecary.  With a small frown, I dropped my bag at the door and followed it. She was on the opposite side of where the garden grew, near the big tree that was just outside my window.  A thick woven blanket was set out on the ground while small flickering tea lights hovered in the air around her.  The tree was lit with the wisps and the ground was laid with fresh, plush moss.  Hazel beamed at me.

“Hungry?”

Slowly, I made my way over to her, looking at each thing she had laid out.  Mini cauldrons were delicately placed, the smell hovering around them sinful.  A bottle of something amber and bubbling chilled in a churning bucket of ice and a full tea service was laid out in her emerald green teapot with the bone carved handle.

“What is all this?”

Her cheeks were pink as she shifted from side to side. “I uh- I thought we could have a date,” she said, dipping her head down. “I mean, if you want. If you’re not too tired. I know it was a busy day so I would understand if–”

“Hazel,” I interrupted. She looked up at me with big round eyes. “It’s perfect.”

The smile that melted her worries was enough to bring me to my knees. I curled up on the thick blanket, sitting close to her.  Reaching out, I took her hand squeezing it in thanks. When she leaned forward to kiss me, I felt my world stop.  Hazel had this way about her. The sweetest woman I had ever met, who could absolutely tear the world apart in a fury of black voidless eyes and roots from the earth.

“I made soup,” she murmured against my lips.  “I had a few different things in the cellar that needed to be used up so I just tossed it all together.” For Hazel, tossing something all together was an all day event.  I knew this was something she had probably planned, starting it the second I left the shop this morning.  “I also have fresh baked rosemary bread and custard for dessert.”

“You’re spoiling me,” I told her.

“You deserve to be spoiled.”

&lt;img src=&quot;images/Hazel picnic.png&quot; style=&quot;float: left;&quot; height=&quot;700&quot; width=&quot;600&quot;&gt;So did she. I vowed to find something for her the next time I was out wandering the market. I had learned that Hazel loved gifts.  It didn’t even matter what kind. She just adored little bits of the world that made me think of her.  Each time I found something, a wood flower, a petrified piece of bone, she acted as if it were the first time I had gotten her something.  It was a reaction that brought me warmth each and every time and made me want to do it more and more.

“Eat,” she said. “You look absolutely famished.”

As always, the food was impeccable. Far better than anything I could have made myself.  It was clear that it brought her joy and the act of doing it was something in which she took great pride in.  Digging in, I realized I was halfway through my bowl before I had even said anything.  When I looked up at her, she had her brow raised, and was hiding her laughter behind her teeth.

“It’s really good,” I told her.

She laughed. “I can see that.”

When she handed me a piece of bread, I sighed at the warmth of it, the fresh smell of yeast filling the air. “I know you said once that the people in the market taught you how to cook. Anyone in particular?”

Grabbing her own bowl, she began eating.  “There was an elderly banshee that used to live in a little grove in the spice district.  She had about six trees that she wove between, making soups and hand pies with the wood she chopped every day.  I used to hide within those trees when the market became too busy. One day, she offered me a bowl of stew. Then the next she told me to go get her some turnips.  After that I think it was a head of cabbage. She had me running errands for her all over the market,” Hazel laughed. “Until one day she was teaching me how to cook.”

It was an odd thing to contemplate. The idea of Hazel running free throughout the market at one point. “A banshee taught you how to cook?”

Hazel nodded. “There’s a misconception about banshees.  They are not all about death. They can be quite full of life if they can simply focus.”

Pouring a glass of the amber liquid, I realized it was her store of honeyed mead. She made big batches of it each month, sending it out as herbal tonics to any of the districts that were struggling with disease. Not once had I seen her ask for anything in return.

“Where is she now?” I asked.

“I don’t know.  One day I went there to go and have a visit and her trees were dying. They slowly withered away within the spice district and I just never saw her again. The cauldron I keep over my fire in the main room is hers though. I made sure to bring it back.  I couldn’t stand the thought of someone not respecting what was obviously so important to her.”

I felt sad for some reason. Maybe because it was another loss for Hazel.  “I’m so sorry.”

“Don’t be,” she said with a small wave of her hand. “Banshees are fickle.  They struggle to stay in one place for too long. It is honestly amazing that she did.  I have a theory that that little grove of trees was a gate. I don’t think she was just toiling away her time within that grove.  I think she came and went and continued to cook from time to time for whoever needed it.”

Which was what Hazel did, I realized. She never charged for her food and made big batches to give away. Because someone had done that for her once.

“What was her name?” I asked.

“Isolde.”

“You think you’ll ever see her again?”

Hazel laughed. “Most don’t wish to see a banshee at their door but… I don’t know. It would be nice. To know what adventures she has been on through the years. I would like to cook for her too. Show her how much I’ve learned.”

There was an eagerness to her face. One that said she wished desperately for this woman&#39;s approval. “I hope you get to as well. I think she’d be really proud of you.”
Again, that blush. It was going to do me in.

Shifting, Hazel reached forward, pushing aside the half-eaten cauldrons of soup, which were refilling the longer they sat.  She cleared the surrounding area before hiking up her skirt and slinging a leg across my hips.  I felt bare skin press against the cloth of my own clothes.

Biting her lip, she looked at me through her lashes. “Want to do something that she wouldn&#39;t be proud of?” she asked coyly.

I laughed, taking her by the hips.  “Out here?”

“It’s not like the wisps haven’t seen us.  Besides, I’ve kind of had a fantasy of seeing you lit only by the light of nature. I think you’d be beautiful.”  She rolled her hips against me, pushing me slowly back onto the bed of moss.

We spoke no more from that point.  As she slowly began to play my body, I could think of no words to say. Only that as I looked up at her, her bodice having come unlaced, I never wanted this moment to end.  Hazel claimed I was beautiful beneath the light of the wisps. She would murmur it to me for days to come. But there were no words to describe how she looked, hair loose around her shoulders as she hovered above me.  Her cheeks were dark with exertion, her lips parted in pleasure.  I didn’t think I would ever see anything as beautiful as her, for as long as I lived.

[[Next|Hazel 7]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="7" name="Hazel 7" tags="" position="800,1075" size="100,100">&lt;img src=&quot;images/Bundle 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;175&quot;&gt;“I think you’ll like them,” Hazel was saying. She was inside the small thatched dome that she had made as a child. The one place that she had gotten to hide when the world became too much. Trowel in hand, she dug at the earth, the hole in question almost half her height, the solid earth becoming wet as it contained run-off from the nearby creek.

“They’re so kind.  And they are good with a broom,” she giggled. “And the kiss?”  Hazel trailed off at that. Perhaps her brother didn’t need to hear about the kiss.  Though, he had tortured her enough with descriptions of him and Milo.

“When you get back, I think that you’ll get along with them.  They’re honestly so easy to talk to. And they’re not judgy. Not too much at least.  Though, I suppose it’s okay to be a little judgy.  I find myself being more and more of that these last few years. Did you know that Mr. Hartin came in the other day and I nearly turned him away?” She shook her head. “I know you’d be proud of me if I did. You never did like him. And I was so close, Malcolm. So close. But then I remember how I told you once that the world just needs a little more heart.  I didn’t want to be a hypocrite so I smiled and just went on my way. But, well, they were not pleased with him. That’s why I think you’ll like them.”

Wiping her hands on her skirt, she took a deep breath. Observing her handywork, Hazel scrunched up her nose, making sure everything was just right.  “Now, if this works, I don’t want you getting mad, alright? Just remember, I’m doing all this for you.”

The little flickers of light up above doused to a dark green as Hazel knelt in front of the hole she had dug.  Raising her hands in the air, she plunged them deep back into the earth, her fingers reaching for the roots and old stone that she knew lay beneath. There was an entire city down below.  One lost to time and to the crumbling roads of the Night Market.  Hazel’s mother claimed she was from there. That she used to live beneath the earth and when they had risen to the top they had pulled the stars from the sky to light the world they now called home.  Hazel used to hang on every word of those stories when she was a small girl.  Malcolm had stopped caring when he turned about seven and claimed that their mother was lying. He didn’t stick around the house too much after that.

Beneath her, the earth began to crack, folding in on itself. She could hear the boughs from the trees outside snapping and bending towards the reinforced hovel that she had spent her childhood days within.  Taking a deep breath, she pushed her hands further into the detritus, seeking out the old ways and the magic that still swelled deep beneath the caverns.  Small tendrils of root and forgotten memory wrapped around her wrists and fingers, pulling at them and trying to drag her below.  Hazel’s head snapped back, eyes a deep miasma of green and black, her lips darkening to the color of tar.

“I call forth Malcolm Albright. Son of the Night Market.  Gatekeeper of your walls. Give him back.  Return your rightful son.”

The walls of the pit before her began to crumble. They eroded, falling forward, down down down into nothingness.

“Give back the one we call our own. Call back the soul that is yours.”

A hand burst from the pit. Covered in mud and something sticky and golden. Sap stretching between each finger.  Then, another. Two arms emerged, grasping onto the shelf of rock that was beginning to form.

“Come back to us, Malcolm,” Hazel intoned, her voice deep and filled with the ancestor&#39;s call. “The Night Market shall call you home.” Reaching from her side, she grabbed a curved blade, its edges jagged with bits of bone.  Slicing it across her hand, she let the blood sink down, splashing against the mud and dirt below. “Blood calls to blood. Follow my call.”

As the arms pushed upwards, shoulders emerging from the womb of the earth, a head began to form, gasping with an open maw.  The lights above flickered and the bottles hung with dried flowers cracked and shattered in a rain of glass.&lt;img src=&quot;images/Wisp 4.png&quot; style=&quot;float: right;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;

“Hear my call!”

The body emerged arching back, tilting in a silent scream as the surrounding woods took flight. Long ago the animals had fled, but the trees had been given no option. They trembled now, the wisps dissipating from above and the trunks of the old growth cracking in two.

“Hear me!”

The body lunged forward, as if to pull itself entirely out.  But it crumbled.  As it clawed upwards, the dirt gave away to silt until the right arm eroded into a forgotten pile of muddy ash.

“No!” Hazel yelled, falling forward. Her hand was bloody, smacking against the ground. She squeezed the wound, trying to keep the blood flowing and give new life to the eroding form beneath.  But it was no use. The head turned towards her and for one heart stopping moment, she thought she saw the depths of her brother&#39;s eyes.  Then, the body fell, patching up the hole into the city below.  The lights above evened out. The bottles stopped their sway. And all was quiet once more.

“No,” she sobbed, bending forward.  She curled her bloody hand to her chest. “What am I doing wrong?” She looked around her, as if expecting an answer. But the bits of willow and vine that she had woven together were silent and once more, Hazel, was alone.

Later, as she crawled out from the small fort that her and Malcolm had made, she wiped her eyes on her apron.  She had bandaged her hand as best she could but would need to get her supplies out back to be able to really make sure this did not scar.

“I’ll just have to try again,” she told the night air.  It was a coping mechanism of sorts. One that she used when she wanted Malcolm to hear her.  “I’ll keep trying,” she whispered. “I promise.”

Walking up the riverbank, she spotted the apothecary. The chimney was puffing out sweet smelling smoke.  Sage and basil had been added to the fire.

Holding her wounded hand to her chest, Hazel felt a mawing ache wrap around her heart. She doubted anyone was awake in there. Everyone had departed for slumber hours ago.  Her shopkeep turned new-found love had been dead on their feet.  She supposed though that the wisps might have started the fire.  They sometimes did on mornings that Hazel was up far too early.

Coming through her garden gate, Hazel sighed.  The small window up top was dark. It had been for a number of years. The one next to it though, had the faint glow of a candle.  Often, they forgot to blow out their lantern at night.

They were something good.  She needed to remember that. Despite the failure, there was still good. Still a reason to keep fighting.

“I want you to meet them,” she whispered to Malcolm.

The breeze on the wind she imagined was him telling her ‘soon’.

[[Next|Hazel 8]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="8" name="Hazel 8" tags="" position="800,1200" size="100,100">&lt;img src=&quot;images/Wisp 3.png&quot; style=&quot;float: left;&quot; height=&quot;175&quot; width=&quot;200&quot;&gt;Hazel sat outside the garden gates, late that evening, long after Milo had gone home.  The lanterns were now lit, and the festival was coming to an end. But there was one more thing that she had to do.

It was the same each year.  Hazel always told herself that this would be the last time and that she would conduct her goodbyes but duty and nostalgia took precedence far more than she would like to admit. Malcolm had tried to rid her of the feeling of obligation, but Hazel didn’t know if that would ever be possible. Especially with Malcolm gone.  Who else did she have left?

Walking to the edge of the burnt out alley, Hazel peered into the shadows.  They were especially restless tonight. They always were when the lanterns renewed. “Mom?” she called out to the dark.

At first there was nothing but a pregnant pause. Then, the shadows moved, scattering out of the way as the echo of footsteps sounded down the alley.  Hazel knew that sound, having heard it most of her life coming up the backstairs.  Her right foot always came down heavier than the others.  An imperfection that Lucinda had never been able to stand.

Lucinda Albright appeared, materializing out of a black shimmer of magic that shouldn’t belong.  Her skin was a bit lighter than Hazel’s, but her hair was the same chocolate, piled high upon her head and tied back with a scarf.  But unlike Hazel’s heart shaped face, Lucinda’s was sharp and angular, her cheekbones cut just beneath her eyes in a stark bruising slash.

“Must be a holiday,” Lucinda mused.

Hazel ducked her head. It was the only time she called her mother forward anymore.  Perhaps she should have been better about visiting, especially since she was stuck in this alley. But Hazel led a busy life. The apothecary kept her days booked.  Or at least that’s what she told herself.

“Hello, Mother,” Hazel said, curtsying a bit with a bow of her head. “Are you well?”

Lucinda’s eyes were gold and sharp. “I’m dead, child. What do you think?”

“I just meant…” Hazel trailed off. Some spirits lived perfectly fulfilling lives.  There was a little old man down near the peach stall at the rain market that passed his time collecting stories from the market goers and writing them down into monthly newsletters.

“I know what you meant, and it was a ridiculous question. Why am I here, Hazel? Are you planning on setting me free?”

&lt;img src=&quot;images/Lucinda.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;“Mother, you know I can’t do that. The Night Market doesn’t work that way.” In order to set her mother free the hex the woman had woven into the fabric of reality would have to be undone. Then, Lucinda would have to be reborn once more from the Night Market’s will.

“If you were half as good of a witch as I was, you would have been able to do it by now,” Lucinda snapped. “And where is your sister? I notice she isn’t showing herself as of late.”

“He, Mother. You know this. And Malcolm is… unavailable.” Malcolm wouldn’t have come here even if he could.  Never mind if he was wandering the ether out there, he was probably staying far far away from Lucinda. The two of them hadn’t seen eye to eye even at birth.

“Hazel,” Lucinda sighed.  “We are getting off on the wrong foot again. You know mummy never intends to. It’s just so hard here, darling. Being dead is a trial.”

“Then maybe you shouldn’t have lit the alley on fire,” Hazel muttered.

“What was that?”

“Nothing,” Hazel said quickly. She tried to twist her face into an encouraging smile. It wasn’t as if she was enjoying this conversation either.  “Mother, I came here because it is the Lantern Festival. I thought you and I could sit and watch the wisps tonight. Like we used to.” Every year they would picnic in the garden and watch the wisps flit from tree to tree, gathering energy from the lanterns and bringing their light down to weave among the herbs.

Lucinda sighed, sitting down at the edge of the alley. She could not cross over to where the patch of grass grew green and plush.  She had to stay in the world she created.  “I only ever did that to get you to stop yammering on about them,” she said.  “Really, Hazel. You were a difficult child.”

“I know, Mother.” Hazel sat down all the same, looking out at the wisps. They were already coating the basil in bits of light.

“How is that urchin friend of yours?”

“Milo is just fine,” Hazel said with a sigh. “He really has been helpful to the shop as of late. He takes orders for me and rebuilt the entire back shed this year.”
“Yes. Well. You can do better than him.”

“I’m not dating him, Mother.”  Lucinda was certain Milo had stuck around for her.  To this day, Hazel doubted she even suspected he and Malcolm had been a thing.  Either that, or she ignored it completely.

“Good. I’ve raised you right then. He has no prospects, Hazel, and he certainly has only been sniffing around here to make you a notch in his bedpost.”

“Mother, Milo is my oldest friend…”

“If you got out more that wouldn’t be the case.”

Closing her eyes, Hazel stopped, counting to ten. Why did it always have to be this way? Each time she called her forward, Lucinda got worse and worse and Hazel had to wonder when the day would come that the woman would lose herself entirely to the anger that surrounded her.  Hazel knew it wasn’t her mother&#39;s fault. She knew that the dead sometimes just went this way. Though, according to both Malcolm and Milo, Lucinda had always been cruel.  Hazel was just too wrapped up in her mother&#39;s approval to see it.

“Couldn’t we have a nice night, Mother?” Hazel asked softly.

Lucinda sighed. As if answering that very question was a trial. “Oh, alright.  You’re obviously in one of your needier moods. Come here child and hold your mother&#39;s hand.”  Hazel scooted towards her, reaching her hand across the burnt barrier to wrap within her mother’s. It felt like ash and crackling smoke.  “What has gotten you into such a tizzy, child?”

“Nothing,” Hazel said honestly. She frowned almost immediately after that. “Or, well, I guess a small something. Mother, they say the Night Market is splitting in two.”

“It’s split in two before, and we survived.”

“I know that. I know that when we lived underground the world was supposedly ending but this one I think is a bit different. The sky is tearing.”

“Then do something about it.”

That was exactly what Hazel was intending but she didn’t even know where to begin. Something so monumental was not just within her grasp. “But what am I supposed to do?”

Lucinda rolled her eyes, tugging on her child&#39;s hand until Hazel raised her chin and focused on the wavering form of her mother. “Hazel Albright. You come from a long line of powerful women.  What do you mean what should you do? You have all the ancient magics right there at your fingertips.”

“They require sacrifice.”

“If you wish to save the world then blood will have to be spilled.  Really, Hazel,” Lucinda admonished. “Do you think you can do something as drastic as saving the entirety of the Night Market by being kind? Death will need to coat the streets. Blood will have to be the new foundation. And this nonsense of keeping magic from our world will have to be cast aside. It is time for you and the other witches to stop living in the shadows and take the world back by force.  Unless, of course, you wish for everyone you know and love to die.”

Hazel looked horrified at the mere prospect of it. “No. Mother, of course not…”

“Then you need to grow up and do something about all this because if you don’t, the lives of the people around you will be lost.” Her face softened as she patted her daughter’s hand.  “But you will never die, Hazel. Mama has made sure of that. So you will spend your days knowing you could have done something, but you didn’t because you didn’t wish to take another life.” She clucked her tongue in disapproval. “Really. I don’t know where I went wrong.  You are far too soft.”

As Hazel ducked her head downwards, the sight of her lap became blurred with tears. It was the same each time.  What her mother had left behind could be helpful, of this Hazel had no doubt, but at what cost?

“Oh, sweetheart. Don’t cry.” Lucinda’s voice sounded put out, but it was not without sympathy. When tears dripped down Hazel’s cheeks, the woman only sighed.  “Let’s watch the wisps,” she said quietly.  “It has been far too long since you called me forward, and I would like to spend some time with you.  Could you be stronger for mama?”

Wiping at her eyes, Hazel nodded. “Yes, Mother. Of course.”

“That’s a good girl. Now tell me that you love me.”

Looking at her mother, Hazel gave her a watery smile. “I love you.”

Lucinda only smiled thinly back, keeping her daughter&#39;s hand in her lap. Hazel watched the wisps flit from the trees, her heart heavy in her chest.  On nights like this, she longed to have Malcolm home more than ever.

[[Next|Hazel 9]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="9" name="Hazel 9" tags="" position="800,1325" size="100,100">&lt;img src=&quot;images/Wisp 2.png&quot; style=&quot;float: left;&quot; height=&quot;175&quot; width=&quot;200&quot;&gt;The water lapped around me, Hazel secure at my back.  Rose petals and small sachets of herbal tea, floated in the claw foot tub, tinting the water a soft pink.  Wash cloth in hand, Hazel brought it up, squeezing it out over my chest and watching as the water ran down in soft pink rivulets.  The lighting in the bathroom was dim, dappled with only soft glowing orbs that rested just out of sight.  There was no ceiling to be seen. Only the leafy green of a dozen pothos plants, all trained to climb the wall and wind upwards to create a soft canopy of flora.

“It scares me to see your body this bruised,” Hazel whispered. Her chin rested on my shoulder and her legs were tight around my waist.  “I should have gone with you.”

I shook my head firmly.  “The last place I want you to be is down in the Deep.  I’m lucky I even made it out of there.”

“Don’t say that,” she said fiercely. “I was ready to contact Gabriel and call in every favor I had to be able to come down and get you.”

I tilted my head back to her. “You have a lot of favors with the Velvet Guard?”
“Well, no,” she said with an angry huff. “But I– I wasn’t going to let you just sit down there. I would have done something.”

“Like hexing people?”  She froze behind me.  So Caliban was right.  The girl who so often was desperate to help others, was capable of taking them apart as well. “Your secret is safe,” I told her quietly. Though, if Caliban knew, I doubted it was much of a secret.  “It makes sense, if I really think about it.  You’ve told me a bit about your mother.  It would almost be odd if you hadn’t picked up a thing or two.”

“I don’t curse people,” Hazel said quickly.  “The magic I’ve obtained really is something that I use for good. It’s why the apothecary has become what it is.  I don’t sell hexes to just anyone.  If someone comes in to buy one, they have to tell me what they are using it for.”  I didn’t point out to her that these people could have very easily lied. In fact, people using hexes were probably the exact sort of people who would lie about their intentions.  It wasn’t worth pointing out to her. The likelihood was that she already knew and just hoped that she was putting more good in the world than bad.

There was real fear in her voice when she spoke. Magic was obviously something Hazel had kept well hidden through the years.  Either to stave off the backlash or for fear of becoming her mother.  The world itself was not favorable to magic users unless you were a Baron.  Any magic that was obtained, was heavily controlled through the Velvet Guard.

Frowning, I twisted in her hold.  Her head was tilted down, and her brow was furrowed in worry.  Cheeks still high in color from our earlier activities, she looked raw and vulnerable.&lt;img src=&quot;images/bath.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

“Hey,” I whispered. “I’m really not upset,” I tried to assure her.  She was running her fingers along my bruises from the Deep, paying special attention to the one I had at my side. I could feel warmth seep into my skin but assumed it was from the water. She had said this would be a healing bath.

“I’ve just been keeping so much from you,” she told me.  “You have to understand I never thought that you would be– that we would–” Tilting her head back she blinked up towards the ivy covered ceiling. Their vines tightened around each other, making sure to block out anyone who may be listening. It felt highly significant that she thought anyone would be.

“Has this really upset you?” I asked.

She nodded her head and then shrugged, avoiding my eyes.

“Hazel,” I told her gently.  “Why would I be upset that you have the ability to curse people? Especially when all I’ve ever seen from you, is kindness.  You go out of your way to make people happy. You took me in when you didn’t even know me.” Tucking her hair away from her face, I leaned forward, brushing a kiss across her cheek.  “I mean, you put up with Milo daily.” That got a small smile out of her.  “So you have the ability to do something not so savory. Most people do. And, to top it off, you show a strength that others do not.” I ducked my head, locking eyes with her. “Restraint.”

She sighed a little, sinking down into the tub and pulling me close. There had been red and angry scratches all along my right arm.  Gravel and sand had been embedded in my skin when I had first walked into Renaissance Alley. Now, the wounds didn’t even exist.

“Wow,” I told her. “Hell of a bath.”

“You know it’s not the bath,” she whispered.

Taking her hand in mine, I brought it to my lips. “I know.”

The water never cooled. The tub was deep and held us both, soaking us up to our shoulders as we lounged within. I watched her hands as they sliced through the water gently.  A soft green light emanated from her fingertips, filling the copper tub with magic that left my body tingling.  I didn’t say a word though. I didn’t want to.

With Hazel, everything was a test of mental fortitude.  It was an odd thing to think but so very true.  So easily this life could have led to unhappiness.  From what I had experienced, I knew I could tip over into the edge of despair. Run, be afraid, rage at the world if I got up enough courage. But when I was with Hazel, it didn’t feel right.  I wanted to be better around her. For her. I wanted to be someone that could see the kindness in strangers like she could. Who wanted to help. I wanted to be someone that she was proud to hold hands with.

“Promise me something,” I told her softly, both of us lazy with the heat of the water and the events of the day.

“I can certainly try.”

“Promise me that if things ever get too much, you’ll come to me.”
She giggled a little against my shoulder, pressing soft kisses to the skin.  “I will gladly promise that.”

“I’m not sure what I can do that someone like you couldn’t, but I would like to try.”

Nuzzling against me, I felt as she coaxed my body to lean further back into her. My body melted into her soft curves. “I think that you are capable of a lot more than you realize yet.”

“Why do you say that?”

“A hunch, really. I look at you and see such potential locked away. As if you have magic swirling just beneath your skin, itching to get out.  But magic is finicky, and I don’t think the right time has presented itself yet. I think when you truly need it, you will be capable of so much more.”

“It’ll be a surprise for everyone,” I joked.

I could feel her smile and the soft breathy way she whispered in my ear. “Surprise is what makes life worth living.  When you open yourself up for surprise, you open yourself up to an entirely new world of possibilities.”

“Will you teach me?”

Holding me close, she rested her hand flat on my belly. The wound at my side finally closed.  “I will teach you anything you want. Give you anything you want,” she said softly.  “You only have to ask.”

[[Next|Hazel 10]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="10" name="Hazel 10" tags="" position="800,1450" size="100,100">&lt;img src=&quot;images/Wisp 1.png&quot; style=&quot;float: left;&quot; height=&quot;175&quot; width=&quot;200&quot;&gt;Hazel didn’t have a good reason for coming downstairs when she did that night.  When she awoke, staring at the peeled stars of her ceiling, she had assumed the wisps had roused her. But even they were dim in the late night hours, hovering outside her window, not bothering her or attempting to come inside. She did try to go back to sleep. To roll over in the massive amounts of comforters she had and snuggle down into a dreamless night.  But, in the end, her eyes remained open and she continued to stare at the shadows in her bedroom.  With a heavy sigh and the knowledge that she was going to be tired come midday, she rose from her bed and dressed, intent to get started on her morning chores.

When she stepped foot within the apothecary lobby, she froze.  Her left foot hovered above the floorboards as she looked around the room, almost certain she would find it filled with the dead, all staring at her in silent dismay.  But the shop was empty. The fire had a low burn of embers and the stained-glass windows were dim with light.  But the silence was far too eerie to not take note of.  

The second her foot fell flat against the floor the front door burst open, wind rustling leaves and bits of dried flowers across the entrance.  It slammed with a bang that reverberated through the shop, a wispy mist billowing into form right in front of her.  The sad expression of a man peered at her through the half formed cut of a mask, their eyes black. Two empty sockets devoid of a soul.

Hazel stepped back, nearly stumbling over her own feet. “You are not welcome here, omen,” she said.

The visage of the man smiled sadly at her as his feet touched down upon the floor, his body gaining form, but his skin still a sickly gray.  “I am not here for you, bog witch,” he said evenly. There was something more to him. A life that had once been lived. But now he was nothing more than an echo.  All omens were.

“I have warded myself from the likes of you. The entirety of this home is warded from your kind,” Hazel said, the desperation, panic clear in her own tone.

“It is and you have. But,” he leaned forward. “You have also been playing in magics you should not. Your wards are weakening.  If you wish for all the things of the world not to come knocking at your door, you might want to slow it down on the dark magics.”

Hazel stared at him, eyes narrowing slightly.  The fear was still there, but the suggestion of stopping when she was so close, was enough of a boost to keep her from running.  “Why are you here?”

“As a warning,” he said. Soft, pale hair fell in a slash across his face. He looked as if he were once someone that held himself well. Hazel wondered if he had had friends or a family.  “There is an upcoming ball. Do not let your loved ones cross the threshold.”

Hazel frowned. “What?”

“I cannot give you much more than that,” he told her.

“You have to,” she protested. Her mind reeled at the information alone and it was not anything of substance to even begin to understand.

“Rules are rules,” the omen said with an indifferent shrug. “You know what omens are. You know what my limitations are.”

She looked him up and down. His feet floated from the floor and looked as if they dragged behind him when he moved. Soft grey tendrils of the nether drifted from him like tears and he wore sorrow like a shroud. “Omens often mean impending death. Especially when they are made from the soul of a banshee from a far off fae land.”

He smiled, the edges of it cracked in remorse.  “I have not had someone come so close to calling me by who I am for so long. I almost forgot where I came from.”

Hazel softened.  The omen’s tone had a hint of a voice from so far away. “Do you even remember your name?”

“No.”

“Your old life?”

“Nothing,” he said with open palms. “I have impressions sometimes but they are nothing more than images that I might be able to grasp,” he reached out, as if to take one, “but the second I do,” he let his hand drop. “Nothing. They disappear. Like a memory that is no longer mine.”

Hazel wanted to help him. It was in her nature to.  Yet, she hesitated to even get near the creature. To change the passage of time and find herself suddenly on the receiving end of his words.  Taking a full step back, she crossed her arms in front of herself, wrapping them around her waist. “When is this ball?” she or anyone that she knew had not been invited to one.  Nor did she really see a situation in which they would be. The balls all took place upon the eternal staircase or on private properties.  All the places Hazel and her loved ones did not attend.

“Soon,” the omen said. “Far sooner than you would like.”

“And someone will die if we go?” she asked.

“Pain will shatter into lantern tears upon the ground.”

Behind him, the door opened again, with less drama than before, but still on its own.  Hazel held her breath, simply waiting for the omen to leave, knowing she was not truly safe unless he did.  But still, he looked at her, his jaw flexing as if he were trying to tell her something more.  The words were stuck, however, voiced perhaps only in his declining mind.

“Wait, why are you seeking me out to tell me this omen,” she said. Omens only were given when an individual was unfortunate enough to stumble into the eternal creatures. They did not seek their prey out in the middle of the night and they certainly did not make house calls.

“Because fate will unravel no matter what I do, but perhaps I can ease the passage.”

“Why would you care?”

“My life was already put upon a pedestal.  I do not wish to see anyone else end up the same.”  Turning to leave, his feet dragged across the floor in spindling reams of mist.  “Beware the bells. If you hear them, it will be far too late.”

When the door shut behind him, the apothecary shivered.  Hazel stared at the door, feeling her heart pound and outside, the remnants of her actions howling against her garden gate.  It wouldn’t be much longer now, she could feel it in her bones. But with the presence of the omen, she didn’t know if she would make it.  When it was a race between her own machinations and fate, surly fate would be the victor.

[[Next|Hazel 11]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="11" name="Hazel 11" tags="" position="800,1575" size="100,100">&lt;img src=&quot;images/Wisp 5.png&quot; style=&quot;float: left;&quot; height=&quot;175&quot; width=&quot;200&quot;&gt;Hazel woke with a start. Her gasp for air echoed throughout her room with such a tumble that she was almost sure it could be heard from the market all around.  Sweat beaded against her brow, dappling her skin in perfect beads of dew before falling in slow lines down her cheeks.  Swinging her legs out of bed, she leaned over, hugging herself for one long moment before getting the will to rise.  She swung a soft robe of cotton over her shoulders, tying the sash tightly before padding out into the living area with bare feet.  She paused though. The light in the kitchenette was already on.

She expected to see her roommate, as sleep probably was eluding them after tonight. But instead, she saw Milo.

He stood silhouetted in the kitchen, the stolen lantern a dim glow across his skin.  The kettle was boiling and he was making himself some sort of drink.  When she noticed the cup that sat beside his own, she felt her heart clench a little. It was all familiar. Back when he had been such a fixture in this area.  When Mal had been alive and it was the three of them against the world.

“I almost believe myself to still be dreaming,” she whispered.  The crooked smile that touched his lips could be seen only in profile.

“I’m making hot chocolate. If you want any.”

“Milo, you haven’t been up here in close to ten years. Why are you making hot chocolate?”

“Because I haven’t been up here in close to ten years,” he said wryly.  Removing the kettle from the stove he began going about making cocoa.  Frothed milk steamed from the small little pot, chocolate already placed within the cup. Hazel watched him quietly, still feeling as if she were waking from her nightmare. Dream? She wasn’t sure what she could really classify it as.

When Milo pressed the mug in her hand, he bumped her hip, nodding towards the gathering of sofas before the fire. “I put more wood on for you,” he said.

Hazel smiled at him in thanks, settling down in her favorite chair, watching as Milo gravitated towards the spot he used to fall asleep in.

“I had a nightmare,” she said softly, clutching the ceramic mug between her palms.

“I know. I heard you.”

“You were already here?” Not once had Hazel ever asked for her key back from him, hoping that one day he would return. But she hadn’t expected him to lurk.  Or, more likely, she had expected that, just not tonight.

Sipping at his own mug, Milo took his time answering. If Hazel hadn’t watched him, she would have thought his cup to be spiked with something extra. His drinking was getting bad again.  “Want to talk about it?” he asked.

“I don’t know if you’ll want to hear it.”

“There are a great many things I don’t want to hear or do and yet…” he gestured around himself as if to show her the end of that sentence.

&lt;img src=&quot;images/Billows play.png&quot; style=&quot;float: left;&quot; height=&quot;300&quot; width=&quot;350&quot;&gt;Tucking her feet beneath her, Hazel tapped her nails against the ceramic lightly, the small plinking sound mingling with the popping of embers.  “I was following Malcolm through the market,” she said after a long stretch of time. “He couldn’t see me.  I tried calling for him, throwing something, anything to get his attention but he just kept walking.” She looked off towards the closed door. The room that had remained a shrine to a brother that hadn’t lived here long before he died. There was something that felt so wrong about touching anything in there. Despite not having lived there for years, it was where Malcolm had slept when he had been too tired to walk home. Or when he knew Hazel needed someone in the house at night.  “I don’t know if it was a dream,” she confessed.

Milo’s brow rose over his mug. “Meaning?”

“I think he’s wandering the market, Milo. I think he’s lost.” The tears that sprang to her eyes had been ones she had been trying to keep away since waking.  The idea that Malcolm had been walking these streets unseen for years broke her in ways she didn’t think possible.  

“He would hate that,” Milo said softly.

Hazel’s head snapped up, looking at Milo with wide eyes. She had expected a fight. For him to tell her it was just a dream. Keep up his mantra of Malcolm is dead and he’s not coming back.  But instead, Milo’s eyes were fixed towards the closed door, something distant in his gaze.

“He would,” she whispered.

Standing, Milo walked towards the door. For a brief moment, Hazel wondered if he would open it.  She was rarely brave enough to do so herself. But something had changed about Milo in the recent months.  Maybe something had changed within all of them.  But instead of opening it, Milo ran his fingers across a framed painting, hung just to the left. Something small and delicate that Hazel had found long after Malcolm had passed. He had been attempting to paint the lanterns.  Soft colors bled into the black canvas, the muted amber light of the spice district shining through the shadows that threatened to take the world.

“He was a prick, you know,” Milo said, still staring at the painting. “I love him but damn did he fucking drive me up the wall.  Took everything in me sometimes not to shove him into the nearest pool of water.”

Hazel laughed wetly at that, wiping at her eyes.  Malcolm couldn’t swim.  It had been the chink in the perfect facade for so long that Milo had latched onto it and used it to his advantage. She remembered Milo swimming out to the middle of the pond once just to get away from an argument with her brother.

It was a good memory, one that brought a smile to her face. A smile that fell as she registered his words. “Love?”

Milo turned to her, shrugging. “I’ll always love him, Hazel. Just as I will always love you.”

“Then why have you been acting like this? Any time I talk about getting him back you fight me on it. You–”

“Because I want you to move on,” he interrupted. “Because you have been spending your life in these old walls built by your mother, fixating on the ghost of your brother.  You aren’t living, Hazel.  And every time I think you might start trying, something happens. A new little bone gets tossed your way and you are back to having a one track mind once more.  All you can think about is Mal.”

“He’s my brother,” she protested.  The only family she had left and he had died unfairly.  “I promised–”

“You think he would want you to keep a promise that locked you away just as your mother did? You think Mal would look at that and encourage it? He hated Lucinda. More than anything in this world, he hated that woman.  There is not a moment he would wish to be like her.”

Tears tracked down Hazel’s cheeks as she stared at him.  They were words that had always been danced around but Milo, as he had grown, was not one to protect her anymore. Not in the way he used to.  “He didn’t hate her,” she whispered.

Setting aside his mug, Milo took three strides to her, kneeling in front of her. Desperately, he clutched her hands in his.

“Yes he did,” he said firmly.  When she started shaking her head no, Milo squeezed her fingers tightly, trying to keep her from running.  “I would catch him sometimes when he was in the kitchen.  I’d wake and he’d be standing there, staring at the herbs and spices, lost in some memory of her. Remembering how she could take the smallest pinch of something and control you two through your food.  Did you know he stopped eating once? Back before she died. He stopped eating because he thought for sure she had gotten into his pantry and slipped something in there.  Was certain that even if he threw it all out she’d do it again.”

“No,” Hazel shook her head. “No. That’s not true.”

“You hold Malcolm on this perfect pedestal ever since he died and you shouldn’t.  He had his problems.  He was wonderful and beautiful and full of life but he also came from a broken home just like you and I. He could be too harsh. He could play his games just as I could and he could be stubborn to the point where he would forgo comfort and love because he didn’t know how to just apologize and be wrong.”

“And so what? I shouldn’t want him home?” she cried incredulously.

“No,” Milo said softly.  “No. That’s not it at all.  I know you, Hazel. You are stubborn just like him. You are going to do whatever it is you’re going to do. But whatever it is you’re going to do, I hope that it’s the end. Bring him back or put him to rest forever because I want you to be happy.” His eyes ticked to the other closed door. The one where they rested. “You have a chance at that, you know.”

“I’m bringing him back, Milo. I am.” There wasn’t an option not to and she couldn’t understand why he thought differently. He had been there. He had felt Malcolm pass.  He had been the one to hold him through the final moments.

Milo looked defeated. Head dropping between his shoulders as it became clear he wasn’t getting through to her. “If you do, I hope you are not disappointed.”

“What is that supposed to mean?”

“Mal doesn’t sit idle.  You’ll have your brother back, but it doesn’t mean he is going to stay a prisoner in these walls like you are.”

“I’m not a prisoner,” she said softly.

“By your own making, yes you are.”

When Milo stood, he ran a hand through his unruly hair, looking back at Malcolm’s door once more. As if he expected Malcolm to just walk through it. Hazel knew the feeling. She felt like that every day.

“Be safe,” Milo said quietly.  “I don’t know all of what you’re doing, but please be safe.”

“Are you leaving?” She didn’t want him to. The upper floor had been so lonely these past years.  The life and love of her family had all faded away up here, leaving her to hold it all together with old photos and bits of memories that only she seemed to hold dear.

Milo glanced around the room, the walls feeling smaller to him than before. It was a bigger step than he would admit, being here.  Hazel was looking at him imploringly, willing him to stay. Just for a bit.

Walking across the room, he grabbed his hot chocolate before sitting back down on his spot on the sofa. His spine was straight, and his hands were reflexively gripping the mug. But he was here.  He was here because of Hazel.  Taking the opportunity, Hazel wiped at her eyes, trying to cast aside the last few moments. She didn’t want to think of them. She didn’t want to dwell on his words. Adding more wood to the fire, she slowly started gaining composure.

“You’re my sister too, you know.” She heard him say from behind her.  “No matter what you do, Hazel, I’ll love you. I’ll be pissed, but I will love you.”

She closed her eyes.  It was doubtful Milo knew how much she would be counting on those words in the upcoming days.

[[Next|Hazel 12]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="12" name="Hazel 12" tags="" position="800,1700" size="100,100">&lt;img src=&quot;images/Wisp 1.png&quot; style=&quot;float: left;&quot; height=&quot;250&quot; width=&quot;200&quot;&gt;The upper floor was far quieter than expected given the destruction that was downstairs.  Willow branches shot through the floor and arched over the bookshelves to form a gate that while closed, still sat suspended before the front counter. Blood stained the unbroken boards and sigils painted in grave soil lined the entirety of the room.  Upstairs, however, there was almost the ability to pretend like none of it had happened. Except for the fact that Hazel didn’t want to.

Malcolm was asleep in his bed.  Old drawings littered the walls, some of them hanging on by only the rusted point of a pin.  Hazel didn’t wish to disturb him as she leaned in the doorway, looking in on his sleeping form and trying not to blink. For she was almost certain if she did, he would be gone from her once more. 
Gabriel had helped drag Malcolm upstairs and get him into bed while the others had followed behind.  Tea was made, and the fire was stoked and everyone sat in a kind of numb quiet because no one was sure what they were supposed to be doing now other than maybe staring at the wall and processing everything that had just happened.

Then again, Hazel should have known that Belladonna was not everyone.

When the woman&#39;s fingers wrapped around her wrists in a surprisingly harsh grip, Hazel yelped as the vampire pushed her the rest of the way into the room and closed the door behind them.  Quickly, Hazel jerked her hand away and put a few steps between them, looking at the simmering eyes in the otherwise gray room while also frantically glancing behind her to make sure that Malcolm did not wake.

“What did you do.” It did not fall from her lips as a question. Accusations rarely did. And while Belladonna had always been someone who had left almost everyone to their own paths, something about tonight had settled against her in a way that left her silence to be nearly impossible.

Hazel looked at her, trying to find the bravado she had held so tight earlier. That was before she had nearly bled herself dry and let the spirits of the dead wander through her like a revolving door.

“I did what I said I’d do from the beginning.” There was a waver to her voice that denoted the lie and later, Hazel wouldn’t even understand why she had tried.  Vampires smelled mistruths as if it were the blood they craved.

“You nearly killed yourself tonight,” Belladonna said.  “And don’t pretend like you didn’t because I can hear the heart in your chest and how it pumps with practically nothing. You are being held up by magic and magic alone.  How dare you do something so stupid and childish.”

“Childish?” Hazel looked at her in shock. It was the last thing she had expected to have thrown at her. Not in this situation. “He died for me. I promised him I would get him back and for ten years I have been trying.  How is this situation childish?”

“Because you should have known to go about it better,” Belladonna hissed. “The spirits from the alley are gone, Hazel Albright. Do you know what that means? Your mother is gone.”

Hazel took a deep breath, tears filling her eyes. Her mother. Lucinda had died by her own hands so long ago and while her spirit had certainly remained, it was one Hazel was willing to sacrifice, so Malcolm could be returned to them in the flesh.

“I do believe I may have been the only person to have loved my mother so I really don’t see how this is a hardship to anyone that she is no longer wandering that alley.”

“It is a hardship,” Belladonna hissed, stepping forward. “Because it is not her spirit that was broken tonight. It was the hold that kept her there.  With the little stunt you pulled, you may have very well returned an ancient back to the market proper.  And I doubt she’s going to be very happy given the way she died.”&lt;img src=&quot;images/Broken gate.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

Hazel felt what little blood was in her, drain from her face.  It wasn’t possible. She had been very careful with that spell. It was meant for the dead. To take their remaining energy and channel it to bring Malcolm back to this spot. Lucinda’s was the darkest of them all but the essence that contained the most power.  During life, Lucinda had done very little for her son. Hazel ironically thought that she could somehow make up for it now.

Shaking her head, Belladonna closed her eyes, forcing her anger to leave her in a whisper of a bat wing that fluttered somewhere high above.  “You were supposed to be better than all this, Hazel,” she said softly.  “And instead, you let another individual’s life dictate how you lived your own.”

“Malcolm is my brother.”

Belladonna glanced towards the bed. “Yes. And I wonder how your brother will feel knowing that his presence back within the living, may have brought back the woman who nearly destroyed his home and his family.”  

Hazel felt a tear slip from her cheek. She couldn’t tell him. Maybe she wouldn’t even have to. If Lucinda walked the cobblestone streets again, maybe she would just stay away.

Reaching out, Belladonna caught the tear, cupping Hazel’s cheek within the hollow of her palm.  “I do hope that this is worth it for you,” she whispered.  “And I do hope you start living your life for yourself, and not the twisted memory of a man who had made peace with his death.”

When Belladonna slipped from the room, Hazel stood, frozen. She stared at the door that had quietly clicked shut. Paint had chipped from it long ago. A pretty sage green that had been one of Malcolm’s favorites all his life. He always did love earth tones.  She would need to repaint it for him. Make his room more comfortable until he gets better. There was a long road of recovery and…

Her hand came up to stifle the sob that threatened to escape her. Turning, she closed her eyes from the door. From the world that existed outside of it and from the carnage of the shop below.  Lowering herself onto the edge of Malcolm’s bed, she reached out, pressing her fingers to his warming flesh.

Turning, she looked at her brother&#39;s sleeping form.  “Please don’t hate me,” she whispered.  But Malcolm didn’t hear her.  Just like the last ten excruciating years, he didn’t hear her.

[[Next|Hazel 13]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="13" name="Hazel 13" tags="" position="800,1825" size="100,100">&lt;center&gt;&lt;img src=&quot;images/Hazels sign.png&quot; height=&quot;400&quot; width=&quot;650&quot;&gt;&lt;/center&gt;

The three tiered fountain was set aglow. It was the furthest Hazel could bring herself to walk in a world that was now plagued by darkness. But she had made this area, at the very least, a small beacon.  Fat, waxy candles were perched across the rims of the fountain, their flames flickering from the falling water but not burning out. Hazel had carved enchantments into their wicks.  She sat there now, a box of unlit ones, watching over the small memorial she had made.  A burning ember in the dark, dedicated to someone that had been taken from them along with the lights.

Hazel wiped furiously at her eyes, looking at the fountain. The moss that had always grown around the edges was browning and dead now, covered in thick layers of wax and crystallized water.  Hazel had played at the fountain as a girl, always liking the lights that were strung up in this little courtyard.  They were dead now, and the different paths that had woven outwards to reach the rest of the market, were lost as they continued to try and arrange themselves into something that made sense.  The screams that echoed through the market were starting to die.  

That’s what happened when people lost hope.

Malcolm had held her after that first night.  He had left in the beginning and had come back, covered in rain, taking her in his arms and holding her through the night. If she hadn’t been watching out the window, she never would have believed it. But she saw him. She saw Milo press his hand to their chest and the way the light budded from their skin.  She had screamed. Right in the middle of the ball she had screamed loud and long, prompting Gabriel and Belladonna to attack.  For people to start running in fear. For the ones that both Gabriel and Bella had put in place for if anything did go wrong, to move quickly. Nothing mattered but getting to that courtyard.  And all the while, Hazel watched. She watched as they slid to the ground. As Milo knelt there for a moment, staring at them as if they were now a mirage that was fading from sight.  Hazel had felt a part of her die that night.  Briefly she wondered how much heartache she could take.

Leaning forward, she replaced the candles that were about to gutter out. She wasn’t sure what else she was supposed to be doing.  She had told Gabriel that she could provide everyone with tonics. Help if anyone had become stuck within a moved wall or crushed by the chaos. But he hadn’t gotten back to her. So she had wandered out here and lit the fountain, hoping it offered someone, somewhere comfort. Maybe if she could make it bright enough, it could light the tearing sky.  And someone, somewhere, could find peace.

“Oh, my dear girl.”

Hazel startled at the voice, nearly knocking the candles over. She hadn’t heard the footsteps, but the sound of the voice was loud and clear. It caused her to freeze as a familiar sense of responsibility and anxiousness began to course through her.
Slowly, she turned. “Mother,” Hazel swallowed. “I didn’t know if you would be showing up.”

Lucinda Albright was a tall woman. Statuesque and filled with a presence that demanded attention and submission.  Her long black hair fell down past her shoulders to her mid-back while her green eyes burned brightly against her dusky skin and high set cheekbones.

“I wanted to stay away for a bit,” she said.  “I was worried my presence wouldn’t be a welcomed one.  But after hearing you cry for the last week, why, how was I supposed to stay away?”

“You heard me cry?”

Lucinda looked at Hazel with a mixture of compassion and a condescending nature.  “Of course, my child. You are my baby. A mother always knows when their child is in pain.” When a tear tracked down Hazel’s cheek, Lucinda sighed, stepping forward and gathering Hazel close. She began sobbing in earnest then, pressed against her mother&#39;s chest as Lucinda stroked her hair making soothing noises. “Oh, my darling girl. What has happened?”

“You don’t know?” Hazel sobbed.

“I know why the lanterns are out.  That the Night Market persona was sacrificed but I’m afraid I do not understand entirely what it has to do with you. You have barely left the apothecary these last years.”

Hazel felt her heart crack. She had stayed a recluse. Had let the world come to her. Maybe if she had been braver, she would have been able to see this. Stop it before it went too far. She should have known that Milo had not changed. She should have been able to see the signs. He was a terrible liar and she had simply chosen to fall beneath his spell. Maybe if she had been a better person, she would have been able to save them.

“I loved them,” she said simply.

“Who?”

“The Night Market.”  She dissolved into a series of tears then, unable to even say their name. Because it hurt too much. There was a grave out there with their name etched upon it.  Being watched over by strangers, buried in a sea of the dead. 

“Oh, my darling girl.  You have finally reached for what you deserve,” Lucinda said softly.

“And lost it.”

“Nothing is ever truly lost, Hazel,” Lucinda admonished. “They are just simply not quite as they seem.”

“You think they’ll come back?”

“I think that we are all still traversing this world so they are not dead like you are grieving them to be.”

Looking up at her mother with a tear stained face, Hazel only dared to hope.  Maybe 
they would come back. Not the Night Market in general, but Hazel’s Night Market. The one she loved.  But her heart fell. Because the clock on the headstone was not working. They had no indication that they ever would come back.  And even if they did, would they have wanted to?

And then there was Milo…

“Don’t think of him,” Lucinda said, reading the look on her daughter&#39;s face.

“He was my best friend,” Hazel rasped. “I defended him.”

“And you were wrong to do so,” she said coldly.  “What have I always told you, Hazel? Milo Next is a parasite. He will do nothing but bring you down in this world.  And I think he had proven himself quite nicely at this point to be exactly the kind of man his mother and father intended him to be.  They tossed him to the market for a reason, Hazel.  Not even they loved him.”

It sat wrong.  It all did. But Hazel couldn’t shake what she saw. Couldn’t shake the fact that he had lied for so long.  Had kept her in the dark because he knew that she could stop him.  Closing her eyes, Hazel took a deep breath.  It hurt lately to do so. It hurt to even get out of bed. She wondered when that would go away.

When Lucinda gathered her close again, she waved her hand, lighting the candles brighter and sending up a soft glow around the courtyard.  “I am home now, Hazel. We have time to work through all this. I am not leaving you again, my darling girl.”

Hazel rested against her mother’s chest, eyes becoming wide and unseeing as she faced the reality that was ahead of her.  The Night Market was dying. Her love was dead and buried. They didn’t know where Milo was and Hazel was unable to help anyone.  With her ear pressed against the newfound beat of her mother&#39;s heart, she clung to the sound. 

Maybe, with Lucinda back, with Malcolm back, they could tackle this together. Maybe they could be the family they were never able to be.  Hazel closed her eyes.  Family.  Maybe she had been focusing on the wrong kind. Maybe with the lanterns going out, it was a sign to start anew.

“Don’t worry, Hazel. Mommy is here.”

Closing her eyes, Hazel let herself hope.

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="14" name="Gabriel 1" tags="" position="1000,300" size="100,100">&lt;img src=&quot;images/Constellation 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The heavens did not weep when Gabriel fell. Instead, they laughed.  He tumbled without grace into a world they considered to be nothing more than an isle for the lost.  He slammed into the waters, the embrace of comfort shredded from his body with each lashing wave.  I did not invite him into the world but I did not shun him like his own people had.

Instead, I watched him. This strange creature, clinging to the sand and sea, screaming into the night. I let his pain fill me and burst the stars above into glittering tears.  There was nothing I could do for him though.  He had been forcibly ejected. He did not have a choice. I could not just turn him away.  And as others came, dragging his body through the streets, laughing and jeering at the one who was now weeping at the open pain that consumed him, I became enraged. For it was a reminder of the cruelty I also contained.

I had no idea that blood that would so quickly be spilled in Gabriel’s name upon entering the market. I had sent others to help him, to carry him home, and they had greeted the ones that treated him cruelly with blades and brutal efficiency. But I still looked on with hope. Hope that a family might some day form.

I had no idea that the family I gave him would also tear every last shred of what made him beautiful, and shape him into something hard and emotionless.  

I had simply wanted to show him it was okay to live.

[[Next|Gabriel 2]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="15" name="Gabriel 2" tags="" position="1000,425" size="100,100">&lt;img src=&quot;images/Constellation 4.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;“I don’t want you to be afraid.”

Gabriel looked up at the man before him with the curling blond hair and the cherubic face.  He had the mark of the celestials. The silver ring to his eyes. But his cheeks were pink with humanity and he was living within the confining walls of some strange world instead of within the Knowing’s embrace.  Behind him, a dark skinned man stood, arms crossed, ready to strike if necessary.  Gabriel was bundled on a sofa, looking between them, unsure where it was he was even at.

“I know everything can be a little confusing but I assure you that you can get through this.”

Gabriel’s lips were chapped, and his mouth was dry.  “Who are you?”

“Elias,” the man said with a soft smile.

“We’ve already fucking told him this. Three times.”

“And that’s Reese,” Elias said, ignoring the man behind him.  “Do you remember what happened to you?”

Pain and screaming. His own screams.  The shredding of the world as he fell from great heights and the absolute disappointment that felt like a constant battering at his heart.  “I fell,” he said numbly. When he looked at Elias, tears in his eyes, he swallowed thickly. “Did you fall too?”

“I did,” Elias said with a nod.  There was a memory lingering against him. Gabriel could see it in the way he wrung his hands together.

“And him?” he gestured to Reese.  The man only snorted in response.&lt;img src=&quot;images/Elias.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

“No, but Reese is a friend. He can help. Do you know what happens to celestials that fall?”

“They go mad.” It was the stories told in whispered words.  The celestials that had fallen and succumbed to the human proclivities that wasted them into nothing.  Emotion ran rampant through them, burning the calm of the grace until they were nothing more than a frothing beast, destined to only cause destruction. To continue to sully the Knowings name again and again and again…

“There are ways around it,” Elias was telling him. “Madness does not have to be your end.  We can help with that.”

He looked Elias up and down. “You have not succumbed.”

“No,” he said with a smile.  The scattered cracks that marred the skin of the decaying fallen were not upon Elias. His flesh looked lively. Healthy.

“How?”

“Because I found something far more important to hold onto.  To ground me.” He looked over his shoulder at the other man. At Reese.  Gabriel didn’t see it, but the taller man&#39;s expression softened.  “We just need to find you something to give you purpose,” Elias said encouragingly.

“Not too much purpose,” Reese said. “Don’t want to replace one Knowing with another.”

Elias was patting Gabriel’s hand. “We can discuss that later.” The words were said to Gabriel but were clearly addressed to Reese.  “Staving off the madness is just about balance. We can help you with that.”

That was all well and good but as Gabriel looked between them, he couldn’t understand why they were not addressing what was truly important. “But how do I get home?”

At that, Elias’s face crumpled. It was like some sort of cruel joke, pouring into him from above.  Gabriel wasn’t sure that he got it though.  

“If I have done something wrong I can repent,” he said quickly. “I can do better.  Let me just do better.”

“There’s no better, kid,” Reese said with only a twinge of sadness to his words. “They kicked you out. There isn’t a way back.”

“Reese,” Elias hissed. He turned around at this, the hand he had on Gabriel trying to remain a comfort.

“What? Shouldn’t he know?” Reese asked with a raised brow.  

“Now is not imperative for him to know. And it is certainly not your place to decide what he should believe.”

The irony in that statement was lost on the two fallen. But not Reese. “Better now than in small doses later. You think that will save him? I remember when you fell, Elias. How you thought it was merely a mistake. I almost lost you to that. You want to wish the same on him.”

Gabriel began to shiver.  The two in front of him were offering help and yet they couldn’t seem to agree on what that even was. And he wasn’t supposed to have help. He was a celestial. He gave the help. The only comfort he was to receive was that of the Knowing’s. These two were so clearly a test. A temptation. Perhaps this was all a way for Gabriel to ascend to something higher.

“Oh no you don’t.” Reese shoved him back down as Gabriel scrambled forward. He had to get out of here. If he could just show the Knowing that he did not believe these lies the gates would open back up once more and he could return home.

“Fuck, kid. Let us fucking help you.”

Gabriel was thrashing in the man&#39;s grip, kicking and he was sure screaming, to be let go. Elias had backed away, tears streaming down his face at the sight.  Gabriel wished to feel bad but he had to do this.  Pain and suffering were sometimes necessary.

“I’m going to knock you out now, kid. We’ll try again later.”

Gabriel lifted his hand to strike but felt blackness overcome him instead.

He’d sleep for a long time after that. Repeating the routine until he had no fight left.

[[Next|Gabriel 3]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="16" name="Gabriel 3" tags="" position="1000,550" size="100,100">&lt;img src=&quot;images/Constellation 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;“How did you fall?”

“Very hard and very fast.”

The Graceling looked at him with soft eyes.  They were a warm brown that he was enjoying the more he stared.  Madeline was a woman with fierce opinions and ambition that he didn’t think she needed. But she always had a kind smile for him when the nights got quiet and the fires burned out.

“I’m not sure if I should laugh at that or find it incredibly depressing.”

“I don’t find it depressing,” he told her. “It is a statement of fact.” Facts were comforting in fact. Mainly because you could not have feelings over them.

“Don’t you ever get tired of that? Facts and drawn conclusions. Don’t you ever just feel something?”

Gabriel frowned. “Like an emotion?”

She laughed a little at that. “I know you feel emotion. Not well and they are a bit confusing, but I know you feel them.”

“Why do you say they are confusing?” If he was being honest, the very thought of emotion was a confusing one and despite Reese and Elias assuring him that they were normal, Gabriel wasn’t certain he enjoyed how they made him feel.

“The things that I would think would upset you, barely make you blink an eye. Then, something will happen that is barely noticeable to anyone else, and it bothers you for days. Don’t think I don’t see the way you act when someone spits in the street. Or looks at me with a hungry gaze.”

“You should be respected,” he said. “It is not jealousy.”

“I do not think it to be jealousy. I think lust is new to you and you don’t particularly like what it turns people into. I also think you may be a bit of a prude and you don’t understand sex or desire.”

“And you do?”

Her cheeks turned crimson at that.  Eyes cast down she began picking at the hay bed they laid on. The one they had rolled out beneath the stars.  “No. Not very much at least,” she whispered. “I’ve been with someone but he was back home. No one since coming to the market.”

“I’m afraid I just do not understand the appeal. It seems messy.” From what he could observe, it made people act beneath themselves as well. Reese and Elias were giggling fools the morning after one of their fornications.  It was a strange way for two individuals to behave. Especially since one of them was a former celestial.

Madeline laughed loudly at that. “It is. It very much is.”  Turning to her side, she propped her head up on her hand.  “You haven’t answered though. How did you fall?”

Gabriel stared at the stars. They were bright tonight. The sky looked as if it had been freshly stitched and the stars touched with silver.  “I do not know why the Knowing got rid of me,” he said.  “I have thought about this often but I do not remember doing anything wrong.”

“Do you remember what was happening right before the event?”

He nodded. “I was speaking with my brothers and sisters.  We were discussing the world below and the plights. I suggested that we should take feelings from the individuals we were currently watching.”

“You what?”

“It was for their own good. Wars were breaking out in the name of love.  They were fought with rage and messy grief.  They were killing themselves over emotion and I suggested that we should just alter these creatures. Take emotion away from them completely. It seemed to be met with mixed thoughts. Some believed that would make the creatures ascend into beings like us. Others simply did not think it would ever be an action that the Knowing intended.”

“And then what?”

He could still feel the grip of their hands. The way he followed without complaint. Not truly knowing fear until he saw the ripped chasm through the stardust. “That night, I was dragged from my bed and cast through the veils of the world to land in the ocean just beyond.”

“With no explanation?”  Gabriel shook his head. “I’m so sorry.”

“Don’t be.  The Knowing had their reason. I just wish I could be given the chance to prove that I can do better.”

“But you don’t even know what you did to fall in the first place.”

“Perhaps it is not my place to know. Perhaps, instead, it is just a trial that I must complete.” He looked out at the stars. “I do believe that one day I will be back there. And I will be met with a welcoming honor.”

Next to him, Madeline shifted.  She didn’t say much that night. Not that Gabriel expected her to.  He knew she was drawing her own conclusions on the Knowing. Far different ones than the ones she had had as a child.  He hoped he could guide her into the correct belief but he didn’t understand why each time they had a conversation like this, she seemed more and more distant.  There was a line between her brows that deepened as she formed together thoughts that she wasn’t willing to share yet.

Looking at her, he sighed. “I have offended you.”

“No, Gabriel. You merely make me want to help you.”

“You are a Graceling. That is your purpose.” 

She sighed as she rolled away from him, tucking her arms beneath her head. “I suppose so.”

Gabriel frowned at her still back. Yet again, he was not sure what it was he did wrong.

[[Next|Gabriel 4]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="17" name="Gabriel 4" tags="" position="1000,675" size="100,100">&lt;img src=&quot;images/Constellation 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;A sigh was heavy in the air.  As was often the case when the so-called morning awoke and Gabriel stepped into his office.  It was a dimly lit alcove that had once been a cell. In an effort to be closer to where he was needed, Gabriel had ordered it be renovated upon being sworn in as Warden.  The walls were still made of carved rock and the floor dipped down so he had to put a book beneath his desk leg to keep it even.  The sparsely lit office suited Gabriel just fine though.  It was at least quiet in this area.  Far away from the comings and goings of anyone being brought in for processing.  If there was one thing that Gabriel needed, after all, it was the quiet.

With his morning tea in hand, and a wrapped steamed bun, he sat down at his desk.  
No sooner did he unwrap his food, when a crisp rap sounded on his door, a nameless guard bursting in.  They looked fresh-faced and young, and Gabriel was almost certain they had not worked here yesterday. Or perhaps he truly did need to sleep. It had been three days.

“I have a report, sir,” the young man said, holding himself straight and staring somewhere over Gabriel’s shoulder.  

Setting down his food with a sigh, Gabriel leaned back in his chair. “Go on.”

“There was another breach,” the man, a child really, said. “One near the gem district.  A younger person. Human we think.”

Gabriel stared at them, unblinking.  The office cell was consumed with silence that normally Gabriel would have reveled in. If it were not for the at attention kid in his door.  He couldn’t eat while others expected conversation from him.  “And?”

“And what sir?”

&lt;img src=&quot;images/Desk.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;He took a deep breath to keep his calm. “Why is this one important?” Breaches were a dime a dozen now.  Gabriel had long stopped caring about the ones that came through. Not that he ever really cared.  He wouldn’t be here without a breach, after all.

“Oh, uh- I’m not - well, I don’t really…”

“Where’s Maddox? Or Celia?” They were at least competent at their job.  Gabriel couldn’t really see how any of this information was supposed to be deemed important when they sent a mere underling to deliver it.  He wondered if the guards were getting uppity again and trying to muddle his command.

“I don’t know, sir.”

“Who are you?” Not that it mattered. Gabriel would forget the kid&#39;s name within ten minutes.

“Carver Adlun, sir.  Reporting for duty.  This is my third day as a member of the Velvet Guard, our most esteemed…”

“Right.” Gabriel stood, looking at his steamed bun longingly.  It was now much less… steamy.  “Adalaine…”

The boy shifted on his feet, his demeanor breaking into something far more nervous. “Adlun, sir.”

“Adlun. Do you know how often a breach through the Night Market walls happens?”

“No, sir.”

“Once every two point five days.  Do you know how many of them we apprehend?”

“No, sir.” Adlun’s voice was far quieter now. Good, Gabriel thought. Maybe he’d think twice before stepping through his door again.

“All of them. Every last breach that is reported, we take care of. So you see, when a breach is being reported to me, I find it of very little note. Mainly because I know the individual has been taken into custody and if everyone is doing their job correctly, will be in due processing, as per the rules taught to us upon swear in.” Stepping forward, hands behind his back, Gabriel bumped the polished toes of his boot against Adlun’s own.  When the boy flinched, Gabriel nearly didn’t waste his next breath.  It was only because of his position, his duty to explain, that he even bothered.

“It is the ones that go unreported, the ones who are slipping into our society with illegal papers and intentions to tear down the structure we have created, that I care about. Those are the ones that I take interest in. But you’re not reporting one of those to me,” he told the boy softly, his voice edging on condescending without the barest hint of regret.  “So, my breakfast has been interrupted. I hate when my breakfast is interrupted.  The reason for interrupting it better be much better than ‘I was told to come tell you’ or else you will not make it to your fourth day within the Velvet Guard.”

The boy swallowed. Sweat dripped down his temple to disappear somewhere beneath the unruly hairline near his ear. Gabriel sneered at that. Couldn’t even look presentable.  

“I don’t. I’m afraid sir that I don’t really…”

Gabriel walked by him.  The boy could see himself out.  He hoped he enjoyed his last day on the job.

Walking through the cavern halls, Gabriel made his way downwards, towards the section of tunnels that branched.  One led straight, a row of thick iron doors housing the prisoners of the Night Market. He could see a few guards coming and going, starting the processing for the bail block that evening. Other doors remained tightly shut, red sigils swirling in a crackling ball of energy before them.  Those were the ones they would deal with much later.

Turning down one of the tunnels, Gabriel walked through the dirt caked halls until the ground beneath him became stone.  The walls began to smooth into something more palatable and the lights that flickered ahead were bright. He supposed it was a sad imitation of sunlight.  If born within the market, it probably sufficed as something dazzling. To him, it was dull. Nothing quite as resplendent as home.

“Warden.”

Gabriel sighed. “Cecil. Thank the Knowing.  Why did I have a child come into my office to tell me about a breach?”

She smiled at him a little, something more akin to playful.  Her steel gray hair was pulled back into one long braid down her tanned back.  “Why do you assume that anyone new to the Guard is a child?”

“They are all children compared to me.”

“Fair enough,” she said with a shrug. “As for him coming to you? Ambition. That and the gang wanted to see if you’d fire him.”

“Of course I’m not going to fire him.” As of right now, that is, the man still had a job.  He could dismiss him tomorrow.  “Why was he there, Cecil? Standard breaches are not my protocol.”

Her face quietened, the playfulness of the moment dissipating.  With a shift, she motioned for him to come closer.  “Something’s different about this one.  Was all the standard signs.  Guards were there before they even cracked through.  But this one didn’t come through a gate like the others.”

Gabriel frowned. “Concerning but not entirely unheard of.”

“It was a crack in the sky, Gabriel. There was no cracking door. Our world ripped open and this poor soul just dropped right to the streets.”  The rigidity within the Warden’s form was unsettling for anyone that knew him.  Cecil had the benefit of working with him for the last few years and becoming one of the few members of the guard who wasn’t offended by his blunt nature.  It was the only reason she didn’t turn away at the line of his jaw. “I already sent a small group out to look at it.  The signature doesn’t track any of the gates we have seen.”

“And you’re sure it was not simply a gate we didn’t catch?” When a door opened, even if it was shut again, a tear within the fabric of their dimension was made. The blemish blotted out part of the sky and if left unchecked, could slowly kill that portion of the market.  But the gate was always the cause.  A tear did not happen without one.

“I’m not sure,” Cecil said. “It only happened this morning.”

It left Gabriel unsettled and very thankful he had not gotten the opportunity to eat his steamed bun. Maybe Adlun would see another day of his job yet. “What cell were they put in?”

“47B.”

“Well,” Gabriel said, “looks as if I will be heading out to do a bit of processing this morning.”

Cecil had suspected as much, and only nodded. “Would you like to go eat your breakfast first?”

“No. No, a matter like this better be addressed sooner rather than later. I can buy another bun this evening.”

She nodded.  “Of course, sir.  Sorry for the inconvenience.”

Making his way back down the hall, Gabriel stared ahead. Beneath his feet the ground became dirt once more and the sconces of runic firelight lit his way.  Up ahead, he could see a cell door opening. A blond man was being escorted out, his wispy blonde hair in disarray, his shirt and jacket missing.  Reese escorted him with a hand to the back of the man’s neck.  It wasn’t an unusual sight to see, but he certainly did not like seeing it so close to the cell he was heading towards. Towards 47B.

“Evenin’ Warden,” the dark skinned man said, his hold still on the shirtless form of the prisoner he just released.

“Anything I need to know about, Reese?” Gabriel asked. Reese and Caliban. They were not a good combination.

“Oh, I’m sure there is.  But don’t you go worrying your pretty head about it,” Reese drawled.

“Hey,” the blonde haired, blue-eyed man looked up at Gabriel, rocking back and forth on his toes. “You going in there?” When Gabriel didn’t say anything, he took it as confirmation. “Go easy on them. They’ve been through a lot. We’re talking, rock back and forth in a corner, a lot.”

Reese rolled his eyes, shoving Caliban along down the cell, not giving Gabriel a chance to answer. Not that he would have.  Instead, Gabriel looked at the twin cells.  The open door and the one shut, housing 47B.  Of all the cells they could put them in, it had to be the one next to the gossip of the market.

Gabriel watched as Reese and Caliban left, heads ducked together in conversation.  He would wait.  47B had probably gotten an earful already.  He wanted to go take a look at the breach before he entered that cell, after all.

Because whatever was in there, didn’t belong.

[[Next|Gabriel 5]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="18" name="Gabriel 5" tags="" position="1000,800" size="100,100">&lt;img src=&quot;images/Constellation 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The night air did little to cool his skin.  Gabriel had never been one to outwardly show any sort of discomfort.  He was not even the kind of man who allowed his irritation to be in full view. However, this was twice now. Twice that this person, this prisoner, had gotten the better of him.  It made his skin itch in a way that wasn’t entirely unpleasant, which then made it unpleasant all together.  Though he didn’t show it. He would never show it. Because Gabriel Caine was nothing if not fastidious, and emotions were paltry efforts of sentimental anxiety that accomplished nothing but irrevocable mistakes.

“Warden?”

Turning on his heel, his sword out, he stared at the man before him. The blade leveled at the broad slope of their nose.  The man was clad in crimson velvet.  Gabriel sighed, letting his sword hand drop.  “Lieutenant.” Meyers. From what he remembered. “Lieutenant Meyers.”

Lieutenant Meyers was looking at him with a wide set of eyes, his hands still raised in the air, as if he were afraid Gabriel would run him through. A fear that was not altogether unfounded, given the slightly unhinged look within the Warden’s gray eyes. “Are you alright, Warden?”

“I am fine.” Gabriel’s voice was flat and monotone as he spoke to the subordinate. “How can I help you?”

“I was just stopping to say hi,” the man said nervously. He ticked his gaze back towards the pink lanterns. “I didn’t know you enjoyed the Pleasure District.”

Gabriel’s eyes narrowed into silver slits as he looked down the alley, following the man&#39;s gaze. The sweet smell of vanilla and brown sugar wafted on the breeze towards them.  “I don’t,” he said.&lt;img src=&quot;images/Sword.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

Lieutenant Meyers looked over his shoulder. Where Gabriel clearly came from. Confusion was clear on his face, especially since Gabriel stood in the mouth of the only alley leading towards the place he apparently had not been. “Oh.  Right. Of course, sir.” he said knowingly.  There was a smile on his lips that said that Gabriel’s secret was safe. But that was the thing. Gabriel didn’t want his secret to be safe. There was no secret to be had. He had simply allowed the day to get the better of him.  The mention of Belladonna. Escorting the prisoner towards her place of work.  The ambrosia.

When he heard Lieutenant Meyers chuckle, he snapped.  His hand flat on the man&#39;s chest, he slammed him against the brick wall. The guard&#39;s eyes went wide, the laugh he held falling away.  “I am going to make one thing abundantly clear here,” Gabriel said. “I do not inhabit the Pleasure District. I do not go there. Nor have I ever. I was simply escorting someone there for safety purposes.  So if I hear tomorrow that your Warden was seen within those walls, I will know who to come for, will I not?”
Meyers nodded his head resolutely, swallowing thickly.  Gabriel could feel the tremble run through him. Good, he thought.

Taking a step back, Gabriel released the man, smoothing a hand down the front of his uniform. “Get your jacket cleaned,” he said, straightening the lapel.  “The Velvet Guard has an image to maintain, and you are certainly a disappointment to that.”

“Yes sir.”

It took no time for the lieutenant to run away. At the sound of his retreating boots, Gabriel stood there, stoic and calm. Above him, the lights swayed, a chilled wind bustling through. A few wanderers edged by him, their heads down as they disappeared through another alley, leaving the Warden standing there. Alone.  Always alone.

There was a pop in his chest as he breathed in the night air.  Hazel’s tonic still sat heavy in his cloak pocket, whispering to him.  He needed to get home and take it. He could feel the control beginning to wane.  But behind him, the faint glittering pink of the lights mocked him, whispering words of comfort to his tired soul.  He wondered what the prisoner would think of her.  Wondered what she would think of them.  He snorted to himself. Knowing Belladonna, she would pump the prisoner of every ounce of information they had before manipulating them into a moment of softness.

All lies.

Blatant lies.

Holstering his sword, Gabriel stared ahead. The green lights that lead towards the docks swung heavy in the distance. Technically, it was still his day off. But there was work to be done.  And in the end, men like him didn’t deserve days off.  Penance didn’t quiet just because a body needed rest.

Alone, Gabriel walked back towards the beach, and towards the solitude of his office.

[[Next|Gabriel 6]]
&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="19" name="Gabriel 6" tags="" position="1000,925" size="100,100">&lt;img src=&quot;images/Constellation 4.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;Gabriel was not a man who often cursed.  He found it uncouth and unbecoming of a person of his station.  Though when the gate opened, practically at his feet, he felt every litany of displeasure course through him.  More people poured through that they had to find support for. Another crack snapped like a chasm through the ever thinning veil. And once more, he was left with more questions and very little answers as to why any of this was happening.  If the day ever did come that he found the Gatekeeper, he suspected he would toss them in confinement simply for the trouble they had already caused.

All he had wanted was a nice dinner, and polite conversation.

The remnants of their snack feast were still on his desk when he arrived back, hanging his cloak upon the curved metal hook by the converted cell door. Unhooking his sword from his hip, Gabriel was beginning to wonder why he even carried it anymore. It was standard issue for the Velvet Guard but he never drew it. Hated the things, really.  They were nothing like how a sword should be and in the end were only a sad imitation of a real blade, clanging against his thigh in irritation.
Sighing, Gabriel pinched the bridge of his nose. There was a possibility he should eat some of their leftover snacks.  Too much wine was fermenting in his belly and not enough food.  Typical night, really.

“Warden?”

“What?” Gabriel snapped. Turning, he found a familiar form. The tall and lanky figure of a sometimes bird, the wisps of his blonde hair sticking up in several directions.  Gabriel sighed at the nervous sight, walking around to sit behind his desk. He had plenty of paperwork he had been too distracted to get done. He may as well spend a few moments going through it all while Caliban spun whatever story he had come to tell.  “What is it, Caliban? I do have work this evening.”

.&lt;img src=&quot;images/Caliban.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;The man, Caliban, shifted from foot to foot, weighing out his words at the obviously disgruntled figure of a guard before him.  “Reese is a bit pissy about the current gate opening.”

Gabriel paused, a stack of parchment fluttering beneath the huff of breath he let out. “You can report back to him that it is not as if I am enjoying its arrival.”

“No. I know. I get it. I really do. But uh– so here’s the thing? He’s pissy in that way where he’s gonna start causing some problems.  Like the bloody kind.”

Gabriel was rather proud of the fact that he didn’t slam his head down into the desk. “Tell him,” he said through gritted teeth, “that I am taking care of it as best as I can.”

“I can tell him that,” Caliban agreed.  He rocked back and forth on his heels, the debate of whether or not he should push his luck clear in his eyes. Not that decisions were Caliban’s strong suit.  The bird tended to go where self-preservation took him, from what Gabriel could gleam. So it was no surprise when he slipped further into the room, shut the door behind him, and plopped down into the vacant chair. 

Gabriel’s eyes ticked upwards. It was the chair they had sat in not long ago. “Or,” Caliban started, drawing out his syllables, “I could go back to him with clear proof of what it is you are actually going to do so he isn’t in the pissy mood he is in.”

Pen hovering over his forms, Gabriel watched as the ink dripped in one long line over the parchment.  “You cannot just appease his anger some other way?”

“What other way would that be?” Caliban asked, confused. “Oh! Wait. You mean blow him? I mean, yeah, I could, but that’s like a daily thing for Reese so I don’t think it’s really a lack of sex that’s…”

Gabriel held up his hand. “Please stop.”

“Right. Probably don’t want to be hearing that stuff about your adoptive dad and all that, huh? I get it. I see you.”  Propping his feet up on the desk, Caliban eyed the wrappers. Crinkled cellophane and bits of cheese cloth were crumpled in the corner. “You a binge eater?”

“I had company earlier.”  Ticking the correct boxes, Gabriel let his eyes scan over the sheet beneath him. The process was mechanical at this point. Gabriel wondered if he would be able to fill out gate missives with his eyes closed.

Across the desk, Caliban grinned at him, his lips stretching into something curious. “Oh really? And who might this company be?”

The most captivating person Gabriel had met in a long time.  It had bothered Gabriel to no end after seeing them at Hazel’s.  Broom in hand, eyes guarded and still unsure.  Gabriel had attempted to soften his tone, trying to convey to them that he was not the enemy. Though he didn’t know if that was really something that could be achieved given that they had met in a cell not far from here.

But he wanted to. Oh, how he wanted to.  The sheer amount of bravery that came with walking back to these caves today was a force that he did not often get to witness.  Normally, in the face of fear, most ran. Fear ruled many within the Night Market. But, they faced a prison that was designed to be an unbearable weight upon their shoulders. They had walked across the bridge and had followed him into this office and Gabriel felt himself feel a notch of surprise over these actions. Surprise and unabashed pride.  It was not many who had a sense of character pure enough to do what they had done.

“Hello?” Caliban waved a hand in front of him, snapping Gabriel’s gaze out of the brief reverie he had fallen within.

Lifting his chin, Gabriel narrowed his eyes. “Why are you really here?”

“I told you. Reese. Pissy. Sex is not working. Please fix it.”

Fighting the urge to roll his eyes, Gabriel set aside his parchment. “I will be going to Miss Albright’s within the hour. Her and Mr. Next are getting the refugees of this current gate settled. It is my hope that I may be able to communicate with one of them for information so the Velvet Guard can do their job.”

Caliban looked at him with a raised brow. “You think people scared and completely confused as to where they are, are hiding things from you?”

“I work under the assumption that most people are hiding things from me,” Gabriel said.  Folding his hands together, he observed Caliban over the tops of his steepled fingers.  Whatever Reese saw in him, Gabriel did not know. Nor did he wish to question it.  Gabriel’s only hope was that Reese was happy after everything that had transpired.  If the conniving little bird man somehow did that for him, who was Gabriel to judge?  There wasn’t a lot of happiness to be had within the Night Market. When one found it, they needed to covet it.

Though Caliban was the sort that made that incredibly hard.

“You are dismissed,” Gabriel said when no further words were exchanged.

“Oh, come on, Gabe? Isn’t there anything you can give me here?  Something that will make him calm down before he goes on a murder spree throughout the docks?” Wildly gesticulating around him, Caliban was making no move to actually leave.  From experience, Gabriel knew these conversations could go on for hours.

“You can tell him that I have made the gates my own personal project. And, given that he is not one to want his identity known, perhaps he should let me do my work.”

Caliban thought about that for a minute before shaking his head. “Yeah. No. That’s not going to fly. That sounds kind of like a threat and you know how he is with threats.”

“Just go, Caliban.  I have seen you locked in these cells far too often as of late.”
Caliban grinned. “Been some interesting people popping into these cells. Can you blame me?”

Gabriel bristled. “You are wasting valuable time and resources of the Guard.”

“You can afford it.” Hopping to his feet, his oversized coat comically slouching across his shoulders, Caliban gestured to the mess of wrappers.  “You should eat, Warden. You’re looking thin.”

Gabriel watched him leave without a word, feeling the tightness in his chest.  He waited a long moment, until he was certain Caliban’s footsteps had danced him down the halls.  The man was no doubt searching for something specific, but Gabriel had long ago turned a blind eye to his ministrations. For Reese, he had always told himself.  For Reese.

Standing, Gabriel stacked the papers to the side, knowing it would be a long night that the candles would burn while he poured over forms that he had been neglecting during his busy schedule.  If he went without sleep this evening, he could maybe get caught up to a more manageable rate.

Grabbing the cloak he had so recently discarded, he clipped it under his chin, sheathing his sword.  To Ms. Albright’s then.  Perhaps, he could find some time to continue dinner if matters were not so pressing.

[[Next|Gabriel 7]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="20" name="Gabriel 7" tags="" position="1000,1050" size="100,100">&lt;img src=&quot;images/Constellation 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The old wooden door slammed shut.

A tear. A fissure within the Night Market. Not a gate. Not an entrance to another world. But a damn fissure. Gabriel could deal with many things but this one felt overwhelming in a way that he didn’t quite understand yet.  It was new and something the Velvet Guard had not tracked, though that shouldn’t have been a point of vexation for Gabriel.

Yet, Gabriel was vibrating with the intensity of his emotions.  He had stormed through the rest of the market, barked out several orders to faceless guards that had gotten in his way upon returning to his office, and then sat at his desk for three agonizing minutes before he shot back up.

“I’m taking the afternoon off.” He didn’t even know who worked at the front desk today. Just that he needed to get out of there. The cave walls were far too small, and the air was cloying.

The house he stood in now was familiar in a way that he rarely admitted. An old water wheel was attached to the broken down boathouse, churning the river in a frothing mixture of algae and fresh mountain stream.  The boathouse itself was dark and Gabriel had been unsure whether its occupant would be home. Not that it mattered. He was always welcome at this particular doorstep. Gabriel hadn’t even been sure if he had ever learned to knock. Today was no different as he barreled inside.

“Whiskey?”  A dark skinned man stood near a stained kitchen table, a bottle in hand.  He was in a state of undress, shirt long since discarded in the heat of the night and pants torn and dirty from working on the docks all day.  Scars were etched into his skin in the familiar shape of wild lightning, crackling faintly against him now that he was home and settling for the night..&lt;img src=&quot;images/Reese.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

“Yes.” Gabriel said without hesitation.

The man gave a low whistle as he handed Gabriel the bottle. When Gabriel didn’t even reach for the glass the man was getting, but instead swigged it from the green neck, the room fell into a tension filled silence.

“Well, I’d say it’s nice of you to visit your dear old dad, but I’m wondering if that joke is going to fall flat with the way you look.”

“I’m fine,” Gabriel intoned.

“You look it.” Gabriel looked wrung out. Hair out of place. Top button of his shirt undone. “Want to tell Papa Reese what’s going on?”

Gabriel shot Reese a look over the bottle. “Must you speak like that?”
Reese snorted in laughter, kicking out a chair.  “When it breaks you out of whatever little tizzy you got yourself in you bet your fucking ass I will.  Now, sit. What the fuck happened?”

“Nothing.” Gabriel practically barked the word at Reese, throwing a tantrum over the fact that the question even needed to be asked.

Reese took it in stride though, reaching across and taking the whiskey from him and pouring his own glass.  “Alright.  We could do it this way. But you know for a fact I’m not a patient man, so I wouldn’t advise it.”

Sinking into the chair, Gabriel stared out the dirty window above the refrigerator.  It was coated in grime and last night&#39;s rain.  “I’m not supposed to tell you what is on my mind.”

“So it has to do with the gates,” Reese said. Gabriel’s lack of response was probably enough of an answer. “I’m taking it that whatever just happened wasn’t something you saw coming.”

“It changes nothing,” Gabriel said with a frown.

“Then what’s the issue?” Reese was staring at him, his patience already thin from a long day within the market itself.  His adoptive kid was not what he had expected when he reached home that night.

“I told you. Nothing.”

“You don’t come here unless you’re upset, Gabriel,” Reese said with an irritated sigh. “So just fucking spit it out, so we can both get drunk and forget about it all.”

Gabriel’s jaw twitched, eyes averted. What was he supposed to say? The individual he had been keeping an eye on came through a tear in reality and not a gate. Somehow, that was significant, but it was only significant in the respect that he didn’t know how to protect them?

Apparently, that was exactly what he said, because Reese was staring at him with that look on his face. That one he gave Gabriel often when he came to visit with a problem at hand.

“You like this person or something?”

“I don’t have to like someone to be concerned for them,” he snapped.

“It helps.”

Gabriel sighed. It was a deep one he felt rattle through his chest. Though the whiskey was helping put him at ease.

“What is it you’re looking for here, Gabriel? I don’t know much about the gates themselves and this tear or rift or whatever you’re calling it–”

“Fissure.”

“Don’t fucking care.  What is it that you’re wanting me to do for you here?”
Gabriel didn’t know. He didn’t know why it upset him in the first place. Why the entire night had put him on edge. There was just something about it that had set him off. That made him wind up here, the very place he avoided most days, seeing the disappointment of a man that had fallen so fucking far from who he had once been.

Slumping in his chair, Gabriel shoved the whiskey aside. “I don’t know what I’m expecting from you.  The day was long and rough.  I did not expect to have to deal with a gate opening and then traversing through the market with one of my old prisoners and Belladonna.”

Reese laughed deeply. “How is old Bells?”

“Don’t call her that.”

“Why?” Reese said with a raised brow. “Thought you two were done.”

“Reese, please.”

“I always liked her. She took shit from absolutely no one. She–”

“Reese!”

He held his hands up in surrender.  “Look, if that’s what this is, you having a shit day at work and walking around with Belladonna and who I’m assuming is your new squeeze, I get it.”

“You get nothing.”

“Come off your high horse, Gabriel.  Sometimes, we just have a bad day. You are not immune to it, despite your angelic past and your position as Warden. Fucking accept that, welcome the pain and then decide if you want to do anything about it.”

Gabriel’s lips curled downwards in an angry frown. He should have known Reese would give him nothing but sarcasm.  The man had never been good at comfort. Not since Elias and it was questionable if he had been before.

“Gabe,” Reese said softly. “I mean it. You are allowed to have a bad day.”

A bad day was not in his making.  There was an order to the world and Gabriel was one of the ones that helped enforce it. People like him didn’t get bad days. They got even days. Ones that they were satisfied with their work, or not.  Gabriel did not get to have a personal stake in the events of the world or how he felt about them because that way laid madness.

Standing, he straightened his coat. He shouldn’t have come here.  He had paperwork. And given what they now knew about the fissure, he needed to get back to his office and go over the reports they had on the gates.  Perhaps there was more than one. Maybe they had mistaken some earlier gates. They would all need rechecked, of course.

“Gabe, come on, stay.” Reese said. “It’s been a while.”

“Not tonight.” Turning on his booted heel, Gabriel stopped, feeling his shoulders tense.  Closing his eyes, he shook his head. “We’re going to be contacting all the Baron’s,” he conveyed in a low voice despite no one being around to hear.  “They want to name the one who came through the rift namekeeper.”

Behind him, there was a marked silence before Reese even responded. “Interesting.”
“Please pretend like we are acquaintances during these upcoming matters.”

Whiskey being poured into a dirty glass echoed through the room.  Reese said nothing to that.  When Gabriel left the house, the door shut behind him much quieter than when he had come in.  Only momentarily did his face twist in grief for the man inside. For who he had used to be. Then, the Warden was back in his place once more, ready to greet whatever was to come.

[[Next|Gabriel 8]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="21" name="Gabriel 8" tags="" position="1000,1175" size="100,100">&lt;img src=&quot;images/Constellation 4.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The night air was cool and crisp, the lanterns up above swaying in a gentle lull.  The festival was slowly beginning to calm, the last of the party goers stumbling drunkenly through the streets.  A few of them straightened their spine upon seeing the Warden, sure that public intoxication was going to be a one way ticket to the pits.  Not tonight, however.  Drunken revelry was allowed on nights of festival. As long as no one got hurt.

Wandering through the nearly empty streets, Gabriel sighed contentedly. Ghost wine was still thrumming through him in a pleasant tingle.  By the Knowing, how he wished he had been able to be a tad bit more sober when dropping them off at the apothecary. Perhaps if he had been, he wouldn’t have stopped himself.  Then again, he wanted them to be clear-headed as well. Equal choice.  Both of them knowing what was to come and feeling themselves tumble over the precipice together. Was that even possible? He hoped so. For far too many years he didn’t believe he would ever be given that chance.  Tonight, however, that might have changed.

The lights turned a faint blush above, the street smelling sticky sweet as ambrosia filtered through the air.  Not that it had much of an effect on him now.  Wine had always been a bit more potent to him than the burnt sugary spells of the Pleasure District.  Or, at least that’s what he told himself. At this moment in time, he was thinking that affection was causing him far more feelings of emotional stupor than whatever was pumped through the air.  Their eyes had been so bright. Like flickering lanterns, renewed for the years once more.  

Winding his way through the alleys, Gabriel was for the first time only intending to make the last of his rounds before heading home. But a bawdy laugh stopped him in his tracks.  It made his spine straighten out of its lax curve and the soft smile on his face melt away into the stoic mask of the Warden.

Stepping around the corner, he nearly sighed. Perhaps it hadn’t been such a good idea that he had drank after all.

The man leaving the Pleasure District was shirtless, in loose fitting jeweled-toned pants.  His skin was dotted with broken shards of diamond or glass, Gabriel had never been sure. They jutted from his skin, coated in the pale glitter of the district, as much a part of him as any appendage.  Fiery hair hung loose around his face and a pipe was clutched between his teeth. Ducking beneath the main arches of the district, he did a double take as he saw Gabriel standing there, as if he had been waiting for him.

“Casimir Alskar,” Gabriel said. “You know you shouldn’t be here.”

The man in question turned, smiling at the Warden as he pushed his hair from his face.  He stood just under seven feet tall and was a wall of muscle. Heterochromia eyes greeted Gabriel, but not in anger. Instead, the green and blue gaze looked relaxed and a bit conversational. “Ah, Warden Caine. It is a pleasure to see ya, boy.”

Gabriel fought the second sigh of the night.  “Mr. Alskar, I thought we had an understanding that your presence within the Market is prohibited.”

“We did. We did have an understanding,” he said between puffs of his pipe. It was clear that while the understanding was there, there was no real remorse for breaking it. “Lovely festival tonight.  One of the best in years.”

“May I escort you to a gate, Mr. Alskar?” Gabriel offered. He was hoping the man would take it. After such a relaxing evening, a fight with the likes of the giant was not what Gabriel desired.

“Now, I think we both know tha’ ain’t gonna be happenin’.” Casimir laughed. It wasn’t a mocking one but more of just a knowing tone that said he was very comfortable where he was at, thank you very much.  The thing was, Gabriel couldn’t even fault him.  It wasn’t like the giant of a man did anything wrong. It was just that bad things tended to follow him wherever he went.

“Alskar, the Wild Hunt is still after you, from what I know, and I do not wish for them to crash through my market again.”

“Oh, I don’t think they’ll be doin’ that.  It&#39;s a festival.” His smile was tight though at the mention of the Hunt.  Rarely did anyone react kindly to them.

“The Iron District is not far from here. Odin still wishes to see your head on a pike at the front gates,” Gabriel continued to try and reason.

“I would very much like to see him try. Might be entertainin’.”

“Just because you are– friends, with a Baron–”

“Which one?”

Gabriel sucked a breath through his teeth in an irritated hiss while Casimir’s echoed throughout the district. Stepping closer, the man slung one meaty arm around Gabriel’s shoulder. It was rare that anyone was able to even do so. “I’m just messin’ with ya, Warden.  I’ll be goin’ soon enough. Want to stop off and see my– what did you call them? Friends?” He shook his head at the title. “Don’t think either of them would appreciate bein’ called that.”

“Do I have your word you will be leaving after that?” Gabriel asked.

“Aye. But why don’t you come and escort me there. Just to make sure everything is all on the up and up.”

Gabriel nodded solemnly. This, he could do.

As they began meandering down the alleyways, Casimir in the lead, the two men lapsed into silence.  Gabriel had his hand on his sword hilt, almost certain something was going to come crashing through the walls at any moment. When one of the most wanted men across the cosmos entered the Market, he didn’t feel like anyone could breathe safely.

“What are ya doin’ still working’ on a night like this?” Casimir finally asked, puffs of glittering smoke curling from his pipe.

“I was off duty until I ran into you, actually.”

“Is that right? What does a man like you do on your off duty time? I always figured you for someone married to your job. Never heard of you in the different districts unless you’re patrolling or apprehending someone. You got a personal life, Warden?”

Gabriel kept his eyes forward. Far too often lately, people had accused him of not having a life outside his job at all.  It was starting to get a tad bit offensive. “If you must know, I had a lovely evening drinking wine with a friend of mine.”

Casimir grinned. “This friend the same kind of friends I got?”

No.  Not yet. Though Gabriel had hope.  It was small and blooming and for the first time in a long while, he was allowing it to see the light.

“Ah,” Casimir said. “It is, isn’t it? Good for you, Warden. Life is not worth livin’ without a bit of companionship.”

“Some would say you have too much companionship,” Gabriel bit back. Though Casimir didn’t take offense to it.

“Most would say that, yes. But we’re not talkin’ about me, are we? Talkin’ about you.”
Gabriel frowned. “Why would you wish to talk to me about my personal life? I have arrested you at least three times.”

“Now I could be given’ ya a flippant remark, but I don’t suppose you would appreciate that much. So instead, I’ll tell ya this.” Letting a curl of lavender smoke fill the air, Casimir breathed it out from his nose in two long curls.  “I like ya, Caine. I think you do the best you can in a Market of genuine deceit.  Now you don’t ‘ave to tell me anything of your evenin’. I’m just trying to make conversation while I get back to my own.  But, I have been told I am a good conversationalist if you want to say a word or two. If not, we can just walk these roads in silence.”

Gabriel thought about it. When was the last time he had a conversation with someone just because? Perhaps tonight, on the beach, but other than that? When? It had been so long and those moments were shrouded in such blatant deception that even if the memories were true, he felt them to be tainted now.

Perhaps it was the lights of the festival, perhaps it was the wine, or perhaps, Gabriel was finally starting to turn the corner of tight-lipped soloist to something more. He couldn’t quite say why he spoke the words he did next. Only that they were out in the night air, and he didn’t actually feel that guilty for uttering them.

“I have someone that I would like to see more of,” he said softly. “I was spending the evening with them.”

Casimir grinned, pipe clattering between his teeth. “Do ya now?”

“Yes. They are– enchanting.  I have not found myself as of late, as someone that can open myself up to others. Share a meal with. Or a drink.  Yet, they keep bringing me food and seem to genuinely care about what I feel. It is– strange.”

The clap to his back nearly knocked Gabriel off his feet.  Casimir’s hand was meaty and had a force behind it that the man often forgot.  “Good for you, lad. Good for you.  Like to see ya loosen those shoulders a bit when you&#39;re not on duty.”
“It’s all very new,” he said, straightening his jacket. “I am uncertain if they feel the same.”

“If they’re bringin’ ya food, they feel the same.  Food is a love language that is most accessible.  Bet ya anything they have it for you too. And why wouldn’t they? You’re a striking young man. Got a good job.  Know yourself well. You’re a catch. Just got to believe that ya are.”

Gabriel frowned.

“Take it you were hurt in love once or twice.” When Gabriel turned sharp eyes to him, Casimir nodded knowingly.  “Been there. It’s a knife straight to one&#39;s heart.  They tell ya time will heal it but for beings that have all the time in the world, don’t think that really counts.  But I can tell ya this. Your heart can expand. It can move on. It can provide room for others. And sometimes, just sometimes, that one that broke it originally, can come back.”

“Do you make amends with that person?”

“You try. And that’s all that can really be asked for. And it’s a damn sight more than you had before. And healin’ from old wounds never negates new experiences.” Stopping, Casimir turned to look at him, stooping a bit to meet Gabriel’s eyes. “Don’t let your past shut you off from your future.”

Gabriel blinked at him, feeling something slot in his chest.  An old wound. One that had never been allowed to heal. It tore, and it bled, but it didn’t run with the thick poisonous tone of deceit and bile. Not tonight.

“Now,” Casimir said, dousing his pipe and pulling his hair back. Brushing off some of the glitter from the Pleasure District, it was clear he was trying to look presentable.   “Gonna go see my friends,” he grinned.  Gabriel looked up. He hadn’t even realized they had arrived at the arches of the Book Baron’s enclosure.  “They were off at some show tonight, and I promised them I’d meet up with them before takin’ off again. Chryssi’s probably going to demand I stay.”

“Is it going to work?” Gabriel asked, both fearful that he would become a fixture in the district and out of genuine curiosity.

Casimir looked genuinely sad at the question, however, turning his eyes towards the walls of books. “Not yet,” he said softly.  “Too many after me. Too much pain following me around to do that.”  Regret pooled in his words as he ticked his gaze away from what was before him.

“I thought your past shouldn’t define your future?” Gabriel asked softly.

The bark of laughter that erupted from Casimir’s throat was genuine, but he didn’t answer Gabriel. Just nodded his head knowingly.  “I’ll be goin’ now. Your market is safe once more.  It was good speakin’ with ya, Warden. Hope this new love of yours works out.”

As he disappeared through the gates, Gabriel watched as books stacked up behind him, blocking Casimir from sight and anyone else from entering the district.  Giving all three of the ‘friends’ privacy.

“I hope so too,” Gabriel said to the night air.  “I truly do.”

[[Next|Gabriel 9]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="22" name="Gabriel 9" tags="" position="1000,1300" size="100,100">&lt;img src=&quot;images/Constellation 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The room was sleek, devoid of personal touches and mostly gray.  Soft light came from a single lamp tucked away in the corner, illuminating a writing desk scattered with missives and papers.  I sat on the bed, propped up by pillows and blankets, blinking as I tried to puzzle out how I had gotten here.  At some point, fresh from the shower, I think I had blacked out.  Exhaustion or pain had finally consumed me and now that I was awake, I felt wrapped in cotton.

The door to the right opened, and Gabriel slipped inside. A small tea cart was rolling in front of him, the metal of the wheels rattling ominously.  The cart looked rusted and more like a medical tray than a vessel for the fancy carafe of tea it actually contained.

“You’re awake.” Gabriel blinked at me, pausing for a moment in the door frame. His normally slicked back hair hung in his face and the top waistcoat of his uniform was discarded elsewhere, leaving him in a black tight woven turtle-neck that showed off every line of muscle on his well-defined chest.

I scooted over a little, allowing him room as he pushed the tea cart to my side.  Steam filled the small expanse between us, the tea he poured smelling spicy and making my nose wrinkle.

“Drink this please. Ms. Albright says that it will help with any sort of wounds we might not be able to see.”

Knowing it was from Hazel, I took it immediately.  “You got a hold of her then?”

“I did. She was most concerned, but I told her that you were in good hands here.  I did not want to move you back to your bed after you had become unsteady on your feet, post shower.  And, I admit, I have an overwhelming selfish desire to keep you here for a bit longer.”.&lt;img src=&quot;images/Tea.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;650&quot;&gt;

The tea itself was bitter and settled against me with a healthy burn before sitting in my stomach. I could feel something else beneath the spice, however.  As if flesh and bone were coated with a strength that I hadn’t realized I had lost.  While I didn’t particularly like the tea, it was medicine. There was probably no point in fighting it.
Looking around the room, I tried to discern where exactly we were. I remembered Gabriel leading me out of his office and I had followed him willingly despite not knowing where we would end up. The slow tingle of his lips upon mine were still at the forefront of my thoughts when he had requested I please take a shower.  The warm water had felt delicious after the chill of the Deep and I had stayed beneath the spray far longer than necessary.  The soft robe I had wrapped myself in afterward had tipped me over the edge, I suppose. I didn’t remember winding up in bed on my own volition.

“Is this your home?” I asked.

Gabriel gave a soft chuckle. “Occasionally. I have a different place on the other side of the market, but I’m afraid I spend more time here.  This place is a common area of sorts. For when the men and women under the Velvet Guard are too tired to make the trek home. Or for when their shifts bleed together. This place provides them small comforts.”

I looked around. “Gabriel, this place isn’t very comfortable.” Homey was not how I would describe the surroundings by any means.  It was lifeless.  Even if it was a place shared by many, I would have thought there would be some effort into making it friendly. It resembled barracks more than it did a soft place to rest. Though, I did have to admit, the bed was nice. So was the robe.

“I thought you may deem it such,” he said. “That is why I had someone rush to the market and get you that robe and a throw blanket. The tea set is mine.  I do keep some finery here for matters of importance.”

The tea set was polished silver and far too nice for the Guard. “Manners of importance like the person you once tried to arrest, nearly dying when trying to save the world?” I couldn’t tell if I was being bitter or not.  More likely, I was still coming to terms with the strange course of events I was now set upon.

When Gabriel’s hand touched my cheek I was startled.  Such an action, coming from him at least, was still one I was not used to.  It was certainly not one I would expect around the others and even here, where no one could see us, I could see his hesitation.

When his hand slipped away, he refilled my tea once more, perching stiffly at the edge of the bed.  “I have only been to the Deep twice,” he volunteered. “Neither time I found it pleasant.  It may take a few days for the chill to leave you. I found that hot showers were somewhat helpful during the preceding hours.”

“Why were you in the Deep?” I was desperate for someone to understand what I had been through, though the idea that he had been down there, swimming in the light of the angler fish, and had still let Hazel and I venture forth, was unsettling.

“I had to escort Belladonna. Twice,” he said, shifting uncomfortably.  “Once, the journey ended in an overnight trip to the palace. The other time, we were only there for a matter of hours.  While I am sure my experience is not indicative to the entirety of that district, I merely found it cold and alien.  Too many dangers set out in the open. Irresponsible, really.  Though, I will admit that the coral knights are an ingenious bit of technology that I do wish I could implement within the market here.”

“Technology?”

He hummed in response. “It is what I consider them. I do not believe they have sentience as people claim.”  Grabbing a small satchel from the second tier of the cart, Gabriel turned towards me. “I wish to bandage your wounds. Ms. Albright said to let them breathe while you slept and then to put several concoctions over them.  The tea should have a numbing effect, so this should not sting.”

I stared at him. The wounds he spoke of were swiped across my belly. A few across my arms.  I was wearing nothing but a robe, however.

Seeming to understand, Gabriel averted his eyes.  “Just place the sheet across anything you are uncomfortable with me seeing,” he said, voice suddenly gruff and edged in restraint.

The slip of fabric over skin echoed unnaturally loud in the dim room.  I swallowed thickly as I pulled my arms from the robe and arranged the sheets in such a way.  When Gabriel’s eyes still remained down something warm fluttered in my belly.

“You can look now,” I told him.  His head lifted beautifully then, and I realized he was waiting for my instruction.

Silently, he began examining the various contusions across my bare skin. There was one particular split of skin against my side that caused his lips to purse with agitation. A lock of hair fell over his brow, blocking the soft gray of his eyes as he fixated on the angry slash and the way it tore like paper against me.

“Gabriel,” I tested. I was curious, really.  He had seemed so sure of himself back in the office.  But fell in line with what I wished for him to do.  “Keep talking, please,” I told him. “I want to hear the sound of your voice.”

The response was almost immediate. While his fingers still worked a green cream into the wound, placing small butterfly bandages across my skin in lieu of stitches, his words filled the room without hesitation.

“I was merely in the palace area and a hut that was not far from the royal gates,” he continued his story from earlier. “It was quite a few years ago, but it seemed mostly uninhabited. Though I have heard word that there has been quite the revival around the entrance to the district. Ms. Feri, for example, has a shop that would have been laughable a few years before. I do appreciate their attempts at civilization.”

“Where I was, wasn’t all together civilized,” I told him.  The entrance, perhaps. Just past the selkies. But the tunnel down into the frigid waters below the palace was devoid of anything but the horrendous images that lurked in the dark.

“What do you mean?”

“I ended up going beneath the Baron’s palace, through an access she had in one of her throne rooms. Where I ended up was dark. Angler fish were the only sort of light.  Everything there was monstrous and confusing.”

Gabriel’s hands paused, warm fingers pressed against my side. “She should not have access to a place such as that.”

“I get the impression that there are a lot of things the Barons have that they should not have access to,” I said softly.

The frown that twisted his lips was one of deep concern. Before I realized what I was doing, I lifted my hand to cup his jaw, much like he had done to me earlier. I kept my touch firm, however, dragging his gaze to mine.

“Stop,” I said softly. His hands fell limp in my lap. “Are you beating yourself over all this?” I asked.

“Yes.”

“Gabriel, you shouldn’t. What happened down there was not your fault.”

“Was it not?” His eyes flashed silver before falling to the soft dovetail gray. “Was I not the one who escorted you to the edge of the ocean and bid you farewell?”

I sighed. It was doubtful that I had enough energy to deal with this at the moment and in truth, I needed to process the events just as much as he.  But at the same time…

“I am tired,” I told him.  “I may need some time before I can have this conversation with you.”

His shoulders slumped. Turning his face in my palm, he kissed the soft flesh there.  That was twice now, in one night, and I was finding I quite liked the sensation.  “Apologies,” he murmured against me.  “I am afraid I will have to insist that we get the rest of your wounds bandaged, however. Then I am yours for the evening.”

He pulled away from me, his lips lingering against my hand for a moment longer, before he began ministrations once more.

“Did you take the day off?” I asked, registering his words.

“I have.”

“However will the Guard manage without you?” I teased.  Whatever had been in Hazel’s tea was making me feel light and airy and despite him prodding at an open wound, I felt nothing.

“It will be a difficult task, but I believe the men and women I employ are up for the challenge.”

I huffed out a breath of laughter, feeling a slight exhilaration now that he was beginning to become comfortable enough to joke with me more often.
When he was done, Gabriel packed everything away, took my empty cup, and pushed the tea cart to the side.  Still at the edge of the bed, his head remained bowed for a moment as he breathed deeply. When he looked up, it was with a sense of openness that I knew he didn’t gift to people often.

“I would like to stay with you,” he whispered. “If you will permit it.”

I didn’t hesitate. Moving over, I pulled back the soft throw. The one he had someone buy for me specifically.  I watched as Gabriel slid his own boots off before pulling himself up onto the bed.  Slowly, he placed a warm arm around me and I felt myself melt against him, my eyes growing heavy.

“Please sleep,” he requested. “There is much more we can talk about in the morning.”

“Because you are off work,” I reaffirmed.

Brushing a soft kiss to my forehead, he smiled against the crown of my head.  “Because I am off work.”

And with that, I snuggled against him. “Good.” I was asleep before the affirmation even left my lips.

[[Next|Gabriel 10]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="23" name="Gabriel 10" tags="" position="1000,1425" size="100,100">&lt;img src=&quot;images/Constellation 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;It had been days. Three, to be exact. I had not seen Gabriel since the night of Elias.  Since we had gone back to his place and sat in a bare living room, listening to Reese sing loudly as he destroyed the kitchen but made quite possibly the best meal I had had since arriving in the Night Market.  That evening, Gabriel had walked me back to the apothecary and kissed me softly on the lips.  I had not seen him since. Several times, I had tried to contact him, going so far as to make deliveries in the areas I knew his patrols took him. But Gabriel was nowhere to be seen.  So, on the third day, when I came downstairs for work and Hazel handed me a picnic basket with a pointed look in her eyes, I grabbed my cloak to protect myself from the chill, and made my way to the office. If Gabriel was not there, then at least someone may know where he would be.

But, Gabriel was buried under a mountain of paperwork when I arrived.  Next to the door, I could see his coat. It was wet and hanging from a hook, a puddle forming beneath it.  His sword leaned against an overflowing wastebasket and I could see his spare pair of boots caked in mud.  At his desk, Gabriel sat slumped, one hand threaded through his hair as he leaned forward, scribbling furiously at forms.
Sighing, I stared at him for a long, uninterrupted moment.  The normally very put together facade of Gabriel Caine was a mess.  It was clear he had not changed his clothes in days, his shirt wrinkled and slightly stained at the collar.  His face looked drawn and the normally vibrant gray of his eyes looked dull in comparison.  I could see him muttering something under his breath, a note of irritation threading through the room.  Reaching out, I rapped at the door to gain his attention. It took two more tries before he even looked my way. When he did, his eyes flashed silver, his body tensing as if he were ready to yell at whoever dared to interrupt him.

His gaze softened as he spotted me instead.

“I was not expecting to see you here today,” he said, markedly trying to bleed the tension from his shoulders.

I tried to keep my expression warm. “May I come in?”

“Of course.” Rising, he made his way to the other side of the desk where the chair I normally sat in was covered in boxes and file folders. Somewhere in all the mess, his vest had been discarded and while I didn’t like the implications that a rumpled Gabriel relayed, I did enjoy the aesthetic.

Moving some of the papers out of the way, he cleared a spot for me to sit.  When I gently pushed him to sit in it instead, genuine surprise crossed his face along with a healthy bout of confusion. His hands came up to steady himself, brushing against my sides.

Setting aside my picnic basket, I tipped my head towards him. It was clear he had not slept. The front desk had said that he hadn’t taken more than a fifteen-minute break at his desk for days.  “When’s the last time you ate?” I asked him.

For a moment, I wondered if Gabriel was the type of man who would dare lie in the face of something he had clearly done.  There was a flicker in his eyes that said that perhaps he was. But, he had been caught and he knew it. Slumping back in his seat, he looked up at me, a slight blush of chastisement coloring his cheeks. “That would require me to be aware of what day it even is.”

“Gabriel,” I sighed.  Turning, I grabbed the wrapped sandwiches Hazel had packed and handed one to him. I then hopped up on the desk. If I had to sit here and guard him until he had a decent meal, I would.  “Noel at the front said that you haven’t been home. Not even to one of the little guard houses.”

“A celestial can go an infinite amount of time without sleep,” he told me.  Both of us knew that was not true.  Mainly because while Gabriel called himself a celestial, he was still one that had fallen from grace.  I didn’t know what that made him anymore but the perks he had had while in the embrace of the Knowing were far different from the ones he held now.

“Could you do me a favor?” I asked.

He finished his sandwich in record time and didn’t hesitate when I held out the second one to him. “Of course.”

“Could you take a walk with me today? I know you are busy but I would like to spend some time with you.”

Something in his gaze broke a little as guilt washed over him.  “I’m sorry that I have not come to see you.”

Reaching out, I cupped his cheek. “I am not concerned about that. I’m concerned about getting food in you.  But, I would very much love for you to accompany me somewhere that isn’t here. I still get a bit nervous being this close to the docks.”

The speed in which Gabriel leapt to his feet nearly knocked me off the desk. He was a man eager to please and even more eager to follow orders. Which was ironic, given that he was supposed to be the one giving them. In situations where he was clearly not taking care of himself, I was finding soft assertive energy worked best with him and I absolutely was using it to my advantage.

“And eat that on the way,” I told him, motioning to the second sandwich.  He nodded, grabbing his cloak from the closet since his jacket looked like it would take days to dry.

“I’m sorry. Yes. Of course. We should leave here. Go somewhere else.”

“Some place quiet,” I suggested.

“Of course. Of course.  I have just the place.”

Gabriel wasn&#39;t normally a verbal person. He kept his words closely guarded. Oftentimes, I found myself filling in the blanks with small questions or things I had observed. Today, I let that silence pass between us as we exited his office into the night air. I handed him a warm mug of tea that Hazel had prepared, certain that it would have the herbs and tonics in it to fill in the blanks of the nutrition he was surely lacking. Hazel was always very good at anticipating what a person needed.

Sipping at it, he took my free hand in his and led us up a small back section of the beach. Far away from the docks and up a slick set of steps carved out of the obsidian mountainside that jutted from the dark. So covered in shadows this portion of the market had been, that I hadn’t even noticed it before now.  But the winding path that cut through the rock was one that Gabriel had obviously traveled several times before.  His hand upon mine was certain as he gently guided my body around loose stone and cracked steps, until we reached the precipice of the mountainside and stepped out onto a craggy plateau and into a field of stars.

Endless bits of light littered the sky, stretching out into a soft curve until I was aware of nothing but a purpling night and the soft glow of silver light that shone throughout.  Leading me over to the edge of the plateau, Gabriel held me close as the two of us sat, our legs dangling over the cliffside. Below, the ocean churned, white caps rushing into electric plumes of gray as the creatures beneath snapped their tails.  The lanterns were gone from this section of the market, either having never been created or fallen to the salty brine below long before I had stepped foot here.  I curled closer to Gabriel, feeling his arm wrap firmly around me as my hand rested on his thigh.

&lt;center&gt;&lt;img src=&quot;images/Sea night.png&quot; height=&quot;600&quot; width=&quot;550&quot;&gt;&lt;/center&gt;

“I came from there,” he said after a moment.  I tipped my face towards him but didn&#39;t say anything. Letting him speak in his own time.  “Where the ocean and the stars meet. I believe that is where the Knowing still exists.”

I looked out towards the horizon, straining my eyes until I could no longer separate the sky from the sea.  There was a thin cast of silver there. So faint that I almost wondered if I was making it up.

“It’s funny really. Elias and I both considered that home for so long.” His voice cracked on Elias’s name.  It fell strangely flat around us, as if the word itself had been tumbled over sharp juts of rock and now resembled something completely different from what it was before.  “We used to obsess about getting back there.  We would sit up at night and speak of it.  Of how to fall back into the grace of the Knowing. Of the things we missed.  The places we would go sit and bask within once we got back.  Endless nights were spent trading memories back and forth with each other.  It is what brought us so close together, I suspect.  We were the only ones who knew of what each other spoke.  There was comfort in that.”

“You both were a connection to home,” I said. Despite what I thought about Elias, it was clear that the man had once meant so much more to Gabriel.  I didn’t know if I would ever be able to view him as the man that Gabriel described, but at the moment, it was clear I didn’t need to.

“That’s what I find so frustrating about it all,” he confessed. “We were so focused on the home of the Knowing that we did not focus on the home we had right here.” A small lock of hair fell from its place, slashing across his silver gaze.  Two star points, I now realized, lighting him from within.  “Reese was home,” he said firmly. “He was the one who saved us both.  He dragged Elias from the madness when it first started taking hold and dragged me from it as well. And if Reese didn’t know how to do something for us, he went out and found someone that did.”

I ran a hand soothingly up and down his leg.  “He seems like a very good man.”

“He’s not,” Gabriel laughed.  “He could have been but… everything got so fucked up during those days.” I startled.  It was rare to hear Gabriel speak in such a way and for whatever reason, it cracked through me in one long burning line of pain. Like a breaking of a bone.  Gabriel was hurt. The time spent at Elias’s was still haunting him and the mistakes of his past were rattling around in such a way that was threatening to tear him in two.  I could feel it all. Here. In the endless dark. I could feel his pain as if it were my own.

“The things that had happened are ones I never wish to repeat,” he told me softly.  “But they were preventable. I believe we could have prevented this. Saved Elias. Saved Reese. They could have still been together if they just hadn’t wished to save me.”

“Gabriel,” I swallowed the lump in my throat, feeling the tears that now coursed down his cheek. “They loved you.  They still do.  While I don’t know what happened, of course they saved you. That’s what parents are supposed to do.”

He was silent for a moment as he looked out towards the line of silver. “I wish they hadn’t.”

“Why?”

“Because it makes it so I can never save them.”

I didn’t understand. I knew I didn’t and I was now wondering if I was meant to.  I just stared at him, squeezing his hand tightly to try and offer him whatever comfort I could.

“I need something from you,” he said, a fervor of determination in his voice.  “And you must give me permission because I do not wish to take anything from you that you do not wish to give.” Even if it would help him. I could hear it.  He would rather sit in discomfort than cause me to feel any of my own.  It made my heart ache for him even more.  

“What do you need?” I asked.

“Allow me to kiss you.” His head ducked down. “Please.”

“Gabriel,” I huffed in surprise. “You of course can kiss me.”

His hands were on my hips and with strength that was terrifying to behold, he swung me onto his lap. My thighs bracketed his own and I was aware that the only thing that was keeping me from falling backwards over the edge and into the void, were the clasped hands at the small of my back. He slotted me firmly to him, pressing me tight against his lap until his belt buckle dug into my stomach.  Then, his lips were on mine. They were full of demand and raw need and I felt my heart flip over in my chest as I feared the world would give out beneath me and I would fall into the ocean below. But before me was a storm. One that pulled and grabbed and begged for me to take away his pain.  And by the Knowing did I want to. More than anything, I wanted to take away his hurt and toss it to the creatures below where it would be buried in the Deep.

Pressing myself forward I felt a deep moan rumble through his chest as he gripped me tightly, rolling his hips up towards mine. Warmth pooled in my stomach as he tilted his head in just such a way, asking me to control the kiss even further and inviting me to run my tongue past the seam of his lips.   Gabriel’s hold on me remained tight and unrelenting as we explored each other&#39;s mouths beneath the stars. Slowly, he began to lean backwards until I was stretched across him in one long line, our legs tangling together. I could feel his heart thundering beneath my fingers as my hand snuck up under his shirt to rest upon his chest.  

Pulling back, he stared at me, his eyes a deep silver. The hold he had on me was all consuming.  It pulled me in, not allowing me a second to breathe or shiver without him. It was then that I knew.  Falling in love with this man would be brighter than any light from the great beyond.  Falling in love with him would burn me from within and push and pull me into something far more than I ever thought I could be. And in return, Gabriel would give me each and every inch of himself until the two of us could no longer tell where one began and the other did end.

“We should stop,” he said, though he looked as if he didn’t want to. His breaths were coming out in stuttered pants and his pupils were blown wide with desire. When his hand came up to cup my cheek, he dragged his thumb across the swell of my bottom lip.  “Tell me we should stop.”

I didn’t want to. I wanted to feel his skin against mine and understand what made him tick. I wanted to have those hands grip me and tug my body against the naked expanse of his own. I wanted it all.  But I didn’t want it to be in response to grief.  I didn’t want Gabriel to regret a single second of it.  

So touch. Touch would be what I would give him for a brief moment more, knowing that he trusted me enough to stop him before it went too far. “Just a minute more,” I told him.

Rolling us, he braced his arms on either side of me, locking eyes with my own. His gaze was deep and intense and ever so slowly, he lowered his hips down onto mine.  I arched beneath him, gasping at the contact and the hard outline I felt there.  Keeping his eyes locked to mine, he began rolling his hips softly, my legs falling open as a shiver rolled across my spine.

“One minute,” he repeated.

Leaning down, he captured my lips against his own again, gasping into my mouth as I ran my hands down his back.

And above us, the star twirled, and upon the horizon, a silver cast of light flared.

[[Next|Gabriel 11]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="24" name="Gabriel 11" tags="" position="1000,1550" size="100,100">&lt;img src=&quot;images/Constellation 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;When the old Warden had died, dozens lined up to take his place.  They vied for the role as if it were sport, laying laws down with no real jurisdiction and placing the market in a militant venue of opposing sides and rule.  Gabriel, had not wanted the job.  He had not been one of the ones to come forth while the old Warden’s body was still cooling.  Gabriel, in fact, had liked his current position. That is until it had all gone south.

In the end, the role of the Warden fell to Gabriel because there was no one left. The market was desperate for order and the lawless districts that had been running amuck and treating their sectors as if they were king, were quickly brought to heel.  It left Gabriel sitting on the so-called throne.  He never did take the Warden’s office though. He had renovated one of the cells inside the main hall. Anyone who escaped had to go right past his door.

He looked around that office now, as if somehow it would be changed. The market itself felt as if it had shifted that night and it left Gabriel looking into every corner, trying to find the anomalies that he could feel lingering in the air.

Caliban was gone.

It was an odd sentence to say and he supposed he should probably tell Reese. Eventually. Neither of those men had any notions of love with each other but they had filled some sort of void that Gabriel had not understood.  Not that Gabriel understood much, he was finding.

“Warden?”

Hazel Albright stood in the doorway to his office, a basket of something delicious in her hands. It was rare for her to venture from her home and he could see the clear hesitation that was lining her face.

“Ms. Albright. Did something happen?” He was up and out of his seat, rounding the desk with fear easily written across his face.  

“Well,” she started, “I think we both know something did happen.” She gave him a weak smile and Gabriel paused. 

“I assume you have been filled in.”

“I have.  I also got told about the dressing down you received and thought maybe you could use some muffins.”

Slumping against his desk, Gabriel crossed his arms in front of him. A shield, of sorts.  “That is very kind of you but I assure you, it is unnecessary.”

“So you’re not taking into consideration what they said to you?”

He was.  He was far more than he should admit. Acknowledging that he had done wrong all these years was a bitter pill to swallow but one he thought he could endure. But fixing it?

“The market has always been a certain way, Ms. Albright. You know this.”

“Please, after everything we’ve been through couldn’t it be Hazel?” She set the muffins down, unwrapping them and placing one next to him on the desk. She would not push him to eat, but the request was clear.  “And yes, the market has always condoned things like the docks and the auctions. The flesh pits. But it doesn’t mean it has to.”

“We are a nexus point, Ms. Albright. We must respect what some cultures deem wrong others do not.” It was an old line that he couldn’t even remember obtaining. Somewhere along the way it had become a reflex to recite.

“We are a nexus point. You are right. But we are a nexus point that has our own set of rules.  Why are we catering to everyone else’s?” Sighing, Hazel reached out, patting Gabriel on the shoulder awkwardly.  He startled a bit. It was clear the two of them were acquaintances that never would have run in the same circle if the circumstances had been different.  

“I cannot just overhaul an entire system,” Gabriel said softly.

The sympathy that fluttered across her almost made Gabriel feel ashamed.  While he had never been a boy, he imagined that this was what it felt like to be scolded by one&#39;s mother. “I believe that because you are a Warden, that is exactly what you can do.”

When he looked at her, he found no judgment. Lucinda Albright had been harsh and had nearly brought the market down with her.  It left Hazel well aware of the bitter truths of the Night Market. Yet, Hazel was a woman who held firm to what she believed was right.  Gabriel didn’t know if he could say that about himself any longer.  He had never actually sat down and considered if he viewed his actions as right or wrong.  He supposed, he was simply someone that had inherited a title and was going through the motions of the previous ghosts who had walked his path.

“Ms. Albright, do you think you could do me a favor?”

She perked up at that, looking both startled but pleased. “Yes. Of course.”

“I have a feeling I will be working very long hours in the future.  Ones that will take me well into the night.  And there is a certain someone we both know who will most likely show up with food.  Could you please give them a pay raise so they are not wasting their money on me? And in return, I could pay you handsomely for the endless amount of wakeful tonics I will be requiring.”

Hazel laughed, hiding it behind her hand, her eyes shining bright.  “How about I just send over some meals with them and an enchanted rune to keep everything fresh?”

“That would be beneficial.”

“Strictly off the record, of course,” she said, winking theatrically. “Since we aren’t supposed to have magic.”

“I do suppose that bit of hypocrisy is going to have to end as well.”

“Maybe just don’t go on a witch hunt for those of us that can easily still do it,” she suggested.  He nodded at her solemnly. Hazel had played the game well for so many years, he owed her an overturn of policy. “Well,” she said, brushing her hands off on her skirts.  “I should be getting back. If there is going to be a bit of restructuring, then I suspect I can sell the spells that truly need selling instead of doing that behind shadowed doors.”

“Do you wish to reopen Apothecary Alley?” he asked curiously. “We could see about ridding it of the spirits and having people come back in to set up shop.”

Clearing her throat, she smiled at him nervously. “I don’t think the spirits will be a problem for much longer.” Then, nodding towards her muffins, she turned to take her leave.

“Hazel,” he called after her.  She paused at the door, looking over her shoulder.  “Thank you. You are a kind soul for being a daughter of the market.”

She smiled softly at him. “And you are a good man for having fallen from the Knowing.”  

She let the door shut behind her with a gentle click.  While Gabriel, began drafting a report to send out to his lieutenants, and a plan of action for the ones who would defy him.

[[Next|Gabriel 12]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="25" name="Gabriel 12" tags="" position="1000,1675" size="100,100">&lt;img src=&quot;images/Constellation 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The blade slashed through the creature, spraying rotted flesh across the white marble floor in a dark brown smear. It died with a wet scream that was cut short by the edge of the celestial blade. Gabriel stared at the thing, panting heavily, while Elias clapped in the background.

“Good job, son!” His voice rang proudly across the meeting hall, echoing upwards towards the fresco ceilings.  Gabriel looked down at his blade, taking out the prepared cleaning supplies he always had at meetings like this, and wiping his weapon down before the rot could fester.  Reese never did send a proxy that was too dangerous. Not after he learned Gabriel was the one having to take care of them.

Setting aside the dirty rag, Gabriel looked upwards at the semicircle of thrones that sat before him.  Nine of them. The monthly Baron meeting came on the heels of Kavatti’s demise, so her chair remained empty. So did the Gatekeeper’s, like usual. Along with the Dockmaster’s since Reese never came to the meeting in order to keep up the ruse that he was dead for Elias.  But, it seemed as if today, most of the Barons did not seem to deem it necessary to attend their meeting.  The Baron of the Deep only had a conch shell in her place, having called in from the depths of her castle instead of making her way to the surface today. Odin was irritated at his inability to get back to the Nine Realms like he initially thought he would so easily do, so his other raven, Huginn/Julien, Gabriel didn’t know which he wished to go by, was sitting surly in his place. And as for the Fates, well, Gabriel was politely told they already knew what the meetings entailed and weren’t going to waste their time. 

In fact, the only true Barons attending today seemed to be Elias. Perhaps, Lady Chrysanthemum.  

“Does anyone know where Lord Taliesin is?” Gabriel asked, sanding in front of the semicircle of half empty chairs and proxies.

“Probably cowering within his gemstones,” Chrysanthemum said airily.

“Lady Chrysanthemum, I notice Lord Taliesin and you do not attend the same meetings. I thought we agreed that the two of you would get past your altercation at least once a month.”

“Did we?” she asked, tipping her head to the side and smiling sweetly at Gabriel. “I do not remember this. Though, if you wish for us to get past it, please, summon him. I would love to see him.” The way in which she tapped her nails made Gabriel nervous.  A redcap princess from the notorious fae realms and the daughter of a bloodthirsty king. Drops of fresh blood dripped from her nails onto the arm of her chair with each thrum of her fingers.  Gabriel doubted an agreement between her and Lord Hynsin was going to be amicable.

“Oh, son,” Elias cooed. “You are doing wonderfully.  I think the turnout today is absolutely splendid.” He snapped his head towards Chrysanthemum. “You are dirtying that chair.” His face was tight with the desire to wipe it all clean. Especially when Chrysanthemum looked him in the eye and gave another pointed roll of her fingers.

Huginn snorted and rolled his eyes, crossing his arms and sinking further into his seat.  

Gabriel looked at him tiredly. “I am assuming The Allfather had something pressing?”&lt;img src=&quot;images/Gabe full.png&quot; style=&quot;float: left;&quot; height=&quot;700&quot; width=&quot;600&quot;&gt;

“Yeah. The Nine Realms,” the bird responded cattily.  “You know, an actual civilization and structure of governance. Unlike this sad excuse.”

Elias rose to his feet. “Take that back, you feathered fiend. My Gabriel–”  Gabriel raised his hand, stopping Elias in his tracks.  “Oh, I’m sorry, son,” Elias said. “I forgot that you do not wish to be acknowledged as my child during public meetings.” He turned to the clamshell next to him, whispering conspiratorially into it. “He fears it undermines his authority.” The clamshell blinked, though Gabriel didn’t know if that meant Kamille was actually listening or if she just had the damn thing on a timer to pretend like she was.

Shaking his head, he set his sword aside, pressing his hands to the table in front of him.  “First thing on the docket is the matter of the Baron of the Mists.” He gestured to the empty seat. “Belladonna Malady has been promoted to that position and will be attending meetings starting next moon.”

“Booo,” Elias hissed.

“She won the role of Baron fair and square, Baron Elias.” Gabriel had known this was going to be a point of contention. Belladonna and Elias hadn’t even been in the same room together for a handful of years.

“Did she?” he asked suspiciously. “Because I do think that she probably cheated her way into that.”

“And since when has that stopped any of us?” Chrysanthemum mused. “I am fairly certain that no one has this position without a little bit of underhanded play.”

“It does not matter how she got the role,” Gabriel said shortly. “She now has it. I expect everyone to adhere to the rules that are in place and treat her as an equal among your decision-making.”

“What decisions?” Julien asked. “The ones that get talked about and never actually exacted? You know everything here is a joke, right? I mean, these are supposed to be the rulers of your so-called land?”

“Huginn, is it?” Gabriel asked tightly. “If The Allfather cannot attend a meeting, I do ask that he sends a missive ahead of time. I do not think it necessary for you to attend for him.”

“He would have,” Huginn nodded. “But, see, I think he might be a bit bitter about you and yours getting rid of his favorite pet.”

Chrysanthemum perked up at that. “Did Caliban go home? Oh, good for him.  Hopefully that means Odin will follow and we will be rid of his stench as well. I will miss you, however, dear Julien. Your bitterness has always brought me such joy.” Ironically, Gabriel didn’t think Chrysanthemum was lying. And Julien even looked slightly pleased by this.

“As it stands,” Gabriel continued. “Next month will need to be Ms. Malady’s initiation.”

“You may have to think of a different initiation for her.” A black tear formed in the room as Noctine Sala stepped through. Chrysanthemum immediately looked towards her husband, a soft sigh on her lips.  

“My darling,” she cooed, holding out her hand. He wordlessly took it, pressing a kiss to the back of her knuckles. “Taliesin didn’t show again,” she pouted. “Bastard.”

Noctine gave her a fond smile, reaching down to brush a lock of hair from her eye before passing his hand over the swell of her stomach where their baby lay nestled within her womb.  When he turned to Gabriel, all softness was gone.

“Belladonna Malady is a vampire. One who has recently gorged herself,” he pointed out.  “A blood rite is not going to be the correct course of action for an initiation. Unlike Kavatti, Belladonna has class and should be respected.  I have already begun a binding process for her new Baron ring and will enact the ritual myself.”

“I object to that,” Elias said. “He cannot have control over another Baron ring.”

“It is not control, Dollmaker. It is an assurance to both her and I that certain people within this room do not take old grudges and wield them like a blade.”

“Because you never do that,” Julien muttered.

Chrysanthemum patted her husband&#39;s hand. “Don’t respond, darling. Julien just lost his brother. He is grieving.” Rising, she kissed Noctine’s cheek, snuggling in close to him. “Buy me something pretty,” she said. “There is nothing of actual importance in this meeting today. Not for you and I.”

“Of course, my darling.” Noctine wrapped an arm around her and headed towards the tear.

Gabriel’s jaw was going to ache the following day if he had to keep pushing down his irritation. “There are things to discuss today,” he called after them.

Chrysanthemum looked over her shoulder before disappearing. “Then I would suggest you discuss them with the people who actually are deserving of that conversation. Because it is certainly not the mockery of what is in here.”

Gabriel didn’t watch the two of them go.  Mainly, because he couldn’t disagree.  The monthly Baron meetings were a joke. Not a single person in the room was making a difference to the dying market. They were sitting back and letting the rest of the world do their job while reaping the benefits they desired.

“I cannot tell if I enjoy her and her husband or think they are rude and in need of a good cleanse,” Elias mused.  “They do have the prettiest set of clothes, however.”

“I’m done.” With a burst of feathers, Julien/Huginn disappeared from the room. While the conch went silent.

Slumping in his seat, Gabriel stared at the empty chairs despondently.  Elias sat on the other side of the table, looking up at him with his bright blue eyes, coated in a silver film.

“This needs to stop,” Gabriel said.  

“These meetings? Yes. They do seem like a waste of time.”

“No,” Gabriel said sharply. “This. All of this.” The mockery.  When was the last time one of these meetings was productive? When was the last time all of them even showed up? They were the nine that were supposed to guard the world and yet they were consumed in petty in-fighting while showing a deep lack of concern for the people that were struggling while they showered themselves in jewels.  

Turning, he looked at Elias. One of the men that had raised him. Who had taught him to always do right.  The disappointment he felt in that man could level an entire district.

“This stops now,” he told Elias. “I am the Warden of the Night Market. I am meant to protect it and yet I have been sitting back, playing nursemaid to all of you.”

“Gabriel.”

“No.” He didn’t move. He didn’t even flinch. Elias startled at his tone all the same.  “I will no longer be seeking permission.  If none of you wish to take the time to protect this world, then don’t.  I will do it myself, if I have to.  I will no longer be answering to the group of nine.”

“That is not the way things work, Gabriel,” Elias protested.

“And yet, it is the way I will be conducting my business from now on.” Pushing himself out of his seat, he grabbed his sword, belting it to his waist.  “This is not a discussion, Father. This is me informing you of how life will be from now on.”  

Turning, Gabriel didn’t dare look at Elias. Didn’t give him the opportunity to say anything more.  He had work to do, after all. And here was the last place he would be conducting it.

[[Next|Gabriel 13]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;
</tw-passagedata><tw-passagedata pid="26" name="Gabriel 13" tags="" position="1000,1800" size="100,100">&lt;img src=&quot;images/Constellation 4.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;It was uncharacteristically warm the day that I met Gabriel at the edge of the bridge. The ocean waves were loud and the clambering of something below echoed across the rolling dunes to the right. A group of individuals, far bigger than I had seen in the market, began patching the recent erosion to the Velvet Guard&#39;s walkway to the caves.  I stood patiently as Gabriel stepped out of the metal door down the way, nodding his head at the receptionist before checking that his sword was strapped to him.  He walked briskly towards me then, uniform perfectly pressed, not a hair out of place.

“Shall we?” He held out his arm in that gentlemanly manner that I wondered if he had learned from observation during his patrols, or if it was something innate to him.  Reaching out, I bypassed the crook of his elbow to reach for his hand, lacing my fingers within his. When his gray eyes glanced downwards, there was a brief twitch of a smile on his lips.  “I thought we could get something warm to drink before our dinner reservations,” he said. “Perhaps walk around the market a bit.”

I nodded, falling into easy steps by his side.  “That sounds nice. There is a new place I discovered, if you want to follow me.” It was far from where our dinner reservations were and in a part of the market that I didn’t know if Gabriel ever traversed.  Given the state of his office and his home, I thought it to be doubtful.  “It has tea and little bubbling shells full of something that Hazel calls Soa and also these really big twirling bottles of steam that apparently turn to liquid when you drink from them.”

“Only drink those if you are of the dragon kin or if you have an esophagus more prone to the heat.”

I blinked, looking up at Gabriel as I tried to decide if this was one of his dry jokes or if this was something I needed to be aware of. His face held no mirth and so I decided I should just err on the side of caution.

“I have a question about that,” I started, the two of us navigating the market alleys.  “Why is it, most people are human presenting? I mean, occasionally, I see people with horns, or their skin will shimmer. Or like the workers down below.  They looked far bigger than the average individual.  Why in a nexus point are there not more differences?”

“Your eyes have not adjusted yet.”

I raised a brow at him. “My eyes default into bipedal humans.”

“No,” he laughed. “Your eyes are filtered not to see the magic.”

“The magic that does not exist here?” It was such a joke at this point to claim that it didn’t, but Gabriel still seemed to cling to the idea of it not.

“I am not sure how to describe it to your satisfaction. But essentially, the market can appear one way when you arrive and then the longer you are here, layers are pulled back to reveal something far different.”

I thought about that. About how the market had been changing before my eyes.  It was a slow change. One that I didn’t realize was happening at the time. But the horrors of the market suddenly took on a different tone, the lanterns had adjusted from their bright and overwhelming light, the smells had evened out to something richer and far more intriguing, and the people that walked the street began to grow in shape and size.

“It doesn’t make sense,” I said. “But nothing about here really makes sense.” Rounding a corner, I tugged on his arm. “Oh, there. That is the place I was talking about.”

The drink cart in question was embedded into the side of the alley wall. Just enough room for two women to sit behind the counter, with three different samovars of liquid.  They poured the contents into the container of your liking and the contents changed based on the container. 

But really, there was no magic within the Night Market.

The two of us ordered tea that was placed in steaming ceramic mugs that we got to carry throughout the wandering alleys.  There was not much in the mouth of this district and I purposefully kept Gabriel here as we drank and exchanged small talk from our day. He had just arrested several individuals who were trying to illegally tunnel beneath the market. I was trying out different pots of milk for Mr. Billows because he clearly did not like the one we had on hand this week.

After a few moments, I turned to him. “So,” I stated, dragging out the syllable.  “Would you be upset if we didn’t go to dinner?”

He frowned. “We have reservations.”

“Would you be upset if I said we canceled said reservations. And by we, I mean me?”

His frown deepened even further at that, the lines across his forehead becoming dark in true confusion and slight displeasure. “Why?”

“Because, Gabriel,” I said, this time looping my arm within his like he had wanted me to earlier.  “I think there is something much more important that we need to do today. Something far grander than dinner. But could still be a fun date.”

He didn’t get the chance to ask what that something was. Because I was leading him around the corner that opened up onto sprawling hills, rolling upwards towards the night sky where children ran and hit the lanterns, laughing as they were showered in dew.

“Why have you brought me to the flea market?”

&lt;center&gt;&lt;img src=&quot;images/Flea market.png&quot; height=&quot;600&quot; width=&quot;750&quot;&gt;&lt;/center&gt;

“Because you need furniture, Gabriel. Your office has two broken chairs and your house only has a sofa and a table.”

“And a bed,” he said.

“A tiny, uncomfortable bed. We are getting you new furniture.” The look in which he leveled upon the vendors in front of us was not promising.  It had been clear some time ago that Gabriel’s taste leaned more towards finery but the man did very little in life to make sure his surroundings reflected that.

“We are going to get me new furniture at a flea market.”

“Yes.”

He stared at me evenly. “A flea market.”

“Okay, I’m sensing a theme here,” I said, catching my amusement before it could burst forward. “What is wrong with a flea market?”

Looking around, Gabriel’s eyes skittered across several different locations, most of which contained furniture with chipping paint and crystallized lamps. “It is not exactly my taste in furniture.”

“Your taste in furniture is to have no furniture so I don’t really think that’s an argument.”

His face looked pinched as he stared out over the tiers of stalls, the path between them all slowly rounding upwards.  The market was packed today, people milling with baskets and some with carts for the bigger things. I had scoped it out a few days prior and had found an entire section with handmade furniture. I was determined to at the very least, get him a night stand today.

“Everything is bright,” he said.

“I promise you, there are darker colors for your furniture selection. Some even black. We just have to look a little.”

Gabriel was the Warden of the Night Market. Daily, he apprehended criminals in some of the seediest corners of the world. Yet, this, this place, somehow brought a sneer to his face.

Hugging him a bit closer to my side, I waited for him to process what we would be doing. Because I was not letting him get out of here without buying something.

“I could just order from the catalogs if you are truly wishing for me to get more furniture.”

“You could. And maybe we will look at those catalogs tonight. But, I think it is good for you, Gabriel, to get out among the people and actually buy their wares.  Make time for yourself as opposed to pointing at a page and saying ‘that’ and then letting whatever you bought sit in a box all season.”

I didn’t know if he actually did this but by the look on his face it was clear it was pretty close to the truth.

With a sigh, he looked at me. “This is what you would like to do for our date?” he asked.

“Help you with tasks that you shove aside because you are a workaholic? Yes.”

Defeat crossed his eyes as he knew that he couldn’t argue with this truth.  “As you wish.” Before we took another step though, he leaned forward, capturing my lips against his own. It was a kiss slow and sweet and one that he took his time with.  I grinned against him, feeling his body respond as I trailed my hand up his side.  “Will you be picking things out for me?” he whispered against me, his tongue flicking out to play against my own.

“No, that is your job,” I told him with a small laugh. “But I will be making sure you do as you are told.”

When he pulled back, he smiled at me, something dark playing across his eyes.  “I hear I take orders well,” he mused. Straightening, he locked my arm within his, and then looked out at the flea market as if it were a battleground.  Nodding resolutely, he stepped forward, the two of us falling into some makeshift march.

And with each thin and slightly patronizing smile at my furniture suggestions, I felt myself fall for him a little more.

[[Next|Gabriel 14]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="27" name="Gabriel 14" tags="" position="1000,1925" size="100,100">&lt;img src=&quot;images/Constellation 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;“Do you think it’s possible though?”

“Is what possible?”

“For you to take the weekend off.”

Gabriel looked upwards, staring across the way at the person who sat across from him. They had surprised him once again with muffins made from Hazel’s kitchen and a warm thermos of tea.  The market had been abhorrently cold as of late and it was a gesture that he greatly appreciated. Then again, they had taken to coming to his office so frequently that he no longer considered it a gesture. It was a part of his routine.  A soft smile played on his lips at that.  When had it become routine to let someone in again? To allow his guard down enough to be taken care of. Just for a bit.  The very idea that Gabriel did not have to go home to an empty house, that his day was not consumed with the monotony of patrol and new recruits, filled him with a warm sense of comfort that he was simply not used to.  It was their smile, in the end.  Gabriel wanted to do whatever it took to keep that smile and jealously guard it for his own. Including taking the time off he had been promising them for half a year.

“Yes,” he said softly, setting his quill aside. “I think I could take some time off.”

The look they gave him was one of pure adoration.  A pang of guilt shot through him as he remembered all the times he had declined this particular request. So many weekends had gone by with them following him on patrol. Dates had been made and canceled.  The status of the market had always been more important. Not any longer, however. Gabriel was making a point now to spend more with the people he cared for.  Life was far too hollow without their delicate beauty to light his way.

“Where would you like to go?” Getting up, he rounded the desk, coming to sit at the edge and stare down at them.  He was tempted to just call it now.  Take the rest of the week off and whisk them from the office towards the remote places of the market. Get a room somewhere and not leave for the first few days.  Take an evening stroll along a riverbank, perhaps.  Dinner. A show. All the things that couples should do and which Gabriel had completely forgotten about until food started appearing at his desk at a much more frequent rate.

“Anywhere,” they said. “As long as it’s with you.”

Reaching out, he moved to cup their cheek. To place his hand against the curve of their jaw, feeling the warmth of their skin beneath his palm. The door to the office burst open though, a nameless recruit searching him out with wide and uncertain eyes.

“Warden Caine, I am so sorry to disturb you. I know you just got back from patrol, but there’s a problem.”

Gabriel blinked.  Before him sat an empty chair.  Not even a memory to keep it warm.  

It had been a week. One week since the lanterns had gone dark. Since the ballroom had erupted into complete destruction, he and Belladonna had tried to make it to the fountain.  It had been a week with no light to shine upon the streets. Without that soft laugh. Without the voice that he was afraid he was already forgetting.

“Warden Caine?”

Gabriel’s eyes snapped upwards.  There were so many new recruits now that Gabriel honestly couldn’t remember when he had arrived.  “Yes? What is it?” He was moving away from his desk, away from the chair that held no one.  

“There’s been another outbreak,” the recruit said.  “We think it’s near the Spice District but no one is sure. The walls are rearranging themselves.”

Strapping his sword to him, Gabriel frowned. “What do you mean the walls are rearranging themselves?”.&lt;img src=&quot;images/Empty chair.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

“We’ve been noticing the candles moving. They are being swallowed up and now we are starting to realize that the walls themselves are shifting. The alley that leads here is gone, sir, and there are four others in its place. People are getting lost within the market. They’re wandering home and finding that home has moved.”

He looked afraid.  The recruit couldn’t have been any older than twenty odd years and this was certainly not what he had signed up for.  Looking around, he seemed terrified of the prospect that he might not make it home that night. Lost not in the line of duty but because the world had been plunged into chaos and was clawing to right itself again.

Buttoning his coat, Gabriel placed a hand on the recruit&#39;s shoulder. “Take a break. I’ll go and inspect. You said I am needed in the Spice District?”

“Yes,” the recruit swallowed.  “There are some misplaced people there and the vendors are getting mad at the amount of food being stolen.”

Theft had been the main thing they had been dealing with the last week. That they knew of at least. But now, it seemed as if a new problem was arising. One that Gabriel had no idea how to address.

Leaving the recruit behind, he walked through the prison halls, the cells full to bursting at this point.  Frantic guards walked up and down, trying to grasp just what their job was now that the new decrees were in place but quickly crumbling in light of recent events.  Bursting from the prison walls and into the night air, Gabriel paused.  Screams had been coursing through the market. People calling for help as they were unable to navigate the dark. The lanterns swayed above, refusing to relight.  The world was now lost in a sea of candles, small flickering flames that acted as a guide and were so easily snuffed out.  

Gabriel stood for a moment, utterly paralyzed. He could still see them. Lying on the ground, their chest ripped open with an eerie light glowing from them.  Their eyes had gone black before they closed. Their body limp.  Gabriel had tried to scoop them into his arms, but someone had held him back.  He didn’t even know who at this point. Just that someone had him by his shoulders and told him not to move. Not until the gate was closed.  The gate that was a yawing hole in their chest getting dimmer and dimmer until they were nothing but a sleeping form upon the ground.

The market had descended into chaos after that.  As the entire world blacked out, panic ensued. Gabriel hadn’t even gotten the chance to bury them.  He hadn’t visited their grave.  Honestly, he hadn’t left the office or slept either.  Part of him was hoping this was nothing more than a terrifying dream he would wake up from.

As a loud cry echoed through the cobblestone paths, he knew that he would not be so lucky. Why hadn’t he just taken time off for them? Why hadn&#39;t he whisked them away for a long weekend? Held them tighter.  Listened to them a little more. They never should have gone to the ball that night and it was a mistake that had cost all of them. They never should have trusted Milo Next.

Wiping the wetness from his cheeks, he walked across the stone bridge, feeling his heart beat at an unusual speed, his chest constricting, and his eyes casting a silver glow. He had not needed the candlelight that everyone was starting to carry.  The grace in his pocket was dimming but the grace from within was burning through him at an alarming speed. Stumbling, he caught himself on the stone pillar that marked the entrance to the prison gates.  Pain lashed through him, striking a wince across his normally placid features as a cold heat began burning from within. He could see the fault lines. Could see the cracks racing across him, peeking through with a silver glow that threatened to split him apart.

“Not now,” he growled to himself, flexing his hand and trying to shake it away.

The market needed him.  He didn’t have the luxury to acknowledge whatever was happening to his body. He certainly didn’t get the luxury to grieve.  He needed to continue on. He needed to do his job within the confines of a world that was slowly dying, protecting the people they had torn themselves apart to save.  

And Gabriel. Gabriel would only occasionally remember the bright burning light that had graced his light for a time.  It was all he could do.  It was all that was allowed.  And only occasionally would he admonish himself for beginning to even hope that he was strong enough to keep them safe.

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="28" name="Milo 1" tags="" position="1200,300" size="100,100">&lt;img src=&quot;images/Keys 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The market was his home.  The streets had seen Milo dancing within them for nearly all of his life.  The older vendors looked out for him, turning a blind eye when he had stolen a steamed bun.  Some left clothes and new shoes out when they noticed him getting too big. Milo had been a favorite among the market people. He had the tenacity and charm to bend the world to his will. But with that, came loneliness. One so fierce it rocked the very streets he stood on.  It was not that Milo was incapable of being loved. People wished to love him with such ferocity.  It was that he was unsure how to love back.  Perhaps it was the fae blood in him. The flightiness of his mother.  Or maybe it was the cruel hands that had raised him during his early years.  The signs of what love was and was not were not spelled out with clarity and because of that, Milo lost his way.

Despite second chances, despite opportunity, Milo became a true child of the streets. He knew the ins and outs of the cobbled walls and fought his way through them with a wicked grin, hungry for survival.  With that, independence was formed but it was the kind of independence that left little room for compromise.  And very little room for lasting relations.  The ones he did hold onto, were precious, however. Small bits of a home he had built with his blood and tears and that he would protect at a detriment to his own life.  The most precious commodity Milo owned was his love for others. It ran deep and true and hurt most nights as he went to bed cold and alone.

Love is not cruel.
    
Milo understood that conceptually.

But it wasn’t until much later that he wondered why the love he held close twisted into crumbling ash each time.

[[Next|Milo 2]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="29" name="Milo 2" tags="" position="1200,425" size="100,100">&lt;img src=&quot;images/Keys 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;Running through the streets, Milo put on a burst of speed. He could feel the sweat trickling down his back and the way his bare feet scraped against the cobblestones beneath.  It wasn’t that he had stolen anything important today. Not really. If someone really thought about it, what he had taken was so mundane that it really didn’t warrant the ire he was now receiving.  Then again, wyvern blooded folk didn’t care what you did to them. If they perceived it as an injustice, they hated you for life. 

Milo had been challenged to see if he could do it. One shiny round coin, straight from the vendor&#39;s pocket. If he did that, he was going to be able to join that group that gathered over near the crystal quarry.  They would keep him flush in steamed buns and had promised to teach him magic. He had waited all day. The vendors all had a lull late afternoon. So when he snuck up on the man and slipped his hand inside their apron, he had felt triumphant. Until the butcher knife came down and he almost lost his hand. But he kept the coin tight in his palm and bolted out of there. He was small for his age, he was told, which led him with the pleasure of ducking around corners that grown-ups could not.

Unfortunately, one of these corners led him smack dab into a tiny little thing, sending her spiraling to the ground.

“Sorry!” he yelled, immediately reaching out to grab her.  She barely reached his waist and had a wild head of coiled hair and a tear in her skirt. Milo could see where she skidded across the cobblestone, her knee splitting open and blooming red. When she looked up at him, she had the most vibrant pair of hazel eyes he had ever seen and they were rapidly filling with tears.  “Fuck! I’m sorry. Don’t cry. I’m really, really sorry.”

Lip quivering as she looked at him, she made no move to even get up. “Did you do it on purpose?’

“No,” he said immediately. “I’m stupid and clumsy and running from a vendor with a butcher knife.”

Her eyes went wide then as she frantically looked around the streets.  Up ahead, said vendor had rounded the corner, his knife glinting in the lantern lights above.  Immediately, the girl took Milo’s hand and began running, tugging and yanking him with surprising strength until they were hidden among silk scarves, the likes of which were flapping in a fabricated breeze.

“Shh…” she said, finger to her lips.

Together, they watched as the man passed, the knife down at his side. He was muttering something as he fingered the hole in his pocket, looking for the boy with the messy blonde curls.

“Thanks,” Milo whispered, when it was safe.

“I didn’t want you to get hurt.”  She shuffled around, looking at her knee and wincing.  Milo thought she couldn’t have been any more than five or so.  At eight, he needed to protect her.  She was younger and therefore probably needed it.

“Here.” He took a dirty hanky from his pocket and began tying it around her knee.  “You should probably go and wash it somewhere so your leg doesn’t fall off or something, but this will at least stop the bleeding. I’m really sorry.”

“It’s okay. You were scared.”

“I wasn’t scared,” he protested, eyes narrowing into the best intimidating gaze he possessed.

The girl smiled. Her front teeth were missing, and her nose wrinkled when she laughed. “I’m Hazel,” she said. “Do you want to be my friend?”

&lt;center&gt;&lt;img src=&quot;images/Kiddos.png&quot; height=&quot;600&quot; width=&quot;800&quot;&gt;&lt;/center&gt;

Milo eyed her suspiciously. A friend.  No one had ever put it like that before. But Milo suspected he probably had a lot of friends and didn’t need another.  But, then again, he spilled her blood, so law dictated that he was probably going to need to give her compensation of some sort so she didn’t come after him in the middle of the night. 

“Milo,” he introduced himself.  “And yes, we are friends,” he told her confidently.

She clapped her hands. “Good. Do you want some food, Milo? My sibling is around here somewhere. They were getting me steamed buns today.”  Milo’s stomach growled in response.  Hazel took that as the affirmative she needed to grab his hand again and start dragging him through the maze of silk scarves.

“I didn’t say I wanted food.”

“I know you didn’t, but I have a knack for knowing what people need,” she said. “Now come on. The buns are filled with crispy pork and sometimes this really yummy sauce.  Oh! And corn.”

“I hate corn.”

“How can you hate corn?” she asked.

“‘Cause it’s gross. And I don’t have parents so I don’t have to eat it.”

She was side-eyeing him with this little sigh that said he was clearly wrong and it was her mission to show him otherwise. “That’s a stupid reason. You’re going to eat the corn.”

Milo’s brow furrowed and he wanted to protest again, but Hazel was humming and he found that he really enjoyed the sound. And he was hungry. And maybe, just maybe, he could eat some corn since she saved his life.

But tomorrow, he’d never see her again. Milo was a loner. He didn’t need anyone.  The girl was someone he probably wouldn’t even remember come next week. But he’d eat a steam bun if it made her happy.

[[Next|Milo 3]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="30" name="Milo 3" tags="" position="1200,550" size="100,100">&lt;img src=&quot;images/Keys 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;Malcolm opened his door to a very wet and disheveled Milo. Not a completely foreign sight through the years but still not one he had expected. Not tonight at least. They were on rival jobs and when they took those contracts, they spent their time apart, not even glancing in the other&#39;s direction until the contract was complete. Hazel hated it. She claimed it spread disharmony. But for the two of them, it worked. It gave them a chance to be apart. Made them remember that there were things worth coming back to when they got too snippy with each other.

Without a word, Malcolm stepped aside, letting Milo shuffle through the front room, dripping water all over his hardwood floors.  Normally curly hair was plastered to his head and he kept his hands in his pockets as he toed off his shoes and socks with minimal movements.  Malcolm left him to it, going and fetching a towel along with a soft pair of sweats and an oversized sweatshirt Milo had left at some point.  When he tossed it to Milo, Milo caught them with a nod of thanks and began to strip. Malcolm gave him privacy and went to the living room, making sure to light a small fire to chase away any of the chill.

Milo joined him when the fire was roaring. It was at least twenty minutes later and he still had not spoken. Instead, he had gone into the kitchen to make himself tea, busying himself in a way that Malcolm had always recognized as the need for space. Milo wasn’t sure if he had ever met someone that got what he needed so thoroughly without saying a word.  

When Milo finally did come to sit beside him, he curled his bare feet under his legs, casting a furtive look towards Malcolm out of the corner of his eye.

“Hey,” he said, voice raspy.

“Hello.”

“Today sucked.”

Malcolm nodded. A childish sentiment that was all Milo. “Do you need comfort, to vent, or actual discussion?”

“I need you to tell me why today sucked.” It was said with such an air of petulance that it actually made Malcolm smile a bit.

“Because life sometimes feels like that. A series of moments that are not enjoyable and they can bog us down if we have too many in a frequency that we cannot keep up with.”

Milo shook his head. “No. I don’t think that’s it at all. I think people are just horrid pieces of shit we should put through a meat grinder.”

“That too.”

Milo’s shoulders slumped forward. For all the world, he looked as if he had deflated. Next to him, Malcolm stayed still. That stillness had always gotten to Milo. It made him feel like he had done something wrong.  “Sorry,” he muttered. “I know you don’t like me talking like that.”

“I don’t. But if you need to in order to get something off your chest, I’m right here.”

“I’m trying, Mal,” he started. It would be amazing if Malcolm somehow knew what Milo was even referring to.  Trying could have meant a variety of things. Wasn’t ‘trying’ what he constantly told Malcolm when the man called him to task about his behavior? 

Milo always felt like he was at the edge of a cliff, ready to tumble into nothing.  And every time he got there, he knew it was his own feet that would eventually walk him off the edge. “I’m trying with everything I can to do the right thing but somehow I keep fucking it up.”

At that, Malcolm frowned. “What do you mean ‘do the right thing’?” Milo’s hands twisted together.  There had been blood on them earlier.  A lot of it.  For the first time he wasn’t sure if it was justified.

“I can’t tell you,” he said softly, tucking his feet further under him. “It has to do with the job.”

“Are you in trouble?”  The steel in Malcolm’s tone hardened and he had to remember to soften it. Milo didn’t respond well to anger. Not from the people that had seen his heart.

“No,” he said, and then winced a little at the knee-jerk lie. “I don’t know.”

Malcolm rose, looking for his jacket and the runic bits of magic that he kept nearby for protection.  There was a look on his face that Milo was very familiar with. It was the one that showed when one of his loved ones was in danger.

“Where are you going?”

“To null and void the contract. I’m not working it if it’s putting you in danger.”  Milo’s hand shot out at that, wrapping around Malcolm’s wrist, tight and unrelenting. Pausing, Malcolm looked down, watching as Milo stared back up at him with tired eyes.  For a moment, Malcolm thought about pulling away. It would be so easy, after all.  Milo wasn’t exactly strong. But in the end, he relented with a sigh. They both knew he was still going to end up breaking the contract.

Sitting back down, Malcolm stared at the younger man. His hair was dry now and the chill had been driven from his bones. Milo looked ridiculous though in all his oversized clothes.

“Stop looking like that,” Milo demanded.

“Like what?” Malcolm asked in a sigh

“Like that.”

“This is just my face, Milo.”

Milo shifted uncomfortably. “Well your face is making me think you’re going to go on a murder spree and I kind of hate it because there are much better things your face could be doing.” He paused, a slow quirk of his lips curling at each end. “Oh. That’s a good one. I’ll have to save that pickup line.”

Malcolm snorted. “It was a three at best.”

“What? That was clearly a solid six,” he protested. “On my pickup line scale, that was one of my best.”

“Re-evaluate your best then,” Malcolm snarked back.  Reaching out, he twisted his fingers within Milo’s shirt and tugged him forward, the two of them falling back on the couch.

Milo quirked a brow at him. “Against the rules, Mal.  No bumping uglies unless we aren’t on a job, remember?”

They were shifting against each other, trying to get comfortable. Milo ended up elbowing Malcolm in the rib and Malcolm ended up kicking him in the shin. “Is everything always about sex with you?”

“Yes.”

Malcolm rolled his eyes. “Liar.”

“I know,” he grinned. “But it makes me feel better to make you pissed.”

“I know.”

“I know you know.”

Maneuvering them so they laid side by side, they ended up staring at each other, sharing the same breath, hips and legs pressed together. It was comfortable and familiar and with each steady rise and fall of Malcolm’s chest, Milo began to relax even further.

“Can you still do that thing where you make pictures appear on the ceiling?” Milo asked.

Reaching around, Malcolm pulled the little device from under the sofa, tapping at a few buttons until something appeared overhead. Milo grinned in delight, snuggling down and turning so he could watch the cartoonish images above them.  Malcolm laughed softly, tossing the device down and settling in with the man. They did have rules in this situation. They did make sure to keep their distance. But today could be an exception. At least for Milo’s sake.

Reaching out, Malcolm took Milo’s hand in his, pulling it to his chest. Milo didn’t say a word, but he smiled all the same, tapping him softly in tune with whatever the images up above were singing about.

“Thanks for breaking the rules for me,” Milo whispered after a long moment. “I like dragging you down to my level.”

Malcolm squeezed his hand tight.  “It’s not dragging when I willingly go,” he whispered. They were both asleep long before the pictures above blinked out.

[[Next|Milo 4]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="31" name="Milo 4" tags="" position="1200,675" size="100,100">&lt;img src=&quot;images/Keys 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;Malcolm was dead.  Milo didn’t know what he hated about that more. The fact that such a pillar in his life was now gone, or, that his parting gift was possibly the shittiest job in existence.  It was a point of contention for Milo. Malcolm Albright, secret keeper extraordinaire, in love with the fucking world he was supposed to protect, and then handing it all over to Milo while he slipped into some sort of eternal rest.

Asshole.

It had been three years.  Milo hadn’t realized what had happened at first. The pain that coursed through him had been misinterpreted. He didn’t realize it was the feel of the gates opening and closing. Or the market screaming.  When he did realize it, he was alone, wandering the streets.  A gate had opened so near that it was blinding. He woke hours later, face down in the dirt, his head feeling as if it were splitting in two.  He then proceeded to spend far too much time pissed at Malcolm. Ignoring that any of this was even happening. And slowly, the market got worse and worse.

Looking at the old wooden sign of the apothecary, Milo sighed. He hadn’t told anyone, as per the rules. But, he didn’t know how much longer he could really do this. Each time a gate opened he felt it shake his bones. His head ached constantly and the responsibility that was beginning to mount was suffocating.  He had to at least tell Hazel. The weight of it all was pressing down upon his chest and cracking his ribs.  Milo just wanted to be able to go to someone when it became too much.

And maybe get one of her tonics that numbed everything.

When Milo pushed open the shop door he could hear Hazel rummaging around behind the counter. Something smelled foul within the shop itself and the hearth was dark with a glimmering green soot that Milo knew was far more Lucinda’s brand of magic, than Hazel’s own.

“Haze?”

She popped up from behind the counter, her eyes wide and her face ashen. Milo immediately rushed to her side.

“Oh, Milo, don’t!” 

But it was too late.  Skidding to a halt, Milo felt his stomach drop.  Bones were scattered across the floor, the likes of which were dipped in blood.  The bandage across both of Hazel’s hands was evident.

“What did you do?”

“It’s an animal,” she said quickly.

Something bristled at the base of Milo’s spine when the excuse was so ready on her lips. “I don’t care what it is. What did you do?”

“A spell,” she said. “Nothing major. Just a little one.”

A rib cage sat at his feet, crested with bundled herbs and a still beating heart. “This is not kitchen witch shit,” he said through clenched teeth.

“I…”

Milo kicked at whatever effigy she had created, scattering the bones across the floor.  The lights around them all went dark.

“What is wrong with you?” Hazel practically shrieked. “That was for Mal.”

“I don’t care who it’s for. You know you aren’t supposed to be doing that shit. That’s the very thing that broke your mother.”

“It’s taking too long, Milo. Malcolm should be back by now. He has to be stuck. I’m just helping him along.”

“With blood magic?” Milo was looking at her incredulously.  “Are you serious right now?”

Her eyes flicked black. Voidless gaps across her face that sparked anger. “I don’t see you doing anything for him. You claimed you loved him but you won’t even speak about that night. You won’t even speak of him!”

“Because I hate that night!” he shouted. “And it doesn’t matter if I speak of it or not, whatever the fuck this is in front of me is not something you get to do, Hazel!”

“Why?” she demanded. “I have all this power. Why shouldn’t I use it, huh? Why shouldn’t I take this curse and ply it into something good?”

Hazel had been born with more magic than she knew what to do with. Magic, Lucinda had been using for her own gain.  Milo hadn’t been aware of it for so long, but it was there. All the signs. The more Hazel used her magic, the more her lines of morality became skewed. It was the curse of it all.  Power corrupted and it corrupted thoroughly.  Hazel’s tonics and her tinctures were all well and good. But blood. The sacrifice of her own flesh.  It was something that would chip away at her, turning her into her mother, and effectively killing the kindness that had miraculously survived within her for so many years.

It had become clear very early on if Hazel continued to blacken her fingers with Lucinda’s spells, she would become far worse than her mother had ever been.

Milo took a step back. He couldn’t tell her.  Even if she heard him, listened to him, Hazel would want to help. And if this was what she was willing to do for a man that was dead, then Milo had to wonder what she would be willing to do for one that was living?

Scrubbing a hand across his face, he looked at her. Her chest was heaving and her gaze was wild.  Milo tried to soften his face. Tried his hardest to exude a sense of calm.  “It’s only been three years, Hazel,” he said softly. “Things like this take time.  Don’t rush it.  You don’t know if by doing rituals like this, you’re confusing the magic to bring him home.”

Something flickered within her, her eyes bleeding back towards an off colored green. “You really think so?”

No. But how was he supposed to say otherwise? “I– yeah.”

The two of them stared at each other. The heart that had been beating between them went silent. “You don’t,” she said.

Milo sighed. “But you do.” Reaching out, he tugged her away from the carnage. “You haven’t been leaving the shop and I haven’t been coming by like I should. I’m sorry.”

Something in her shifted then as she sagged against him. “I guess I am a little lonely,” she confessed.

“Then cards. I’ll come by once a week to play cards, yeah? Would that help?” She nodded against his chest. “No more of this shit, okay? I’d sooner be the one to perform fucking rituals. At least we know it can’t do anything to me.”

“You can’t do magic,” Hazel laughed.

“Thank the Knowing for that, right?”

He looked over his shoulder at the bones and the blood, holding Hazel a little tighter.  He could feel the way she trembled and saw the stress etching deep lines across her face. 

The role of the Gatekeeper was one he was going to need to carry alone.

[[Next|Milo 5]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="32" name="Milo 5" tags="" position="1200,800" size="100,100">&lt;img src=&quot;images/Keys 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;Sweat poured down his back as he stood over the sweltering flame, staring down at the green embers as if they were his answer to salvation.  The gate stood open, whipping against the night air and drowning out the sizzle of magic Milo could hear echoing inside his head.  I could see his desperation. I had always seen it.  It coated him like a shroud, weighing him down until he was nothing more than a man weeping late into the night.  His eyes were sunken, and his body was riddled with bruises. Food had tasted like ash for too long and the once vibrant tenacity that he crowed deep into the night was dwindling into nothing.  

His attempts had failed him.

I had watched as he tried and tried again to save me.  I stood by and watched as he ventured into the Outlands, a place of unknown certainty. As he had been left for dead by the Outlanders. As he had tried to contact the Barons and only Taliesin had heeded his call.  I had watched these last few years as he ate less. Talked less. Wandered the streets like a ghost, chewing on roots taken from Hazel’s jars just to keep the pain to a minimum while my own skin split open time and time again to let others come forth.

It was all I knew how to do. My singular importance against my brethren.

Yet, it was killing him.

I had watched as Milo lost hope.  As failure continued to plague him. I tried to reach out to him like I had the previous Gatekeeper but he wasn’t as astute. He didn’t ever expect help, so when it was offered, he didn’t know what the proffered hand would even look like.

&lt;img src=&quot;images/Spellbook.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;And now we were here. A book made of flesh lay out before him. A gate open and whipping across him in a series of painful electric jabs, all of which did not shake the determination on his face.

He planned to summon a piece of the market. I knew that much. He wished to take a piece of me and sacrifice it in a ritual that would take the better part of a year.  Then, the gates would close forever.  The market would be shut down and the worlds outside would be left to die, with no one left to tell their tales.

There was a multitude of reasons I couldn’t let him do this.  But chiefly among them was because it would destroy him. It would destroy everyone, in the end. I simply needed to show Milo that he did not have to wander lost. That he did not have to live this life alone with nothing more than cheap platitudes to fill his day.

That love was not painful if he would only just allow it not to be.

Sighing, I watched as he chanted the words, his eyes glazing over in pain.

I couldn’t let him do this alone.  

And I certainly couldn’t let the market become nothing more than another dying world.

So I stepped forward.

Through the tear he had created.

When I fell to the cobblestone streets it was not where I should have been. For one blinding moment I realized what I had done and that perhaps I should have thought this through a bit more.

But just like that, the memory of who I was faded.

And the guards dragged me towards the cell.

[[Next|Milo 6]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="33" name="Milo 6" tags="" position="1200,925" size="100,100">&lt;img src=&quot;images/Keys 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The wind whipped through the canyon, howling through the cracks of broken down establishments that had once stood proud and tall.  They were the remnants of some world or other.  Something that had fallen into the Night Market, absorbed by its mystery, never to return home.  It’s how the market expanded. Long ago a story of old had proudly proclaimed that the Night Market had walked among the people, keeping a finger on the beating pulse of the life it chose to protect. Now, the Market only expanded upon splitting seams, unaware that they were killing themselves and the ones they tightly held to their chest.

Sitting at a broken table, a warm drink in hand, Milo stared out at the beach and the gathering crowd.  The docks would be busy tonight. Elias had thrown another tantrum and the crossfire had been dire.  Velvet Guards had been combing the streets for “bails” the last few days, trying to make up for it.  Because never mind actually punishing the man responsible for the situation.

“Tara got off okay.” The clinking of herbal tonics and overfilled vials sounded like bells as Hazel sat down next to Milo.  She scooted herself next to him on the bench, knocking at his spread legs and slouched form.  He grinned at her, a warmth to his face he often didn’t give others.

“She was sweet.  Deserves to have a nice life from here.”

Hazel grabbed at his drink, sipping it and wrinkling her nose.  She didn’t give it back immediately, though, continuing to sample the contents of the tankard, despite her dislike.  “I have a free room, this means,” she started. “Anyone stick out tonight?”

Milo tilted his head towards the sloping path ahead. It slid down from the open cave above. The one that housed all the cells and the over eager eyes of the Velvet Guard. “That one.”

“Which one.”

“That one.” He pointed towards a figure walking downwards, trailing behind the Warden.  They were looking out at the beach with wide eyes, taking in the sights and clicking together puzzle pieces they were not yet aware formed the picture they needed.

“Oh,” Hazel breathed. “They look scared.”  Hazel of course understood the sentiment.  It was rare for her to come out of the apothecary.  Only in the guise of helping others did she ever manage to do so.

“Scared?” Milo snorted. “No. They look angry. Mischievous. Absolutely delectable.”

“I don’t think we’re talking about the same person.”

Turning to her, Milo snatched back his drink. “That’s the one we’ll go after.  Get them from the clutches of Caine.”  There really wasn’t another option tonight.  Not that Hazel needed to know that.

“Gabriel is not that bad.”

//Sure,// Milo thought, //if you enjoy a man with a proverbial stick up his ass.//

Despite Hazel not hearing him, she still gave him that look.  Disapproval was heavy in her eyes when it came to Milo Next.  Though she had been giving it to him for years, Milo remained outwardly unaffected by it.

Swinging an arm over her shoulder, he hugged her close.  She moved into his embrace willingly.  For a long time, they had been all the other had. Too many years had passed with just each other for support.  There was an ache in Milo’s gut knowing that it could all fall apart.

“You want to get them or should I?”

“We can’t just walk up and steal them,” she commented.

“Why not? Caine knows we do it.  Let’s just cut out the middle process.”

Hazel tapped his knee. Again with the disapproval.  It allowed a low chuckle to escape from him as he finished off his drink. A drink that had been remarkably more full when she first sat down.

“Gabriel is not the one I am worried about in this situation. While you operate in between the lines here, I do wish to keep my business up and running.”

“I’d never jeopardize your shop,” Milo said, almost offended she would suggest such a thing.

“Then please do this right,” she urged.

Sighing, Milo upturned his mug.  The Warden was leading the prisoner downwards now, locking them in one of the bottom cages.  He looked on edge tonight.  More so than he usually was. Probably due to the influx of captives.  Milo couldn’t help the small amount of joy at the thought of the other man&#39;s discomfort.

“Alright, tell you what. I’ll go get another drink. Mingle a bit. You do the same.  We’ll see who gets to them first.”

“Milo, they are obviously not from around here. They must be terrified. Can’t we just go and comfort them a bit? Promise them they won’t be sold off to the likes of Dragul or something?”

Leaning forward, he pressed a kiss to Hazel’s hair, lips brushing the frayed edges of the colorful scarf she had wrapped around her locks tonight. “There’s a process, Hazel,” he chided, turning the tables on her.  “Respect it.”

Hazel rolled her eyes, practically shoving him away.

Standing, Milo grabbed his tankard, bidding Hazel goodbye for the moment. There was a skip in his step as he made his way to the Saloons, watching the so called ‘prisoner’ for the time being.  He wondered what they sounded like.  If they had thoughts that were their own.  Milo was almost certain they would be nothing more than an empty construct, filled with nothing and waiting for instruction. It wasn’t exactly what he had planned but since when had his plans ever a hundred percent gone his way?

But this would work. He knew this would work. For the first time in close to a decade, Milo felt as if he was doing something right.  The people that laughed around him, walking arm in arm through the streets, never would have to greet the fear of their world dying.  Because silently, Milo was going to be able to take care of it.

Tilting his head back, he grinned. Excitement was in the wind tonight.  And by the Knowing, it felt damn good.

[[Next|Milo 7]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="34" name="Milo 7" tags="" position="1200,1050" size="100,100">&lt;img src=&quot;images/Keys 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;Hands in his pockets and an unlit cigarette hanging from his lips, Milo walked down the street, kicking at his own heels as he placed one foot in front of the other.  He had left the Pleasure District only in the sense that he was no longer under the sway of those velvety pink lanterns.  But there was a little side street, one in a makeshift alley just to the right, that he liked to visit from time to time. It was less ostentatious. Less about sex and pleasure. More about a particular other itch that needed to get scratched.

Yivi sold the best seared mushrooms in all the Market. She was a retired courtesan that had never quite moved away from the quarter, but had instead continued to offer pleasure for a price with sautéed mushrooms and dipping sauces that Milo swore were otherworldly. Given that he was almost positive she was not from here, he assumed that was pretty close to the truth.

When he approached the stand, she eyed him carefully. She was one of those excruciatingly attractive individuals. The hardships of life had not claimed her like it had others. Milo had been tempted from time to time to ask for her services when she had still worked in the district proper.  But, he was also terrified of falling into someone else&#39;s desires and boy would he succumb to a woman like her. Strong and firm with a no nonsense attitude? Milo didn’t particularly get along with that personality but he responded beautifully to it at the same time.

Leaning forward, he placed a kiss on Yivi’s smooth cheek, placing a stack of bits down on the counter.

“Don’t you dare think of lighting that cigarette, Milo,” Yivi scolded.

The cigarette in question was tucked behind his ear.  Almost as a reminder. The day Milo lit it again, was the day he didn’t expect to come back from. “You know I quit, Yivi. Just a nervous tick by now.”

She nodded her head towards the Pleasure District. “And that? You fornicating in there is another nervous tick?”

Milo laughed. “Nah. Just dropped off a friend. Waiting for them to be done with the illustrious Belladonna, then I’ll pick them back up.”&lt;img src=&quot;images/Mushroom plate.png&quot; style=&quot;float: right;&quot; height=&quot;500&quot; width=&quot;400&quot;&gt;

Yivi raised a brow towards them. “Why are your lips puffy, boy?”

Milo paused. Because the searing reminder of another person’s lips pressed tightly to his own was still evident against him. The way his heart had skipped over something so unbelievably simple, the heat rushing through him in a way that demanded that he ask for more more more.

Milo shrugged. “Allergies.”

“Bullshit, allergies,” Yivi muttered. She put a mushroom kebab in front of him with a sauce of basil aioli and sriracha for him to dip it all in.  “You seeing someone new, finally?”

Milo looked down, a bitter twist to his smile. Wouldn’t that be a concept. A surprise for Hazel, that was for sure.  Seeing someone new.  It was laughable. “Nah. It was just the Ambrosia, Yivi. They didn’t know what they were doing.”

She scooted another kebab in front of him. “You and I both know Ambrosia doesn’t work that way.”

“Then it was a kiss that was a mistaken form of passion. I am quite charming and kissable, you know.”

“You are,” Yivi agreed. “So when are you going to start believing you deserve a bit more than a one-night stand and a throng of people who you keep at arm&#39;s length?”
Popping a mushroom in his mouth, Milo chewed thoughtfully, trying not to let the hurt show on his face. “When are you going to give up your life of decadence and marry me, Yivi?”

She hit the kebab from his hand, sending it flying.  Milo pouted at her, but slumped in his seat a bit. Yivi did not back down with her piercing stare, her blue gray eyes pinning him to the spot.  She had made those fresh and her look was clear. It infuriated her that her point had to be made by tossing it all in the garbage. 

“You can fool everyone else, boy. But don’t sit here and use your broken heart as a character charm. I’m too old and have seen what it does to people too often.”

Milo ducked his head. “Yes, ma’am.”

Taking out another few bits, he put it on the table, silently asking Yivi for more. With a glare, she turned, beginning another batch.

It wasn’t that it was a bad kiss. Far from it, in fact. It was the perfect amount of pressure, and the feel of another body against his own was one he sorely missed. But Milo had made a point over the years. Don’t get too close. Keep them all at a distance.  The hurt that came with losing someone was too much. The only person he ever opened his heart to anymore was Hazel, and only because he was certain she was the only one who understood the depth of it all.

But still…

Milo had had a lot of pleasure through the years.  Had been with many people. Had gotten on his knees for some, had guided others across his lap.  He had been with both men and women and had twisted himself up in every position possible, riding the crest of passion high and fast.  And at the end of it all, he had always felt hollow. Empty somehow.

Then that kiss.

One stupid single kiss from a being that existed far outside the understanding of what he already knew.  The construct that they were was nothing more than a puppet, dancing for the cosmos above.

But, Milo found himself touching his lips and looking towards the soft pink lights of the district beyond.

“I’m not cooking you another plate, so stop saying stupid shit,” Yivi rasped at him, slamming a fresh platter down in front of him.  She was glaring at him when he finally pulled his attention to her. And just like that, the warm and patented smile of Milo Next was back in place.

It was just a kiss.

Forgettable even. Unimportant.

But as he popped another mushroom in his mouth and began gossiping with Yivi and the few patrons that sat at her booth, his eyes kept ticking towards the district beyond.  It wouldn’t hurt to stick around and wait for them. Be there when they left their meeting with Belladonna.

It was, after all, the gentlemanly thing to do.  Besides, Milo had a vested interest in them. That was all this was. Him protecting the thing he brought forth.  Refusing to forget about the real purpose of their existence.

Above him, the lanterns swayed, their light lingering across his face. He probably needed to keep his lips to himself. 

[[Next|Milo 8]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="35" name="Milo 8" tags="" position="1200,1175" size="100,100">&lt;img src=&quot;images/Keys 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;“Miloooooo.”

He ignored it.  The voice outside his door.  Hair plastered to his face, curls gone dark with rain, he stared at himself in the broken mirror.  His shirt was discarded somewhere in the corner, along with his pants. He had managed to find a clean pair of trousers to pull on before he caught sight of the scars. The one on his side, jagged and moon shaped. The burn mark across his shoulder was still discolored.  The starburst near his hip that he couldn’t even remember getting. Roadmaps, he had always called them. To different moments in his life. Important events and times worth remembering only because it changed everything.

“Milooooo.”

His lashes brushed the tops of his freckled cheeks as he closed his eyes in discontent. Grabbing a clean shirt, he shrugged it over his shoulders and shoved his feet into his boots.  The chains around his neck were tucked neatly inside the folds of his shirt, cool but dry now.  Only the leather cords wrapped around his wrists were still damp from the rainfall.

Stepping outside, he turned and locked the door, sticking the jagged key into his trousers pocket. Ever was there, sitting up on an old grain barrel placed in the shadowed part of the alley.

“Took you long enough,” she said with a giggle, kicking her feet back and forth on the barrel’s tarnished binds.

He didn’t look at her. “Not tonight, Ever.”

&lt;img src=&quot;images/Ever.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;“Why?” she pouted. “Is it because of that door opening?” She clicked her tongue in disapproval. “You gonna get upset now every time some refugees run on through? I was a refugee once.  Remember? Just a poor little lost girl who flung herself into the market just like Mama said.”  Milo’s head hung between his shoulders, his fingers twitching against the lock of his door. Maybe he should just go back in. Get some sleep.  Hazel could take care of things tonight.  “Do you remember that, Milo? Remember what Mama said?”

Sighing, he turned on his heel and looked at her. She was a waif of a thing. Forever little with big, wide set green eyes and lank honey curled hair.  She had the fat of youth on her cheeks though. The only thing about her that wasn’t skin and bones.

“No, I don’t remember that, Ever. I don’t know your mother.”

She frowned at him, tilting her head to the side and pausing her kicking for a moment. “Oh,” she said sadly.  It was the same each time. She always hoped for a different answer.

Running his fingers through his hair, he approached her.  He should have had more patience for her. She was stuck, after all. Died in the alley right outside his front door.  Too young to understand what had happened to her but not young enough that the Night Market let her go.

“So why are you sad tonight if it isn’t because of the door opening?” she asked.

Hopping up on the grain barrel next to her, Milo leaned back, crooking a leg up and draping an arm across it. “Who says I’m sad?” He had had, arguably, one of the best nights of his life. Dancing in the rain. Forgetting for a solid moment that none of this was real.

“Your eyes are red and puffy.”

“Dust does that to you.”

“Uh huh.” Tilting her head to the side, Milo watched as Ever’s hair fell across her shoulder, revealing the scar near her temple.  “Is it because of that person I’ve seen you going around with?”

Milo frowned. “How are you seeing anything? I’ve not brought them back here.”
At this, Ever looked excited. “I’m stretching. I can sometimes get away for a full twenty minutes.”

Milo refrained from commenting that ghosts shouldn’t be able to do that.  Restless spirits were to remain restless in their spots. He maybe needed to come home a bit more often.

“They don’t make me sad,” he said.

“Do they remind you of Mal?” she asked.

Snatching the cigarette from behind his ear, he perched it between his lips. By the Knowing, he wanted a smoke. “Mal is the only one that reminds me of Mal.”

“Then what?” It was asked with all the childlike innocence that only the young were blessed enough to possess.

“Dunno. They’re just different, I guess.”

“Ah,” she said with that knowing bucket full of confidence that Milo really wished he felt himself.  “You’re falling for them then.”

Milo snorted. “Such a kiddie term. Falling for someone. Makes no sense when you think about it.”  Ever shifted by his side, frowning as she tried to suss out the truth between his words.  “Besides, I’ve taken plenty of lovers over the years.”

“None that you kept going back to,” Ever pointed out. “What makes them so special?”

Taking the cigarette, Milo twirled it between his fingers, wondering when the enchantment on it would wear out.  How the damn cigarette was still intact after all this time was beyond him.  Holding it out, he stretched out his arm, the lamp light from above dripping down on them in the occasional fat raindrop.

“Ever,” he said, “if you could choose one thing in the entire world to have, what would it be?”

“You’re changing the subject.”

“I’m not, actually. Just go with me on this.”

She paused, seeming to think long and hard about that one.  Ever’s life had been confined to a short little stretch of space right outside an old whiskey distillery.  She was such a fixture in the alley that Milo sometimes didn’t even notice she was there. He wanted to feel more guilty about that.

“I would want a cow. Not a real one. A stuffed one.”

He peered at her out of the side of his eye, his heart aching. “Why would you want that?”

“My brother gave it to me. When I was a baby. Still in the pram.  I tried to grab it when Mama told me to run. I think I dropped it somewhere in the mud.”

Swallowing thickly, Milo didn’t look at her. The lanterns above were swirling. Their amber light soft and warm and reminiscent of a life that was stretching on and on and on…

“What does this have to do with what we were talking about?” she asked.

Hopping off the whiskey barrel, he turned and looked at her.  “Gotta go to Hazel’s tonight. I don’t know when I’ll be back. Anything I can bring you?”

She shook her head, her small fingers curling around the edge of the barrel. Milo wondered if they had been worked to the bone before death. Or if she had been spared and baked bread with Mama instead.  The faint smell of apples always lingered around her.

“I don’t think so,” she said.

“I’ll see you later then, my Never Ever. Try to get some rest.”

He turned, not able to look at her much longer.  He hoped she did sleep. He knew it helped her pass the time.  Tucking the cigarette back behind his ears, he shoved his hands in his pocket. Behind him, he could hear her shuffling as she began humming to herself, drawing on the walls and making the most out of the life she was now trapped within.  He needed to get to Hazel’s. They needed to discuss the doors that were opening. Too many were forming and they were doing so far too quickly. Milo felt the ache of each one like a dull knife across his back.

First though, he’d stop off at the market.  He had a stuffed cow he needed to find.

[[Next|Milo 9]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="36" name="Milo 9" tags="" position="1200,1300" size="100,100">&lt;img src=&quot;images/Keys 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The door to the apothecary had closed behind him and Milo made his way down the burnt street with the intention of heading home.  Intent was a funny thing though.  The decision to continue forward despite the reeling nature of his mind was one he put conscious effort into.  Yet, his feet took him elsewhere. Because his feet were traitorous bastards that liked to cause him pain.

There was a grave that sat near the edge of the treeline.  It was a simple headstone that didn’t stand out from the others but had a nice view of the woods beyond and the animals that ran wild within.  Milo stood at it now, looking down at the stillness, faced with his past while his thoughts were unraveling about his future.

He had kissed them.

Not for the first time either.

Caught in the moment.  The first kiss had been an experimentation of something new and exhilarating.  Yet it was laughable for Milo to continue with this excuse now.  Now that their lips had touched two, maybe even three times?  The sunset soaked horizon along with the death of an old city wasn’t romantic enough for Milo to even claim he had gotten lost in the idealist fantasy of it all.  No, Milo had known what he was doing tonight. Had from the very beginning.

So what the fuck was he attempting to accomplish?

The tombstone stood before him mockingly, a pocket watch that had never ticked hung over its front. It had taken years to find it. Hazel hadn’t wanted a memorial. For a time, Milo had tried to argue the point to her, that they should have some place to mourn. To lay him to rest.  But she had refused. To her, Malcolm was not dead. For Milo, that only meant Malcolm’s worst nightmare had come true.

He had found the tombstone out of curiosity one day, when he was winding his way between the graves. The name had beckoned him and when Milo had seen it, he had wept bitterly, grieving the man that he had lost.  The clock remained still, an indication that Malcolm would not be returning like Hazel assumed, and Milo had felt the last bit of hope die within him.  He disappeared after that. Gone on a bender somewhere for two weeks, barely knowing where he was and worrying Hazel nearly to death.  Because he was an asshole like that.  Milo still remembered seeing the gutted look on her face when he had returned.  Then the relief that quickly followed when he had wrapped her in a hug.&lt;img src=&quot;images/Mal grave.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

Milo stared at the grave now.  Malcolm Albright. It was not a name he often allowed to pass his lips. But as Milo held this new person, this being that he had somehow called forward, eyes were turning to him.  The first love Milo had after loss. The first person who he gave that secret smile to.  The first sign that Milo had moved on.  But the past was being dredged up and Malcolm’s death was being talked about and poor poor Milo.  He was obviously struggling.  The possibility of his dead lover returning just as he held his hand out for someone else was so very apparently weighing on him.

And Milo didn’t correct the inaccuracy. Not even once.

“Fuck,” Milo whispered.  He wiped at his cheeks furiously, the dew from the creek having hit his face. “Fuck you,” he said, kicking half-heartedly at the stone.

The thing was, he really did like them.  They had taken his hand and reminded him once more what it was like to feel again.  To not pretend to be filled with passion and life but to actually feel it. They had this desire to help, to ‘save’ the Night Market, and despite Milo’s assertion that it was a lost cause, they still gave a shit. Why? Because they were good.  It was a commodity that was hard to come by in this world.

And Milo Next was a fucking fool for falling for it.

“Why’d you have to put this shit on me, huh?” he whispered, staring down at the grave.

Malcolm was to blame.  Everything could be traced back to that fucker. He had up and left them all, gates wide open and continuing to tear the world.  This was supposed to be his job, his task to deal with. The fucking Gatekeeper was supposed to keep this shit under control. The gates weren’t supposed to fall to the likes of the people just trying to live their lives the best they could.  The ones left behind in grief.  
But they weren’t living.

Hazel was spiraling into an obsession to bring Malcolm home, whether she admitted it or not. And Milo? Well, no one gave a shit about what Milo was doing. As long as he kept smiling.

Just keep smiling.  Dance in the rain.  Wander the streets and breathe in life anew.

The Night Market cared, though. 

And wasn’t that the most ironic fucking thing Milo had experienced to date.
Feeling the wetness on his cheeks, he swallowed thickly. “I’m sorry,” he whispered. Milo came here for these confessions often over the years.  At least Malcolm would understand the things he had to keep from the rest of the world.  

“I feel guilty,” Milo confessed.  “I know you’ll tell me not to. That I don’t owe you anything but this isn’t fucking about you. I just… I feel like what I’m doing isn’t okay.” He laughed, mirthlessly. “I know it&#39;s not okay.  I mean, what the fuck am I thinking here? That I can just start a relationship? With them?  It’s not right. I know it. You know it.  No one else knows it but…” Running his fingers through his hair he grabbed at the soft strands there. “It’s fucked up. I’m fucked up.  And everything that they are willing to do… You’re supposed to tell me what to do here, Mal. I always came to you when I couldn’t figure out my own head.  I haven’t been able to come to anyone for ten years because you’re a prick that decided to up and die because of what? Some lame sacrifice to protect me? Fuck you, Mal. Fuck you.  That wasn’t supposed to be your choice. It never should have been your choice. It…”

He stopped. Heart beating wildly he tried his best not to scream.

“I want to live my life again,” Milo said slowly.  Though the words felt stunted at best, coated with a certain amount of failure that he couldn’t fathom.  “But the first person that’s come along that made me want to do that is the very one I’m supposed to give back. I already had to let you go, Mal. It’s not fair that I have to let them go as well.”

The wind blew across the sea of the dead, whistling softly and tumbling the few fallen leaves that had gathered along the path.  Milo stared at them. Hazel would see it as a sign. Milo saw it for what it was. The lanterns were going to go out soon. The festival to relight them was tomorrow.

Scrubbing at his face, he shook his head. “I’m gonna end it. I should have ended it a long time ago.  I’m gonna tell them that they just got here to the market. They don’t even know what they want yet. And with everything else going on, everything they think they have to do…”

He trailed off, realizing he was talking to the air and nothing more.

Straightening his shoulders, Milo shook his head and grabbed the cigarette from behind his ear.  Perching it between his lips, he placed his hands deep inside his pockets, casting his gaze up towards the lone cathedral that stood at the top of the hill.  The Graveyard keeper and his son lived there, watching over the dead and waiting for the clocks to chime to bring them back to life. Malcolm’s had been broken the second his grave formed. He was never coming home. Milo would have to figure this fuck up out himself.

The thing about Milo, though?

He was a very weak man.

Sighing, he shook his head. “I could love them, you know,” he told the headstone. “I could so easily love them.  You understand that right? You were in love with them too?”  The answers were lost and Milo thought that may have been for the best. “Yeah,” he said, running a hand across his cheeks.  “I know.”  Turning, Milo went to make his way back through the wood, either to end it or to completely tumble into the unknown.

Behind him, the broken clock let out an echoing tick and Milo’s eyes went wide.

[[Next|Milo 10]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="37" name="Milo 10" tags="" position="1200,1425" size="100,100">&lt;img src=&quot;images/Keys 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The heat of the lanterns were almost unbearable after the festival. Made a person feel hot and sticky under the collar. Of course, the dip in the pond had been refreshing. Active. A good way to end the evening.

Milo scrubbed a hand over his face.  He was well and truly fucked, and it was in more ways than one.

Ducking around the last of the festival goers Milo made his way towards a familiar wall. He had been scaling it since he was a kid and despite it somehow growing over the years, it was still easy to climb. Hoisting himself up on the burnt edging behind the backs of the dilapidated buildings, Milo held out his arms. Putting one foot in front of the other, he balanced on the old market line that separated the Albright land from the rest of the world.  It was of course all overgrown thicket and blackberries and Milo was pretty sure if he were to drop right there, he would fall forever. But there was a turn, about halfway down. It was a familiar one that he had used when he used to sneak to them at night. When he didn’t want Lucinda Albright to know he was coming.  Milo could navigate that area with his eyes closed.  And he kind of had to. At least here. The lanterns may have renewed, but they would never cast their glow in this alleyway again.  The grass below though was still plush and damp, speckled with purple flowers. He dropped onto the green expanse, making his way towards a familiar creek and the large tree that hung protectively over it.

“You fall yet?” he called out. He didn’t look up as he kicked off his shoes and stepped into the water.

He heard the giggle. She had probably been watching him from four or five blocks away.  “Not yet,” Hazel called down to him.

There was an old swing that hung from a thick branch. It was tied together with rope and concluded at a wooden base.  They had built it one year when they were younger. Milo hopped up on it now, his feet still grazing the water&#39;s surface. Curling his fingers around the old lines of rope, he began pumping his legs back and forth, listening to the water splash beneath him.

“How was the rest of the festival?” Hazel asked. She was sitting in the tree, dangling her hands downwards and drawing intricate shapes into the night air. She lounged like a cat across the thickest part of the branch, her skirts hanging over the sides like ivy.

“It was good. You?”

“Lovely,” she sighed. “The lanterns looked especially pretty this year.”

“Why are you out here?”  Milo asked.

“Why are you?” she retorted with a raised brow.

They both grinned.

They had been coming here post lantern festival for years. The two of them always ended their night in this river. Meeting back up no matter where the evening had taken them.  It was a tradition of sorts. One started when they were younger, back when they thought it was rebellious to stay up all night. Now it was an old comfort the two of them refused to shake. The older they got, the less those types of opportunities remained. This was one of those childhood memories they clung desperately to.

“You know, Milo,” Hazel said, pillowing her head on her arms. “If you want to keep a secret from me, you need to do a bit of a better job.”

“Oh? And what secret am I keeping from you?”

“Your hair is wet. So was a certain shopkeep’s of mine.”

&lt;img src=&quot;images/swing.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;Milo didn’t look up at her. Just continued swinging. The hem of his pants were getting damp as he sliced through the water. When he didn’t say anything and let the silence follow, he heard Hazel shift above him.

“Oh, Milo.”

“Don’t.” The word maybe came out a bit harsher than he expected.

“I absolutely am not going to be listening to you.  Are you okay? I know that you two have been very flirtatious, and I thought that was going to be good for you. You deserve to have someone in your life. But you don’t look happy about it.”

“I had a wonderful evening on my knees in a waterfall, Hazel darling. Why wouldn’t I be happy?”

“Gross,” Hazel said. He could practically hear the wrinkle of her nose. “And stop deflecting.”

“Is it deflecting if it is the truth?” he mused.

“Milo.”

Sighing, he tilted his head back so he could look up at her again. She was still lying on the branch, somehow balancing on it perfectly. But her lips were turned downward.

“It was a good time. What more do you want me to say, Hazel?”

When a spare branch hit him squarely in the side of the head he nearly fell backwards into the water.

“Don’t be an ass,” she told him firmly.  “You have a rule of not falling for anyone. I know you don’t say it, but I know it&#39;s practically the gospel of Milo at this point. And from where I’m sitting, it looks like you broke your creed without meaning to. So you now have a choice, Milo. You either accept that it is okay to be loved, or you become an unrepentant asshole over this entire situation and make me and everyone else sad.”

Milo snorted. “I like how you threw yourself in there.”

“When it comes to the people I care about? Of course, I’m including myself.  And I know you well, Milo.  You don’t mean to be an asshole, and you’ll feel guilty if you are. So why not just skip that entire part and understand that what you did tonight was okay.”

It was more than okay.  It felt incredible.  Milo had every intent to break it off. Or, break off the idea of them becoming something more.  Were they ever really on? It didn’t matter. It needed to end before it went too far. But then there were the lights and the festival. Everything had felt right. It slotted in his chest in such a way that made him feel swept away with it all.  He never should have led them down to that pool.

Looking down at the ring, Malcolm’s old Baron signet, he shook his head. He had been so stupid.

But gods did they look good wet.  Water dripping down their shoulders, pooling at the dip of their neck.  The wisps had cast an ethereal glow all around them.  The way their thighs felt gripped in Milo’s hands.  He had wanted to shove them up against the wall and lick every bead of water that coated their skin.  Worship their very body until they knew nothing but his name. And when it was all done, Milo wanted to lay them out, pliant and damp against the shore, and do it all over again.

Letting his head hang down he laughed bitterly to himself.

“Fucking hell this is messed up,” he muttered.

“It’s not,” Hazel tried to soothe. “It’s just the first time you’ve let your heart open again.  It’s okay to feel this way, Milo.”

“And what about them, huh? Is it okay to keep doing this when I know it’s all going to end in some sort of bloody mess?”

He hadn’t meant to say those words.

“Why would you even think that?  They’re not Malcolm.” Slipping from the bough, Hazel climbed down the small footholds until she landed in the water. Coming to stand in front of him, she stopped the swing. She was still shorter than him. Even with him sitting. His head was bent, his feet reaching towards the smooth pebbles of the creek bed, while Hazel stood in front of him, her skirts billowing outwards in fabric ripples.

Ducking her head, she caught his eye. “That night was terrible,” she whispered. “It changed both of us. But we can’t keep living in its shadow.”

His gaze ticked sharply to hers. “Then why do you? You’re obsessed with getting him back. You’re…”

“That’s not the same,” she said quickly.

“Isn’t it? Why are there no animals around here, Hazel? What are you doing when you sneak out here late at night?”  Leaning forward, his eyes dark, he shook his head. “I’m not the only one with secrets, it seems.”

Tipping her gaze upwards, she met him head on. There was fear in her eyes, but a stubborn determination swelled there as well. “No. You’re not. But I’m not the one still punishing myself because I couldn’t save him.”

Milo wanted to protest. To scream and rage at her. Because how dare she. How dare she insinuate that that was what he was doing. She didn’t know half of what he had gone through or what he would continue to do. She didn’t know a damn thing. But when he looked at her, he felt himself deflate.  Hazel had been there that night. Had held him. The two of them had held each other with Malcolm’s blood drying all around them.  He sometimes forgot he didn’t have to be alone.

Cupping his cheeks in the warmth of her hands, Hazel smiled softly at him.  “I think you two are cute together. And while I never ever ever want to hear any of the details of tonight, I am happy for you.”

Milo couldn’t help but feel guilty over her words. But at the same time, it was so hard to refuse the affection she so readily gave.

“You going to be able to handle it all again?” he asked. He didn’t know why. He knew it wouldn’t be this way. But…

“Handle what? Seeing you sneak around behind my back, thinking that I don’t know exactly what you’re doing?”

He laughed at her. “Yeah.”

“I think I can handle it,” she said.  “Now, hold on tight. I’m going to push you. And I want to see if we can beat our record.”

This, Milo knew how to do. Old games. Old habits. Safety. He jumped at the opportunity.  Standing on the swing, he gripped the ropes tight.  Hazel shuffled through the water behind him before starting to push at his back. He could feel the second she threaded her magic into the push.

“I can make it,” he told her.

“Two more pushes. On the third, jump.”

Milo held his breath, curling his back as he readied himself. One push. Breathe in. Breathe out.  Two pushes.  Steady. Don’t rush it.

Then, the third.

Milo leapt from the swing, airborne for just one minute. For one minute nothing mattered. Not the things to come. Not the decisions he had to make or the actions he had to follow through. Just him and Hazel in the creek like when they were kids. Stupidly trying to jump to the tree branch.

When he did, his arms wrapped around the thick bough, and he scrambled upwards with a shout of surprise. Down below, Hazel was kicking the water, hollering in victory as beads of dew flew into the air. Never before had they been able to do it. It had always ended with Milo, face first in the creek bed.

Standing on the branch, Milo bowed with a flourish.

When he fell into the water seconds later, it was to the sound of Hazel’s cackling laughter.  He was much bigger now and his footing was not as sure as when he was a child. But, despite hitting his shoulder against a rock and choking a bit as he sucked in what he thought was a tadpole, Milo couldn’t help but laugh as well.  Because this was normal. This was why he was doing what he had set out to do.  
Milo would gladly suffer all the heartache just so he never had to sacrifice nights like this again.

[[Next|Milo 11]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="38" name="Milo 11" tags="" position="1200,1550" size="100,100">&lt;img src=&quot;images/Keys 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;I hissed in pain, arching up off the mattress as something cold and wet swiped across my belly.  Eyes flashing open, I stared up at the piped ceiling of a rusted distillery.

“Sorry. Sorry.” Milo’s voice was soft and warm in the chilled night.  A rag was clenched in his hands as he sat next to me, naked.  I blinked the grit from my eyes, trying to gain my bearings, but feeling every muscle in me scream in protest.  “We need to clean your wounds,” he said, holding the rag between us as if to further his explanation.

I was a mess. This much I knew. The Deep had taken its toll and while I had managed for a time, the wounds that I had were more than I was used to and the aches that were settling across my body were screaming now that I had time to rest.

Laying back down on the sheets, I nodded at him.  Much more carefully this time, he began cleaning me up, trying to find which spots were dried blood and what was something he needed to grow concerned over.

“I want to say I’m impressed with you, given how beat up you are. But I also think that might be a dickish thing to say given what you’ve gone through,” he tried to joke.

“What do you mean?” My voice was raspy as I stared at him, shifting my head on the pillow.  There was a dull ache at the base of my spine and I vaguely remembered slamming against a rock.

“You sure as hell know how to treat a man right,” he said with a small chuckle. “And now I’m really hoping you didn’t open any wounds in the process.”

I looked down at myself. I was still naked, a flannel sheet covering most of me. Milo’s bed had no sense of order to it. It was all mismatched blankets and quilts and bits of fabric that looked as if they had been mended through the years.

Hissing as he passed over a particularly sore portion of my ribs, I blinked up at the ceiling in hopes of keeping the wetness from my eyes. I wasn’t sure if it was a reaction to the Deep itself, or just the pain.

“I’m sorry,” his voice was shredded.

“It’s okay. If anything, maybe I should be apologizing.”

“You didn’t hurt me,” he confirmed.

I smiled at him, remembering the way he felt beneath my hands. “I meant for not listening to you about the Deep.”

“Oh.” He laughed a bit at that, scrubbing a hand across his face.  I could tell he was tired and with only dirty windows set high against dusty walls, I had no idea what time it even was.

“Have you slept?” I asked gently.

He shook his head. “Can’t.”

“Why not?”

His eyes ticked to me, looking at me hesitantly. Grabbing a few bandages he began wrapping my waist.  Broken or cracked ribs for sure then.  “We need to get you to Hazel’s,” he said. “She’s way better at this than I am. Plus she’ll have tonics that will fix up whatever you have going on.”

“Milo,” I said softly. “Why can’t you sleep?”

He was silent as he continued to tend to me, his fingers soft against my skin, running across me with this little sense of wonder I wasn’t sure I understood.  “I just get that way sometimes. Always have.”

“Surprised you haven’t asked Hazel for something.”

“I used to,” he said, taping up the edge of the bandage.  “But it gave me weird dreams and I struggled the next day with being super groggy. Ended up just not being worth it. I know she probably could make something different or tweak the formula but…” He tipped his head upwards, blinking towards the rafters.  “I don’t know.  I hate asking her for things, to be honest.”

&lt;center&gt;&lt;img src=&quot;images/Milos bed.png&quot; height=&quot;600&quot; width=&quot;700&quot;&gt;&lt;/center&gt;

“Why?” Hazel was one of the most giving people I knew.  It almost felt like an insult not to allow her to help.

“Because that’s all anyone&#39;s ever done. From the time I can remember, everyone has always asked Hazel for things. Hazel make this. Hazel do that. Hazel do you have any food? Can you watch my pet? Could you fetch something from the market? Whip up a tonic?” He dropped the rest of the bandages off to the side, curling his legs under him and grabbing a pillow to hug to his chest. “I don’t want to be one of those people.  So I usually try to figure it out on my own.”

“But she would probably like helping you. And you’re not taking advantage of her,” I pointed out.

“I know. Just not something I’m comfortable with. Besides, the insomnia passes. It always does.”

Shifting experimentally, I tried to figure out what hurt and what was okay to do.  I sat up a little but knew that I didn’t want to risk much more. I was going to need to send Milo to the apothecary in the morning to get some healing herbs.  Everything ached far too much to walk back tonight, however. Especially now that the adrenaline had worn off.

“How often do you have it?”

He twitched uncomfortably. “We really don’t need to be having these kinds of discussions.  It’s not important. And you should be resting.” Something had shifted with him.  In the last twenty-four hours there was something more to Milo that I was not entirely used to. A sort of discomfort within his own skin. The usually open and brazen man was being tampered down and I couldn’t decide if I was finally seeing the real Milo Next, or if there was something more at play.

“Milo,” I reached out, tugging at his hands. He startled a bit at the contact. “Don’t you think that after the last two times we’ve been left alone together, we could have a conversation about sleep?” I tried to make light of it, knowing that he was not altogether on board for vulnerability.  Never mind that what we had just done had left him pretty vulnerable.

He huffed in laughter, his eyes looking tired in the dim candlelight coming from his bedside table. “Yeah. I guess seeing my ass does lay everything bare, huh.”  He tried to smile. Though I didn’t believe it for a second. “I used to get nightmares. Terrible ones, actually.  And I mean this is a long time ago. Like when I was a kid.  But they got so bad that I just avoided sleep. We’re talking for days on end.  The amount of times I woke up, passed out somewhere, is ridiculous, let me tell you.  Woke up face down in a stream once, coughing and choking, and had no idea where I even was.”

He played with my fingers, keeping his eyes set on them. The rings adorning his own glinted softly back at me.

“Eventually, I was able to work through most of the stuff that triggered the dreams.  Was able to realize that not sleeping was making the sleeping hours way worse. Got help. Bla bla bla. All very uninteresting and casts me in the light of a not so dashing hero,” he smiled a little at me for that.  “But, when I get under stress, it sometimes just comes back, you know?”

“You’re stressed then?”

He shrugged. “I guess. I hadn’t really examined it much but yeah, the signs are starting to get there.  Something&#39;s bothering me, and what do I do when something&#39;s bothering me? Avoid sleep.”

I stared at him. It made sense. The last few days he had been far more on edge.  It all seemed like it was catching up to him now. I wondered if it had come to a head when Hazel and I had gone down to the Deep. Seeing me banged and bruised probably didn’t help.

Sighing, I tugged on his hand, wincing a little as it pulled on my wound. He scrambled forward at that, looking me over as if I were about to fall apart.

“I’m okay,” I winced. “Just moved wrong.”

“Stop moving then,” he demanded incredulously.

“I’ll get right on that,” I mumbled.  Keeping a hold of his hand, I maneuvered the two of us to lay down, side by side. His eyes were wide and frantic and I knew even if I asked him to, he wouldn’t be able to fall asleep.  Reaching out, I ran my fingers across the freckles upon his cheeks. The ones that led down his neck and across his shoulders. He shuddered under the touch. “Talk to me. Not about nightmares. Not about things that stress you. Just talk to me.”

He blinked owlishly at me, the words not quite coming like I thought they easily would. But I could see it. The effort he was trying to make.

Settling, Milo caught my hand in his own, tapping each knuckle, playing with the nail beds and running his fingers across the lines of my palm.

“Have I ever told you how buttons are made?” I shook my head. “It’s a terribly interesting story. You wouldn’t think it but it is. You see, you must travel down to the button mines and fight a series of fluffy creatures for their eyes…”

“Their eyes?”

He looked gravely serious all of the sudden. “That’s what buttons are. The eyes of the adorable.”

“That’s disturbing.”

“Gonna make you think twice the next time you put those pretty clothes of yours on, huh?”

I let out a shaky laugh. It hurt and rattled my chest but thankfully, Milo didn’t stop talking.  I listened to his ridiculous lies about the button mines and the fluffy creatures that lived there. I listened to his tale of daring defeat as he, at age ten, took down an entire army and sewed buttons on the clothes of emperors. I listened to it all until I slipped away again. And just before I did, I felt his breath ghost across my cheek.

“Dream good dreams for the both of us, yeah?”

I smiled, nodding a bit, and curling close to him.

[[Next|Milo 12]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="39" name="Milo 12" tags="" position="1200,1675" size="100,100">&lt;img src=&quot;images/Keys 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The lights flickered on above sending the spectral crabs scattering.  The chandelier was made of crustacean bone and tapered flickering candles, the likes of which had glass bulbs instead of wicks.  Milo looked up, nodding as the crabs ran away and the little seahorse he had seen bobbing off to the side, hid beneath an old barnacle encrusted hutch. He had rather liked the little sea friends.  The Deep was a terrible place, but the salon didn’t seem that bad.

Sitting in one of the old velvet lined chairs, Milo spun a bit. The gold framed mirror to his side caught his reflection, cutting it through with bits of scattered wax. He could see a few broken candles shoved off to one corner and wondered if it was standard practice to cut beast&#39;s hair by an open flame.  In hindsight, his calm was misplaced.  Or, at least, it was misplaced in what he was trying to present. So when the shriek echoed through the air and he in turn let out a startled wince, he really had no one to blame for himself.

Placing his hands in front of him, palms turned upwards, Milo looked at the woman standing not too far away. She had seafoam green hair that looked as thick as yarn and wore a puffy white sleeve top with embroidered flowers that Milo knew Hazel would love. Her hand was clutched to her chest as she stared at Milo with shocked eyes and the clear indication that she was ready to run.

“I’m not here to hurt you,” Milo said quickly. “I probably should have waited for you to open and come in through the front door like everyone else but I’m not great at thinking my actions through.”

She stared at him, slowly letting her hand fall to her side. He could see she clutched a pair of shearing scissors in her other hand.

“Also, the seahorse was hungry,” Milo said. “I fed it.”

She tilted her head to the side. “What did you feed it?”

“Jerky. I had some in my pocket for the selkies.”

She looked towards the hutch where she knew the little creature hid. “Thank you. I haven’t been able to figure out the poor things preferences yet.”  Setting the scissors aside, clearly understanding that she wasn’t in immediate danger, she stared at him. “You’re Milo, aren’t you?”

&lt;img src=&quot;images/Anemone.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;“It’s not my birth name but it&#39;s what I go by,” he smiled.  “Hazel tell you I’d probably skulk down here?” The woman nodded. “Yeah. I figured. She knows me pretty well.  It is nice to meet you, Anemone.  I’ve heard good things about you. And not just from Hazel. But I am going to have to chide you a bit for taking advantage of my friends.”

“Taking advantage?” she asked.

“Yeah. With the entire ghost thing.  You weren’t really possessed and I’m gonna need you to admit to that so this charade can just up and stop.” While his smile was kind enough it held a knife&#39;s edge to it that was unmistakable. Milo was not a man who tolerated deceit well.  It was a hypocrisy he was all too aware of.

“Well,” she said slowly, putting down the rest of her things. “I wasn’t possessed. You’re right.” Milo smiled, self-satisfied. “But that doesn’t mean that your friend didn’t show up.”

“That doesn’t–”

“Do you know anything about possession?” Anemone’s voice was soft but it held a command that made Milo’s spine straighten. Damn strong-willed women and their way to his very heart.  “Possession, at least down here, is when something takes hold of your body. Normally, without consent. Your friend did not. He used the image of me through the mirror with my invitation.  I was a tool along with that receptacle,” she nodded towards the wax mirror, “but I was not possessed.”

“Fine,” Milo said tightly. “You weren’t possessed. But it was still a lie.”

Anemone looked confused at the anger and certainty crossing the other man&#39;s face. Normally, people rejoiced at hearing news about their loved ones. But Milo looked as if he was going to be sick.  “Do you not believe in an afterlife?”

“Not if I can help it.”

“But surely you know of the spirits in the Night Market.”

“I do. They’re not the same thing.  Spirits wander because they are connected to this world. But when you aren’t connected or you’ve made your peace, you move on to oblivion.”

“Oh,” Anemone breathed. “What a sad thought.” Milo didn’t know what he was expecting her to say but it wasn’t that. He shifted uncomfortably in his seat.  “You don’t think his sister and his friends were worth him clinging to this life?”

“He was one of the most zen fuckers I’ve ever known. It was annoying. So I think he was able to let go of this mortal coil and move on before death even belched in his direction.”

“So you would rather this Malcolm cease to exist?”

“Than share a realm with his dead mother? Yes. Yes I would.” Then, as an afterthought and almost under his breath, “Mal would have fucking hated that.”

When Anemone appeared before him, he startled. Gently, she pushed him back down into his chair and Milo really didn’t know when he had even begun standing.  When she handed him a mug of tea he was almost certain that this woman had the same type of homey witchcraft powers that Hazel had. Which meant she could probably kill him with a scone and an understanding smile.

“May I ask you something?” Milo was almost certain she was going to bring out a blanket next.  Anemone was looking at him with that insane desire to take care of him.  “Is the denial of him being alive for a specific reason or is it really because you don’t believe in a realm beyond ours?”

“I don’t believe in a realm beyond ours,” Milo said quickly.  “Bullshit Knowing rhetoric or what have you, is all comfort and nothing more.  Maybe, just maybe, there are some beings that can make it through. That do go elsewhere because it’s their culture or some weird shit like that. But Malcolm Albright was born here. He was born to a horrid woman and for all his life, was considered a fluke. Wrong somehow.  He was ridiculed his entire childhood. He was disowned in his teen years. The shit was beaten out of him time and time again before he learned how to fight back.  And no afterlife or god within it, ever helped him. So, no, I don’t believe there is a place for you when you die. And if there is? I don’t really want a part of this magical utopia that didn’t lift a fucking finger during life.”

A tear slipped down Anemone’s cheek. She looked at Milo with such sorrow, her heart aching.  When she reached out to take his hand, holding out a tissue, Milo realized that his own lips tasted salty.

“I didn’t lie to your friends,” Anemone said softly. “If I could, I would call your Malcolm forward and prove it to you. But whatever happened the other day dislodged something.  I think what was keeping him back finally broke loose. He is on the other side. Connected with what I suspect was a forgotten spirit that had been wandering.  He is up there now, Milo.  He did not walk into oblivion.”

“And if I don’t believe you?” Milo asked.

“Then don’t believe me,” she said gently.  “But don’t alienate the people who do.” Standing, Anemone patted his hand.  “I’m going to make dinner. I would very much like you to stay. I think you could use a good friend right now that knows nothing of your life.”  She didn’t give him a chance to say no as she walked away. Only a moment to gather himself.

Leaning forward, head in hands, Milo let out a deep breath.  The little seahorse from earlier came out, nudging his side.  Without thinking, Milo reached into his pocket for more jerky, flicking it towards the dead animal.  The Night Market was an oddity. It was a being onto itself that never should have existed and Milo felt like the second he stepped into their world, his life had spiraled out of control.

But he supposed it wouldn’t be long now.  Everything was slowly going to fall into place like a twisted little puzzle.  Perhaps, instead of fighting, it was better to acknowledge that and spend the last free moments beneath a stitched sky with the people he cared for. Which equated to three individuals only. Hazel. Ever. And the one shining soul he owed so much more to in this life and the next.

Sighing, Milo pushed himself out of his chair. Maybe he would take Anemone up on her offer of dinner. Then? Then he was going to drink himself into oblivion.

[[Next|Milo 13]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="40" name="Milo 13" tags="" position="1200,1800" size="100,100">&lt;img src=&quot;images/Keys 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;//Warning: Contains explicit sexual content//

With his head tossed back, Milo widened his stance, back butted up against the table. The tavern was empty now, the patrons having cleared for the night leaving nothing but a low burning fire in the hearth and the soft sound of music elsewhere.

“Is this what you wanted?” they asked, looking up at him from between his legs.

Reaching down, he cupped their cheek, thumb catching on spit covered lips.  “You know I’ll always want you,” he told them. He couldn’t see them. Their features were hidden in the flickering light of shadow, the swinging lanterns above having long since gone out.

They smiled. It was that soft and sweet smile that made Milo forget about everything bad in the world. The one he knew was just for him. It made him feel cherished and zeroed his entire world in on the feeling of actually belonging for once in his life. When it was followed up with a long lick up the length of his cock, his back arched and he hissed in pleasure.

“Answer me, Milo. Is this what you wanted?”

His chest rose and fell, hair sticking against his forehead.  He could feel the way his belly tightened under their fingers, the muscles shifting and tensing in desire.  He didn’t know what they wanted. He just wanted to make them happy. To keep them safe. Why couldn’t they understand that?  Why couldn’t he understand that? As the heat licked up his spine, twisting around him in a tight grip of pleasure, he shook his head back and forth.

“Answer me, Milo.” Their breath was ghosting across him, causing him to become red and aching.  Their lips were so close, wet and open and so very teasing.

“I don’t know what you’re asking,” he panted. If he knew, he would answer them.  

“Did you want to be in control? For once?”  They sucked gently on the head, causing Milo’s mouth to fall open and his hands to grip the edge of the table. “Didn’t you want to control something and call it your own?”

“What?” he frowned as he looked down at them. “No. What are you even talking about? I never wanted to control you.”

The smile twisted a bit, turning slightly cruel. “You sure about that?”

He didn’t know how it happened but suddenly he was inside them. They were flat on their back, moaning and writhing as they fucked themselves wantonly against him.  Milo’s head dipped, his nose running up the line of their collar bone.  Slowly, his hips began to move, the table beneath them creaking with each thrust.

He could hear his own voice, a low whisper in their ear.  “I never wanted to control you,” he breathed against them, thrusting hard to elicit a soft whine. “I never wanted any of that. I just wanted you.  Your body. Your heart. I wanted something for me for once in my god-damn life.” The table slid across the floor as he thrust into them hard, holding their thighs and bending their legs up near the chest.  A sharp hiss of breath filled the room as sweat rolled down their bodies, the two of them sliding together in the muggy dark of the old tavern.  “I want to make you feel good,” he whispered.  “I want to be inside you.  I want to make your eyes roll back in pleasure and when you’re a shuddering mess beneath me. I want to tell you how fucking beautiful you are just for giving it all to me.  When you walk through the market I want you to feel my cum dripping down your thighs and I want you to ache for more.”

Reaching between them, he began to play, wringing every ounce of pleasure from them he could.

“And in return, I want to feel the same,” he told them, twisting his wrist and pumping himself deeper inside them. “I want to see your fingers inked into my skin the next morning because you gripped me so tight. I want my cock to ache with how good I fucked you. I want every inch of me to be boneless because you rode me so hard that I forgot my own fucking name,” he growled. Spreading their legs wide, he began to fuck into them in earnest, feeling his balls begin to tighten as his own release was near.

A soft hand came up, cupping his face, turning his amber eyes towards them.  “Then just let me be yours,” they whispered. “Tell me I’m yours and I can be that.”

With a growl, Milo lunged forward, capturing their lips. “Mine,” he whispered. “You’re fucking mine, you hear me? No one else&#39;s. I don’t care about the rest of the world. I don’t care about what will happen, I deserve to have you.”

“Yes you do.”

“I want to have you.”

“You have me.”

He dipped his head down on a broken sob. “Why can’t I have you?”

Milo woke with a start, aching and sweaty as he stared up at the shadowed ceiling of the distillery.  The rafters had once been wound with soft string lights, small little lanterns that dimmed as the day turned. They had burnt out so long ago now and Milo had never gotten around to changing them.
	
Scrubbing a hand over his face, he let out a shaky breath.  He had returned from the tavern only hours ago, after dropping them off at Hazel’s.  The two of them had been pressed together outside the gate, mouths hungrily devouring each other as hands wandered just a little too low.  Milo had grinned, nipping against their lips as their hand snapped at his suspenders before snaking down to cup him through the tight fabric of his trousers.  They had gotten bolder. Far more likely to surprise him now than he was them.  It was perfect really and sent Milo’s heart fluttering in his chest with a sense of happiness he hadn’t felt in a long time.

And just like that, it was all snuffed out.

Like everything else in his life, it was a fleeting feeling that would never last.

Tossing the sweat slick sheets from his body, he hit the mattress with his fist, gritting his teeth as he felt that familiar pulse between his legs.  He had things to do today.  This was the last thing he needed to be indulging in.

Yet when his hand went down to adjust himself, he felt his cock twitch in need.

“Fuck,” he whispered.

Gripping himself, he squeezed tightly, his thumb dragging slowly up the thick vein, circling the head and playing with the slit.  He turned his face to the side, burying it in the pillow as he huffed out a pained breath. He shouldn&#39;t be doing this. He absolutely shouldn’t be doing this.

But the dream had been so good. It had felt so good.  Why couldn’t he indulge in it just a little longer?

Tossing his free arm over his face he began pulling at himself roughly, wincing at the tight drag of skin and lack of slick. He didn’t care if it hurt or left him raw. He just wanted it done with. He just wanted to spill across his closed palm and get a few more hours of sleep before he had to start the shit fest that was his life.  But it wasn’t enough.  

Rolling over, he got on his hands and knees, jerking between his legs and imagining them beneath him.  He imagined spilling against their skin, rubbing it between their naked thighs before going down on them himself, bringing them to completion and feeling their pleasure against his tongue.  Sucking on a finger, he reached around, playing with his backside, seeking out his puckered hole to feel the tight burn.  He squeezed his eyes shut, imagining it was them.  Their fingers. Their tongue. Their body fucking him over and over and over again until he was left screaming into the pillow for more.

But it wasn’t enough.

It just wasn’t ever enough.

Collapsing, Milo cried into his pillow, feeling tears of frustration wet his cheeks.  

He would never be enough.

&lt;img src=&quot;images/Sad milo.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;He hadn’t been for his mother or father. He hadn’t been for Malcolm or for Ever. He wasn’t for Hazel. And he certainly wasn’t enough for them. He had failed the Night Market above anyone else.

Curling his body into a tight ball, he hugged his pillow, his father&#39;s words coming back to haunt him still. “You will always be alone. Who would want someone as corrupt as you.”

“Shut up,” Milo whispered against the ghost of it all. “Just shut the fuck up.”

A hand ghosted down his back, something soothing and warm. Startled, Milo sat up, looking around the room.  It was empty, just as it had always been. But he had felt it.  That slow glide of comfort.

Wiping at his eyes, he looked around nervously. “Hello?”  There was no answer.  

Taking the blanket, he pulled it up to his chin and laid back down. He had a few hours yet before he needed to get up.  It was best he got some sleep.

As he closed his eyes, he tried to clear his mind. And outside the window, the one high above in the distillery that led to the rooftop, the lanterns swayed.

[[Next|Milo 14]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="41" name="Milo 14" tags="" position="1200,1925" size="100,100">&lt;img src=&quot;images/Keys 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;His palm came down upon the lantern, scattering the rain across the streets. Colored drops fell like gems across each cobblestone, bouncing along until they dissipated within the market&#39;s cracks. Milo looked upwards, squinting into the rain, hair sticking to his face and shirt plastered to his chest.  Opening his mouth, he stuck out his tongue to catch the drizzle before shaking his head vigorously, watching as the water flew from him in glittering buds of dew.  

Ducking his head, he bent beneath the archway of the old stone walkway that led towards ‘home’.  The torches were dim as the eve had struck, but the whirring of the sewing machine brought a smile to his face. “Bastard,” he chuckled to himself.  

Taking the steps two by two he jumped the last one, landing on his feet in an old stone room with a blazing hearth and a giant of a man slumped over a still running machine.

Milo approached Feebus, looking at his adoptive father figure, the man who had taken him in at such a young age. It was with intense fondness that Milo remembered his time here. Even if at the time he couldn’t wait to leave. Feebus was snoring, nearly louder than the machine itself and when Milo flipped it off to silence the room, the redheaded giant nearly jumped awake.

“Won’t your wives be lookin’ for you by now?” Milo asked with a raised brow.

Feebus blinked, the past and present colliding as he remembered a young boy with dirt streaked cheeks and a temper to boot. “What’d you do?” he asked, narrowing his eyes.

Milo flopped down on one of the chairs nearby, crossing one leg over the other and placing his hands on the arms.  He sat in repose, his body loose and unencumbered.  It wasn’t often anymore that he felt comfortable in his own skin.  Hazel used to bring that relief but in recent months even that succor had been whisked away. “You know, eventually you are going to need to understand that every time I show up here doesn’t mean that I fucked up in some way.”

“But did you?” Feebus asked, stretching. His back cracked loudly.  There was no reproach in his words. Just an understanding of the street kid he had cleaned up more times than he could count.

“Did I what?”

“Fuck up.” 

Milo held up his fingers, a hair breadth apart, squinting one eye. Feebus rolled his eyes and stood from the machine, groaning.  The cocky grin on Milo’s face was a defense mechanism he had seen through since the kid was eight.  He ignored it now.

“What are you working on?” Milo asked, dropping his own hand.  “I heard that the shipments weren’t getting through anymore. Why’s that?”

“Markets been a bit off,” Feebus said.  “Certain crafters are packing up shop and trying to go to safer ground.  Too many cracks are showing in the sky and people are worried the world&#39;s about to cave in. Slowed down what fabric I can get. And what help.”

“I’ll look into it,” Milo told him.

“What exactly do you plan to do about all that boy?” he asked with a raised brow. “You aren’t exactly a connoisseur of diplomacy.  Doubt they’re going to listen to your efforts to speed up shipments.”

Milo snorted. “No. Probably not. But I can find a problem like it&#39;s no one else&#39;s business. Maybe I can solve their location problem for them.”

Feebus walked over to a large ice box, pulling it open and pulling out two bottles of what looked like milk. He handed one to Milo who popped the top as if it were muscle memory. When Milo couldn&#39;t sleep as a child, he’d come to Feebus’s workshop.  The man always had a glass of cinnamon milk for him.  Some things never changed.

“Alright,” Feebus said, sitting on an oversized wooden chair. “Tell me what you did.”
Milo stared at the man for a long moment, the amusement gone from his face. A puddle was pooling beneath his feet as he stared at the man evenly.  “I don’t know yet,” he said in all seriousness.

“How do you not know?”

“It’s funny really,” he said with a shrug, kicking the dripping rain around the workshop floor.  “I should know but I don’t. Could be nothing in the end. Fates have yet to spin their tale.”

“Stop speaking in fucking riddles boy and just talk.”

Peeling the label off the bottle, Milo sat in the dim light of the room. The cold was starting to penetrate him but he wasn’t shivering. The market had grown cold lately. Far too cold.  It was a bitterness that Milo had gotten used to.

“You kill anyone?” Feebus asked.

“Not recently.”  For once, there was no blood on his hands. He had kept them pretty clean these last few months. Kept them clean for them.

“You thinking about killing anyone?”

Leaning forward, Milo set his milk aside. “I got a favor to ask you,” he said evenly.  The real reason he had shown up tonight.

“Figured.”

“There’s going to come a night that I’m going to need somewhere to hole up. Won’t be able to go home for a bit.  I haven’t quite figured out where I’m landing yet, but could I land here first? For a few days?”

At that, Feebus slowly narrowed his eyes. He wasn’t asking to come home with Feebus. He was asking to sleep in the loft of the shop. Where the thimbles and the discarded bits of fabric were kept. He was hiding. “Ava and Marie aren’t going to like whatever you’ve got goin’ on.”

“They don&#39;t have to know I’m here.”

Feebus looked at him, weighing the option of lying to his wives vs helping the son he never had.  When it came down to it though, Milo would always be housed in that soft spot of his heart. There was no getting around it.  Taking a slow sip of his milk, Feebus nodded. “Alright,” he said slowly.

“And,” Milo continued, “can you check on Ever?”

“Why you leavin’ that girl alone, Milo?”

“To hopefully keep her safe. Now will you check on her?”

Feebus nodded solemnly, drawing a small sigil in the air. A promise from the old culture. One Milo had never understood but it had always meant something to Feebus. “You know I will.”

“Thanks.” Milo leaned back in his chair contemplatively, still fiddling with the bottle.  

&lt;img src=&quot;images/Milo hand.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;“Boy, if you’re in trouble, you know there are people who love you. Who could help.”

“I don’t want help, Feebus,” Milo said, staring at his untouched drink.  “And for the first time, I actually do know what I’m doing.”

“You sure? Because you certainly don’t look like it.” Milo looked like a man dead on his feet. Surrounded by demons who were waiting to be cruel.

“I’m sure.”

They were words far too weighty for Feebus’ comfort, but there was nothing he could say to the conviction. So instead, he leaned back in his chair. “Drink your milk, boy.”

Milo took a sip, nearly sputtering. He held the bottle up to the light, watching dim notes of amber and honey swim in a tornado within. “Is there whiskey in this?”

“Damn right there is.” The big man lumbered to his feet, downing the rest of his own drink. “Now, if you are going to be here asking me these things you can make yourself useful. Grab a needle and some buttons. I’m behind on work.”

Milo laughed. “Alright, old man. Whatever you say.”

When Feebus walked away, he muttered something that suspiciously sounded like ‘idiot’. Milo smiled at the old sentiment, feeling his heart ache at the same time.

[[Next|Milo 15]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="42" name="Milo 15" tags="" position="1200,2050" size="100,100">&lt;img src=&quot;images/Keys 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;I opened the door only to have a bouquet of bent flowers shoved in my face, the pollen bursting around me in a shimmering cloud. Coughing, I waved my hand, trying to displace the dust as I peered through the golden fog to see Milo standing on the other side.

“What the…?”

“H-hi. I– I’m Hazel’s friend. She said to pick you up here?”  His eyes were round and innocent, his hand trembling. I only returned his look with a blank stare. The sad bunch of flowers were between us as if acting as a barrier to his nerves. “She did tell you, right?” He shuffled his feet awkwardly but when I still didn’t answer, he winced, dropping his hand.  “Stupid. Stupid stupid stupid.”

“Milo, what are you…?”

“Oh! So you do know my name! For a minute there I thought she hadn’t told you about our date. I know blind dates are kind of old hat but I really thought we could make a go of it, yeah?” He winked at me, his lips curling at the sides before falling back into an awkward mumble.

Feeling the confusion bleed away, I laughed. “Alright, I’ll play. It’s nice to meet you, Milo. Hazel has told me so much about you.”

“Excellent. I have made reservations at a beautiful riverside café.  Frogs on tiny gondoliers serenade you as kelpie burst from the water in synchronized swim. It is quite stunning. Although, do not get the fish for dinner.  Abysmal really.”

“Even though it’s a riverside café?” I asked, grabbing my jacket.  “You’d think they’d specialize in fish.”

&lt;img src=&quot;images/Sad flowers.png&quot; style=&quot;float: right;&quot; height=&quot;400&quot; width=&quot;350&quot;&gt;He shook his head as we exited Hazel’s, walking down the back steps and out into the garden before rounding the house to make our way to wherever it is he was going to take me.  “No. No, fish folk never specialize in their own kind. Because of cannibalism and all.  They’d much rather cook with hearty staples of the earth. Have you ever had stone soup? And I do mean actual stone soup.  It’s also not good but occasionally you can catch a hint of oregano in it that leaves you wholly unsatisfied.”

“Well, you have sold me. The café sounds delightful.”

I followed Milo along, feeling my heart flutter with whatever it was he was up to.  It had been a few days since I had seen him, the two of us having gotten caught up in our own life for a while.  He looked better rested than the last time I laid eyes on him and it looked as if he had actually done laundry for once. His clothes weren’t wrinkled.

“Thank you for agreeing to this. I know that blind dates can be a little tedious. You never know when you are going to get a troll. And I don’t mean that in the sense of someone being unattractive. I don’t believe in someone being unattractive. I do, however, have experience with literal trolls showing up at my door and let me tell you,” he shuddered a bit.  “They know how to dance.”

Taking my hand, he twirled me around, ducking under my own arm before pulling me back to his chest, arms locked around me in a tight embrace. Milo didn’t look like someone who was the strongest guy, but when he had me in his arms like this, I could feel the muscle corded across each bicep.  We walked awkwardly along, him singing something in my ear, off-key, making me laugh as we stumbled through the streets, pressed together.

“I don’t think this is appropriate behavior for a blind date,” I told him, smiling at him over my shoulder.

“Ah,” he released me with a flourish. “You are correct.  I was going with the fae customs I had learned, where you mock capture your date in a fit of war.”

“Know a lot about fae customs?”

“Very very little but what I say sounds correct.”

The café in question truly was a riverside one.  It was located near a small tributary leading up from the docks where a series of wooden mushroom tables lined a boggy little creek.  Frogs hopped about but not in the way Milo spoke of and I didn’t quite know what a kelpie was but I certainly didn’t see one in sight.

Going up to what looked like a bar, located beneath a curtain of dripping algae, Milo leaned against the surface, looking at the toad pouring small mushroom caps of a plum colored liquid. “I had a reservation for Monsieur Next, plus one.”

The frog blinked at him. “Fuck off, Milo. Go sit at your usual.”

Milo tapped the bar and nodded. “Thank you kind sir. May you and yours be doing wonderful this eve.”

The toad rolled his eyes at Milo but looked at me with a small bow.  

“Come here often?” I asked, as Milo led me around back towards the more watery area of the… tavern? Restaurant? I wasn’t really sure where we were.

“I may be seen as a regular. Who’s to say.”  Holding out his hand, he dragged me towards a small portion of the silt river that split into several rows of still ponds and ebbing creeks.  Wooden row boats littered the area, anchored down so they did not move.  I could see groups of people enjoying their drinks from within and when Milo pulled me into one, I was almost surprised at how clean and kept the boat itself was.
Hopping up on the table that bisected the boat, Milo spread his legs wide and pulled me close.

“Hi,” he said with a smile.

“Hi.”

“I’m done pretending I don’t know you.”

“I kind of liked it.”

“I’ll do it again then. But not tonight.” Tipping his head forward, he caught my lips in a hungry kiss, hands kneading my sides.  “I missed you.  No one laughs at my jokes like you do.”

“I’m not sure what that says about me.” I leaned into him, wrapping my arms around him in return and threading my fingers through the back of his curls.  He moaned a little as I scratched at his skull and it sent a bolt of heat through me. “Hazel said you were running a delivery for her,” I said. “Near the outskirts.”

He hummed in response. “Not a fun one. A very wet one, in fact. I think my feet will never get dry.”

“Then why did you take me to a café where we are on a boat?”

He stopped, as if he actually hadn’t considered that at all.  When he tilted his head to the side, contemplating his answer, he shrugged. “I’m not the brightest man,” he said. “But, I can say that I thought you would like it.” Turning me, he pulled me back against him again, resting his head on my shoulder.  “I don’t think you’ve really gotten to see the parts of the Night Market that I like,” he said.  “With everything going on you’ve seen a lot of danger and a lot of busy but the Night Market isn’t like that. There is such beauty in this world.”

I stared out over the expanse of meandering rivers and grass cut islands. Little boats scattered around us, different individuals huddled together around the floating candle lanterns for warmth.  I grinned. There was peace here. Something a bit more slowed down than the other parts of the market.

“I didn’t always think this way, you know,” he told me, his voice much softer. “I used to hate it here. Kept saying I’d find a way to get out.  Used to tell the people in my life that I’d just one day be gone. I’d get a job and then I’d disappear. No goodbyes.”

“But you’re still here,” I pointed out.

He nodded. “I got the opportunity to go once.  I couldn’t do it. The money was in my hand. I had actually secured passage through a gate, and I just couldn’t do it. I realized that during all my bitching and complaining about the trash heap of this world, I fell absolutely in love with these streets. Made a family for the first time in my life.  Had a home that I chose.  Why would I leave that?”

I rested my hands upon his, lacing them together low on my belly. “I’m glad you stayed.”

He said nothing to that as he tucked his head closer to mine, nuzzling my neck and dragging slow presses of his lips across my skin. “Want to come back to my place after we have dinner?” he asked.

“You’re not too tired?” I teased. “Such a long and wet journey you had.”

He snorted. “Honestly, I don’t give a shit what we do tonight.  I just want to be with you like this. For a bit longer.”

Craning my neck, I looked over my shoulder. “You have me, Milo. I’m not going anywhere.”

His amber eyes flickered. A sharp knife of light and pain, blazing brightly before fading back to the mischievous burn that always lingered across his gaze.  “You’re too good for this damn world,” he said.

“I thought you liked this world.”

“I like you better.”  A waiter came to our boat, dropping off two platters of food that made the two of us move.  Milo sat as close as possible, keeping his thigh pressed to mine. I looked down at the food, none of which I could name, and felt Milo sling an arm around me. “Best to just take the plunge, darlin’. Don’t think. Just do.”

And didn’t that just sum up the entirety of Milo Next.

[[Next|Milo 16]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="43" name="Milo 16" tags="" position="1200,2175" size="100,100">&lt;img src=&quot;images/Keys 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;A single flame sparked, glowing bright as Milo breathed in, the smoke curling from his lips a moment later. He flicked the ash to the side, staring at the headstone that was before him. It was unmarked. Probably Malcolm’s doing. He was smart enough to not advertise this death. Not when so many could take advantage of it. Milo knew it was them, however. Could feel them, still beneath the ground. Wrapped back up in the embrace of the world once more.  He supposed with being fae, this should have given him comfort. A return to the land. The source if you will.  

It only made him feel sick.

“So, I guess this is it, yeah?” Crouching down, he looked at the stone before him. An open pocket watch was draped over the grave marker, that hands of which had yet to move.  Milo didn’t know if they would.  There was little doubt in his mind he would ever see their face again. The Night Market was said to always return, as the story goes, but most likely not in this lifetime.  Milo didn’t think he had much of a lifetime left, really.  Looking up towards the night sky, the tears were not stitching themselves back together, but they were not splitting either.  The gates were closed. The Night Market was cut off from the rest of the realms. He had succeeded. He had saved the market. So why did it feel like he had killed them.

“I didn’t enjoy any of this,” he said softly.  It was a confession only made in the midst of a graveyard where no one was available to watch him.  But Milo had always been at his most honest when the rest of the world had turned their back on him.  “The amount of times I almost told you everything, you have no idea.”  Bitterly, he laughed, taking a long pull on his cigarette, hearing the burn of the carbon paper.  “Not that it matters, right? Because I didn’t. I didn’t tell you.  Who the fuck is going to care about what I wanted to do when what I actually did is so far from reality?”

There was very little room to explain his actions and in truth, he was tired.  He didn’t want to. Because the one person that deserved that explanation was already gone.  Let the others think what they will.  He didn’t deserve their sympathy.

“Here’s the thing, here’s what I hate.” He scrubbed a hand across his face. “You weren’t supposed to be real.  Do you honestly think that I brought you forward, flesh and blood, and just was okay with destroying you? I know I’m not a good man, but this? You were not the blood I wanted on my hands. But you knew that, didn’t you. I have a feeling you know far more than I do.  Far more about me than you should. I could see it sometimes. The way you would look at me. The way you’d reach out. It’s like you knew things that you really shouldn’t have. That I had kept from you because I didn’t want to get close. I…”&lt;img src=&quot;images/Milo&#39;s necklace.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;550&quot;&gt;

He flicked the ash from the cigarette, biting at the flesh of his thumb. His eyes had grown brighter since their death.  Twin flames eternally burning.  Cause for concern on another day though.

“I spoke to Neve. Fucking Baron of the Fates has been serving me kafe since I was a child.  She knew. Did you know that? She knew I would one day be this. Some bullshit rule about not being able to tell someone their own tapestry or some shit.” 

His hands were shaking as he fought the tightness in his chest and throat. “She told me this was ordained. That you knew what would happen. That you accepted it. Why the fuck would you accept this? If you knew, why the fuck wouldn’t you have stopped me? I wanted you to stop me. Why didn’t you…?” he trailed off, his words becoming choked.  Pressing the palm of his hand to his mouth, he took deep breaths, staring at the unmarked grave.  Eyes were upon him from the chapel up above.  The graveyard keeper tasked with most likely reporting on who sat by this grave.  Let him report.  If Mal really wanted to find him, there was no doubt he would.

“I know it sounds like I’m fucking blaming you,” he started. “I’m not.  If anything, the fact that you came here as a human? Got me to fall… Well, I thought that was nearly impossible. I wanted it to be impossible.  But you did it. You took every little bit of me that I laid before you and eviscerated it.” Milo laughed, bowing a bit to the stillness of the stone. “Well played.”

He stared for a long moment, face impassive as he became nothing more than an unmovable stone in the midst of the dead.  He willed the clock to move. He willed it with everything he had.  But it remained silent.  The blessed sound of a soul that wished to return to the market not beating.  

“I’m gonna try to come back here,” he told the gravestone.  “I want to check on you. I– I really don’t know if you’re gonna want to return but… fuck, I never had hope with Mal but I want to have so much fucking hope with you.” Eyes filling, his heart began to crumble.  Mal had died all those years ago and he had taken a part with him. And just when he was getting it back, the world had begun to scream. “I fucking hate that you made me hope again. Why did you have to make me fucking hope?”

Tossing the butt of the cigarette aside, his head hung low as he breathed deeply.  Control. It was what Mal always had taught. Milo had never mastered it.  Filled with too many emotions and too much anger. Plus there was probably something about him being a fucking fae in there that had something to do with this bullshit.

“Sorry,” he muttered. “Fucking shitty of me to put that one on you.” Standing, he pushed his hands into his pockets.  “I stand by what I did.  I was going to lose you either way, it seemed. But at least this way, you have the chance to come back. Maybe fall in love with someone that is worthy of you. Now, Taliesin on the other hand? Now there’s a fucker we’re going to be killin’ real soon, darlin’.  I don’t know how much you approve but as your Gatekeeper or whatever bullshit I’m sure Mal filled your head with, I’m gonna clean up my mess. Because that’s where my mistakes lay. Believing the masked fucker and every bit of his lies.  I’ll deal with that one.  The market will be safe again.  Hopefully someone doesn’t off me beforehand, yeah? Whatever fucker inherits this godforsaken role after me is going to be a sad son of a bitch.”

He kicked at the ground. His time was running short. He had a passage outside towards the Outlands. Answers might be waiting there.

Pulling one of his chains off from around his neck, he pressed a kiss to the cool metal before he laid it across the grave. 

“Take care of yourself, darlin’.  Worlds depending on it.” With one last look, he cleared his throat.  “I’ll see you soon.”

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="44" name="Belladonna 1" tags="" position="1400,300" size="100,100">&lt;img src=&quot;images/Bat 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;Madeline was not made for the market.  It had been clear the moment she stepped foot upon the cobblestone streets that this was not the world for her. She was young and soft of heart. She came from a family that loved her. A mother who patiently sat by her side in the eve, teaching her to love stories and everything they entailed. A father that made sure she knew she was no less important to the world, despite what men may try to tell her.  A slew of cousins and grandparents, aunts and uncles. All people who loved her. Who danced and sang with her upon the farm and tucked her in at night so she was safe from the horrors of the world.

Madeline should have never come to the Night Market.&lt;img src=&quot;images/Madeline.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

But if I hadn&#39;t answered her desperate calls, she would have ceased to exist. And a girl so bright falling to needless desolation, felt like a tragedy all on its own.

So when she stumbled through the gate, I worried. I watched her as she clutched her locket and wept for the world that was burning just on the other side. She smelled of dirt and sweat and the ashen sweet smell of a wheat field that had long since burned. I tried to reach for her then. To wrap my arms around her.  But nothing. She couldn’t feel me.  None of them really could.

But oh how I cried with her that day and for the first time, I wondered if I made a mistake. Maybe it would have been kinder to let her die with her family. To lay in eternal rest with them all.

Instead, Madeline came to the market and let herself become lost.

And through the ashes of her burnt out world, Belladonna rose.

[[Next|Belladonna 2]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="45" name="Belladonna 2" tags="" position="1400,425" size="100,100">&lt;img src=&quot;images/Bat 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;“Do you ever wonder what it’s like?”

“Do I ever wonder what what is like?”

“Love.”  They sat outside the old cottage.  Dinner had been an affair around the fire with Reese proclaiming afterward that he wasn’t going to clean a fucking dish. When Elias had tried, he grabbed the other man by the hand and pulled him out into the middle of the field.  That’s where they were now, dancing slowly beneath the light of a paper moon before chasing each other through the thick blades of grass.

Belladonna was envious of them.  She had memories of her parents of course. The way her father would brush her mother&#39;s hair from her cheeks. The way her mother smiled with her eyes when her father walked in the room after a long day at the church. She remembered what love looked like, but she had been so young, and seeing as it was her parents, less likely to appreciate it. Not at the moment at least. But upon meeting Reese and Elias, she saw it all over again. The secret glances. The way their voices dipped for each other alone.  Reese smiled easier around Elias and Elias often was seen bouncing on the balls of his feet, excited to simply be around the person he loved.

Belladonna wanted that.  She so desperately wanted that kind of companionship.  But was it something attainable for everyone? Or was it simply a one in a million feeling. One that was fleeting unless an individual was strong enough to keep it within their grip.

“I have not thought much of love,” Gabriel said slowly, frowning as he followed her gaze towards the two men in the field. He could hear Elias shriek in delight over something Reese said and watched that look come over Reese’s face. The one that wasn’t often shown to the rest of the world.

“How could you not when living with the two of them?”

Gabriel frowned. “You think they are in love?”

Belladonna’s brows shot through her hairline as she looked at him. “Are you serious?”

“I do not know much about love,” he told her.  “Unless it is the Knowing’s.”

“Is that all you think of when it comes to love? The love of the Knowing?” She remembered people like that from the congregation. So dedicated to their faith that it left no room in their heart for anything else. Gabriel seemed like the kind of man who had that fanatic kind of belief and yet she didn&#39;t think he truly knew what love was. Especially when he couldn’t recognize what was right in front of him.

&quot;The love of the Knowing is eternal,” he said. “Why would I think of anything more?”

Belladonna shrugged. “I don’t know. Because the Knowing is not everything in this life?”

“For you, it does not need to be. For Celestials, it is different.  We rest in the knowledge of the Knowing so the rest of you can make those mistakes.”

Belladonna felt a pang of pity as he spoke. Still so attached to a being that didn’t want him. That had cast him into this world as if he were nothing.  “Isn’t that a love for us then?”  

Gabriel frowned. “What do you mean?”

“If you take on this knowledge in sacrifice, if you are doing all this, so the rest of existence does not have to, is that love for the Knowing? Or is that love for us?”

The lines on Gabriel’s face deepened at her words and Belladonna was certain he would speak no further on it.  She didn’t know if he understood. If he even had the capability to. It left her feeling so supremely sorry for him that she ached. Gabriel and his kind had been so brainwashed that they didn’t even see the flaws in their own statements.

Out in the field, Reese bent, his lips pressing towards Elias in something sweet and slow.  Belladonna watched them for a moment, the silver of the moon spiraling around them as the rest of the world was swept away. For them, in that moment, they were all that existed.

“I do not know what love is,” Gabriel said softly by her side. “But I think perhaps I would like it to look like that.”

Belladonna smiled. “I think we’ll find it. One day. I think we’ll know what it is to truly love.”	

“How can you be so certain?”

She looked at him out of the corner of her eye. “Let’s just call it faith.”

[[Next|Belladonna 3]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="46" name="Belladonna 3" tags="" position="1400,550" size="100,100">&lt;img src=&quot;images/Bat 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;“I am releasing you from your duty.”

The flame flickered with a black tip just behind her, casting her in shadow and a heat that was far more ashen than it was sweltering. Before her Gabriel stood, eyes glowing bright silver, fists clenched at his sides. 

“You release me.”

“It is no longer working, Gabriel,” Belladonna said.  “I think we both know we have outgrown this little arrangement between us.”  His jaw twitched as he stared at her and she felt the knife that it was, buried in her chest. “Oh, come now, dear. You knew this was only temporary. Just until I got to my feet within the Night Market.”

“You think you are so above it all now that you do not need protecting?”

“I will have protection,” she said.  “I have already hired several people.”

“Several people to do the job that I am perfectly capable of doing.”

But he had gotten too close. Far too comfortable. She saw it in the way he was beginning to dedicate his life to her. In the way he followed her around, not thinking for himself, not doing anything for his own life. What did Reese call it? Trading one Knowing for another?  He let the monotony of the world wear him like a second skin and Belladonna was afraid. There was shutting down emotions to keep from the madness and then there was not living.  Gabriel had erred on the side of not living for far too long.

Sighing, Belladonna went over to her bookshelf, turning her back to him so as not to let him see the emotion twisting within her. “Do you really wish to spend the rest of your life following around an abomination? Isn’t that what your people call me?”  It was what she was. She knew this by now and had long ago accepted it. &lt;img src=&quot;images/poems.png&quot; style=&quot;float: right;&quot; height=&quot;400&quot; width=&quot;300&quot;&gt;

“Is this because of the other day? When I walked in on you?”

When she had been rocking against another man that looked remarkably like him. When she had chosen him to lay there, grunting beneath her as she rode him hard, caressing his face.  She thought that would have been enough of a wake-up call. Instead, it seemed to make Gabriel stick to her further. To do more. As if seeing that was a failing to himself only.

“This has nothing to do with my job, Gabriel, and everything to do with me not needing you anymore.”

She wasn’t looking at him, but she could feel the pain that lashed across his face.

“I mean, honestly,” she laughed cruelly.  “I have gone far beyond what you can offer me.  You should be going elsewhere. Find yourself a girl somewhere who actually wants you panting after them.”	

“Is that what you think I’m doing?”

“It’s what I see every day.  I have clients that crawl to me daily, Gabriel. I don’t need to be paying someone to do the same thing that they pay me for the pleasure of.”

When she turned, it was to face the naked pain across his face. It took everything for Belladonna not to tell him it was all a lie. That she just wanted the best for him. That she wanted him to actually go forth into this world, find someone to love him. To take care of him. That she could not be that and their lives somewhere along the way had become far too crossed.  

She just wanted her friend back. Not whatever was happening between them now.

“So that’s it then?” he asked, voice thin.  

“Did you expect something more?”

“I suppose not.  I just didn’t realize what it would be like to be screwed by Belladonna Malady.  I guess I do not need to wonder anymore.”

She smiled thinly at him.  “That is your one dig upon my character, pet. You get no more.”

“What?” he laughed bitterly. “Cannot handle it? Or did you forget that at the end of the day, the only reason you stand here is because I dragged you out from under Kavatti so you no longer had to beg between her legs.  Though, I suppose that’s why you became who you did. To never have to beg. To have others beg to you.”

She would not cry. She would not cry.

“Are you done?” she asked with one perfectly raised brow. “Your last payment will be sent to your home, Gabriel.  Try not to spend it all dedicating your life to the Knowing or whatever it is you do when you feel lost. Actually make something of yourself instead of living in the shadow of a god that does not love you.”

The glass shattered across the room as his grace burned bright.  Belladonna did not flinch. She was far too numb to that pain now.  

When he left, she watched the door, expecting him to come back through and ask for another chance. They had gotten it wrong somewhere along the way. She couldn’t quite figure out when.  Somewhere in the midst of saving him from the madness, of clawing their way away from Kavatti, of becoming a vampire and a guard, they had lost themselves.  When Reese had faked his death and Elias had lost himself to grief.  

She missed him.

She missed the man who would bring her books. Who would sit with her as she read. Who would have philosophical discussions with her bringing her to a boiling point of absolute frustration because he would not budge even if his own hypocrisy was shining true.

Turning, she went back to putting her books away.  A task she had been neglecting.  Every word felt hollow as of late and they could not fill her lifeless form with the breath that she craved.

Her hands paused on one though. A small little leather-bound one that was faded with time.  Cracking open the cover, she saw the neat print.

To my Graceling.  May you have these words and never be alone in the night.

Belladonna threw it across the room, falling to her knees and clutching the locket still strung around her neck. The one that her father had given her when she was just a small girl.  She wept bitterly at the loss she had not allowed herself to feel. Over the friends who had died, over the found family that had been scattered to the wind. Over what Kavatti had done to her.  Almost immediately she tried calling out once more, going to the door to see if Gabriel for once in his life disobeyed. If he was still standing in his spot.

But he was gone.

There was no trace of him in sight.

Wiping the tears from her cheeks, she tried to keep her sobs from breaking across her.  That night, she slept with the book beneath her pillow, willing Gabriel to just call her out on her fear. To tell her she was wrong.

It would be years before those words would ever be traded between them.

[[Next|Belladonna 4]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="47" name="Belladonna 4" tags="" position="1400,675" size="100,100">&lt;img src=&quot;images/Bat 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The office was the exact kind of opulence that Belladonna expected out of a man who did very little with his job but touted to the world that he was the reason for their safety.  Warden Addington was a thick man with a beard that he meticulously groomed all hidden behind a suit made of silk.  It was tacky, in Belladonna’s opinion but then again, not everyone was graced with the taste that she had.

“Warden,” she stated, breezing into the room without knocking. The man startled, knocking his wine to the floor. Belladonna moved quickly, catching it before it could stain the white rug beneath his feet. “Careful,” she intoned with a small smile.  Placing the goblet back on the desk, she grabbed the bottle, pouring herself her own glass. Long black bell sleeves trailed after her like wings.

“And who are you?” Addington barked. His eyes were flicking towards the door, waiting for his guards to barrel through.  They were indisposed at the moment. Not that he knew that.

“Belladonna Malady,” she said coolly.  Sitting across from him in the large leather backed chair, she sipped at her goblet, letting her red hair spill in front of her, drawing eyes to her chest. She nearly laughed as the Warden’s gaze flickered down to her leather-bound bosom. Men like him were far too predictable.

“Did we have a meeting, Ms. Malady?”

“No,” she said, taking a sip. The vintage was sour. It was disappointing really. If one was going to lord their power over their lesser’s, they should at the very least have good wine. “No, nothing like that, Warden. You are a busy man and I didn’t feel like hearing your receptionist tell me it would be a few months wait to see you before you just canceled altogether.”

His pleasant smile became tight at that. She could see him hitting a button under the table, trying to call his guard forward.

“Warden, I have a proposition for you and I think it is one you should take.”

“Oh really,” he said, growing irritated. “And what would that be?”

“Retire,” she stated clearly.  “Leave this office and wander off into the Outlands somewhere.”

The man stared at her for a moment, waiting for her to continue. When she did not, he let out a long arduous laugh.  “Is that all?”

She matched his laugh, her smile cold but her eyes dancing with anticipation. “That is all I ask.”

“Alright, I will humor you. Why should I do something like this? Why would I just walk away from everything I have?”

“Oh,” Belladonna said with pure delight. “Because that’s the only way you’ll be staying alive.”

The bark of laughter that followed echoed through the room and Bella joined him, as if they were both two old friends, partaking in the oldest and funniest joke. But as Bella continued to sip her wine and did not elaborate further, the Warden’s face began to fall.

“Leave,” he said, his tone darkening.

“No.” Leaning forward, she placed the wine glass aside. “You see, I’ve done some digging on you, Warden. You are embezzling from the guards&#39; funds around here. Your employees are understaffed and underpaid because of it. But really, we all like to turn a blind eye to wage disputes when it isn’t us unable to feed our family. So I don’t really think that is the particular brand of blackmail I’m going to attempt to use on you. But it will help with the riot that I’m sure I could elicit within these walls.”

The Warden ripped open the drawer where his gun lay. The gun Bella had paid the front desk clerk to remove yesterday, along with every other weapon in this room.

“But what I can hit you with,” she said, continuing with her even tone. “Is that you killed your wife.  You beat her senseless for years and then one day you just hit her a little too rough and you left her for dead within the market streets.”

“You can’t prove that.”

Belladonna nodded. “I can’t. But she can.  See, Warden, if you are going to be a piece of shit you really need to not be a coward as well. Stick around. Finish the job. Don’t let someone find her and take her to safety, thus using the opportunity to fake her own death so you can never lay your hands on her again.”

She sipped at her wine, staring at him over the rim of her goblet.  He had been made and oh how quickly he was about to cave.

“What do you want?” he asked through gritted teeth.

“Like I said, retire.”

“Fine.” The anger that was there was one that was full-bodied and delectable. And Belladonna didn’t believe him for a moment.

“Splendid. Let’s drink to it.” She motioned to the glass that had nearly fallen to the floor. The one she had saved.  When he picked it up, downing the rest of it in one go, Belladonna finished her own as well.  

“And when would you like me to announce my retirement?”

“Now would be good.”

He stood, glaring at her.  “Women like you deserve what you get,” he said. “You think you can pull shit like this in the world, but what would you do without people like me? I protect this market.”

“You are a taint on this market. Now, run along.  Go announce that you have found a newfound desire to travel the desolate expanse outside these market walls. Find the Knowing or whatever men like you say.”

&lt;img src=&quot;images/Topple glass.png&quot; style=&quot;float: left;&quot; height=&quot;300&quot; width=&quot;300&quot;&gt;He moved to go past her, turning at the last minute to land one meaty fist against her, reaching for her neck. Belladonna merely shifted out of the way as he dropped to the floor instead.

“See,” she said, kicking out and pulling the skirts of her dress from beneath his gasping body. “I was afraid you’d be like this. That’s why I poisoned your wine the second I walked in.” Crouching in front of him, she watched as his face turned red. Then purple.  He weakly reached out for her but she was just out of his reach. “That sound you are hearing is your lungs popping. Filling with blood. It’s also probably the metaphorical sound of desperation and the fear of a man who squandered his life.”  Reaching down, she patted his cheek. “But don’t you worry. Women like me aren’t completely heartless. I am not going to leave the market unprotected, if that is truly what your concern is.”

Standing, she watched him, waiting for the light to fall from his eyes. When it did, she toed him with the tip of her red heel, just to make sure he was truly gone.

Looking around the office, she sighed. It would need a makeover of course.  Gabriel would hate this.  Knowing him he wouldn’t even enter the room, finding it to be disrespectful or something noble like that.  Stepping over the Warden&#39;s body, she sighed again. Now, she just had to convince the Celestial to take the most hated job within the market.

[[Next|Belladonna 5]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="48" name="Belladonna 5" tags="" position="1400,800" size="100,100">&lt;img src=&quot;images/Bat 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;A flurry of wings blew across the market, winding through the back alleys and across the mirrors, until they landed on the raised platform above the fashion district.  Belladonna sat in a velvet lined chair as if she hadn’t just burst through in a rage, her legs crossed, one pale leg exposed to the lantern filled air.  Feebus took one look at her and poured her a healthy glass of wine before coming to sit by her side.

“The wonderful Ms. Malady. Twice in one day,” he said, tipping his own glass towards her. “To what do I owe the pleasure?”

Belladonna’s face was carefully composed. A mask of beauty and elegance that was not rivaled within the market. “Your company is irreplaceable, Feebus. I felt as if we didn’t get a chance to share it at all today.”  Beneath them, the sounds of the district rang out. A cacophony of late night shoppers.  The darker the lanterns got, the rowdier the runways became.  Belladonna was almost certain there was a show tonight.

“I had a lovely evening drinking with dear Milo,” Feebus said. “The boy has certainly come a long way from being the button boy down in my shop.”

Belladonna hummed in agreement but wasn’t listening. As Feebus regaled her of his time within the bar with his young lad, her thoughts turned elsewhere. To a new little dear heart that she needed to shake. She was supposed to be charging.  The paltry amount of money she took from them today was mere pocket change. It was enough to create an excuse, however. An excuse that was far too weak for Belladonna’s liking. Yet still.  Their blood smelled sweet. Sweeter than any other blood she had sampled. And for the first time in a long while, Belladonna wanted to feed.

“You’re not listening, beautiful,” Feebus interrupted.  He knew how these evenings normally went.

Belladonna’s eyes dragged to him. “Apologies, darling. It has been a trial of a day. I have a terrible nephew running my business into the ground and I must recoup the profits.  I was thinking of a gala of some sort. Perhaps something that would benefit us both?”

Feebus looked at her for a long moment before setting his wine glass aside. “Is that what you truly came here for?”

“I came for your company,” she said. Leaning forward she squeezed his hand. “You in fact, look lonely, Feebus. I was hoping I could offer you my services this evening.” They had joined together several times before and Belladonna had found him to be one of her more capable clients.

“How much?” he asked, considering.

“We will simply put it on your charge tab.”

They both heard the giggles from the onlookers all around.  Belladonna and Feebus had always made a handsome pair.  The rumors about the beauties were flung far and wide within the market itself.  There was always some lurker, wondering just what the two fiery redheads got up to with each other. Especially when their cheeks were flushed with such desire, as they were now.

“I think we could arrange that,” Feebus purred.

Feebus held out his hand and Belladonna took it coyly, sipping at her wine. The two of them slipped behind a heavy beaded curtain near the back of the platform and into a large room filled with brightly woven fabrics and candles on every surface.

When the curtain fell shut, Feebus looked at Belladonna sternly.  “Speak.”

Belladonna slumped into the nearest chair. “Are your silencers up?”

“Of course they are. Now speak,” he demanded.

She slouched back in her chair, her face pensive.  “I am afraid I am becoming enamored,” she whispered.

&lt;img src=&quot;images/Feebus.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;“Belladonna, you have always been enamored with a certain individual.” This was not news and was now a yearly situation they had to address. Especially after larger events where she was forced to be in the room with the object of her obsession.

She shook her head. “It’s the one I brought here today, Feebus. Not– not him. I cannot explain it. I have no feelings towards this new little one, other than a slight twinge of protection.  But I know what happens when I hear the call of blood. They are a curiosity that I cannot seem to shake and that concerns me.”

Feebus thought back to the muse he had dressed. The way that Belladonna’s eyes had followed them. “It does not need to be concerning.”

She laughed at that. “Yes it does. It should be the most concerning, in fact.”

“Why?”

Her eyes narrowed, fangs bared. “You know why.”

“Do not bring your anger into my home, Belladonna Malady. It is not wanted or accepted here.” His voice was a boom that made the curtains waft in fear. Belladonna only looked mildly chastised.

As the wind and heat settled around them, Feebus looked at her sternly. “Are you in love?”

Belladonna snorted in laughter. “I know nothing about the creature other than they are far too helpless for my liking.” That was what was so perplexing in the end of it all.  Belladonna didn’t even particularly like this newcomer. But she also could not get them out of her head. “Also, vampires do not love.”

Feebus looked at her pointedly. “You did once.”

She turned away at that, arms crossed over her chest.  When a blanket settled across her lap, she startled though. Feebus had taken one of the thick woven ones she liked and placed it across her.

“Your style is impeccable but every time I look at you, I get cold.”

Belladonna dragged her eyes across the musculature of his chest. “Says the man with no shirt.”

Pulling up an ottoman in front of her, Feebus lowered himself down onto it. He was much too large for the seat but he was a man that enjoyed taking his conversations at close range.  “I am sorry for being short with you.”

“It is alright. You know how I need it at times.” Belladonna needed that power to settle across her. Remind her that she did not need to fly apart.

“Explain your concerns, darling.” Leaning forward, he tucked a stray piece of hair back behind her ear.  His wayward girl. Feebus had always had a soft spot for her. Even before she had the fangs. 

“We both know how it ended the last time the blood sang so loud,” she whispered. “I do not wish to make the same mistakes again.  And with this new one, this precious little sweetling, all I wish is to take them close to me and spill the blood of anyone else that taints their scent.”

“But you do not have feelings for them?”

She frowned. “No. Though, if this is anything like before, feelings have a pesky way of sneaking up on me when I least expect it.” There was such disgust on her face. So much so that Feebus had to keep himself from laughing.  But Belladonna abhorred love and spoke much more passionately about the blood that sang to her.  Feebus thought they might be one in the same.

It was a point in which they would never agree. Feebus loved freely in this world. He had the hearts of two women, and they had his own.  Love was something that made him strive for more. It was what fueled his desire to do better and enter the next day with fresh eyes. Love was worth every breath that he took.  For Belladonna to shy away from it was a disservice to her and to the ones that she could call her own.

Sighing, Feebus shook his head. “Then I am afraid, your only option is to stay away.  But Bella, you must know that it is not a disparagement of your character to fall in love.”

“Of course it is not,” she said curtly. “But it does not mean I wish to entice such a vile feeling to stay.”

“Oh sweet girl,” Feebus sighed. “How can you be a woman so in touch with the world and yet shove one of its finer things into the trenches?” 

“Because love is for war and war alone. Let the soldiers go out there and cling to the hope of something more while the shapers of the world live in the realm of practicality.”

Feebus rolled his eyes.  “And if I thought for one moment you believed that I could support you. But I have seen your book collection and it is filled with far too many love stories for that to be your truth.” Belladonna said nothing to that but Feebus caught the way in which she bristled. But even the ruffling of such feathers looked downright gorgeous on her.  “Speaking of books, will you be brooding in the book district tonight?”

She sighed, drinking the rest of her wine. “I do wish to see what else the Baron has acquired.  You have had a long night as well and your wives will be arriving home soon. Spend the eve with them.”

“You are always invited, Belladonna.” Ava and Marie had never been comfortable with a vampire at their table but they could perhaps deal with it for the evening. Belladonna waved the idea away though before he could let it fully form.

“Your heart is too tender for strong-willed women showing their weakness.” The point was only further highlighted when Feebus handed her a thermos of tea and bid her goodnight. She did not make it far from the beaded enclosure however before the winds shifted.  It was subtle at first. Just a minor twinge. But it was on the wind like a fine lace. Another door had opened.

Just as she had arrived, Belladonna left, the rustle of wings echoing across the lanterns. In her place, was only a steaming thermos, sitting alone within the now abandoned streets. The call of blood could wait.  The matter of love could be forgotten entirely.  The only thing Belladonna cared for at this moment in time, was the pain the Night Market felt, as it was torn open once more.

[[Next|Belladonna 6]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="49" name="Belladonna 6" tags="" position="1400,925" size="100,100">&lt;img src=&quot;images/Bat 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;There was a corner in the back of an antique store that not many knew about.  To get there, a person had to wind through old relics from various different worlds, twisting and turning through tilted shelves brimming with dust-covered forgotten memories.  Take a wrong turn, and they would never find the small black silk table.  Nor the opalescent stone that hovered in the middle of it.

Of course, someone could get there by mistake.  A few had over the years. Belladonna was almost certain the shop owner didn’t even know the table was hidden here and had been bewitched to quietly dispose of anyone that stumbled across the call center.  Only those who were supposed to see the shard had access to the map. And if the location was not memorized during the first visit here, then the likelihood of getting back out no longer existed.

Belladonna made her way to the silk cloth draped across the small table.  The shard hovered a hand&#39;s width from the table&#39;s surface, a low hum echoing from it.  Reaching into her purse, she pulled three freshwater pearls from the depths, placing them artfully beneath the stone.  They shook, vibrating with a high-pitched ping before the pearls crumbled into a fine powder and coated the table in a shimmering light.

“I have a request,” she said, seating herself before the gem.  Pleasantries were not often needed here.  “I need to bring someone to meet with you. I think you will find them interesting.” She knew the Baron would find them interesting. Belladonna certainly did. There was something not quite right about them. Almost like they existed in a reality that only loomed out of the corners of their eyes.

“The market is failing far quicker than we have given it credit for.  What were once whispers now resonate so deep within the lantern light that I fear there is not much of a future on this horizon.  But there may be a way to thwart this, if the Barons are willing to listen. I wish to send to you someone that may be up for the task at hand.”

The shimmering dust of the pearls began to evaporate, siphoning upwards into the opalescent gem itself. Belladonna knew he was listening. He just rarely responded.

“I know you stay out of the politics of the Night Market,” she said.  “But this one might be worth taking heed.  Despite knowing that your wife dearly loves the wares here, if this world goes, the domino effect it could have on the other worlds far supersedes the desire not to get involved.”

A sharp lash of electricity cut through the air. A shard of opalescent glass pinning itself near where Belladonna rested her hand. It was a warning.  Don’t tell him what he should and should not care about.

“Noted,” she said, unconcerned.  The role of the Baron of the Books was a laughable one to anyone that did not know him.  It was a name that did not evoke fear yet if someone were to see him in a dark alley, it was doubtful they would pass him without a whimper. The theatrics he threw at Belladonna now was not concerning. It was the silence that surrounded him that always made her more wary.&lt;img src=&quot;images/Opal.png&quot; style=&quot;float: right;&quot; height=&quot;400&quot; width=&quot;300&quot;&gt;

“I am willing to trade, of course,” she said, watching as the shard evaporated into smoke.  “The hunt that has been put upon Casimir Alskar.  I know where the knife they have prophesied to kill him with lies.  If you allow this meeting, I will place the location of it within the book at the fifth quarter.”

There was silence for a long moment, but Belladonna was a patient woman.  One that could sit as still as the night, if the occasion called for it.  When the opal turned bright, she knew she had been given consent.  A meeting was now in place.

The stack of parchment off to the side began scratching as an invisible quill began to write across the page.  Tomorrow.  Early eve. Before the lanterns turned dark.  Belladonna took the paper and folded it in two, sticking it within her purse.

“Thank you.”

When she turned, a man stood before her. Lavender hair falling across his eyes, a white coat with pearl studded cuff links donning each sleeve.  She bowed respectfully to him.

“Baron,” she said.

His eyes were the opaque slits of a snake, a mere reflection of the slow crawl of the monster weaving within the overflowing shelves.

“This person,” he said, “how far do you trust them?”

“Does it matter if I trust them or not when our world is in such peril?”

“No,” he agreed. “Though, I find myself curious.  Why trade such useful information for a simple meeting? You know with what you hold, you could have asked for anything.”

“True.”  The slow knife, the one fated to kill a man whose only crime was doing right.  Its location had been sought after for years for lesser purposes. “I am taking a gamble, I find.”

He tipped his head to the side, hands clasped behind his back as he observed her carefully. “That is not like you.”

“It is not.  Though, the time for caution may have passed.  Tell me, Baron. Do the others even care that the world is being torn?”

“I doubt the Barons care for much past their own self-serving goals.”

“I am growing concerned. And this individual appeared in our world just as the issue was coming to a head. Most would see it as convenient. I see it as fortuitous.  What I do not see it as, however, is an opportunity to be wasted.  So, yes, I am trading information with a value far higher than what I seek. Though, I do think it will pay off in the end.”

“You have cared for this one,” the man said, narrowing his gaze.  Belladonna was not deterred.

“I care for all my investments.”

His smile was cruel. Cutting. But he did not call her out on the stench of a lie.
“Good day, Ms. Malady.” With a small bow, he stepped aside, motioning his consent to let her pass.

“Baron.”  Walking past him, her heels echoed across the shop. She did not remember to breathe again until she was outside the antique shop, beneath the iron street lamps and surrounded by the damp cobblestone streets.

Tomorrow.

Hopefully tomorrow they could begin the slow journey towards their end.

[[Next|Belladonna 7]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="50" name="Belladonna 7" tags="" position="1400,1050" size="100,100">&lt;img src=&quot;images/Bat 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The shuffling upstairs was becoming more pronounced.  Soft little padding of feet back and forth as a morning routine was conducted. Clothes were donned, hair was pulled back, teeth were brushed and face was washed. It was all incredibly tedious and required far too much effort for early morning wakings. Belladonna didn’t understand why anyone even bothered to be up this early. Rather, this was the perfect time to go to bed.

When the door upstairs opened, it squeaked in such a way that sent the small shadows lurking in each corner, scattering to their respective homes. The small sprites that were messing with the bundles of cracked wheat skittered beneath the floorboards and the kitsune that had taken up residence in the corner of the shop, climbed out the window. The stairs were taken at a quick downward pace; a stumble really, as the person in question struggled to wake up. All the while, Belladonna waited.  She had of course been sitting there for far longer than anyone in the house suspected. So when Hazel flipped on the apothecary lights and saw her, silent and still in the small tea area, the young woman practically screamed.

And by practically, she did. Loudly. While clutching her chest.

Belladonna raised a brow as Hazel stood there, panting.  “Tea?” she asked.  She had brewed it hours ago but found several refresher charms to keep the kettle hot.

“Belladonna,” Hazel said, eyes wide. “What are you doing here?”

“I thought it would be nice if you and I had a little girl time.  It’s been so incredibly goal oriented around here lately that we are forgetting that the foundation to any good life is pointless socialization.”

Hazel’s look grew more and more concerned.  “I don’t know if that is true. Or at least I don’t think many would put it that way.”

Belladonna waved her off. “No matter. Now come. Sit. I brewed a pot of earl tapioca.”

Clearly, there were several thoughts warring in Hazel’s head at the moment.  Belladonna sighed as she watched the young woman try to decide if this was a trap.

“Really, Hazel. While I am a vampire, I do not wait in apothecaries to eat my prey. I would have just come to your room and drank you in your sleep. You would have been none the wiser.”

Immediately, Hazel’s hand smacked the side of her neck, looking for a wound. At the smirk playing across the other woman&#39;s blood-red lips, she realized it had been a joke. Or at least she hoped it was.

Against her better judgment, Hazel sat across from Belladonna. While the vampire&#39;s presence was unsettling, there was a certain cause for curiosity. Belladonna Malady was not one to ever seek the aid of others.  Not without a price.  “I’ve never had that one before,” Hazel said. “The tea, I mean.”

“I suspect not. It was a blend native to my world. Took me years to find something equivalent to it.  Had to kill a man for his secrets on tapioca production.  Apparently they grow better under green lanterns as opposed to azure.”

Hazel hesitated, her eyes flicking around the room, still certain that this ruse was going to be the death of her. “I am never sure if you are joking or not when you speak like that.”

“That, dear heart, is by design.” Pouring a steaming cup of tea, Belladonna handed her the cup. It was made of black opaque glass with blooming purple and gold flecked roses painted upon the rim. Sipping at the brew, Hazel jerked back in surprise.

“Oh,” she breathed. “That is beautiful.”

&lt;img src=&quot;images/Fancy tea cup.png&quot; style=&quot;float: right;&quot; height=&quot;425&quot; width=&quot;350&quot;&gt;Belladonna smiled, pleased. “A specialty of my home village. My father was a farmer of sorts.  I grew up gathering from the fields and selling down at the local markets. You would be amazed how bored I could get.”

“You never talk about where you came from,” Hazel ventured slowly.

Sipping her tea, Belladonna placed it down on a matching saucer. “I don’t.” When it was left at that, Hazel didn’t dare press.

The two women sat in silence, enjoying their tea. When Hazel finished hers, Belladonna poured her another cup without a word.  Her chest was still this morning. She wasn’t even trying to feign the art of breathing.

“Uh, Belladonna,” Hazel said. She nearly jumped at the sound of her own voice. Which, in turn, had Belladonna’s fangs glinting in a smile.  “I– I’m a little confused.  Why are you here? In the dark. Before my shop even opens.”

“Oh,” she said with a smile, as if the question was somehow surprising.  “Was I not clear earlier? Girl time.”

“Yes. No. You mentioned that but– we don’t exactly have anything to talk about.”
“We do, actually.” Setting her cup aside, Belladonna crossed one leg over the other. Her dress was made of shifting blue-black sheer lace with a bodysuit beneath.  “Your shophand–”

“They have a name…”

“I believe you may not be keeping them busy enough. I have noticed a few concerning things about them and I believe it would be in our best benefit to keep them a tad bit more occupied.”

Hazel blinked. “Oh. I– are they getting into trouble?”

“No,” Belladonna enunciated the word with a long-drawn-out frown while the flutter of wings began to whisper in the dark. “Nothing like that. I think they are just so new to this world that they are becoming attached to things that will ultimately be harmful to them.”

At this, Hazel looked genuinely concerned.  “Oh, I had no idea. What are they doing?”

Smoothing her hands down across one pale thigh, Belladonna sighed. “Last night they came to the fire show past the eternal stairs.  It is quite an elite place filled with some of the most dangerous creatures within the Night Market.  They should not have been there.”

“That was… that was maybe my fault. I told them where you would be and–” She shifted uncomfortably in her seat. “I think they just have a bit of an infatuation with you and when you turned them down for the festival last night it really affected them, so I thought– wait.” Hazel’s words stuttered out. “The fire show is sanctioned.  It is no more dangerous than any other portion of the market. You just have to have an invite to have a seat.”

“I assure you it is far more dangerous than you perceive,” Belladonna said primly.  “Keep them out of there, Hazel darling. For me.” It was a request, but the obvious threat was there.  While Belladonna would never do anything to harm the sweet little Albright, she hoped the woman knew how serious this situation was and would absolutely use fear to her advantage if need be.  Hazel, though, just wasn’t getting it.

“Well,” Hazel started slowly, “that shouldn’t be a big deal since the lantern festival is once a year.”

“Keep them out of situations like that,” Belladonna repeated. “If I am on a job, assume they need to be nowhere near me.”

Hazel paused. “I’m confused. Are you upset they showed up to this dangerous fire festival? Or are you upset because they have soft feelings towards you.”

It was Belladonna’s turn to shift in her seat. “I am a woman of the night. People having ‘soft feelings’ for me are the hazards of the job.”

“But they’re not a job,” Hazel reminded her.

Belladonna’s eyes flicked away. Just briefly. The grip she dug into her own skin left half moon marks upon her leg and a tear in her lace.  Standing, she gestured down at the table.  “I have taken the liberty of ordering you this tea. I have also left the contact information for the tapioca supplier. I would like it if you would carry this brew from now on. I would much rather give you the business than that fungal excuse of a man.”

“Belladonna,” Hazel&#39;s eyes were soft, compassionate.  “If you need to talk I– I know that Gabriel was rough but–”

“Why are we speaking of the Warden? He has nothing to do with my concern for your little shophand running rampant around the market.”  Heading towards the door, Belladonna looked over her shoulder.  “It goes without saying that this conversation will not be mentioned, yes?”

Hazel nodded, swallowing thickly.

“Smart little Albright. You are just delectable.”

Outside, Belladonna looked up at the wisps, her eyes deepening to a fiery burgundy. She needed to feed. The entirety of that last night was an itch that continued to crawl against her spine and she wished for anything to get the taste of elation out of her mouth.  Feeling her nails curl, and her bones crack along her hips, she closed her eyes and allowed herself to rip apart, shed the skin that had carried them and had defended their honor.  With wings of blood and bone extending from her back, she launched herself into the air, leaving behind scraps of lace and chiffon.

Down below, the window to the second story room, remained open.

[[Next|Belladonna 8]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="51" name="Belladonna 8" tags="" position="1400,1175" size="100,100">&lt;img src=&quot;images/Bat 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;It was far colder than what should have been appropriate for the time of year. Not that the Night Market had seasons, per se, but it did have subtle shifts based on which district you were in.  The gemstone district, for example, loved the crisp and cold weather.  It created a shine to the crystals that was unlike anywhere else in the market. This was of course a secret but if you were observant enough, you noticed they purposefully kept their district the biting, empty cold of a cave.  With the weather having changed so suddenly, the goblins were positively giddy with the monetary prospects it would bring.

Belladonna stepped out onto the frost laden streets, her shoes clicking against the frozen expanse before her.  Heels cracked the thin layer of ice beneath her feet as she walked down the glittering paths towards one of her more preferred jewelers.  Goblins peeked out from behind shoddy market stalls while others spun down from the rickety rafters they had built into the sides of the alley.

“Gems today, m’lady?” One of them called.  They pulled a sapphire from their gums, wiping the blood upon their tunic. Pity, really. Belladonna thought the blood made it quite a bit more fetching.  She ignored them as she continued to walk, only glancing down at their gray and sullen faces. Enough to show them that she had seen them, but also a clear indication that she just didn’t care.

Stepping around a corner, Belladonna made her way under the arches of liquid gold, the likes of which disappeared beneath the streets and down into the mines. Through the small grove of ruby trees and emerald weaves of grass, Belladonna stopped only when she reached a set of stone steps. They were the only ones within the district.  When Pim had started their store, they couldn’t afford the pretty glass or the cuts of precious stone like the rest of the shop owners. Instead, they had to make due with what was considered dirty and uncouth.  But Pim kept the slate nice and despite now having more money than they knew what to do with, still kept the stone steps as a reminder of where they had come from.

Upon hearing this story Belladonna may have smashed quite a few of the ‘prettier’ steps around the district, just on principle.  Beauty and functionality did not go hand in hand.  It was perhaps a life lesson deserving of a bit more attention within the gem district.

The door chimed as she stepped inside the shop.  Behind the counter, a hunched form tipped their head upwards, one bronze colored eye magnified by the spyglass they held to their face.

“Belladonna Malady,” the goblin grinned. Their teeth were a fine set of fire opals today.  It gave their skin a less sickly appearance.  “It isn’t often you come down to the slums anymore.”

Belladonna smiled. “Not the slums, Pimello.  I have been to the goblin realm and they are far less appealing than here.  The gem district is just a bit hard on the nose.”  Rotted peaches. It was a scent that went hand in hand with the goblins.  To the unrefined nose, it probably smelled like a peach grove.  To Belladonna, it smelled like death. The kind she most certainly did not enjoy.

Pim laughed loudly. “Most would disagree with you.”

“Most do not know what class is.”  Leaning across the counter, Belladonna ran one crimson nail across the glass display case. “I am looking for something special today. I didn’t wish to send one of my guard to do my bidding.”

“Ah, and what would that special something be today, Miss?”

“I was thinking a necklace of sorts. A choker, really.”

Pim’s hairy brows rose beneath a wrinkled forehead.  “How tight would you like this choker to be? Fairly so I’d say given that you are here on your own.”  It was questions like this that made Belladonna truly love Pim.  They always knew just what Belladonna needed.

&lt;center&gt;&lt;img src=&quot;images/Goblin.png&quot; height=&quot;600&quot; width=&quot;700&quot;&gt;&lt;/center&gt;

Nails tapping upon the glass, Belladonna looked at the gems beneath. Such pretty displays, each one unique from the other.  Of course Belladonna wanted to get something special, but she didn’t want to steal from the world a gem far finer than what the receiver deserved.  Eyes skittering across each option, she finally settled on a ruby. Blood-red and gleaming.

“That one,” she told Pim.

“A classic today then.” Opening the case, Pim reached in with pristine and delicate fingers, pulling the piece of jewelry from its velvet display. They held it up so it glinted in the light. “Would you like proof?” Belladonna nodded her consent as Pim opened their mouth as wide as possible and bit down on the gem.  Their glass teeth shattered into tiny nubs.

“Lovely,” Belladonna breathed. “If you could set it in a lace choker, that would be darling.”

“Of course. Of course. Shall only take a moment.”  Pim was one of the fastest jewelers in the market, their hands were said to be enchanted. Rumor had it, they had once worked for Lord Taliesin himself before the Baron had an unfortunate run in with the Wild Hunt.  Pim had managed to sneak away from the raging storm that had descended upon the Baron’s estate.  Many others had not.

“Do you finally have someone special in your life, m’lady? I am not used to seeing you take such personal interest in anyone outside a job.”

“How do you know this isn’t a job?”

“You got an air about you. Something a bit darker today.  If you are on a job, I pity the client.”

Belladonna smiled appropriately, browsing Pim’s other wares while she waited.  “You are observant, dear Pim.  But not entirely right. I, in fact, am on a job. Though it is a bit different from my normal. The necklace in question is for an old friend. In hopes of mending some bridges to broker a new business venture.”

“You getting out of being a Lady of the Night Market?” Pim looked surprised.

“I will always be the Lady of the Night Market,” Belladonna admonished. “But after a very unpleasant Lantern Festival where yet another one of my clients thought they could throw their weight around, I do think it may be time to move on to bigger and better things.  Though, I may still keep some of my more favored clients.  I do not wish to get bored.”

“Well,” Pim said, setting the freshly woven choker inside a black velvet box.  “I do wish you the best with that.  This one is a beauty.” The ruby sat in an inlay of woven onyx while the band itself was silk lace. It clasped in the back with a smaller ruby while teardrop crystals dangled from the chain in a singular line.  It was a stunning piece.

“Pimello, as always, you outdo yourself.”

“I’m hoping one day you come down here for a special someone,” they said. “I really am sick of making these death chokers for you.”

Belladonna took the box, shutting it gently. “That day may be soon. I simply have to take care of a few loose ends first.  Bill me as usual, please.  Don’t undercut your prices this time.  Charge what you know you are deserving of.  And a little extra so you can keep those steps in good condition.”

“Will do, Ms. Malady.”

As Belladonna stepped out on the frozen streets, she looked at the box in question. Soon.  She just needed to wait a bit longer and this would finally all be over.

[[Next|Belladonna 9]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="52" name="Belladonna 9" tags="" position="1400,1300" size="100,100">&lt;img src=&quot;images/Bat 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;Belladonna waited.

She was very good at waiting.  Some might say she was too good, in fact.  There was a distinct possibility that this patience of hers may have been a fault because it didn’t allow her to move on from any singular slight. Mainly, because she was willing to wait years to see things through.  Not many knew that about her. It was a secret that she alone managed to keep.  Unless, you were the other person in the Night Market that had a vested interest in knowing when each chess piece moved across the market board.

Finding Gabriel standing in the middle of her parlor did truly give her pause. She wasn’t surprised by much these days, but this sight was strange enough to make her believe she was dreaming. If she dreamed, that is.

“Warden Caine.” She tried not to let her discomfort be known. Of course, she knew he would eventually come around. She had waited far longer than she expected.  The fact that it took him this long meant Belladonna had given him more credit than he deserved. Or he was giving her more respect than she required.  “Is this a social call?” she asked.

“You know it’s not.”

Gabriel stood in the middle of the room. Flashes of a younger man with messed hair and an all black uniform blazed before her. Although, she had never been disappointed in the midnight blue he now donned.

“We have strict policies, Warden. No one that has been in my employment gets to buy my services.” She walked over to the tea table, flicking the rune that would light the hearth and set the delicate plum teapot boiling.  A gift from the Book Baron.  Perhaps the only Baron at this point she had respect for.

“Have you heard back from the Baron of the Mists?” Gabriel asked, ignoring her.  She noticed that he made no move to make himself comfortable. Now that she thought about it, he hadn’t been here since the day he had been fired.

“I have not. Though, you know Kavatti. Fashionably late each and every time.”

He nodded curtly. “She was not looking well at the last Baron meeting.” Kavatti had some sort of human disease before she was a vampire. One that had ravaged her body and left her with eternal death as her only option. It was supposed to pump youth back in her. Said youth was waning rather quickly, however.

“Unsurprising,” Belladonna said. “Though, I will admit, a tad bit disappointing. She had such potential not to be a horrendous little creature and yet here we are.”

Awkward silence passed between them. While they had been working together these past few months, it was still odd.  It was this oddity that bothered Belladonna the most. There had been a time when she could sit with him in silence and find peace. Now, the silence only stretched through the room in an odd tendril of tension. 

“I would like to discuss her, if we may.”

“After all this time? Why the curiosity?” Arguably, Gabriel had more access to the Baron of the Mists than Belladonna. He oversaw the monthly meetings between all the Barons. Belladonna hadn’t seen Kavatti since being released from her services.  Which had been long before Gabriel was even Warden.

“Because you will be taking our market friend to see her and I do not think that is wise for the two of you to go alone.” Straightening, ever the good soldier, he stood at attention. “I would like to attend this meeting with you.”

Belladonna blinked at him.  His expression was unchanging and his posture stiff, as if awaiting his next orders.  “No,” she said slowly.

While it was expected, his gaze still ticked toward hers. “Ms. Malady, I do believe it is a mistake…”

“I’m sorry. Were we not just having a similar conversation about Elias? Wasn’t I just the one who did not feel it right for you to go to the Dollmaker due to a personal nature? You all but told me to shove it up my ass, Gabriel dear, so you’ll excuse me if I find your request laughable.” Irritation swept through her. She hadn’t fed in some time and knew that little detail would need to change soon. She was always so much quicker to temper without fresh blood coursing through her.

Gabriel’s jaw clenched. He was not a stupid man. He had to have known the ordeal with Elias would come back and bite him. “I do not believe, going forward, we should let our past hurts become an issue.”

“Your past hurts,” she said pointedly. “Not my own. I have offered you kindness, Gabriel. I have offered you a chance to work with me once more. I have offered you friendship. But you were the one that could not step forward and meet me halfway.”  Oh but how he liked to play the different narrative. How Gabriel liked to look the victim with what had transpired.  It was much easier to believe a viper a villain than a man created solely for good.

“And do you truly expect me to after what you did?” he hissed. She understood his refusal of events in front of others. But here, in the very room it all had happened…

“Are you referring to my job? How I got the position in the first place? Or the fact that I created a backbone in you and kept you alive?”

He shook his head. “I did not come here for this.”

“No. You came to demand that you be in attendance to something that has nothing to do with you.”

“Kavatti has burned bridges with many, Ms. Malady. You may have known her far better but I still believe the situation is one that does require some level-headed thinking.  And while you are many things, you are not level-headed when it comes to someone who has hurt you.”

Her eyes flashed red at that. Hurt.  What an interesting word, coming from him. “I will be taking my sweet little darling namekeeper, Warden. I assure you, they will keep me level-headed.”

“You and I both know that their presence will not dissuade you from what you are about to do.” He made half a step forward, halting himself before he could close the physical distance between them.

The kettle popped, signaling that the tea was done. Belladonna did not turn however, her eyes locked with Gabriel’s. “And just what is it you think I’m about to do?”

Gabriel’s eyes tipped into the dark silver of the Fallen, the grace in his pocket glowing bright. “Belladonna, it is not worth it.  This is no longer a fight you need to have. You have risen far higher in the market than you thought you ever would. You have proven your point. It is time to be done.”

It struck her, cutting through her in a twisted barbed edge of a knife.  Of everyone, he should have understood. He had been there.  This wasn’t about proof of who was better. This was about setting right a history that had gone so horribly askew.

“And tell me, Gabriel,” she said softly. “Do you really believe this, or do you just not want the mess that you know I am about to bring to your door.”  The Warden, after all, would have to be involved and it seemed like Gabriel’s worst nightmare to help her with anything

When he looked at her, she felt herself falter, however.  A much more familiar gaze was cast upon her now and she didn’t know if she liked that she had opened that pathway once again. “I hope you bring it to my door,” he said after a long moment.  “If you are about to do what I think you are, I hope that you bring it to me first. At least so I can protect the innocent that will fall in this situation.”

With that, he walked past her, taking the teacup that sat on the table and turning it over. A dismissal of an invitation that Belladonna hadn’t even been aware she’d given.

“And me?” she asked before he could go. “Will you protect me despite no longer being friends?”

Gabriel sighed. The light from the hearth cast strange shadows across his person. Ones that seemed to be physically drawing him away. “I said I would protect the innocent in this situation. Whether or not you believe yourself to be one is up to you.”

When he left, Belladonna could only stare after him. That familiar feeling of vengeance bubbling to the surface once more.

[[Next|Belladonna 10]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="53" name="Belladonna 10" tags="" position="1400,1425" size="100,100">&lt;img src=&quot;images/Bat 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The knock was familiar.  It called back to the girl she had once been as opposed to the woman she had become.  Rising from where he had been trying to sleep in vain, Reese opened the old cottage door with a creak.  Belladonna stood on the other side with a bottle in hand.

“Thought we could share a drink,” she said, holding up the bourbon. It was Reese’s favorite. She always had impeccable taste.

Stepping aside, he motioned for her to come in. Amidst his derelict home, she looked out of place.  What with her sheer lace and crimson hair and manicured nails.  She had certainly come far in the world

“To what do I owe the pleasure?” he asked, shutting the door and heading towards the kitchen. Reese was sure he had some bread and cheese around here somewhere.  She ate very little these days but usually partook in the process while drinking with him.

“I came to talk about your wayward bird.” Her tone was guarded.  Caliban.  It had been a few days since Reese had seen him and he was getting itchy for the company of that man.  One of the only people in this world Reese didn’t have to hold back with.

“What’d he do now?” 

Taking the tumblers from the top shelf, Belladonna blew the dust off of them before rolling her eyes and running them under some water.  Decorum. It was the only reason he kept those particular glasses.  Belladonna liked to be a lady for the first two drinks before the two of them ended up just drinking straight from the bottle.

“He flew the proverbial coop,” she said.  Pouring four fingers worth, she handed him his glass. Reese looked at it contemplatively, feeling a small pang of regret shoot through him.  

“Not surprising.  He was only going to be able to last for a short time here.  Fucker ran straight to a place that Odin had already set up shop.” He swallowed the tumbler in full.  “Boy deserved more than what this hellhole has to offer anyway.”

&lt;img src=&quot;images/Wine.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;Belladonna refilled the glass, along with her own.  When Reese raised a brow at her, she shrugged. “I was there.”

“How bad?”  No one could hear her here. Reese had taken great pains through the years of keeping this cottage safe. After everything with Elias, he had wanted to move, to burn this home to the ground, but he had never been able to bring himself to destroy this particular memory.

Leaning against the counter, Belladonna shook her head. “I do not envy the choices that were made tonight.  I also wonder just when I became so heartless that I didn’t step in and have an opinion over such a wretched display.”

Reese laughed. “You’re not heartless, Bella.  You have more heart than most I know. You just also know how to protect it.”

She side eyed him. “That is not a good trait to have, I am starting to believe.”  Because, like Reese, she protected her heart. Yet here the two of them were. Alone.

They migrated towards the living room. Towards the old brown leather sofas that were cracked with age. Belladonna sat on one end, kicking off her heels and tucking her feet beneath her, while Reese sprawled out on the other side, resting his boots on the table.

“That all you came here tonight for? Commiseration about a man you hardly knew?”

“Would there be another reason?”

Reese grinned, gold capped tooth glinting in the low light of the room.  “You’re close, aren’t you?” The way she turned her nose upwards meant he was right. “Yeah,” he chuckled. “You’re close.”

“There are a great many things I have in motion, Reese, you will have to be a tad bit more specific.”

“I don’t think I do.”

Huffing, Belladonna stared at the bottom of her empty glass before tossing it aside and grabbing at the bottle. Reese roared in laughter as she took a long swig of it, fingers wrapped around the neck and holding it close.

“Should have brought a second one tonight,” he commented. “You seem a tad stressed.”

“I feel disquiet,” she said, as if the word itself was vile.  “After everything with Caliban I went to relieve some stress. Had a wonderful evening with someone I know. I thought if I could put myself in control, give pleasure, I would feel okay again. It would get the nervous energy to be nothing more than an annoying itch.  But, if anything it has made me even more wrought with anxiety and I wish it to go away.”

Reese leaned forward, grabbing the bottle from her. She glared at him as he did so.  “When you making your move?”

“A few days from now.”

He nodded, already planning his part in it all. “Send word. I’ll patrol the streets that night. Make sure you got nothing coming your way.”

“You do not have to do that.”

“Given the bullshit rules, this is going to be the last time you and I see each other again,” he said. He tried to keep the pain over that little fact from his voice but knew it shined through.  “I’ll absolutely do this for my daughter.”

It was not often the sentiment was expressed. Bella’s parents had died long ago, leaving her another lost youth to the market streets. Reese had taken a shine to her from the beginning. He was never quite sure why. Maybe because she was alive and fragile and stood up to him.  He figured it was the kind of daughter he would want, if he ever had one.  

“You need to stop calling me that,” she said with a fond little smile.  “It hurts Gabriel.”

“If it hurts Gabriel he can come over here and tell me himself. Besides, you were supposed to be my daughter-in-law.”

It was Belladonna’s turn to laugh. “I was never going to marry that man and you know it. Don’t go rewriting history like that.”

“Fine. I wished it.”

“If wishes were horses…”

Reese took another long swig. “That is such a fucked up saying. Who wants a bunch of fucking horses around?”

“Ranchers.” At the confused expression on his face, she took the opportunity to steal back the bottle. It was more than halfway empty now. “I am sorry about Caliban.” Belladonna hadn’t known him other than in passing. But the fear she saw on his face tonight was only a look she wished upon her enemies.

“Yeah,” Reese said. “Me too.” Wrapping an arm around her, he hugged her close. The weight of her head fell on his shoulder, staying there as she gave a stiff sigh.  He could feel her swallowing reflexively. Belladonna Malady did not cry. Neither did Reese. It was an understanding they had.  “You don’t have to do this, kiddo,” he told her gently.

“The only thing stopping me from doing this is you,” she said. Her weekly dinner and drinks with Reese. And the presence of one other. One she wished more than anything would not be harmed.  If she could, she would be keeping them from the top of the tower.

“You’re sweet,” Reese said. “And a liar.”

“Learned from the best.”

Dropping a kiss to the crown of her head, he then shoved her off. “Come on. Let’s get drunk and cause mischief in the market for Gabriel. He’s been entirely too serious lately.”

Belladonna laughed, wiping her eyes as Reese gave her a few minutes. Almost there. Almost done. Just a little bit more time and for the first time since she had come to the market, she would no longer be someone else&#39;s pawn.

She just hoped that a certain life would not blink out in the process.

[[Next|Belladonna 11]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;
</tw-passagedata><tw-passagedata pid="54" name="Belladonna 11" tags="" position="1400,1550" size="100,100">&lt;img src=&quot;images/Bat 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;Blood splattered across the floor in one long streak, a scream falling short in a wet cough.  Belladonna tipped her head to the side, a bit of a frown marring her crimson lips. You couldn’t see the carnage on the black flooring. She loved obsidian but it didn’t do well for setting such an example.

Looking at her “guards”, and oh how she hated calling them that, she waved her hand. “Next.”  They came forward, dragging away the decapitated form of some low life vampire trying to still lick Kavatti’s boots long after her demise.  At the same time, another was pushed forward. “State your grievance.”

Belladonna sat on a velvet lined throne. A gift from Feebus. It was adorned with the softest plum fabric and lined with black and gold. The filigree across the arms were lightly etched with pages from several of her favorite books. He must have been working on it for a while. Big softy that he was. Belladonna bet he knew she was going to make her move years ago and had been slowly chipping away at it.

The woman that was pushed forward was one that Belladonna had seen before. One of the vampires that lounged around on the bottom levels of the cathedral, half naked and coaxing anyone that came her way towards her chaise lounge. She had several dozen kills under her belt and her fangs were stained pink from blood. 

“I am here on behalf of a good measure of us,” the woman began. She had her chin tilted upwards, her long black hair cascading down her back to brush the backs of her knees. “We have spent quite some time with Baron Kavatti. She has allowed us to build our business here, supplying us with unlimited blood. What do you plan to do for us?”

Belladonna looked at her, blinking rapidly as if to feign shock. “Nothing.”

It was the end of the sentence. Period.

The vampire stared back at Belladonna, as if waiting for an explanation, but when none came, she began opening and closing her mouth, scrambling for the words that would put her back in the bargaining position.

“So you would see us all die?” she finally sputtered.

“I was operating under the assumption that all of you are perfectly capable of taking care of your own needs. I wasn’t aware that you still needed to be spoon-fed.” She looked around the room at the vampires gathered. The ones that had not come to Kavatti’s aid but instead cowered under their seats down here, hiding until Belladonna made her way downstairs covered in their master&#39;s blood. “What?” she asked them all innocently. “Having problems unlatching from Kavatti’s tit? Well, children, you have a new mommy now. So, either learn how to take care of yourself, or simply wither away into nothingness. I assure you I won’t care either way.”

“How dare you,” the woman hissed. “You cannot just come in here and–”

Standing, the woman clicked her mouth shut. Slowly, Belladonna walked down the marbled steps towards her, the lace of her dress leaving her hips and legs exposed with each carefully placed step. Stopping to stand in front of her, Belladonna reached out, sweeping a bit of hair away from the woman&#39;s face.

&lt;img src=&quot;images/Bella vamp portrait.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;“So very pretty,” Belladonna murmured. “Practically perfection, I might say.  The amount of men and women you must have lured to dark corners. I am sure it is impressive.” Grabbing a fist full of her hair, she yanked the woman&#39;s head to the side, her own lips lingering over the long dead pulse point. Her fangs extended, scraping across the quivering column of neck before her.  “Looks are not everything, my dear. In fact, I find when an individual relies on them too heavily, they are nothing more than fodder for the masses. Dispensable, really. Are you something to be thrown out with the trash?” Belladonna’s lips wrapped around the raised skin, sucking a bruise into the woman&#39;s neck.

“No, m’lady.”

Shoving her away, Belladonna looked down at the sprawled figure on the floor. “Then how about you start acting like it, hm?”  Turning to the hushed room, she stared at them all. They were unmoving. Their breaths frozen in her chest.

“From this day forward, there are going to be some rules. You wish to ply your trade? I will not stop you. But, we want a good relationship with the guard. We want to be able to walk the market streets freely. So, death is not on the docket anymore. There will be no second chances under my house. It will be a life for a life.  As of today, I will be dissipating the mists. There will be no more calling the naive into the fog for our pleasure.  You want blood, do it right. You want to cause pain, then find the ones seeking it.  If someone needs to die, you come to me and if I find your cause worthy, we will give you your day of vengeance.  But, no longer do you get to run yourself silly in this barren cathedral.  We are creatures of the night living in a world of darkness. It is time we start walking the streets again as opposed to hiding among the mists. Understood?”

“Yes, m’lady,” came a chorus from beyond.

She smiled. “Good. Now, as for the ones that simply agreed and will be going off to plan my demise at a later date, please, if you are going to die, eat something sweet beforehand. I find I like the taste of blood a bit more after citrus is consumed.”

Turning, she looked at her guards pointedly. “Let me know.”

They both nodded.

Climbing the spiral staircase into her new office, Belladonna kicked off her heels. She walked to the rounded window. The one Kavatti used to stand at, surveying her paltry excuse of a kingdom.  The mists were still present but she had been assured they would be gone by this time tomorrow. Now, she only needed to wait. Wait for the fog to clear. Wait for the bloodshed that would inevitably come to her door. And wait for the Night Market to open its loving arms to her people for the first time in what seemed like forever.

With a pleasant sigh, Belladonna began picking up the things that had been Kavatti’s. Trinkets. Pictures. Old artifacts meant to control beauty and youth. One by one, she chucked them out the window, smiling devilishly as they fell with a crack against the streets below. A new era of the Night Market was underway, and Belladonna planned to be at the helm of it all.

[[Next|Belladonna 12]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="55" name="Belladonna 12" tags="" position="1400,1675" size="100,100">&lt;img src=&quot;images/Bat 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;//Warning: Contains sexual content//

“So what does an example date with the infamous Belladonna Malady consist of?” The day itself was cool, and the lanterns were swaying above us in a dusty rose hue.  We were in the back area of the pleasure district, sitting at one of the more obscure tables that offered us an eye to most of the district, but kept us hidden well into the shadows. Belladonna’s eyes glowed in the dark as she kept them trained on the copulating forms all around. Only once did I see a guard discreetly remove someone as they dropped to the floor. The ambrosia taking the best of him as it was clear his intention within the market was nothing pure.

“Dinner mainly,” Belladonna said, not taking her eyes off the people around us.  “Lots of dinners and listening to small talk and pretending like I care.”

I laughed a little at that, almost fearing the amount of tedious conversation she had to partake in. Conversation was something that Belladonna excelled at. But only the truly stimulating ones set her eyes alight and had her leaning towards her partner as if they were the only other person in the world.

“And that’s it?”

“Of course that is not all but I am not going to share my clients’ intimate details with you, dear heart.” There was amusement flashing across her at my question. Belladonna liked questions. She said they were the backbones of power. “No matter what kind of look you give me.”

“Look?”

“You have this way when you become pouty. It&#39;s adorable, really.” She was making notations in a leather-bound book. Small little ticks within various columns. If anyone were to pick it up, it was doubtful they would even know what it was.

“I didn’t think I was pouting,” I said, truly not knowing what face she was speaking of.

“That’s why it’s adorable. Unintentional pouts are my favorite. The ones used to weaponize a situation are rarely done right. Then again, most individuals do not know the art of manipulation. Their attempts are paltry and when they try to turn them on to a professional it can get rather uninteresting rather fast.”

She sighed a little as she pushed the book back, examining her words. A man was approaching us, hat in hand as he hesitantly made his way to our table. Without even looking up, Belladonna held her hand up, halting his motions, before shooing him away. He made a wide turn and didn’t attempt to continue.

“That was impressive.”

“Weeds out the uninteresting ones. The ones courageous enough to still proceed I will usually give five minutes to. It’s clear that man will do far better with someone like Sandra. She is soft and will coo in his ear about how manly he is. Stroke that ego.”

I leaned back in my own chair, watching the district, letting my eyes slide over most of the gyrating forms and trying to see the world in the manner Belladonna saw it. Though, I suppose that’s what most paid her for. So they didn’t have to look at the world with cynicism, knowing the dangers that lurked in the corners.

“How much does it cost?” I asked curiously.

“For me? Too much.”

It was what she had always told me but I was realizing now I had never once gotten a number.  Nor did anyone seem to know what her rate was. The conversion rate of currency within the Night Market made it nearly impossible to get a firm grasp of what she charged.

“Are you truly curious?” she asked after a moment, still writing in her ledger.

My eyes snapped to her. “Of course I am.”

“I could give you a taste of it,” she said. “What I do. It could clear up some questions.”

“Yes,” I breathed. Because why wouldn’t I take the opportunity? I was beginning to learn when Belladonna made suggestions like this, it was her way of showing me that she was interested. Pathetic or not, I clung to those opportunities.

“Wonderful,” she murmured. “Get on your knees.”

I startled at the sudden demand and when she didn’t raise her head to look at me, I wondered if I had heard her correctly.

“I don’t want to have to ask again.”

Slowly, I rose from my seat and walked around the table to kneel in front of her. It was awkward and I could feel my chest tighten, and my heart begin to pound as she still did not raise her eyes in my direction.

“I have a little bit of work I need to do, dear heart, so rest your head on my thigh, alright?”  

Slowly, I scooted forward to rest my forehead against her knee, feeling her chuckle as she felt me try to get comfortable.

“No, dear heart, I want your cheek upon my thigh.  There is a difference. Scoot up please.” Slowly, I inched forward, my cheek resting on the thick muscle of her thigh, a puff of air escaping me as I scooted half under the table, halfway just laying between her legs.  When Belladonna’s hand came down, her nails scratching against my scalp, I felt a shiver run down my spine. “Good little sweetling. So willing to be obedient.”

I could hear the scratch of her quill as she continued to work, her fingers petting across my head. They paid her for this. They paid her to kneel at her feet and breathe in her scent, all the while she ran her fingers across them. I didn’t understand it. I couldn’t conceptualize why that would be something someone would even ask for. Or maybe you didn’t ask Belladonna. She instead let you know what you needed.&lt;img src=&quot;images/Bellas legs.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

“Ms. Malady?” I startled at the sudden new voice and almost rose to my feet to scramble away. She tapped my shoulder once, letting me know her displeasure at my movement.  “I have the reports you wanted.”

“Wonderful. Just set them on the table. Thank you.”

There was a shuffle and my heart felt as if it were racing as I struggled not to look at whoever was shuffling around my prone body to give Belladonna the latest reports on the market. My breath was coming faster and faster, blaring in my own ears. I didn’t know when he walked away.

“Rest,” Belladonna said with a husky whisper. “You have had so much to do lately. Let me take care of you. Know that nothing else matters other than my voice, my touch, my very presence.  Let the rest of the world slip away.”

“Bella….”

“I didn’t say you could speak,” she interrupted. “It shall of course be forgiven since I did not lay out the rules prior. But, I do expect you to just sit there until your knees go numb.”

I didn’t know how long I sat. I fell into the sound of the quill scratching against the paper and Belladonna occasionally taking a sip of her wine. But nothing more. After a certain amount of time, I felt her push back in her chair, leaning against the wing back to look down at me.  

“Oh, look at you,” she breathed. “Kneeling so pretty.  I should reward you for this. Just what kind of reward should it be? Should I allow you to slip under my dress and use your lips to your heart&#39;s content? Or, should I spread you over this table and run my tongue over your body?”

I felt my breath hitch and my cheeks flush. I didn’t dare answer her, too afraid that she would push me away.

“No,” she murmured, none of those seeming quite right to her. “Perhaps I should strip you bare and play with you for a while. See what you like. I do wonder what it would take to make you moan before a group of people. If I could make you scream. Then again, I am feeling a bit peckish. Perhaps I should be the one to kneel between your open thighs and take a sip from you. Would you like that dear heart?” Pulling my head up with a quick hold of my chin, she looked at me with a blaring intensity.

“Yes,” I whispered.

Belladonna smiled fondly, cupping my cheek. 

Then, she rose, gathering her ledger and leaving me panting and breathless, still on the ground. “That, is an example of what I do, my heart. Does that answer your questions?” Staring up at her, I knew my mouth laid agape as she stared down at me, still at her feet. “Aw, you’re speechless. How cute. I’ll go put my things away. Did you need help getting back to Hazel’s?”

I swallowed. “I….”

“Right. I’ll just give you a few minutes.”

As she walked away, I watched as she looked at several of her guards. They stepped a bit closer to where I was, clearly giving me the time to recover from whatever that was. Still kneeling, I merely looked at my hands though, wondering just how I had gotten myself into this situation. And if Hazel would give me a raise.

[[Next|Belladonna 13]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="56" name="Belladonna 13" tags="" position="1400,1800" size="100,100">&lt;img src=&quot;images/Bat 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;250&quot;&gt;The fires reached high above the market walls, lighting the dark sky and burning the broken lanterns above. They hung from snapping cords, paper melting beneath the heat until they were nothing but ash that drifted away like silent tears. Belladonna stared at it dispassionately, remembering the glow of their eyes. How they reflected the lights above. With them buried beneath dirt and memories now, what did it matter if the lanterns were gone? The lanterns had only existed to reflect hypnotically from their gaze. Nothing more.

“Belladonna, you have got to stop this.” 

Staring at the flames, she did not turn to the voice of anger, barreling towards her from behind. She dared him to touch her. She would revel in the consequences of such an action.

Arms crossed, she heard the screams. They were all across the market now.  Blood was spilled within the streets, soaking the cobblestones red while the fire blazed high, a beacon to a man that had two choices. Let death remain his mantle, or, come out of his hiding and answer for his sins.

“Belladonna,” Feebus’s voice was a bark against the surrounding panic. The gentle giant rarely raised his voice, especially to her. Apparently, this was what she had to do to elicit his anger.  “This is highly unnecessary.” His shadow flickered across her, the light from the fire making him seem bigger than he was.

“Is it?” she asked curiously.  

“This is my property, Belladonna. Mine. Whatever you are trying to accomplish with this fiery reign is doing nothing but adding to the fear and destruction across our land.” The button factory was burning. One of Feebus’s older ones. The one he used predominantly years ago when he was still sewing by hand. When he had a young boy in his employment with shaggy curls and amber eyes.

“And what would you like me to do, Feebus?” she asked curiously, watching as her people roamed, free to drink whoever smelled of lies. And oh so many of them did. “Would you like me to pretend that the slight your wayward son committed was nothing more than a social faux pas?”

“Milo has nothing to do with here,” Feebus snapped. “He had nothing to do with the bar that you burned down. He had nothing to do with the food carts you have destroyed or with the hovels you have put in ruin. You are going around and burning bits of the market due to your anger alone.”

Her smile was cold as she finally turned to him. The well put together man that he had once been, was nothing more than a frazzled absentee father who knew his son&#39;s death would be upon them soon. She still had not decided if she would allow him to bury the boy. Depended on how much the fae blood begged.

“You think this is due to anger, dear Feebus?” she asked. Her eyes were bright embers shining back at him, her skin flushed with a recent kill. Belladonna could feel her heart fluttering against her chest as it pumped the fresh blood through her, bringing her to fleeting life. “This isn’t about anger. I am well past anger. Something that was mine, was taken from me. And I know who took them. So, I’m not angry, Feebus. I am merely exacting the justice that no one else is brave enough to do.”

“By destroying public property?” he roared.

“No. By destroying all that was ever important to him. By going to his favorite haunts and burning them to ash. By finding the people he may have confided in and asking them if they are hiding him. And then, by killing them if I sense a lie. Now, thankfully, until this moment, it does seem like Milo did not involve many in his little plan and so I have only killed the ones that disrespected my love so thoroughly, in one way or another. But here, Feebus? Your people here seem to know something.” Tipping her head to the side, she could smell the fear over the fire.  “When did he leave?”

Feebus stared at her, jaw clenching. Belladonna wondered if he would hit her.  If he would try to save Milo. Defend his actions. She hoped not. Belladonna did genuinely like Feebus. It seemed to her that he was also tainted with the cancer that was Milo Next, however.

“He left four days ago,” Feebus said after a moment. “Now you’re going to leave my people alone because the ones that do know something, only know that they saw him lurking one morning when I told him he needed to go.”

Belladonna smiled. “So you two did have people lie for you then?”

“No, Bella. No one is purposefully lying to you. They are afraid. Fear and lies smell awfully similar. You know that.”

“I do,” she agreed. “But I won’t be taking the chance.”

Behind her, the flames shot higher into the sky as the roof to the old sewing factory lit. The straw that covered the slates went up in flame, floating high into the night to speckle the sky with burning stars.

“If you see Milo, tell him I’m looking for him. Hopefully, he won’t let something like this continue to happen. Would be a shame for all of you to realize how little he does care about you.” Stepping past Feebus, she began walking into the dark. Down alleys that were twisted and crying. Little offshoots into a world that couldn’t understand what was happening to it and trying so hard to claw for purchase somewhere.

“Belladonna,” Feebus boomed. “Do not make an enemy of me and mine,” he warned.  “You can stop this nonsense as well.”

Looking over her shoulder, she softened her gaze. “I truly do not wish to fight you, old friend. But if your son continues to be the pig that he is, hiding somewhere in the filth while others pay for his sins, then that is the choice we will both have to make.”

The shadows enveloped her as she walked away. Leaving the giant to try and put out the flame. Belladonna didn’t care. Perhaps the smoke plumes would be enough to call Milo home.  Dragging her nails across the stone walls, Belladonna walked into the dark, chaos only a distant echo around her.

“Don’t worry, my heart. Your pain will stop soon. I&#39;ll make sure of it. And when you return, we will drink Milo’s pain together. Just hang on a bit longer.” She patted the stone wall, caressing it lovingly.

Above her, the lanterns remained dark.

&lt;center&gt;&lt;img src=&quot;images/Fire.png&quot;
height=&quot;350&quot; width=&quot;900&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="57" name="Malcolm 1" tags="" position="1600,300" size="100,100">&lt;img src=&quot;images/Lantern 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;200&quot;&gt;Malcolm Albright was said to have been born wrong. Born in the body that offered him no comfort. Born without the magic that was supposed to run through his veins. And born because of magic and not love.

I never saw him as wrong, however. I had always seen him as mine. In return, he eventually saw me as his.

There was no conscious decision on my part. Fate maybe had a part of it all. But when he first spilled blood that night and became the Gatekeeper, nothing had ever felt more true. I had had protectors before. Ones who had dedicated their lives to me. But none of them had seen me before. Not like Malcolm. After shaking apart that night, he woke to the world he now walked and asked me what it was I needed.  

I had never had that before.

No one had ever asked what it is I wished to see happen to me or the people I housed. But Malcolm did. He couldn’t always hear me. He couldn’t always see me. But never once did he forget that I should have a choice. Because of that, I never once forgot how important his life would be.

[[Next|Malcolm 2]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="58" name="Malcolm 2" tags="" position="1600,425" size="100,100">&lt;img src=&quot;images/Lantern 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;200&quot;&gt;The door slammed with a resounding crack that echoed through the small garden beyond.  The roof shuddered, the shingles rearranging themselves under the weight of what was to come as the floorboards shook and the roots from the trees became gnarled as they rose from the ground to enclose the gate. Malcolm pulled at them with his hands, growling in frustration as they only became thicker, binding across the gates itself.

Turning, he looked back towards the house, bag slung across his shoulders filled with the few meager belongings he had. “I’ll burn them if I have to,” he shouted back to the house. “You’re not fucking keeping me here!”

There was no answer. Only the house creaking and groaning beneath the magic that now singed the air, the wisps scattering to the creek below. Malcolm tried to rip apart the vines growing in front of him, stopping his departure. But his hands ripped open, the blood seeping into the land, the magic feeding off of it like it was the sweetest nectar.

“Fine,” he muttered. “I’ll just go climb the fucking wall.”

Turning, he walked past the house and into the lush garden filled with poison and bone.  The ribs of whoever his mother’s latest lover was had been placed finally, creating a nice little trellis for the beans Hazel had planted a few weeks ago. Malcolm nearly kicked it as he went by.  Down out of the garden, down the grassy knoll, and towards the creek. The one place that for some reason, Lucinda Albright had not been able to touch. He stood there, breathing deeply, his eyes searching for a way out. Barbed knots of hollyhock and poison brambles lined the walls that sequestered them away from the lively streets of apothecary alley. Milo had gotten in a few times but the second Lucinda found that out she had closed off his way, cutting off his access to her children. She always did hate him for reasons beyond Malcolm’s caring.

“Are you really leaving?” 

Malcolm&#39;s shoulders slumped. Letting his bag drop to the ground, he turned towards the fort. The very one him and Hazel had created so long ago. Where Malcolm had slept more nights than not. Hazel was sitting at the entrance, tears on her face.

“I’m trying to.”

“She’s just mad, Malcolm. She’ll cool down in a few days.” Her eyes were bright as she looked up at him, all but silently begging for him to not go. “I could fix you up a cot in here. Bring you food. I made it really comfortable, Mal.”

In all his life, Hazel had been the only one who had been able to get to him like that. To gut him with a single kind gesture. How she became the chosen one of the Albright line, he never knew. Malcolm’s main worry was that it was going to take away her kindness, having it beaten out of her before she ever got the chance to run.  

“Hazel,” he crouched before her. “I can’t stay.”

“Why?” she protested. “What is so good about out there?”

Everything. Freedom. The choice to be who he wanted instead of who his mother deemed it necessary for him to be. The ability to not be a disappointment to the woman that was supposed to hold him close. Reaching out, he pulled his sister into his arms. She immediately flung herself to him, wrapping her arms around his neck tightly and burying her face into his shoulder.

“I can’t stay here, Hazel,” he told her not for the first time. So many nights had been spent whispering his dreams to her. The desire to get out from beneath Lucinda’s clutches.  Nights spent with his head in her lap as he cried yet again. Tears that were bred from anger from when she had burned his art. When she refused to accept who he was. When she had told him time and time again that he was a failure.
Tears that masked his anger but really were born from not understanding how his own mother couldn’t love him.

“I know,” she whispered. “I’m just going to miss you.”

He was going to miss her too. So so much. “You can come visit me, you know. When I get a place. You could even stay, if you want.” It was the entire idea, after all. Get out there, get established, find himself a place that was safe for both him and Hazel. Lucinda’s clutches were far deeper in Hazel’s heart than they were his. For the life of him, Malcolm couldn’t even figure out why she wasn’t letting him leave. It wasn’t like she had any use for him. He didn’t have a magic bone in his body. That had all gone to Hazel. “Promise me you’ll come visit me,” he said firmly.

She nodded. “Of course I will. You won’t be able to keep me away.”

But they both knew the desire for them to see each other would not be the problem. Not truly.

Pulling apart, Malcolm reached up, wiping the tears that stained her cheeks. He had to save her.  Somehow, he was going to save her. He just had to figure out how to even get out to begin with.

Sighing, Hazel stood, brushing off the drab gray of her skirt.  With a flick of her wrist, the brambles cleared at the nearest wall. “There&#39;s a back door about halfway through. It leads into Mr. Folsner’s shop. Milo uses it from time to time.”

&lt;img src=&quot;images/Hug.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;Malcolm grabbed her again, kissing her cheek. He doubted she knew just what she had done for him. Or maybe she had and was willing to sacrifice her own comfort to see him survive. Because they both knew, Malcolm would not last another year under this roof.  

“Go,” she said, not being able to look at him.

Malcolm hugged her to him fiercely. “I love you. I’ll be back for you.”

Hazel could only nod. Whether he came back or not, she still probably wouldn’t go.

Grabbing his bag, Malcolm raced towards the cleared portion of the wall, stepping through. He turned to look over his shoulder one last time, seeing Hazel kneeling there, alone, outside their childhood fort. His heart stopped. She had given him his freedom and had sacrificed his own.

Swallowing thickly, he knew this wasn’t right. He could survive it. They could figure out a way together. They could…

The wall snapped shut behind him, Hazel’s head whipping up and fingers closing in a fist. She had taken the choice from him. In that moment he didn’t know if he loved or hated her for it.  

But, as he sat in the dark tunnel that would lead into Apothecary Alley, a sense of relief began to course through him. A small bit of hope. He was free. For the first time that he could ever remember, he was allowed to just be himself. Malcolm Albright.

In the end, that was all he ever really wanted.

[[Next|Malcolm 3]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="59" name="Malcolm 3" tags="" position="1600,550" size="100,100">&lt;img src=&quot;images/Lantern 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;200&quot;&gt;The punch came with a spray of blood. Knuckles ripping apart as they collided with bone, the sound of tearing skin came after the split. The face before him was bloody and blurred with sweat, but Malcolm lashed out again, cutting his fist upwards to catch the man right beneath the jaw, watching as his head snapped back and spit and viscera flung across the room to land in a puddle of blood. The crowd burst into a wave of cheers as the man wavered, teetering on his feet. Spinning, Malcolm raised his leg, kicking the man squarely in the chest, the bare pad of his foot breaking bone. The opponent went down and Malcolm didn’t even wait for the count. He had won.

Spitting blood onto the ground, he walked out of the makeshift ring, pushing through people and headed towards the bar. The warehouse was made of high beamed rafters and several fight mats where any idiot could challenge another but only the truly adept would walk away with a fist full of cash. Malcolm had gone through four fights so far, his torso was mottled with purpling flesh and the split of his lip was caked with his own blood. But what he had earned tonight was going to pay for most of this month&#39;s expenses.

There was a bar up on the second story rafters where the floor swung with each step. Malcolm leaned against it, his bare skin screaming at the pressure of the wooden counter.  He raised his hand to the bartender, getting a nod from the brick wall of a man.  Below, the crowd flared to life again. Malcolm peered over, shaking his head a bit. Milo was fighting a ways away. Fucking kid was damn near his shadow lately. Though, Malcolm had to admit he was doing good. Looked like he was about to take the win.

“Interesting post fight drink.”

The voice was husky and just to his right. Malcolm turned, his forearms resting on the bar behind him. The bartender had just put down his pot of oolong tea, the contents steaming and driving away the scent of blood and sweat.

“Nothing says you can’t have a little bit of decorum after beating the shit out of someone,” he commented.

The person to his right was smiling at him. That kind of half quirk to their lips that held secrets. Sticking out their hand, they scooted closer. “Name’s Rook.”

Malcolm took it, the grip firm and callused. “Malcolm. You a fighter?”

“Occasionally.”	

“Tonight?”

“Nah. Came to see the competition. That little one down there is freakin’ me out though. He looks like a biter.” Malcolm could confirm that Milo was. “Watched you though. You got a different technique. Controlled. Don’t usually get the controlled ones here.”

Malcolm trained morning and night. He had to get the body he desired. Supplements and tonics could only go so far.

“I like discipline,” he said with a shrug. Milo knocked the guy out down below and the crowd went wild. The hubris that Milo contained could fill buckets and with the reaction around him, it was clear his was overflowing. “There’s something meditative about it,” he said.

Rook nodded. ‘I get that. Feral fighting is good and all but there is something to be said about form. Plus, it just looks fucking cool.”

Malcolm snorted. “There’s that.”

“So how’d you get into this?”

He looked at them out of the corner of his eye. “Why do you care?”

“Consider it a human interest piece. I’m a chatty kind of person. Like to hear what makes everyone tick.”

Malcolm got into fighting for the ability to know he would be able to take care of whatever was thrown his way. Because he was done being the punching bag of every asshole that took one look at him and had a problem with him. All because he was Lucina Albright’s child.  He started fighting for the cash, the clout, and the fear that came along with it. And because he was terrified that if he didn&#39;t have somewhere to release his anger, it would be unleashed at the wrong place and the wrong time.

Sipping at his tea, he shrugged. “It was either this or whoring.”

“Bet you would make a killing at that,” Rook teased, scooting a little closer.

“Are you hitting on me?”

“Want me to be?”

Setting his glass down, he ran his fingers across the ceramic rim. “Not tonight. Got a headache.”

Rook laughed, not looking put out. “You going to fight some more tonight?”

“Not sure yet. Waiting to see if that one down there is going to need to be dragged home. He’s a friend of my sister’s and so I have the unfortunate task of putting up with his ass.”

“It’s a fine ass.”

“Go ahead and proposition him. I’m sure he’s up for a quick two point five minutes in the alley. I heard from several people it’s the most mediocre lay they’ve ever had the pleasure of halfway participating in.”

The roll of laughter that erupted from them echoed above the murmur of the crowd.  “Damn,” they said with bright eyes. “You and he must not get along for a burn that bad.”

Malcolm poured himself another small glass of tea. It was doing its job and soothing the rage that was still coursing in him. “He’s alright when he’s not posturing, I guess.”

“Still, must say I am now incredibly curious.”

Malcolm waved down towards Milo. “He’ll be up for it. Have at it.”

Rook made no move to leave, however, as they continued leaning against the bar. Their fingers were slender and filled with ink, delicate lines writing across bone. The line of their jaw was sharp along with the bones of their cheek and Malcolm, now that he was this close, could see just how strong they were. A worthy opponent, he was almost sure. Their dark eyes were that sultry brown and their lips were pouty and nearly perfect. The wrap around their chest bound them down along with their pants which hung low on their hips.

“You wouldn’t be up for sparring some time, would you?” they asked.

“Why me?”

“Because you’re funny. You have a form I haven’t seen before. And I want to see if I can beat you.”

“So this is a competition thing.”

“Absolutely.”

Pushing away from the bar, Malcolm felt his abused muscles pop a bit. There was still an itch there. Something burning in him that he couldn’t quite shake today. With Milo’s recent win, and the possibility of him going home with any numerous amount of people, Mal figured he had a few more fights in him.

“We’ll see.”

Rook raised a brow. “We’ll see?”

“Yeah.” There were a few newcomers entering the warehouse. They looked like the fresh meat that Malcolm often enjoyed. Looking over his shoulder at Rook, he grinned. “We’ll see.”

“Sure you have that headache,” they called after him.

He laughed as he disappeared through the crowd. Later that night though, just as he was ducking an oncoming blow and kicking his opponent’s legs out. He looked towards the door. Milo had his arm around Rook’s shoulder as they were leaving. He made eye contact with them, catching their wink before they disappeared.

Malcolm laughed lowly to himself as he ducked another blow.

[[Next|Malcolm 4]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="60" name="Malcolm 4" tags="" position="1600,675" size="100,100">&lt;img src=&quot;images/Lantern 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;175&quot;&gt;“Be nice.” A steaming pot of stew was clutched between Hazel’s small hands as she walked down the alley, turning left three times until she found the right area. It was an old distillery, just outside of town. Out of the Velvet Guard&#39;s eyesight.

“I’m always nice.”

She looked at her brother out of the corner of her eye. “You’re not. Not to him at least.  Can you at least try this time? He’s really been through it lately.”

Malcolm snorted. “It’s not my fault Milo’s an idiot and lost his balance on the rafters.”

“That. See? It’s that kind of attitude that I worry about. He’s trying, Malcolm. He doesn’t want to have to work for Feebus forever.”

“If he knew what was good for him, he would. Milo is a decent thief, but he is terrible at responsibility.”

Hazel’s frown deepened. “I think he can learn.”

“I think he can fool you into believing he can.”

The whiskey distillery loomed before them. A large, rusted building that was hidden predominantly in shadows. It was as if the building itself was hiding, holding secrets never meant for the world. They hadn’t seen Milo in weeks. Not since he had moved out of Feebus’ and tried to make it on his own. When Hazel got word that he was sick, she had immediately set about brewing him a soup that would, as she claimed, cure all ills. Malcolm noticed the tonics she poured into it. He had tasted it but didn’t have the heart to tell her it was foul. Luckily though, he wasn’t the one eating it.

“Kindness, Malcolm,” Hazel reminded. “I know he isn’t your favorite but just try.”

When she stepped forward, she didn’t see the smug look that crossed Malcolm’s face. “I’ll try,” he told her, hands in his pockets and a retort ready on his lips in case Milo was going to be extra Milo today.

But it seemed as if sickness was the one thing that could get Milo down. When he opened the large metal door, it creaked loudly, echoing through the alleyway. His eyes were sunken and his cheeks bright with fever. Hazel gasped.

“Milo, why didn’t you tell us to come sooner?” she admonished.

He looked between both her and Malcolm. “Technically, I didn’t tell you two to come at all. How’d you know I was here?” He was looking specifically at Malcolm.

Hazel was barreling past him though. “You shouldn’t have kept this from us, Milo. If you’re sick we’re supposed to help you.”

Milo had been on a job. One of his first. Spying on an upper class marketer that was apparently importing raw chunks of fossilized amber. He had been up in the rafters of an abandoned building during the meeting and had fallen from them when trying to sneak away. He had landed in a pile of old watery sludge and had to stay hidden in there for the rest of the night, lest he be found out.

The result was technically a success, but he had caught a cold.

“I brought you soup,” Hazel continued, marching into his home. Milo still stood at the door, opening it wider for Malcolm, who smirked at him as he walked in. “Oh,” Hazel breathed. “This is… nice.”

Malcolm looked around. “It’s a shithole.”

Milo pushed the door shut with a loud clang as it latched.

“It’s not that bad,” Hazel was saying. “It just needs a little bit of cleaning. And some pillows.”

Milo ran a hand through his sweaty hair and shuffled close to her. “Thanks, Hazel.”
Malcolm, on the other hand, was looking around with a discerning look, giving a low whistle. “Really, Button. How do you expect to ever bring anyone home? All your partners will be too afraid of catching a disease to even think about getting naked.”

The glare Milo shot him was one that amused Malcolm greatly. Milo had this full on pout that happened when he glared. It never ceased to bring Malcolm a small bit of joy. That is, until Hazel’s own glare was upon him. ‘Be nice’ she mouthed.

 &lt;img src=&quot;images/Mal lean.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;Malcolm rolled his eyes. “How’d you even settle on this place anyway?” he asked.

Milo coughed a bit. “No one lived here. And it’s big. Lots of room for expansion.” As if on cue, something clanged in the distance, falling to the ground with a bang. “And renovations will be fun,” he added. The cough turned into something deeper though, rattling his chest.

“Oh,” Hazel fussed. “Let’s get you to sit down. I want you to eat. It’s homemade, and it will make you feel a lot better. I promise.” She gave him no choice and looped an arm through his, practically dragging him down a series of rickety metal stairs. He looked once over his shoulder at Malcolm who only raised a brow at him, as if in challenge.

The bottom floor consisted of rusted out vats that used to house grain. They were old copper, far past their shine, with broken tubes leading up to catwalks that looked questionable to stand on. An old beat up couch was pushed up against one of these, a few blankets tossed upon it. In front of that, was a series of pallets that looked as if they were being used as some sort of table. Along with a couple scattered shirts, a pair of shoes, and an old worn book.

“Sit,” Hazel demanded. Milo did, too tired and far too sick to protest. When she handed him the soup, he even took it, humoring her with a small bite. Malcolm turned as Milo’s face twisted into disgust, hiding his own laughter.

“Oh, is it too hot?” she asked.

“No,” he coughed. “No. It’s just uh– wasn’t expecting the flavor profile.”

She beamed at him brightly.  “I was trying something new. It’s chicory root. Do you like it?”

“Love it,” he grimaced.

Hazel sat by his side, patiently waiting for him to finish the bowl. And Milo, being the man he was, did so without a single complaint.

“So,” Malcolm started. “Got yourself a job–”

“Which we are so proud of you for,” Hazel interrupted. Malcolm was not one to be deterred, however. Leaning against the vat, he raised a brow towards him.

“Heard you fucked it up pretty royally.”

“Malcolm.”

Milo narrowed his gaze. “Did it better than you,” he said. “Heard that you were turned down for this bid. Face it, Mal. They wanted someone they could trust. Not a con man.”

Malcolm snorted. “Or, they wanted cheap labor. They knew hiring me meant they’d have to dip into reserves. But, you know what they say, you get what you pay for.”

“Fuck you,” Milo shot out.

“Sorry, Button,” He leaned forward, a false pout on his lips. “I like my men a bit less nasally sounding.”

Milo sneezed then, prompting Hazel to fuss over him while Malcolm continued wandering the distillery a bit. When he came to Milo’s ‘room’, he grinned.

“Hey, Button,” he called. “You already have someone come over?”

“What?”

Malcolm picked up a shirt. Black and thin cut. And tossed it to the man. “Thought you were into women?” he asked him.

Milo blushed, hiding the shirt behind him. “Taste can change,” he mumbled.

At this, Hazel looked around. “Oh. Oh, did you– did we interrupt something?”

“What? Hazel, no.”

“We can leave, Milo. If you had someone here taking care of you we can completely go. Oh, I knew we shouldn’t have come unannounced.”

“Hazel, it’s fine. Really. No one is here.” Milo was flapping his arms at her, trying to get her to sit back down. She looked ready to run out of the place to give Milo and his companion the space they needed.

“You sure?” she asked.

“Yeah. Yeah, it’s– it’s okay. The company is kind of nice, actually.” The way he said it hit the two of them hard. He had been lonely. Starting out all on his own, he had been sitting, sick, in this drafty old place, by himself for days.

“Hey, Hazel,” Malcolm said. “Why don’t you go to the market and get Milo a few things to make this place a bit more homey?  Blankets. Pillows. A candle, so it doesn’t smell like a bar.”

She gave her brother a suspicious look. One that clearly said she didn’t know if she should leave Malcolm here alone with Milo given how much the two hated each other. But, in the end, they did all agree that whatever Malcolm picked out for Milo would be thoughtless and rough in texture. And Hazel did want to make sure he had a nice quilt. Malcolm handed her some coin before she left, assuring her that she could spend whatever she wanted.

When the door closed behind her, Malcolm looked down at Milo.

“You look like shit.”

Milo threw the t-shirt at him. “And you are tempting fate. The fuck is wrong with you? She could have recognized your damn shirt, you bastard.”

Chuckling, Malcolm came walking over, sitting down on the couch next to him. He raked a hand through Milo’s unruly hair, pulling it from his face. His eyes were glassy, and his cheeks were still pink from fever.

“You look better than you did this morning.” Malcolm had found him, vomiting and groaning with stomach cramps. He had promptly gone home after he got him settled, to rat him out to Hazel. Telling her he heard a rumor that Milo was sick.

“Don’t feel better,” Milo muttered.

Smiling fondly at the younger man, Malcolm wrapped his arm around him. “Come here.” He laid back, pulling Milo with him, until he settled across Malcolm’s chest.

“She’s going to come back and see us,” he protested.

“You kidding? I just gave Hazel money and told her to outfit your place. She’s going to be gone for at least three hours.” He ran his fingers down Milo’s spine. “Get some sleep, alright? Hazel’s soup I know was foul, but it will help.”

Milo shivered a little, sticking close to Malcolm’s warmth. “You really think I fucked up my mission?” he asked, pathetically.

“Yeah,” he said. “I really do. But, you know what else I think?”

“What?”

“I think given the lengths you go through to get your job done, you’re going to give me a run for my money here, real soon. Gonna have to up my game because of you, Button. It’ll be nice to have some actual competition.”

Milo grew heavy above him, a small smile on his lips as he began to drift off to sleep.  Malcolm curled an arm around him protectively, making sure he didn’t fall.

“Wake me when you hear her comin’,” he slurred.

“Don’t worry. Our secret relationship shall remain in the shadows a bit longer.”
“Not in a relationship,” Milo protested, snuggling close.

Malcolm laughed, snaking his free hand beneath Milo’s shirt to span against his back. Above him, Milo began to snore.

Eventually, they would have to tell Hazel, but at this point, they were both a bit curious how long it would take her to catch on.

Not that it mattered. She’d be happy for them no matter what. But watching Milo squirm was one of his favorite things, and Malcolm didn’t want to give that up. Not yet, anyway. For a little while longer, he’d let Milo do his non-committal, hot and cold, bullshit act. Malcolm Albright was a stubbornly patient man.  He could wait.

[[Next|Malcolm 5]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="61" name="Malcolm 5" tags="" position="1600,800" size="100,100">&lt;img src=&quot;images/Lantern 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;200&quot;&gt;“I’m dying.”

Malcolm rolled his eyes. “You’re not dying. You’re walking.”

“This is not walking, Mal. This is torture. This is some stupid thing you thought up specifically to kill me.”

Turning, Malcolm stared at Milo. He was a few steps below, bent at the waist and panting.  They had only gone up three flights of the eternal staircase and already he was threatening to fall backwards and roll like a ball all the way down to safety.

“Button, if I wanted to kill you, I would not go through the process of wining and dining you first.”

“Yes you would. You’re sadistic. That’s exactly the sort of thing you’d do.” Taking a deep breath, Milo walked up the few extra steps towards Malcolm, stopping one step below him. It brought them to the same height.  Amber eyes burned brightly as they looked at Malcolm’s deep hazel ones. “Why can’t we just go eat at the food carts like normal?”

Hooking his fingers into Milo’s suspenders, Malcolm ran his thumbs up and down the fabric before snapping them back towards Milo’s chest. “Because, I’m taking you on a date, you idiot.  And that requires you to have something green on your plate.”

Milo groaned loudly, trudging past Malcolm with several curses on his lips.

The place in question wasn’t far. It was only five flights up the never ending staircase.  It was a small club that was set into a rock wall and deep in a stone cavern that was lit only with green burning torches.  Upon arriving, Milo looked mildly more intrigued, the faint sound of music wafting from within.  He didn’t give Malcolm the satisfaction of it though. His face continued to rest in a twisted scowl. In response, Malcolm only shoved Milo forward, watching as he went and stumbled into the dark with a small ‘oof’.&lt;img src=&quot;images/Eternal staircase.png&quot; style=&quot;float: right;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;

They walked a small ways, the dripping sound of water echoing around them, accompanying the deep and bluesy jazz that vibrated across the floors.  The stone tunnel opened up to a wide cave, the ceilings arched and the walls made of trickling rain.  There was a stage in the middle of the room with an oversized bone piano while a scattering of musicians sat, producing soulful tunes on guitars and old bronzed tubes that reshaped themselves with each note.

Malcolm looked at Milo as he shifted nervously on his feet. Not quite the place Milo ever felt like he belonged and exactly the kind of place Malcolm had started taking him. After the last time they broke it off just to get back together again at least.

“Come on. I got us a table.”

Milo looked startled at that but scrambled after Malcolm, trying to smooth down his hair as he went.  The maitre de sat them at a booth near the back.  Each table was secluded and lit by fireflies buzzing up above.  Sliding into the booth, Milo kept looking around, his fingers reaching out to touch the rain fall that was contained to the walls only. He reached through and found nothing on the other side.

“To drink?” the waiter asked.

Milo looked bugged eyed at the entire ordeal. Just how Malcolm loved him. Completely off his game. “A bottle of your ghost wine for the table, please. And the roasted almond and brie board with the goldrush drizzle.”

“Excellent choice.”

When they walked away, Milo stared at him.  “You’ve got to be kidding me.”

It took everything in Malcolm to hide his smile. “I am not.”

“How can you afford this? Are we stealing? Are we going to do a dine and dash? Are we… shit. Are we on a job?”

Leaning back in his seat, Malcolm shook his head. “We are on a date, Button. Nothing more.”

“But it’s expensive.”

“It is.”

“You can’t afford that.”

“I can.” Malcolm could afford quite a bit, actually.  His last job had gotten him a tidy sum that would keep him comfortable for a long time to come. Not that he was going to tell Milo that. They never discussed each other&#39;s finances. Not since Malcolm had tried to help him get into a better place to live and Milo had tossed around words like sugar daddy and pity.

“I don’t belong in a place like this,” Milo said after a long moment.

“And why’s that?”

“This is for fancy people.”

Scooting close, Malcolm rested his hand on Milo’s knee. “You really bothered? We can go.” While he liked Milo uncomfortable, he didn’t like it when Milo felt beneath something.  For a moment, he was worried he misstepped.

Milo shifted, seeming to ease a bit at the warmth from Malcolm’s hand.  “Just don’t expect me to bow or some shit, alright?”

“Oh, damn. And that was how the entire second course was going to go.”

Milo didn’t look amused but leaned into Malcolm a little more, looking at the musicians that were center stage. It was the one thing that they could always agree on at least. During the days when they had not been able to talk. When words were cruel or biting or they were not ready to hear one another.  Music had always connected them.  Out of the corner of his eyes he watched as Milo became enraptured, just like he knew he would, his foot tapping underneath the table.

Their drinks were served and after half a glass, Milo seemed far more calm, his eyes looking around the room in complete rapture. Malcolm, however, only wanted to watch him.	

“Come on,” Milo said, tugging on his hand and downing the last of his drink. Malcolm let himself get dragged to the dance floor, having already known despite barely being able to dance himself, Milo would somehow get him out here. The music was in full swing and as Milo dragged him to the center of the floor, he mainly danced around him, getting lost in the music while Mal fondly looked on. As it turned to something smoother, the lights dimming all around them, Milo stared at him, face flush with drink and exertion. Softly, he pulled Malcolm against him, the two of them chest to chest.

“Admit it,” Malcolm said, the two of them starting to sway.  “You like it here.” Milo liked finery. He just had to relax enough to enjoy it. And relaxation had always looked good on his Button.

“I enjoy this,” Milo conceded, pulling Malcolm impossibly closer. He pressed his cheek against Mal’s and Malcolm let his eyes fall shut as he felt the music and the way their bodies fit together. “I always enjoy you,” Milo continued. “I may enjoy whatever boujee thing you ordered but I will be demanding tacos on the way home.”

Malcolm laughed. “I already have some preordered. Your garbage gut can be rest assured that it will get the spice it craves.”

“You spoil me,” Milo said.

“I missed you.”

Milo was quiet for a long moment. “Yeah. I missed you, too. Asshole.”

As they twirled around the dance floor, the rain falling against the cavern walls and the soft lighting following them as they moved, Malcolm sighed. For the first time in a long while, he actually felt content. With Milo in his arms and the world around holding them close, Malcolm felt like he was where he should be for the first time in his life.

He should have known that night that it would all go so terribly wrong.

[[Next|Malcolm 6]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="62" name="Malcolm 6" tags="" position="1600,925" size="100,100">&lt;img src=&quot;images/Lantern 2.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;200&quot;&gt;“What the fuck are you doing here?”

The door had rolled back to reveal Milo. His rumpled appearance indicated that he had been asleep, or about ready to be, when he had to answer the knock on his door in nothing more than a low slung pair of shorts.

Malcolm blinked.

He hadn’t thought of the time. It had always been a bit harder to tell if it was day or night in the market. The lights were supposed to dim with the passage of time but suddenly they looked bright. Why did they suddenly look so damn bright?

“Mal?”

There was hesitancy there now. As if Malcolm&#39;s appearance was giving him pause. It had been two years since they had seen each other. Two years since that awful night of slammed doors once again and they had both been too stubborn to go after the other.

Now, Malcolm was standing outside his door, blood on his hands, his face pale and shocky.

Without a word, Milo reached out for him, pulling him inside. “Fuck. You’re freezing.”

He had been wandering the market. He wasn’t really sure for how long but he had been walking from street to street, feeling the walls convulse and the soft hum that the world breathed into each and every occupant. He could hear the high-pitched tones of the world beyond as he walked past the open gates. He could feel the way his fingers twitched, his skin tingling. He knew without a doubt he could close them if he really tried.

“Are you hurt?”

Startling, Malcolm looked towards Milo. His freckles stood out tonight. Had they always been so bold? “What?”

“I said, are you hurt?”

Laughter bubbled from his chest and he was almost certain it wasn’t his own. Yes? No. He wasn’t sure. How did you describe to someone that you felt every beat of the thrumming heart of the world you walked on and the ways it cascaded over skin in thin lines of fire? How did you say that you felt like you had gaping wounds all across your body and every bone was breaking and being reformed but at the same time it was the most powerful and euphoric feeling you thought you had ever experienced.

Milo looked at him with genuine fear as he continued to laugh. The laugh soon turned into a sob as he bent forward at the waist. At some point he had come to sit on the old ratty sofa.  

“Oh, whoa. Mal. Hey. Whatever happened… we’ll fix it, okay? We’ll fix it.” 

It was a far cry from the words Milo had last said to him. Or the ones Malcolm had volleyed back. When Malcolm felt Milo’s hand on his back he jerked away in pain, scrambling across the room.

With broken eyes he looked towards Milo, panting through the race of his heart. “What is happening to me?”

Milo shook his head, hands up as if he were approaching a wounded animal. “I don’t know,” he said gently. “Did I hurt you just now?” Malcolm shook his head. “Startle you?” It took Malcolm a moment to think about it but yes, startling felt far more right than anything else. The world just felt too loud and too bright all of a sudden. Malcolm had always had to keep himself in careful control. To make sure his surroundings were just right. None of this felt right though. The world felt as if it were screaming, begging him for help but not able to tell him how.

“I’m gonna touch you now,” Milo said gently. Reaching out, he helped Malcolm back to his feet, slowly leading him to the mattress that was on the floor. Inch by inch, he peeled Malcolm’s clothes from him and for a moment, Malcolm actually felt like he could breathe.  When Milo laid him down, he made sure to keep the covers nearby but not on him.  

With trembling fingers, Malcolm reached out, taking Milo by the hand. “I’m scared,” he whispered to him. It was not something Malcolm Albright often expressed. But tonight, tonight felt different. “I didn’t know where else to go.”

Milo ran a thumb across the dried blood, not questioning the lack of injuries but the clear sign of death on his exes hands. “Yes you did,” he told him. “Right here. You know you can always come to me.”

It was a silent agreement between them. It didn’t matter how much time had passed. How harsh the words were.  There were people in this world you held close and that asked no questions. Because sometimes the nights were too dark for anything else.	

“I’ll leave in the morning,” Malcolm said, feeling his eyes beginning to fall shut. He wanted to succumb to sleep. To not think, even if just for a moment.

Milo shifted closer. “You don’t have to.”

Above, through the dirty window that lined the distillery walls, the lanterns fluttered, dimming to a soft amber. The color of Milo’s eyes. Malcolm let out a soft sigh of relief at the sight of them, as if the market itself was apologizing for how loud it had been. Trying to comfort him.

Letting his eyes fall shut, Malcolm parted his lips in a pained whimper. But that night, the lanterns and Milo looked out for him. Neither blinking. Both simply watching over their Gatekeeper.

[[Next|Malcolm 7]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="63" name="Malcolm 7" tags="" position="1600,1050" size="100,100">&lt;img src=&quot;images/Lantern 3.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;200&quot;&gt;“What exactly happened?”

Malcolm hissed in pain, falling back on the soft bed of kelp. His shirt was discarded somewhere, having been torn through with sizzling cracks of electricity, the lines of which burned across his skin, slashing through his tattoos and previous scars.

“Too many gates,” he said through gritted teeth. “There were too many to close at once. Not with magic at least. Had to do some of them by hand.”

Kamille looked at him, crushing bits of oyster within a small bowl and adding the glittering waters from the pool held within the corner of the room. “You can’t keep doing this, Malcolm. I don’t want to keep patching you up.”

Malcolm looked up at her, a small smirk etched painfully across his face. “Oh, Kamille. I know you just want to get your hands on me. Ours is a torrid love affair.”
She rolled her eyes before scooping out a handful of the concoction and slapping it on the sizzling wound. Malcolm flinched in pain but held himself still. “You have friends. You have family,” she pointed out. “Your co-worker is not the one that should be patching you up at the end of the day.”

“You’re far more than just my co-worker,” he pointed out, eyes cast downwards to look at the crushed shells. It was a salve that Hazel would have loved to get her hands on. She didn’t work much with the ocean but it would still be a handy one to know.

“What even happened today?” Kamille sat next to him, crossing one dark leg over the other. Malcolm almost preferred it when she had the tentacles. Felt more Kamille like than the human form she took. “Is this another sign of the market dying?” she asked.

“I don’t see how it couldn’t be,” he said, trying to relax as she tended to him. Her fingers ran across his chest, over the moon shaped scars. Long ago he had learned that Kamille was a tactile person. A former courtesan of the market, he thought she might just miss touch. “There are too many trade gates open,” he continued. “People coming and going freely from different worlds is causing everything to be split.”

“And then you keep opening the doors to the refugees. You need to close one before you do that.”

“I should just close all the trade doors. I shouldn’t have to make permission to save someone&#39;s life.”

&lt;img src=&quot;images/Kamille.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;“Most would find it an inconvenience, though. Closing off their yearly shopping trips.” Her tone was laced in bitterness. He always had liked Kamille’s dry sense of humor.

“It doesn’t matter. They’re slowly falling out of my control. That’s what’s more concerning. I open one and then three more pop open in areas of the market I didn&#39;t even know existed. How many gates do you think are open in the Outlands?” he asked with a raised brow.  “Because I can feel them, Kamille. Like these endless voids in the pit of my stomach. There’s just so many.” Head falling back on the settee wrapped in soft green seaweed, Malcolm closed his eyes, lashes sweeping across tanned skin, dark hair falling in front of his face. He blew it out of the way with a huff of breath.

“You really feel them?” Kamille asked curiously.

He nodded. “Yeah.”

“Does it hurt?”

“Constantly,” he laughed. “It&#39;s like this dull ache in the base of my skull. Then, each time a new gate opens it feels like there&#39;s some sort of laceration against me. Or an endless void that is trying to consume me. I wouldn’t wish this power on anyone. Not even my worst enemy.”

Kamille frowned. “I didn’t feel anything like that upon becoming a Baron.”

“I have a suspicion that becoming a Baron and becoming a Gatekeeper are two very different things.”

Shifting, he winced. The salve was doing its magic, along with the squid ink he had ingested early. The doors were now more like a dull ache despite having taken strips of his skin to bind them closed. He was tired. So very, very tired.

“Why have you not told your sister yet?” Kamille’s tone was admonishing.

Malcolm laughed a bit. “Because she would want to help. Hazel has a bleeding heart, Kamille. A beautiful one. If she knew what I was, she would be consumed with my own pain and refuse to live her life. I’m not going to do that to her.”

“Your mother?”

“Dead. Hopefully forever.”

“Is there anyone else that cares for you? I do not like you alone when you go home.  Barons need more than what we seem to think we deserve.”

Malcolm smiled wryly. “We’re on a break.”

“What does that mean?”

“Means he stabbed me years ago and is currently elsewhere licking his wounds because he’s scared to come say sorry. Milo always did have a little bit of a problem with taking accountability for his actions. Or shouldering responsibility.”

“But you care for him?”

“What can I say. He’s a mess of a man.  I may have a type.”  Eyes closing again, he sucked in a sharp breath, thinking of Milo. Thinking of Hazel. He wanted to tell them. He had wanted to tell them the second he became the Gatekeeper.  But he had never known how. And then the pain had started coursing through his veins and the market began screaming in his head. So much pain contained within a cosmic being and all of it on his shoulders. Malcolm didn’t want to just make the screaming stop, though. He wanted to ease the pain. To soothe the weeping and the tears that he often cried that he knew were not his own. Malcolm wanted to save the Night Market.  But he didn’t know if by doing so, if it would cause him to fall into nothing.  Yet, he would willingly sacrifice himself if it meant they were safe.  Malcolm supposed falling in love was like that.

A soft blanket was pulled up over his chest and tucked under his chin.

“I still think you should tell someone,” Kamille said.  “This secrecy thing will kill all of us.”

Rolling on his side, Malcolm curled the blanket close. “I will. One day. Either when my hand is forced or when we can laugh about it all.  Until then, let them live in bliss.  Those two deserve happiness.”

When Kamille’s lips pressed against his temple, she ran her hand across his cheek. “You do too.”

Malcolm smiled. “Told you. Torrid love affair, you and I.”

He could feel the eye roll as she walked out of the room, dimming the lights.  Gates were still open across the market and each one of them burned through Malcolm like a live wire. But, he had closed so many as well.  He could feel the content that created through the market itself. How they were happy.  As Malcolm tipped into slumber, he listened to that happiness.  In his dreams, he listened to the Night Market sing.

[[Next|Malcolm 8]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="64" name="Malcolm 8" tags="" position="1600,1175" size="100,100">&lt;img src=&quot;images/Lantern 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;175&quot;&gt;The lanterns were bright tonight. They swayed sweetly above, filled with the late night dew as they gently lulled the world to sleep.  Malcolm liked the rarity of these nights. When the world was quiet. When there was a soft calm that echoed through the streets.  It was what home should be, he always imagined. The place you could go back to that promises to love you no matter how cruel your hands had to be.  And Malcolm’s hands were particularly cruel.  But the amber light always soothed him as the world whispered against his cheek on a thankful wind that it would all be okay.

At the edge of town, a building sat.  It was one of Malcolm’s favorites and overlooked the silk awnings draped across the cobbled alleys.  The light from the spice district shone the brightest here and the long draping lines of lanterns spiraled high into the night, disappearing into the folds of the night sky. Malcolm had to duck beneath the heavy wires so as not to hit the paper globes that flickered at him in welcome.  He had a favorite.  They were just up top, at the apex of the building, and glowed the prettiest.

“Hey, Lamplight,” he said, sitting down next to my lantern and smiling in greeting.  “The world looks beautiful tonight. Your doing or mine?” It was an old joke between us, when the world turned especially enchanting.  The soft glow was the magic of the market itself but he oftentimes liked to believe he had a hand in something so good.  He hoped I found inspiration in him just like he did in me.  A silly thought but one that Malcolm indulged in. It wasn’t often he was given the luxury of being silly.

“I think we helped today,” he said. “Those gates opening hurt but we got those children to safety.  They’re down within the ruins now. Their parents too.” Malcolm rubbed a hand across his shoulder, down across his chest.  His skin had split open in a bloody bloom.  “I’m not sure how long we can keep doing this, though.  Your lights are getting dimmer.  I know no one else seems to notice but I do.”

Above him, I caused one of the lanterns to bob.  The brightly colored paper touched down against him, spreading warmth against his skin.  Malcolm felt an immediate sense of relief, as I desperately tried to take away his pain.

“It’s okay,” he whispered, reaching up to stroke the flickering light.  I blinked angrily at him but it only made him laugh. “I’m alright, Lamplight.  Please stop fretting. I’m far more concerned about you.” I was far from appeased but at the same time, I trusted him.  He would push himself entirely too far at times but he always saved himself in the last moment.

“What do you want to do about all this?” he whispered. “Because I don’t think we can keep going the way we are but I understand not wanting to leave others for dead.  Hearing their screams must be horrifying. I know it kills you each time one stops.”

I shifted, the glow from the lanterns falling down around him in amber. His favorite. They reminded him of Milo’s eyes.

“I wish you were real,” he said, not for the first time. “It would be so much easier if I could ask you what you needed from me. I’d do anything to keep you safe but I’m worried that we’re not quite doing things in the best manner. Either you and I are fools or we’re misunderstanding each other.” He scrubbed a hand over his face. “Or maybe we’re misunderstanding the outside worlds.  Should we be more selfish? Do you even know what that word means?”

I did. Because I was selfish with him almost every day.&lt;img src=&quot;images/Lanterns.png&quot; style=&quot;float: right;&quot; height=&quot;450&quot; width=&quot;550&quot;&gt;

“Oh, Lamplight. What a pair we make,” he laughed. “Milo would fucking hate how passionate we are towards doing what is right. He’d say I’d sold myself out.” He paused for a long moment. “Probably because I never did this kind of thing for him.”

Reaching forward, I tried to wrap myself around him, feeling the way he shook.

“I did wrong by him, you know.  I didn’t have a lot of patience for him. I let my pride keep me from going after him. I– I think I should have told him I loved him more. The words are so easy to say to you but they are nearly impossible to say to him.”

I could feel the pain like it was a wound from a gate. Malcolm and Milo. They made me so very sad at the end of the day. Two souls that could have been good if only they realized that their own failings were not weaknesses. But an opportunity to let the other&#39;s strength shine.

I always had wanted to help them.  I wondered how different their love would be if they would let me.

“I hope you get some rest tonight,” Malcolm was saying, looking up at my lights. “I’ll tuck you in. Stay with you until you sleep.” He smirked a little at that. Another old joke.  But I could feel the blanket of his intent wrapping around me and my consciousness begin to drift.

“Goodnight, Lamplight. Sleep tight. I’ll tell you I love you in the morning.”

[[Next|Malcolm 9]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="65" name="Malcolm 9" tags="" position="1600,1300" size="100,100">&lt;img src=&quot;images/Lantern 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;200&quot;&gt;Malcolm Albright was dead.  

It was a funny thing to say, really, especially once he realized he was Malcolm Albright. It was a whisper he had heard for as long as he could remember. Some rejoiced at his demise. Others felt such deep sorrow.  And some, sought him out. He remembered in the early days how there were spirits that would greet him but when he only stared at them with a blankness and a memory that had crumpled somewhere in another world&#39;s ether, they had begun to leave him alone.  Now, with his memory back, he did the same to anyone that passed him. Mainly because he didn’t like the notoriety that came with his name.  It wasn’t as if he could do whatever it was they wanted him to do in the first place.  Whatever powers he had were gone.  And in their wake was nothing but that aching feeling of the Night Market tearing itself apart for reasons he had yet to coax out of them.

Hands in his pockets, he walked the streets. Looking at the walls, running his fingers over their cracks.  Hoping that something would become clear.  The challenge of what to do when it did was another one all together but he figured the only way to continue was with one foot in front of the other and little room for a conversation that wasn’t about fixing their home.

He found Hazel first. She was the easiest. She was out in the garden picking herbs.  Malcolm knew he had been here before. Dozens of times he had wandered towards her with no idea why, watching her hum within her garden, petting her cat and having full conversations with the creature as if he were her oldest and dearest friend. Once or twice he tried to reach out, letting her know he was there. 

Occasionally she would get that look in her eyes that said she knew something was off but it was never enough.  Malcolm didn’t know how much time had passed but by the state of the apothecary, he was assuming it was a lot.

He had tried to go see Kamille down in the deep, hoping against hope that she had not been taken out like so many of the Barons before her.  The selkies had set up their wards though and despite Malcolm having come from there, apparently he was not welcome back. There was too much up top he was supposed to be seeing. 

The thing was, up top hurt. It knifed through him like a dull ache and took his breath from him every few steps.  As the market gasped around him, seeking out some way to heal, he felt every inch of it run along his skin.  He didn’t understand how everyone else couldn’t hear the screams.  Hear the dying gasps of their world.  How did everyone just go about their day like it was nothing?

When he found Milo it was in the back of a bar.  It had taken him an exceedingly long time to track him down and Malcolm couldn’t help but think that was somehow by design despite the younger man not knowing he was even there.  Milo sat in the very back, a half drank tumbler of whiskey in front of him and a distant look on his face.  When Malcolm sat in the chair across from him, he could almost pretend, at least for a moment, that this was like all the other times they had sought refuge in the quiet.

“Hey, Button,” he said with a sigh.  “You look like shit.”

Milo took a small sip, swirling the amber liquid in the dirty glass. Leaning back against the cushion of his chair, he sighed, staring down into the contents.

“I probably will too,” Malcolm said conversationally. “Half expecting to be a rotted corpse.” Worm food, as Milo used to call the dead. He wondered if he did anymore. “Went to see Haze. I know she’s up to something. Something not good.” he frowned. “Why aren’t you with her, Milo? Why are you here? She’s going to do something stupid and…” and what? Hazel wasn’t Milo’s responsibility.  It was only the anger that wanted to blame someone else for what Malcolm knew was going to be terrible actions on her part.  

Across the way, Milo downed his drink, signaling for another. It was replaced by a young waitress with breasts that spilled from her top. Milo’s go to on an uneasy night. Yet, he didn’t even look.

“Well,” Malcolm said, “either you’ve grown up or shit got bad.  Given the dark circles under your eyes, I’d say, shit probably got really bad. You’re not sleeping again, huh?  Probably aren’t taking care of yourself either. You never did understand that you have to eat something green to maintain health.”

Leaning back, Malcolm crossed his arms, observing the man.  The one he had wandered the streets with once. The one he had gotten into trouble with.  The man who had driven him to such anger and yet inspired such fierce loyalty.  Malcolm used to say he never knew if he loved Milo or hated him. Milo used to smirk and tell him something about fine lines.

&lt;img src=&quot;images/Arch.png&quot; style=&quot;float: left;&quot; height=&quot;600&quot; width=&quot;450&quot;&gt;Scrubbing a hand across his face, Malcolm shook his head.  It wouldn’t do to dwell. Not here. Not while the tears across the market were widening.  And certainly not with a man who couldn’t see him.

Standing, Malcolm took one last look at the mop of dirty blond hair and the ringed fingers.  “I’d say I’ll be seeing you soon but…” there was nothing to say.  Nothing he could say.  A stab of pain went through him, like it had all the times before as he walked the streets. It flared to life much larger this time though, gathering around his midsection and gripping him in a band of steel.  Head thrown back, he let out a shallow gasp.

The next thing he knew Hazel’s arms were around him and she was crying into his shoulder while the lamp light next to her pulsed with unsteady life.  He didn’t see himself get flung through the opening gate. He didn’t know what was happening. And he certainly was not aware of the pair of amber eyes that had locked onto him the second he had been called home.

[[Next|Malcolm 10]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="66" name="Malcolm 10" tags="" position="1600,1425" size="100,100">&lt;img src=&quot;images/Shell.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;175&quot;&gt;It was a dream I wanted to give them. One that I could place in their future.  Milo was not sleeping however and only Malcolm ever received it.  It was fitting, however, that he would know.  That when it all was said and done, Malcolm would hold this as a secret while Milo and I still floundered for the time being.

“He’s taking us somewhere to kill me.  You know that right? This is all part of Mal’s master plan.”

Milo held out his hand, as he helped me down a set of damp and rocky steps. They had been carved into the depth of a cave and had crumbled a bit over time, but the passage itself still looked secure.

“Why am I involved then?” I asked him, keeping my eyes on my feet as I navigated downwards.

“I don’t know.” Milo stumbled, bracing himself on the wall. The two exchanged looks as we waited for the floor to crack beneath us or something horrid to descend. 

When nothing but silence greeted us, we both breathed a sigh of relief. “Maybe you two are in on this together,” he continued. “You both conspire. Just the other day I saw you two with your heads bent together. Whispering. Laughing. Disgusting really. You really need to get that pda under control.”

I rolled my eyes. Milo’s paranoia was something I had learned over the years to take with a grain of salt. He never truly believed what he said. And it was normally followed up with a joke of some sort. It was more of a way for him to empty the thoughts that were rattling in his head and in the end we all agreed that we preferred it to his silence.

“You really think that?” I asked.

Grabbing me by the sides, he helped lower me down off of a steep drop-off.  His fingers lingered against me as he pulled me flush against his front, rocking our bodies back and forth. Head dipped and hair hanging in front of his face, he grinned a little. “Darlin’, I have learned never to underestimate you two.” Leaning forward, he placed a lingering kiss on my lips, fingers searching to sneak beneath my shirt.  
“Date day,” I reminded him, nipping at his bottom lip.  Malcolm had sent us a message early that morning.  It had been days since the three of us had been able to see each other, and in true Mal fashion, that was not going to stand.  “Malcolm is waiting for us,” I told Milo as he showed no signs of stopping.

Pressing me against a wall, Milo lifted one thigh to wrap up around his hip. “He can wait a little longer.” He rolled his hips against mine, our breaths hitching as our grips became far more desperate and filled with heat. Milo pushed himself forward, rutting up against me, hand snaking between our bodies.

“Button.”

Milo’s head fell forward and I had to stifle a laugh as it hit the jagged expanse of the cave wall. “Fuckin’ mood killer.”

I patted his back sympathetically before extracting myself from his embrace. 
Malcolm leaned against the entrance to a cavern, arms crossed in front of him as he stared at us with amusement. I had a feeling he had watched us from the start. Milo often called him out on such tactics but Malcolm never admitted to any of it. Just gave us a sly smile as Milo continued to curse him out.  

When I walked up to him, Malcolm took my hand, pulling me towards him. The kiss he placed on my lips was so different from Milo’s. It was soft and sweet and yet burned with a deep current of desire that snapped tight around me and yanked me in.

Milo was all chaos and heat and right the fuck now.  Malcolm was a slow burn you languished within until you couldn’t breathe anymore.

“Hey, Lamplight,” he said, brushing his fingers against my cheek. “Make it down okay?” I nodded, still curling close to him and feeling strong arms wrap around my middle. “Button? You pouting?”

With his head still banging against the wall, Milo held up his middle finger. I could feel the laughter rumble through Malcolm’s chest.

“Aw, don’t be like that,” Mal said.  “Got a surprise for you too.”

Pushing away from the wall, he walked up to the two of us. Eyes narrowed in irritation and all ire directed towards Mal.  “Any other fun moments you would like to interrupt? Any more dreams you wish to crush?”

“So many,” Malcolm mused. “It’s what I live for, Milo. Being your fun sucker.”  

I wrinkled my nose. “Oh, I don’t know if I like that phrasing.”

“I do,” Milo laughed. “Want to suck some fun, Mal?”

I pushed away from both of them, hearing Milo’s laughter echo throughout the cavern as Malcolm only shook his head.  Looking over my shoulder at the two of them, I felt a small moment of affection.  It was nice to finally see them at ease in each other&#39;s presence.

Malcolm took the lead after that, guiding us through the slick cavern passages until the sound of trickling water echoed around us.  The air was thick with heat, creating beads of sweat against our skin. We emerged into a vaulted cavern only moments later, the three of us stopping to marvel at our surroundings.  A deep pool sat in the middle of the room, formed from the cavern itself where purple and green stones glowed far beneath the surface.  Heated streams of sweet smelling water trickled down the sides, pouring in front the ceiling like rain.  The room was filled with steam, rippling across the room and as I tipped my head downwards, I could see to the bottom of the pool where a thick layer of swaying seagrass lulled.

&lt;center&gt;&lt;img src=&quot;images/Grotto.png&quot; height=&quot;600&quot; width=&quot;800&quot;&gt;&lt;/center&gt;

Milo let out a low whistle. “Where did you find this?”

“Knew about it years ago,” Malcolm said with a shrug. “But I ventured down a few days ago to see if it was still here.”

Milo raised a brow at the two of us, practically rocking back and forth on the balls of his feet. “Soooo…. Skinny dipping?”

We found ourselves naked and in the water in no time, the steam bubbling up around us and sinking into our aching bones.  Milo was swimming smack in the middle of the pool while Malcolm was lounging on a nearby ledge, the water butting up against his chest, his arms glistening with sweat.

When Milo dived beneath the water, we were easily able to track his movements. He kicked as he made his way all the way to the bottom, twirling his hands within the grass before plucking something from their depths. When he came back up, he spit the water into the air, slicking back his hair.  Swimming up to me, he held out a small shell, the likes of it a color I’d never seen. 

“Admit it,” I said, taking it from him. “This is nice.”

“Never,” he whispered. His smile was relaxed and free as I admired the shell, vowing to tuck it away with all the other trinkets he occasionally brought me. “Now dance with me,” he demanded.

“In the water?”

“Yes.  Become one of the aquatic ones with me.” He pulled me into a familiar position, holding one of my hands and wrapping the other around my hip.  I could feel the way he was kicking to keep us both afloat.  “Let us cast aside our life of sin and make our home beneath the sea.”

“I don’t think I can hold my breath that long,” I said with a grin.

Tipping his head towards mine, he hummed a soft tune in my ear.  “You, darlin’, can do anything.”  He twirled me within the water, dancing me from rock to rock as he pushed off the walls and propelled us through the hot spring.  When Malcolm’s arms wrapped around me from behind, I startled. Milo had danced us straight into his arms.

“Clever,” I told him.

He grinned. “I know.”

Scooting back, Malcolm made room for the two of us, maneuvering me so I sat between his legs, my back to his chest, while Milo treaded water in front of us, making sure to stick close.  With one arm looped around me to keep me steady, Malcolm reached forward, raking his fingers through Milo’s hair.

“I missed you two,” he said softly. Life had gotten in the way. It often did with us.  And while we all circled each other on a near constant, the journeys we were on often pressed against us so hard that we forgot what this was.  That the three of us were together. That after the fighting and the disagreements that sometimes filled our day, we had promised to come together with laughter and support each night.
Leaning back, I rested my head against Malcolm’s shoulder.  “Thank you for doing this, Mal,” I whispered.  His lips pressed against my cheek, lingering at the corner of my lips.  I could feel when his eyes shifted to Milo’s.  He always held himself a bit stiffer when it came to the golden eyed man.  He told me once it was because he never knew which Milo he would get to hold that night.  “Button, c’mere.”

Milo raised a brow. “What’d I do now?”

Malcolm kicked out with a foot, snaking it around Milo’s backside and drawing him close to us.  “Don’t argue,” he admonished. Milo opened his mouth to do just that, but Malcolm swooped in for a kiss before he could get too far. Pressed between them, I watched the way Milo melted against us and the way Mal always treated him so gently.  When they pulled away, Milo rested his head contentedly on my shoulder, closing his eyes when I brought up a hand to twine within his hair.

Around us, the gentle sound of water filled the cavern, along with the heat from the steam.  It lulled us, rocking the three of us gently in a comforting embrace.

“I’m gonna fall asleep in here,” I murmured.

“Me too,” Milo yawned.

Malcolm clutched us both a bit tighter. “Rest,” he whispered. “I’ve got you both.”

[[Next|Malcolm 11]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="67" name="Malcolm 11" tags="" position="1600,1550" size="100,100">&lt;img src=&quot;images/Lantern 1.png&quot; style=&quot;float: left;&quot; height=&quot;200&quot; width=&quot;200&quot;&gt;The dark was a sinister place to be. Rarely did it offer anything friendly. Instead, it hid those who would look into the face of nothing and smile at the opportunity it gave them.  Malcolm knew the dark well. He had traversed it for years. Used it to his advantage. And as the lights around him were snuffed out one by one, he felt it consume him in a way that he hadn’t for so very long.

Hazel greeted him with tears. An explanation of some sort falling between broken sobs.  He knew he should wait with her. Hold her through it all. But he walked out into the night, the chaos swirling across the tearing sky in a miasma of pain and confusion.  He wasn’t going to let him get away. Not this time.

He found Milo in a dilapidated hovel, half in rubble.  Broken spinning wheels lay splintered on their side while jars of buttons and thimbles were cracked across the floor. It used to be where Milo had worked, back when he was a child. Apparently, it was nothing more than a forgotten memory, important only to the two of them.

Milo looked up as Malcolm entered the room, his face pale and his freckles standing out in the small pulsing light that remained in the corner.  His lips were parted, hands clasped desperately before him and he looked at Malcolm like he could make it all just go away.

“Are they alive?” he whispered.

Malcolm stalked halfway across the room, watching as Milo scrambled off the crate he sat on, stumbling over his own feet as he tried to escape. Whatever look he had seen cross Malcolm’s face was not one of compassion and open understanding.

“What did you do?” Malcolm hissed.

Milo put a broken wheel between them, gripping the wood of the spokes and staring at Malcolm pleadingly. “Fuck, Mal, are they fucking alive?” he shouted.

Malcolm knocked the wheel out of the way, shoving at Milo’s chest until the younger man&#39;s back hit the wall with a dull thud. Milo grunted in pain, moving to escape, but Malcolm held him there, fingers gripping at the chains around his neck, pulling them tight while his other hand splayed across Milo’s chest, pinning him in place.

“Do you care?”

“I was trying to save them!”	

Malcolm slammed him hard against the wall. “Sacrifice is not saving, Milo.”

“The market is dying, Mal. You knew it then and you know it now. But instead of the muffled screams you heard back when you were around, it&#39;s a deafening roar. I can barely even hear myself breathe!”

“You think that matters? You think your pain in this situation means anything? You were supposed to protect them!”

At that, Milo shoved back. Both hands planted on Malcolm’s chest, he pushed with everything he had, sending Malcolm careening back and knocking into the broken wheel. “I am protecting them! I have given up everything to protect them.” The last word ended on a crack. When Malcolm looked up, he could see the tears gathering. Milo’s hands trembled as fear and sorrow and emotions he probably couldn’t understand coursed through his body until he was a shell the man Malcolm knew he could be.

“Every day,” Milo began. “Every day I felt them dying.  It didn’t matter how hard I held them. It didn’t matter how much I tried, what I did, they just kept dying. This was the only way.”

Standing, Malcolm shook his head slowly. “It wasn’t, Button.  Whatever this is, it was not the only answer. Life doesn’t work like that.”

“It does when you’re me.”

&lt;img src=&quot;images/Broken buttons.png&quot; style=&quot;float: right;&quot; height=&quot;350&quot; width=&quot;450&quot;&gt;Malcolm felt his heart drop.  So many years and yet Milo had never found another. No one to trust. No one to fill the void. Malcolm had hoped that when he died, Milo would find love.  He would feel the market and understand that he was worth so much more. Capable of so much more.  But if anything, the love of the market had crushed him, burying him beneath inadequacies that he had woven within his bones.

“Why didn’t you talk to anyone?” Malcolm asked. “Why didn’t you ask for help?” He could feel his throat thickening. Why hadn’t Milo just asked?

“Who was I going to turn to? You?” he mocked with a shaky laugh.

“Anyone, Milo! Literally anyone!”

“Fuck you! You don’t even believe that shit so go fuck yourself, Mal.  I had no one. No one.”

“You had them,” Malcolm shouted. Milo had had the Night Market. He had the one person that could have understood him. Seen Milo for who he was and not care at the mess that festered beneath every beautiful smile he tossed their way.

Milo shook his head. “They never felt like mine,” he said brokenly. “They always felt like yours. From the second I realized they were real, that it wasn’t a sick joke or a construct wandering around with a lack of sentience, I knew.”

“Knew what?”

Milo smiled then. It was thin and full of so much pain. “That I was a placeholder.”

Malcolm stared at him.  “They loved you. You have to have known that.”

“The thing that wasn’t supposed to be real, loved me.  The thing I brought here, summoned with the book of your dead mother&#39;s, the one woman in the market who could have actually brought this all to ruin. I was supposed to believe that? I wanted to. I wanted to so fucking badly because fuck you Malcolm. Fuck you for dying. Fuck you for coming back and…”

Malcolm stepped forward, gathering Milo in his arms. He gripped him tight, pulling his head to his shoulder and feeling the tears wet his shirt.

“Fuck you,” Milo muttered weakly, hands coming up to cling to him. “They were perfect, Mal.  I never had anything like that before. It was so damn easy to be with them.”

Malcolm felt the tear slip free, leaving a salty trail down his cheek. Milo shook in his arms, ugly sobs wracking his frame as he begged Malcolm silently to take tonight away. To make it okay.

“Milo,” he said, trying to keep his voice steady. “You need to come home. You need to come back and explain what has happened so we can fix this.”

“They’ll kill me.”

“They won’t,” Malcolm insisted. “I’ll protect you. They won’t lay a hand on you.”

Pulling away, he shook his head, wiping at his eyes. “I don’t care what they do. I just– I want them back.”

“And maybe we could get them back.  All is not lost. Not yet.”

Milo laughed. The sound echoed hollowly around the room.  “Why would I do such a thing? I summoned them here once and they knew only pain. Why would I summon them back? For me? To put them in peril again? To tear apart the market again and again and again….”

Malcolm grabbed him roughly, both hands cupping his cheek. He could feel the stubble beneath his palms. Milo’s eyes were brighter than Malcolm remembered. Two amber pinpoints, glowing in a world without lanterns any longer.

“Button, come home. Please.”

But his gaze was already growing distant. “It’s good that you’re back, Mal. The world wasn’t doing good without you.”

“Milo.” He shook him, trying to push the fight back in his bones. “Don’t do this. Don’t you dare fucking run.”

But it was too late. Malcolm should have seen it coming. Milo always went lax right before he burst into a fight.  

Malcolm’s legs were swept out from under him and he hit the ground hard.  By the time he even knew what was happening, Milo was already at the front door, looking back at Mal, as if to drink in the sight of him again.

“I missed you,” he said, fingers curled around the door frame. “If I can make this right, I will.”

“Milo,” Malcolm shouted. But by the time he hopped over the rubble and made it to the door frame, Milo was gone. Disappearing into the dark, slipping away between the screams that erupted across the night.

Malcolm winced, leaning against the door frame. Closing his eyes, hands balled into fists, he hit the wall, feeling it crack beneath his knuckles, the skin splitting apart. As he slid down to the floor, feeling his newly returned body ache with disuse and his heart break for the loss of the two people he loved, his hand slipped.  Wiping the tears from his eyes, Malcolm looked down.

A button sat beside him, a glowing lantern embossed into the metal.

Curling his fingers around it, Malcolm worried that this was what death truly looked like. That this was the end.

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="68" name="Hazel Title" tags="" position="800,150" size="100,100">&lt;center&gt;&lt;img src=&quot;images/Hazel cover.png&quot;
height=&quot;900&quot; width=&quot;800&quot;&gt;&lt;/center&gt;

[[Read in Order|Hazel 1]]

&lt;b&gt;Story Selection&lt;/b&gt;

[[Introducing Hazel|Hazel 1]]
[[Hazel and Laikin&#39;s First Meeting|Hazel 2]]
[[The Burnt Muffins|Hazel 3]]
[[A Conversation between Mal and Hazel|Hazel 4]]
[[The Green Cauldron|Hazel 5]]
[[Picnic|Hazel 6]]
[[A Failed Attempt|Hazel 7]]
[[Mother|Hazel 8]]
[[A Bath|Hazel 9]]
[[The Omen|Hazel 10]]
[[Late Night Hot Chocolate|Hazel 11]]
[[The Aftermath|Hazel 12]]
[[Death of a Loved One|Hazel 13]]

&lt;center&gt;&lt;img src=&quot;images/Hazel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;


</tw-passagedata><tw-passagedata pid="69" name="Gabriel Title" tags="" position="1000,150" size="100,100">&lt;center&gt;&lt;img src=&quot;images/Gabe cover.png&quot;
height=&quot;900&quot; width=&quot;800&quot;&gt;&gt;&lt;/center&gt;

[[Read in Order|Gabriel 1]]

&lt;b&gt;Story Selection&lt;/b&gt;

[[Introducing Gabriel|Gabriel 1]]
[[Meet the Parents|Gabriel 2]]
[[Conversation with a Graceling|Gabriel 3]]
[[Work Day|Gabriel 4]]
[[Patrol|Gabriel 5]]
[[Caliban|Gabriel 6]]
[[Drinking with Reese|Gabriel 7]]
[[Casimir Alskar|Gabriel 8]]
[[Morning Tea|Gabriel 9]]
[[A Night Beneath the Stars|Gabriel 10]]
[[A Visit from Hazel|Gabriel 11]]
[[A Baron Meeting|Gabriel 12]]
[[The Flea Market|Gabriel 13]]
[[Wish You Were Here|Gabriel 14]]

&lt;center&gt;&lt;img src=&quot;images/Gabriel filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="70" name="Index" tags="" position="625,25" size="100,100">&lt;center&gt;&lt;img src=&quot;images/Companion cover.png&quot;
height=&quot;900&quot; width=&quot;700&quot;&gt;&lt;/center&gt;

[[Hazel|Hazel Title]]
[[Gabriel|Gabriel Title]]
[[Milo|Milo Title]]
[[Belladonna|Belladonna Title]]
[[Malcolm|Mal Title]]</tw-passagedata><tw-passagedata pid="71" name="Milo Title" tags="" position="1200,150" size="100,100">&lt;center&gt;&lt;img src=&quot;images/Milo cover.png&quot;
height=&quot;900&quot; width=&quot;800&quot;&gt;&lt;/center&gt;

[[Read in Order|Milo 1]]

&lt;b&gt;Story Selection&lt;/b&gt;

[[Introducing Milo|Milo 1]]
[[Friends|Milo 2]]
[[Soft Moments|Milo 3]]
[[Anything for Hazel|Milo 4]]
[[The Ritual|Milo 5]]
[[The Beginning|Milo 6]]
[[A Kiss|Milo 7]]
[[Ever|Milo 8]]
[[Conflicted|Milo 9]]
[[The Creek|Milo 10]]
[[Wounded|Milo 11]]
[[Confirming the Truth|Milo 12]]
[[Longing|Milo 13]]
[[Going Home|Milo 14]]
[[The Last Date|Milo 15]]
[[Goodbye|Milo 16]]

&lt;center&gt;&lt;img src=&quot;images/Milo filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="72" name="Belladonna Title" tags="" position="1400,150" size="100,100">&lt;center&gt;&lt;img src=&quot;images/Bella cover.png&quot;
height=&quot;900&quot; width=&quot;800&quot;&gt;&lt;/center&gt;

[[Read in Order|Belladonna 1]]

&lt;b&gt;Story Selection&lt;/b&gt;

[[Introducing Madeline|Belladonna 1]]
[[A Discussion|Belladonna 2]]
[[Fired|Belladonna 3]]
[[Death of a Warden|Belladonna 4]]
[[Old Friend|Belladonna 5]]
[[Noctine|Belladonna 6]]
[[Girl&#39;s Night|Belladonna 7]]
[[Goblin Market|Belladonna 8]]
[[A Warning|Belladonna 9]]
[[Goodbye to a Friend|Belladonna 10]]
[[A Baron|Belladonna 11]]
[[You Can&#39;t Afford Me|Belladonna 12]]
[[Let the World Burn|Belladonna 13]]

&lt;center&gt;&lt;img src=&quot;images/Belladonna filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="73" name="Mal Title" tags="" position="1575,150" size="100,100">&lt;center&gt;&lt;img src=&quot;images/Mal cover.png&quot;
height=&quot;900&quot; width=&quot;800&quot;&gt;&lt;/center&gt;

[[Read in Order|Malcolm 1]]

&lt;b&gt;Story Selection&lt;/b&gt;

[[Introducing my Gatekeeper|Malcolm 1]]
[[Home Life|Malcolm 2]]
[[A Fight|Malcolm 3]]
[[Sick Day|Malcolm 4]]
[[A Night Out|Malcolm 5]]
[[Becoming the Gatekeeper|Malcolm 6]]
[[The Pain of it All|Malcolm 7]]
[[Lamplight|Malcolm 8]]
[[Homecoming|Malcolm 9]]
[[A Day That Has Yet To Come|Malcolm 10]]
[[Broken Buttons|Malcolm 11]]

&lt;center&gt;&lt;img src=&quot;images/Mal filigree.png&quot;
height=&quot;75&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata><tw-passagedata pid="74" name="StoryMenu" tags="" position="175,325" size="100,100">[[Index]]
[[Credits]]</tw-passagedata><tw-passagedata pid="75" name="StoryAuthor" tags="" position="275,225" size="100,100">Written by Zinnia Demitasse
Illistration by Mooreuax</tw-passagedata><tw-passagedata pid="76" name="StoryDisplayTitle" tags="" position="175,225" size="100,100">The Night Market&#39;s Forgotten Memories</tw-passagedata><tw-passagedata pid="77" name="StoryBanner" tags="" position="275,325" size="100,100">&lt;img src=&quot;images/Gold icon.png&quot; height=&quot;150&quot; width=&quot;175&quot;&gt;</tw-passagedata><tw-passagedata pid="78" name="Untitled Passage" tags="" position="425,25" size="100,100">&lt;center&gt;&lt;img src=&quot;images/Companion cover.png&quot;
height=&quot;900&quot; width=&quot;700&quot;&gt;&lt;/center&gt;

Welcome to the Night Market Companion Book. A collection of short stories pertaining to Book One of the Night Market, mostly from the RO&#39;s point of view. Featuring never before seen art and new stories. Get an insight into the mind of your RO&#39;s and discover what was happening behind the scenes.

[[Onto the stories|Index]]</tw-passagedata><tw-passagedata pid="79" name="Credits" tags="" position="175,450" size="100,100">All stories written by Zinnia Demitasse

All art by Poppy Mooreuax

All rights of the Night Market and The Night Market&#39;s Forgotten Memories are assets of Lamplight Inc.

&lt;center&gt;&lt;img src=&quot;images/Lamplight logo.png&quot; height=&quot;250&quot; width=&quot;200&quot;&gt;&lt;/center&gt;</tw-passagedata></tw-storydata>
	<script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if(document.documentElement.getAttribute("data-init")==="loading"){(function(window,document,jQuery,undefined){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_unsupportedIterableToArray(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var errorPrologRegExp=/^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,Alert=function(){function mesg(where,error,isFatal,isUncaught){var mesg="Error",nice="A".concat(isFatal?" fatal":"n"," error has occurred.");nice+=isFatal?" Aborting.":" You may be able to continue, but some parts may not work properly.";var isObject=null!==error&&"object"===_typeof(error),what=(isObject&&"message"in error?String(error.message).replace(errorPrologRegExp,""):String(error)).trim()||"unknown error";null!=where&&(mesg+=" [".concat(where,"]")),mesg+=": ".concat(what,"."),isObject&&"stack"in error&&(mesg+="\n\nStack Trace:\n".concat(error.stack)),mesg&&(nice+="\n\n".concat(mesg)),isUncaught||console[isFatal?"error":"warn"](mesg),window.alert(nice)}var origOnError;return origOnError=window.onerror,window.onerror=function(what,source,lineNum,colNum,error){"complete"===document.readyState?mesg(null,null!=error?error:what,!1,!0):(mesg(null,null!=error?error:what,!0,!0),window.onerror=origOnError,"function"==typeof window.onerror&&window.onerror.apply(this,arguments))},Object.freeze(Object.defineProperties({},{error:{value:function(where,error){mesg(where,error)}},fatal:{value:function(where,error){mesg(where,error,!0)}}}))}(),Patterns=(wsMap=new Map([[" ","\\u0020"],["\f","\\f"],["\n","\\n"],["\r","\\r"],["\t","\\t"],["\v","\\v"],[" ","\\u00a0"],[" ","\\u1680"],["᠎","\\u180e"],[" ","\\u2000"],[" ","\\u2001"],[" ","\\u2002"],[" ","\\u2003"],[" ","\\u2004"],[" ","\\u2005"],[" ","\\u2006"],[" ","\\u2007"],[" ","\\u2008"],[" ","\\u2009"],[" ","\\u200a"],["\u2028","\\u2028"],["\u2029","\\u2029"],[" ","\\u202f"],[" ","\\u205f"],["　","\\u3000"],["\ufeff","\\ufeff"]]),wsRe=/^\s$/,missing="",wsMap.forEach((function(pat,char){wsRe.test(char)||(missing+=pat)})),space=missing?"[\\s".concat(missing,"]"):"\\s",spaceNoTerminator="[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]",notSpace="\\s"===space?"\\S":space.replace(/^\[/,"[^"),anyChar="(?:.|".concat("[\\n\\r\\u2028\\u2029]",")"),anyLetter="[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]",anyLetterStrict=anyLetter.replace("\\-",""),identifier="".concat("[$A-Z_a-z]").concat("[$0-9A-Z_a-z]","*"),variable="[$_]"+identifier,htmlTagName="[A-Za-z](?:".concat(cENChar="(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])","*-").concat(cENChar,"*|[0-9A-Za-z]*)"),twStyle="(".concat(anyLetter,"+)\\(([^\\)\\|\\n]+)\\):"),cssStyle="".concat(spaceNoTerminator,"*(").concat(anyLetter,"+)").concat(spaceNoTerminator,"*:([^;\\|\\n]+);"),idOrClass="".concat(spaceNoTerminator,"*((?:").concat("[#.]").concat(anyLetter,"+").concat(spaceNoTerminator,"*)+);"),inlineCss="".concat(twStyle,"|").concat(cssStyle,"|").concat(idOrClass),Object.freeze({space:space,spaceNoTerminator:spaceNoTerminator,lineTerminator:"[\\n\\r\\u2028\\u2029]",notSpace:notSpace,anyChar:anyChar,anyLetter:anyLetter,anyLetterStrict:anyLetterStrict,identifierFirstChar:"[$A-Z_a-z]",identifierNextChar:"[$0-9A-Z_a-z]",identifier:identifier,variableSigil:"[$_]",variable:variable,macroName:"[A-Za-z][\\w-]*|[=-]",templateName:"[A-Za-z][\\w-]*",htmlTagName:htmlTagName,cssIdOrClassSigil:"[#.]",cssImage:"\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",inlineCss:inlineCss,url:"(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"})),wsMap,wsRe,missing,cENChar,twStyle,cssStyle,idOrClass,space,spaceNoTerminator,notSpace,anyChar,anyLetter,anyLetterStrict,identifier,variable,htmlTagName,inlineCss;!function(){var startWSRe,endWSRe,_trimString=(startWSRe=new RegExp("^".concat(Patterns.space).concat(Patterns.space,"*")),endWSRe=new RegExp("".concat(Patterns.space).concat(Patterns.space,"*$")),function(str,where){var val=String(str);if(!val)return val;switch(where){case"start":return startWSRe.test(val)?val.replace(startWSRe,""):val;case"end":return endWSRe.test(val)?val.replace(endWSRe,""):val;default:throw new Error('_trimString called with incorrect where parameter value: "'.concat(where,'"'))}});function _createPadString(length,padding){var targetLength=Number.parseInt(length,10)||0;if(targetLength<1)return"";var padString=void 0===padding?"":String(padding);for(""===padString&&(padString=" ");padString.length<targetLength;){var curPadLength=padString.length,remainingLength=targetLength-curPadLength;padString+=curPadLength>remainingLength?padString.slice(0,remainingLength):padString}return padString.length>targetLength&&(padString=padString.slice(0,targetLength)),padString}Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,writable:!0,value:function flat(){if(null==this)throw new TypeError("Array.prototype.flat called on null or undefined");var depth=0===arguments.length?1:Number(arguments[0])||0;return depth<1?Array.prototype.slice.call(this):Array.prototype.reduce.call(this,(function(acc,cur){return cur instanceof Array?acc.push.apply(acc,_toConsumableArray(flat.call(cur,depth-1))):acc.push(cur),acc}),[])}}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatMap called on null or undefined");return Array.prototype.map.apply(this,arguments).flat()}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");if(0===arguments.length)return!1;var length=this.length>>>0;if(0===length)return!1;var needle=arguments[0],i=Number(arguments[1])||0;for(i<0&&(i=Math.max(0,length+i));i<length;++i){var value=this[i];if(value===needle||value!=value&&needle!=needle)return!0}return!1}}),Object.entries||Object.defineProperty(Object,"entries",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.entries object parameter must be an object");return Object.keys(obj).map((function(key){return[key,obj[key]]}))}}),Object.fromEntries||Object.defineProperty(Object,"fromEntries",{configurable:!0,writable:!0,value:function(iter){return Array.from(iter).reduce((function(acc,pair){if(Object(pair)!==pair)throw new TypeError("Object.fromEntries iterable parameter must yield objects");return pair[0]in acc?Object.defineProperty(acc,pair[0],{configurable:!0,enumerable:!0,writable:!0,value:pair[1]}):acc[pair[0]]=pair[1],acc}),{})}}),Object.getOwnPropertyDescriptors||Object.defineProperty(Object,"getOwnPropertyDescriptors",{configurable:!0,writable:!0,value:function(obj){if(null==obj)throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");var O=Object(obj);return Reflect.ownKeys(O).reduce((function(acc,key){var desc=Object.getOwnPropertyDescriptor(O,key);return void 0!==desc&&(key in acc?Object.defineProperty(acc,key,{configurable:!0,enumerable:!0,writable:!0,value:desc}):acc[key]=desc),acc}),{})}}),Object.values||Object.defineProperty(Object,"values",{configurable:!0,writable:!0,value:function(obj){if("object"!==_typeof(obj)||null===obj)throw new TypeError("Object.values object parameter must be an object");return Object.keys(obj).map((function(key){return obj[key]}))}}),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padStart called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:_createPadString(targetLength-baseLength,padding)+baseString}}),String.prototype.padEnd||Object.defineProperty(String.prototype,"padEnd",{configurable:!0,writable:!0,value:function(length,padding){if(null==this)throw new TypeError("String.prototype.padEnd called on null or undefined");var baseString=String(this),baseLength=baseString.length,targetLength=Number.parseInt(length,10);return targetLength<=baseLength?baseString:baseString+_createPadString(targetLength-baseLength,padding)}}),String.prototype.trimStart||Object.defineProperty(String.prototype,"trimStart",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimStart called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimLeft||Object.defineProperty(String.prototype,"trimLeft",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimLeft called on null or undefined");return _trimString(this,"start")}}),String.prototype.trimEnd||Object.defineProperty(String.prototype,"trimEnd",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimEnd called on null or undefined");return _trimString(this,"end")}}),String.prototype.trimRight||Object.defineProperty(String.prototype,"trimRight",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.trimRight called on null or undefined");return _trimString(this,"end")}})}(),function(){var _nativeMathRandom=Math.random,_regExpMetaCharsRe,_hasRegExpMetaCharsRe,_formatRegExp,_hasFormatRegExp;function _random(){var min,max;switch(arguments.length){case 0:throw new Error("_random called with insufficient parameters");case 1:min=0,max=arguments[0];break;default:min=arguments[0],max=arguments[1]}if(min>max){var _ref=[max,min];min=_ref[0],max=_ref[1]}return Math.floor(_nativeMathRandom()*(max-min+1))+min}function _randomIndex(length,boundsArgs){var min,max;switch(boundsArgs.length){case 1:min=0,max=length-1;break;case 2:min=0,max=Math.trunc(boundsArgs[1]);break;default:min=Math.trunc(boundsArgs[1]),max=Math.trunc(boundsArgs[2])}return Number.isNaN(min)?min=0:!Number.isFinite(min)||min>=length?min=length-1:min<0&&(min=length+min)<0&&(min=0),Number.isNaN(max)?max=0:(!Number.isFinite(max)||max>=length||max<0&&(max=length+max)<0)&&(max=length-1),_random(min,max)}function _getCodePointStartAndEnd(str,pos){var code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};if(code<55296||code>57343)return{char:str.charAt(pos),start:pos,end:pos};if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)throw new Error("high surrogate without trailing low surrogate");var nextCode=str.charCodeAt(nextPos);if(nextCode<56320||nextCode>57343)throw new Error("high surrogate without trailing low surrogate");return{char:str.charAt(pos)+str.charAt(nextPos),start:pos,end:nextPos}}if(0===pos)throw new Error("low surrogate without leading high surrogate");var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);if(prevCode<55296||prevCode>56319)throw new Error("low surrogate without leading high surrogate");return{char:str.charAt(prevPos)+str.charAt(pos),start:prevPos,end:pos}}Object.defineProperty(Array,"random",{configurable:!0,writable:!0,value:function(array){if("object"!==_typeof(array)||null===array||!Object.prototype.hasOwnProperty.call(array,"length"))throw new TypeError("Array.random array parameter must be an array or array-lke object");var length=array.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments,1));return array[index]}}}),Object.defineProperty(Array.prototype,"concatUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.concatUnique called on null or undefined");var result=Array.from(this);if(0===arguments.length)return result;var items=Array.prototype.reduce.call(arguments,(function(prev,cur){return prev.concat(cur)}),[]),addSize=items.length;if(0===addSize)return result;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=items[i];-1===indexOf.call(result,value)&&push.call(result,value)}return result}}),Object.defineProperty(Array.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.count called on null or undefined");for(var indexOf=Array.prototype.indexOf,needle=arguments[0],pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,++pos;return count}}),Object.defineProperty(Array.prototype,"countWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.countWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.countWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return 0;for(var count=0,i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&++count;return count}}),Object.defineProperty(Array.prototype,"delete",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.delete called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var needles=Array.prototype.concat.apply([],arguments),needlesLength=needles.length,indices=[],i=0;i<length;++i)for(var value=this[i],j=0;j<needlesLength;++j){var needle=needles[j];if(value===needle||value!=value&&needle!=needle){indices.push(i);break}}for(var result=[],_i=0,iend=indices.length;_i<iend;++_i)result[_i]=this[indices[_i]];for(var splice=Array.prototype.splice,_i2=indices.length-1;_i2>=0;--_i2)splice.call(this,indices[_i2],1);return result}}),Object.defineProperty(Array.prototype,"deleteAt",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.deleteAt called on null or undefined");if(0===arguments.length)return[];var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,cpyIndices=_toConsumableArray(new Set(Array.prototype.concat.apply([],arguments).map((function(x){return x<0?Math.max(0,length+x):x}))).values()),delIndices=_toConsumableArray(cpyIndices).sort((function(a,b){return b-a})),result=[],i=0,iend=cpyIndices.length;i<iend;++i)result[i]=this[cpyIndices[i]];for(var _i3=0,_iend=delIndices.length;_i3<_iend;++_i3)splice.call(this,delIndices[_i3],1);return result}}),Object.defineProperty(Array.prototype,"deleteWith",{configurable:!0,writable:!0,value:function(predicate,thisArg){if(null==this)throw new TypeError("Array.prototype.deleteWith called on null or undefined");if("function"!=typeof predicate)throw new Error("Array.prototype.deleteWith predicate parameter must be a function");var length=this.length>>>0;if(0===length)return[];for(var splice=Array.prototype.splice,indices=[],result=[],i=0;i<length;++i)predicate.call(thisArg,this[i],i,this)&&(result.push(this[i]),indices.push(i));for(var _i4=indices.length-1;_i4>=0;--_i4)splice.call(this,indices[_i4],1);return result}}),Object.defineProperty(Array.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.first called on null or undefined");if(0!==this.length>>>0)return this[0]}}),Object.defineProperty(Array.prototype,"includesAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAll called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAll.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(!Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!1;return!0}}),Object.defineProperty(Array.prototype,"includesAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.includesAny called on null or undefined");if(1===arguments.length)return Array.isArray(arguments[0])?Array.prototype.includesAny.apply(this,arguments[0]):Array.prototype.includes.apply(this,arguments);for(var i=0,iend=arguments.length;i<iend;++i)if(Array.prototype.some.call(this,(function(val){return val===this.val||val!=val&&this.val!=this.val}),{val:arguments[i]}))return!0;return!1}}),Object.defineProperty(Array.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.last called on null or undefined");var length=this.length>>>0;if(0!==length)return this[length-1]}}),Object.defineProperty(Array.prototype,"pluck",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pluck called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return Array.prototype.splice.call(this,index,1)[0]}}}),Object.defineProperty(Array.prototype,"pluckMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.pluckMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.pluckMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var splice=Array.prototype.splice,result=[],max=length-1;do{result.push(splice.call(this,_random(0,max--),1)[0])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"pushUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.pushUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,push=Array.prototype.push,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&push.call(this,value)}return this.length>>>0}}),Object.defineProperty(Array.prototype,"random",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.random called on null or undefined");var length=this.length>>>0;if(0!==length){var index=0===arguments.length?_random(0,length-1):_randomIndex(length,Array.prototype.slice.call(arguments));return this[index]}}}),Object.defineProperty(Array.prototype,"randomMany",{configurable:!0,writable:!0,value:function(wantSize){if(null==this)throw new TypeError("Array.prototype.randomMany called on null or undefined");var length=this.length>>>0;if(0===length)return[];var want=Math.trunc(wantSize);if(!Number.isInteger(want))throw new Error("Array.prototype.randomMany want parameter must be an integer");if(want<1)return[];want>length&&(want=length);var picked=new Map,result=[],max=length-1;do{var i=void 0;do{i=_random(0,max)}while(picked.has(i));picked.set(i,!0),result.push(this[i])}while(result.length<want);return result}}),Object.defineProperty(Array.prototype,"shuffle",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.shuffle called on null or undefined");var length=this.length>>>0;if(0===length)return this;for(var i=length-1;i>0;--i){var j=Math.floor(_nativeMathRandom()*(i+1));if(i!==j){var swap=this[i];this[i]=this[j],this[j]=swap}}return this}}),Object.defineProperty(Array.prototype,"unshiftUnique",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");var addSize=arguments.length;if(0===addSize)return this.length>>>0;for(var indexOf=Array.prototype.indexOf,unshift=Array.prototype.unshift,i=0;i<addSize;++i){var value=arguments[i];-1===indexOf.call(this,value)&&unshift.call(this,value)}return this.length>>>0}}),Object.defineProperty(Function.prototype,"partial",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Function.prototype.partial called on null or undefined");var slice=Array.prototype.slice,fn=this,bound=slice.call(arguments,0);return function(){for(var applied=[],argc=0,i=0;i<bound.length;++i)applied.push(bound[i]===undefined?arguments[argc++]:bound[i]);return fn.apply(this,applied.concat(slice.call(arguments,argc)))}}}),Object.defineProperty(Math,"clamp",{configurable:!0,writable:!0,value:function(num,min,max){var value=Number(num);return Number.isNaN(value)?NaN:value.clamp(min,max)}}),Object.defineProperty(Math,"easeInOut",{configurable:!0,writable:!0,value:function(num){return 1-(Math.cos(Number(num)*Math.PI)+1)/2}}),Object.defineProperty(Number.prototype,"clamp",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Number.prototype.clamp called on null or undefined");if(2!==arguments.length)throw new Error("Number.prototype.clamp called with an incorrect number of parameters");var min=Number(arguments[0]),max=Number(arguments[1]);if(min>max){var _ref2=[max,min];min=_ref2[0],max=_ref2[1]}return Math.min(Math.max(this,min),max)}}),RegExp.escape||(_regExpMetaCharsRe=/[\\^$*+?.()|[\]{}]/g,_hasRegExpMetaCharsRe=new RegExp(_regExpMetaCharsRe.source),Object.defineProperty(RegExp,"escape",{configurable:!0,writable:!0,value:function(str){var val=String(str);return val&&_hasRegExpMetaCharsRe.test(val)?val.replace(_regExpMetaCharsRe,"\\$&"):val}})),_formatRegExp=/{(\d+)(?:,([+-]?\d+))?}/g,_hasFormatRegExp=new RegExp(_formatRegExp.source),Object.defineProperty(String,"format",{configurable:!0,writable:!0,value:function(format){function padString(str,align,pad){if(!align)return str;var plen=Math.abs(align)-str.length;if(plen<1)return str;var padding=String(pad).repeat(plen);return align<0?str+padding:padding+str}if(arguments.length<2)return 0===arguments.length?"":format;var args=2===arguments.length&&Array.isArray(arguments[1])?_toConsumableArray(arguments[1]):Array.prototype.slice.call(arguments,1);return 0===args.length?format:_hasFormatRegExp.test(format)?(_formatRegExp.lastIndex=0,format.replace(_formatRegExp,(function(match,index,align){var retval=args[index];if(null==retval)return"";for(;"function"==typeof retval;)retval=retval();switch(_typeof(retval)){case"string":break;case"object":retval=JSON.stringify(retval);break;default:retval=String(retval)}return padString(retval,align?Number.parseInt(align,10):0," ")}))):format}}),Object.defineProperty(String.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.contains called on null or undefined");return-1!==String.prototype.indexOf.apply(this,arguments)}}),Object.defineProperty(String.prototype,"count",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.count called on null or undefined");var needle=String(arguments[0]||"");if(""===needle)return 0;for(var indexOf=String.prototype.indexOf,step=needle.length,pos=Number(arguments[1])||0,count=0;-1!==(pos=indexOf.call(this,needle,pos));)++count,pos+=step;return count}}),Object.defineProperty(String.prototype,"first",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.first called on null or undefined");return _getCodePointStartAndEnd(String(this),0).char}}),Object.defineProperty(String.prototype,"last",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.last called on null or undefined");var str=String(this);return _getCodePointStartAndEnd(str,str.length-1).char}}),Object.defineProperty(String.prototype,"splice",{configurable:!0,writable:!0,value:function(startAt,delCount,replacement){if(null==this)throw new TypeError("String.prototype.splice called on null or undefined");var length=this.length>>>0;if(0===length)return"";var start=Number(startAt);Number.isSafeInteger(start)?start<0&&(start+=length)<0&&(start=0):start=0,start>length&&(start=length);var count=Number(delCount);(!Number.isSafeInteger(count)||count<0)&&(count=0);var res=this.slice(0,start);return void 0!==replacement&&(res+=replacement),start+count<length&&(res+=this.slice(start+count)),res}}),Object.defineProperty(String.prototype,"splitOrEmpty",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");return""===String(this)?[]:String.prototype.split.apply(this,arguments)}}),Object.defineProperty(String.prototype,"toLocaleUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd3=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd3.char,end=_getCodePointStartAnd3.end;return-1===end?"":char.toLocaleUpperCase()+str.slice(end+1)}}),Object.defineProperty(String.prototype,"toUpperFirst",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.toUpperFirst called on null or undefined");var str=String(this),_getCodePointStartAnd4=_getCodePointStartAndEnd(str,0),char=_getCodePointStartAnd4.char,end=_getCodePointStartAnd4.end;return-1===end?"":char.toUpperCase()+str.slice(end+1)}}),Object.defineProperty(Date.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:date)",this.toISOString()]}}),Object.defineProperty(Function.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)","(".concat(this.toString(),")")]}}),Object.defineProperty(Map.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:map)",_toConsumableArray(this)]}}),Object.defineProperty(RegExp.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:eval)",this.toString()]}}),Object.defineProperty(Set.prototype,"toJSON",{configurable:!0,writable:!0,value:function(){return["(revive:set)",_toConsumableArray(this)]}}),Object.defineProperty(JSON,"reviveWrapper",{configurable:!0,writable:!0,value:function(code,data){if("string"!=typeof code)throw new TypeError("JSON.reviveWrapper code parameter must be a string");return["(revive:eval)",[code,data]]}}),Object.defineProperty(JSON,"_real_stringify",{value:JSON.stringify}),Object.defineProperty(JSON,"stringify",{configurable:!0,writable:!0,value:function(_value,replacer,space){return JSON._real_stringify(_value,(function(key,val){var value=val;if("function"==typeof replacer)try{value=replacer(key,value)}catch(ex){}return void 0===value&&(value=["(revive:eval)","undefined"]),value}),space)}}),Object.defineProperty(JSON,"_real_parse",{value:JSON.parse}),Object.defineProperty(JSON,"parse",{configurable:!0,writable:!0,value:function value(text,reviver){return JSON._real_parse(text,(function(key,val){var value=val;if(Array.isArray(value)&&2===value.length)switch(value[0]){case"(revive:set)":value=new Set(value[1]);break;case"(revive:map)":value=new Map(value[1]);break;case"(revive:date)":value=new Date(value[1]);break;case"(revive:eval)":try{if(Array.isArray(value[1])){var $ReviveData$=value[1][1];value=eval(value[1][0])}else value=eval(value[1])}catch(ex){}}else if("string"==typeof value&&"@@revive@@"===value.slice(0,10))try{value=eval(value.slice(10))}catch(ex){}if("function"==typeof reviver)try{value=reviver(key,value)}catch(ex){}return value}))}}),Object.defineProperty(Array.prototype,"contains",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.contains called on null or undefined");return Array.prototype.includes.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAll",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAll called on null or undefined");return Array.prototype.includesAll.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"containsAny",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.containsAny called on null or undefined");return Array.prototype.includesAny.apply(this,arguments)}}),Object.defineProperty(Array.prototype,"flatten",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("Array.prototype.flatten called on null or undefined");return Array.prototype.flat.call(this,1/0)}}),Object.defineProperty(String.prototype,"readBracketedList",{configurable:!0,writable:!0,value:function(){if(null==this)throw new TypeError("String.prototype.readBracketedList called on null or undefined");for(var match,re=new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)","gm"),names=[];null!==(match=re.exec(this));)match[1]?names.push(match[1]):match[2]&&names.push(match[2]);return names}})}();var Browser=(userAgent=navigator.userAgent.toLowerCase(),winPhone=userAgent.includes("windows phone"),isMobile=Object.freeze({Android:!winPhone&&userAgent.includes("android"),BlackBerry:/blackberry|bb10/.test(userAgent),iOS:!winPhone&&/ip(?:hone|ad|od)/.test(userAgent),Opera:!winPhone&&("object"===_typeof(window.operamini)||userAgent.includes("opera mini")),Windows:winPhone||/iemobile|wpdesktop/.test(userAgent),any:function(){return isMobile.Android||isMobile.BlackBerry||isMobile.iOS||isMobile.Opera||isMobile.Windows}}),isGecko=!isMobile.Windows&&!/khtml|trident|edge/.test(userAgent)&&userAgent.includes("gecko"),isIE=!userAgent.includes("opera")&&/msie|trident/.test(userAgent),ieVersion=isIE?(ver=/(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent))?Number(ver[1]):0:null,isOpera=userAgent.includes("opera")||userAgent.includes(" opr/"),operaVersion=isOpera?function(){var ver=new RegExp("".concat(/khtml|chrome/.test(userAgent)?"opr":"version","\\/(\\d+\\.\\d+)")).exec(userAgent);return ver?Number(ver[1]):0}():null,isVivaldi=userAgent.includes("vivaldi"),Object.freeze({userAgent:userAgent,isMobile:isMobile,isGecko:isGecko,isIE:isIE,ieVersion:ieVersion,isOpera:isOpera,operaVersion:operaVersion,isVivaldi:isVivaldi})),ver,userAgent,winPhone,isMobile,isGecko,isIE,ieVersion,isOpera,operaVersion,isVivaldi,Has=(hasAudioElement=function(){try{return"function"==typeof document.createElement("audio").canPlayType}catch(ex){}return!1}(),hasFile=function(){try{return"Blob"in window&&"File"in window&&"FileList"in window&&"FileReader"in window&&(!Browser.isOpera||Browser.operaVersion>=15)}catch(ex){}return!1}(),hasGeolocation=function(){try{return"geolocation"in navigator&&"function"==typeof navigator.geolocation.getCurrentPosition&&"function"==typeof navigator.geolocation.watchPosition}catch(ex){}return!1}(),hasMutationObserver=function(){try{return"MutationObserver"in window&&"function"==typeof window.MutationObserver}catch(ex){}return!1}(),hasPerformance=function(){try{return"performance"in window&&"function"==typeof window.performance.now}catch(ex){}return!1}(),hasTouch=function(){try{return"ontouchstart"in window||!!window.DocumentTouch&&document instanceof window.DocumentTouch||!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints}catch(ex){}return!1}(),hasTransitionEndEvent=function(){try{for(var teMap=new Map([["transition","transitionend"],["MSTransition","msTransitionEnd"],["WebkitTransition","webkitTransitionEnd"],["MozTransition","transitionend"]]),teKeys=_toConsumableArray(teMap.keys()),el=document.createElement("div"),i=0;i<teKeys.length;++i)if(el.style[teKeys[i]]!==undefined)return teMap.get(teKeys[i])}catch(ex){}return!1}(),Object.freeze({audio:hasAudioElement,fileAPI:hasFile,geolocation:hasGeolocation,mutationObserver:hasMutationObserver,performance:hasPerformance,touch:hasTouch,transitionEndEvent:hasTransitionEndEvent})),hasAudioElement,hasFile,hasGeolocation,hasMutationObserver,hasPerformance,hasTouch,hasTransitionEndEvent,Visibility=(vendor=function(){try{return Object.freeze([{hiddenProperty:"hidden",stateProperty:"visibilityState",changeEvent:"visibilitychange"},{hiddenProperty:"webkitHidden",stateProperty:"webkitVisibilityState",changeEvent:"webkitvisibilitychange"},{hiddenProperty:"mozHidden",stateProperty:"mozVisibilityState",changeEvent:"mozvisibilitychange"},{hiddenProperty:"msHidden",stateProperty:"msVisibilityState",changeEvent:"msvisibilitychange"}].find((function(vnd){return vnd.hiddenProperty in document})))}catch(ex){}return undefined}(),Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},state:{get:function(){return vendor&&document[vendor.stateProperty]||"visible"}},isEnabled:{value:function(){return Boolean(vendor)}},isHidden:{value:function(){return Boolean(vendor&&document[vendor.hiddenProperty])}},hiddenProperty:{value:vendor&&vendor.hiddenProperty},stateProperty:{value:vendor&&vendor.stateProperty},changeEvent:{value:vendor&&vendor.changeEvent}}))),vendor,Fullscreen=function(){var _hasPromise,vendor=function(){try{return Object.freeze([{isEnabled:"fullscreenEnabled",element:"fullscreenElement",requestFn:"requestFullscreen",exitFn:"exitFullscreen",changeEvent:"fullscreenchange",errorEvent:"fullscreenerror"},{isEnabled:"webkitFullscreenEnabled",element:"webkitFullscreenElement",requestFn:"webkitRequestFullscreen",exitFn:"webkitExitFullscreen",changeEvent:"webkitfullscreenchange",errorEvent:"webkitfullscreenerror"},{isEnabled:"mozFullScreenEnabled",element:"mozFullScreenElement",requestFn:"mozRequestFullScreen",exitFn:"mozCancelFullScreen",changeEvent:"mozfullscreenchange",errorEvent:"mozfullscreenerror"},{isEnabled:"msFullscreenEnabled",element:"msFullscreenElement",requestFn:"msRequestFullscreen",exitFn:"msExitFullscreen",changeEvent:"MSFullscreenChange",errorEvent:"MSFullscreenError"}].find((function(vnd){return vnd.isEnabled in document})))}catch(ex){}return undefined}(),_returnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,vendor)try{var value=document.exitFullscreen();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise});function _selectElement(requestedEl){var selectedEl=requestedEl||document.documentElement;return selectedEl===document.documentElement&&("msRequestFullscreen"===vendor.requestFn||Browser.isOpera&&Browser.operaVersion<15)&&(selectedEl=document.body),selectedEl}function isFullscreen(){return Boolean(vendor&&document[vendor.element])}function requestFullscreen(options,requestedEl){var _this=this;if(!vendor)return Promise.reject(new Error("fullscreen not supported"));var element=_selectElement(requestedEl);if("function"!=typeof element[vendor.requestFn])return Promise.reject(new Error("fullscreen not supported"));if(isFullscreen())return Promise.resolve();if(_returnsPromise())return element[vendor.requestFn](options);var namespace=".Fullscreen_requestFullscreen";return new Promise((function(resolve,reject){jQuery(element).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen request error")):resolve()})),element[vendor.requestFn](options)}))}function exitFullscreen(){var _this2=this;if(!vendor||"function"!=typeof document[vendor.exitFn])return Promise.reject(new TypeError("fullscreen not supported"));if(!isFullscreen())return Promise.reject(new TypeError("fullscreen mode not active"));if(_returnsPromise())return document[vendor.exitFn]();var namespace=".Fullscreen_exitFullscreen";return new Promise((function(resolve,reject){jQuery(document).off(namespace).one("".concat(vendor.errorEvent).concat(namespace," ").concat(vendor.changeEvent).concat(namespace),(function(ev){jQuery(_this2).off(namespace),ev.type===vendor.errorEvent?reject(new Error("unknown fullscreen exit error")):resolve()})),document[vendor.exitFn]()}))}return Object.freeze(Object.defineProperties({},{vendor:{get:function(){return vendor}},element:{get:function(){return vendor?document[vendor.element]:null}},isEnabled:{value:function(){return Boolean(vendor&&document[vendor.isEnabled])}},isFullscreen:{value:isFullscreen},request:{value:requestFullscreen},exit:{value:exitFullscreen},toggle:{value:function(options,requestedEl){return isFullscreen()?exitFullscreen():requestFullscreen(options,requestedEl)}},onChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.changeEvent,handlerFn)}}},offChange:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.changeEvent,handlerFn):$(element).off(vendor.changeEvent)}}},onError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);$(element).on(vendor.errorEvent,handlerFn)}}},offError:{value:function(handlerFn,requestedEl){if(vendor){var element=_selectElement(requestedEl);handlerFn?$(element).off(vendor.errorEvent,handlerFn):$(element).off(vendor.errorEvent)}}}}))}(),_ref3=Object.freeze(Object.defineProperties({},{clone:{value:function clone(orig){return"object"!==_typeof(orig)||null===orig?orig:orig instanceof String?String(orig):orig instanceof Number?Number(orig):orig instanceof Boolean?Boolean(orig):"function"==typeof orig.clone?orig.clone(!0):orig.nodeType&&"function"==typeof orig.cloneNode?orig.cloneNode(!0):(orig instanceof Array?copy=new Array(orig.length):orig instanceof Date?copy=new Date(orig.getTime()):orig instanceof Map?(copy=new Map,orig.forEach((function(val,key){return copy.set(key,clone(val))}))):orig instanceof RegExp?copy=new RegExp(orig):orig instanceof Set?(copy=new Set,orig.forEach((function(val){return copy.add(clone(val))}))):copy=Object.create(Object.getPrototypeOf(orig)),Object.keys(orig).forEach((function(name){return copy[name]=clone(orig[name])})),copy);var copy}},convertBreaks:{value:function(source){for(var node,output=document.createDocumentFragment(),para=document.createElement("p");null!==(node=source.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":if(null!==node.nextSibling&&node.nextSibling.nodeType===Node.ELEMENT_NODE&&"BR"===node.nextSibling.nodeName.toUpperCase()){source.removeChild(node.nextSibling),source.removeChild(node),output.appendChild(para),para=document.createElement("p");continue}if(!para.hasChildNodes()){source.removeChild(node);continue}break;case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":para.hasChildNodes()&&(output.appendChild(para),para=document.createElement("p")),output.appendChild(node);continue}para.appendChild(node)}para.hasChildNodes()&&output.appendChild(para),source.appendChild(output)}},safeActiveElement:{value:function(){try{return document.activeElement||null}catch(ex){return null}}},setDisplayTitle:{value:function(title){if("string"!=typeof title)throw new TypeError("story display title must be a string (received: ".concat(Util.getType(title),")"));var render=document.createDocumentFragment();new Wikifier(render,title);var text=function(source){for(var node,copy=source.cloneNode(!0),frag=document.createDocumentFragment();null!==(node=copy.firstChild);){if(node.nodeType===Node.ELEMENT_NODE)switch(node.nodeName.toUpperCase()){case"BR":case"DIV":case"P":frag.appendChild(document.createTextNode(" "))}frag.appendChild(node)}return frag.textContent}(render).trim();document.title=Config.passages.displayTitles&&""!==State.passage&&State.passage!==Config.passages.start?"".concat(State.passage," | ").concat(text):text;var storyTitle=document.getElementById("story-title");null!==storyTitle&&jQuery(storyTitle).empty().append(render)}},setPageElement:{value:function(idOrElement,titles,defaultText){var el="object"===_typeof(idOrElement)?idOrElement:document.getElementById(idOrElement);if(null==el)return null;var ids=Array.isArray(titles)?titles:[titles];jQuery(el).empty();for(var i=0,iend=ids.length;i<iend;++i)if(Story.has(ids[i]))return new Wikifier(el,Story.get(ids[i]).processText().trim()),el;if(null!=defaultText){var text=String(defaultText).trim();""!==text&&new Wikifier(el,text)}return el}},throwError:{value:function(place,message,source){var $wrapper=jQuery(document.createElement("div")),$toggle=jQuery(document.createElement("button")),$source=jQuery(document.createElement("pre")),mesg="".concat(L10n.get("errorTitle"),": ").concat(message||"unknown error");return $toggle.addClass("error-toggle").ariaClick({label:L10n.get("errorToggle")},(function(){$toggle.hasClass("enabled")?($toggle.removeClass("enabled"),$source.attr({"aria-hidden":!0,hidden:"hidden"})):($toggle.addClass("enabled"),$source.removeAttr("aria-hidden hidden"))})).appendTo($wrapper),jQuery(document.createElement("span")).addClass("error").text(mesg).appendTo($wrapper),jQuery(document.createElement("code")).text(source).appendTo($source),$source.addClass("error-source").attr({"aria-hidden":!0,hidden:"hidden"}).appendTo($wrapper),$wrapper.addClass("error-view").appendTo(place),console.warn("".concat(mesg,"\n\t").concat(source.replace(/\n/g,"\n\t"))),!1}},stringFrom:{value:function stringFrom(value){switch(_typeof(value)){case"function":return"[function]";case"number":if(Number.isNaN(value))return"[number NaN]";break;case"object":if(null===value)return"[null]";if(value instanceof Array)return value.map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Set)return Array.from(value).map((function(val){return stringFrom(val)})).join(", ");if(value instanceof Map){var result=Array.from(value).map((function(_ref4){var _ref5=_slicedToArray(_ref4,2),key=_ref5[0],val=_ref5[1];return"".concat(stringFrom(key)," → ").concat(stringFrom(val))}));return"{ ".concat(result.join(", ")," }")}if(value instanceof Date)return value.toLocaleString();if(value instanceof Element){if(value===document.documentElement||value===document.head||value===document.body)throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");return value.outerHTML}return value instanceof Node?value.textContent:"function"==typeof value.toString?value.toString():Object.prototype.toString.call(value);case"symbol":var desc=void 0!==value.description?' "'.concat(value.description,'"'):"";return"[symbol".concat(desc,"]");case"undefined":return"[undefined]"}return String(value)}}})),clone=_ref3.clone,convertBreaks=_ref3.convertBreaks,safeActiveElement=_ref3.safeActiveElement,setDisplayTitle=_ref3.setDisplayTitle,setPageElement=_ref3.setPageElement,throwError=_ref3.throwError,stringFrom=_ref3.stringFrom;!function(){function onKeypressFn(ev){13!==ev.which&&32!==ev.which||(ev.preventDefault(),jQuery(safeActiveElement()||this).trigger("click"))}function onClickFnWrapper(fn){return function(){var $this=jQuery(this);$this.ariaIsDisabled()||($this.is("[aria-pressed]")&&$this.attr("aria-pressed","true"===$this.attr("aria-pressed")?"false":"true"),fn.apply(this,arguments))}}function oneClickFnWrapper(fn){return onClickFnWrapper((function(){jQuery(this).off(".aria-clickable").removeAttr("role tabindex aria-controls aria-pressed").filter("button").prop("disabled",!0),fn.apply(this,arguments)}))}jQuery.fn.extend({ariaClick:function(options,handler){if(0===this.length||0===arguments.length)return this;var opts=options,fn=handler;return null==fn&&(fn=opts,opts=undefined),"string"!=typeof(opts=jQuery.extend({namespace:undefined,one:!1,selector:undefined,data:undefined,role:undefined,controls:undefined,pressed:undefined,label:undefined},opts)).namespace?opts.namespace="":"."!==opts.namespace[0]&&(opts.namespace=".".concat(opts.namespace)),"boolean"==typeof opts.pressed&&(opts.pressed=opts.pressed?"true":"false"),this.filter("button").prop("type","button"),null!=opts.role?this.attr("role",opts.role):this.not("[role]").filter("a,[data-passage]").attr("role","link").end().not("a").not("[data-passage]").attr("role","button").end().end().end(),this.attr("tabindex",0),null!=opts.controls&&this.attr("aria-controls",opts.controls),null!=opts.pressed&&this.attr("aria-pressed",opts.pressed),null!=opts.label&&this.attr({"aria-label":opts.label,title:opts.label}),this.not("button").on("keypress.aria-clickable".concat(opts.namespace),opts.selector,onKeypressFn),this.on("click.aria-clickable".concat(opts.namespace),opts.selector,opts.data,opts.one?oneClickFnWrapper(fn):onClickFnWrapper(fn)),this},ariaDisabled:function(disable){if(0===this.length||0===arguments.length)return this;var $nonDisableable=this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),$disableable=this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");return disable?($nonDisableable.each((function(){this.setAttribute("disabled",""),this.setAttribute("aria-disabled","true")})),$disableable.each((function(){this.disabled=!0,this.setAttribute("aria-disabled","true")}))):($nonDisableable.each((function(){this.removeAttribute("disabled"),this.removeAttribute("aria-disabled")})),$disableable.each((function(){this.disabled=!1,this.removeAttribute("aria-disabled")}))),this},ariaIsDisabled:function(){return this.is("[disabled]")}})}(),jQuery.extend({wikiWithOptions:function(options){for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)sources[_key-1]=arguments[_key];if(0!==sources.length){var frag=document.createDocumentFragment();sources.forEach((function(content){return new Wikifier(frag,content,options)}));var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "))}},wiki:function(){for(var _len2=arguments.length,sources=new Array(_len2),_key2=0;_key2<_len2;_key2++)sources[_key2]=arguments[_key2];this.wikiWithOptions.apply(this,[undefined].concat(sources))}}),jQuery.fn.extend({wikiWithOptions:function(options){for(var _len3=arguments.length,sources=new Array(_len3>1?_len3-1:0),_key3=1;_key3<_len3;_key3++)sources[_key3-1]=arguments[_key3];if(0===this.length||0===sources.length)return this;var frag=document.createDocumentFragment();return sources.forEach((function(content){return new Wikifier(frag,content,options)})),this.append(frag),this},wiki:function(){for(var _len4=arguments.length,sources=new Array(_len4),_key4=0;_key4<_len4;_key4++)sources[_key4]=arguments[_key4];return this.wikiWithOptions.apply(this,[undefined].concat(sources))}});var Util=function(){var toString,utilGetType="[object Object]"===(toString=Object.prototype.toString).call(new Map)?function(O){if(null===O)return"null";if(O instanceof Map)return"Map";if(O instanceof Set)return"Set";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType}:function(O){if(null===O)return"null";var baseType=_typeof(O);return"object"===baseType?toString.call(O).slice(8,-1):baseType};function utilToEnum(obj){var pEnum=Object.create(null);if(obj instanceof Array)obj.forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Set)Array.from(obj).forEach((function(val,i){return pEnum[String(val)]=i}));else if(obj instanceof Map)obj.forEach((function(val,key){return pEnum[String(key)]=val}));else{if("object"!==_typeof(obj)||null===obj||Object.getPrototypeOf(obj)!==Object.prototype)throw new TypeError("Util.toEnum obj parameter must be an Array, Map, Set, or generic object");Object.assign(pEnum,obj)}return Object.freeze(pEnum)}function utilToStringTag(obj){return Object.prototype.toString.call(obj).slice(8,-1)}var _illegalSlugCharsRe=/[\x00-\x20!-/:-@[-^`{-\x9f]+/g,_isInvalidSlugRe=/^-*$/;var _illegalFilenameCharsRE=/[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g;var _markupCharsRe=/[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,_hasMarkupCharsRe=new RegExp(_markupCharsRe.source),_markupCharsMap=utilToEnum({"!":"&#33;",'"':"&quot;","#":"&#35;",$:"&#36;","&":"&amp;","'":"&#39;","*":"&#42;","-":"&#45;","/":"&#47;","<":"&lt;","=":"&#61;",">":"&gt;","?":"&#63;","@":"&#64;","[":"&#91;","\\":"&#92;","]":"&#93;","^":"&#94;",_:"&#95;","`":"&#96;","{":"&#123;","|":"&#124;","}":"&#125;","~":"&#126;"});var _htmlCharsRe=/[&<>"'`]/g,_hasHtmlCharsRe=new RegExp(_htmlCharsRe.source),_htmlCharsMap=utilToEnum({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"});function utilEscape(str){if(null==str)return"";var val=String(str);return val&&_hasHtmlCharsRe.test(val)?val.replace(_htmlCharsRe,(function(ch){return _htmlCharsMap[ch]})):val}var _escapedHtmlRe=/&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,_hasEscapedHtmlRe=new RegExp(_escapedHtmlRe.source,"i"),_escapedHtmlMap=utilToEnum({"&amp;":"&","&#38;":"&","&#x26;":"&","&lt;":"<","&#60;":"<","&#x3c;":"<","&gt;":">","&#62;":">","&#x3e;":">","&quot;":'"',"&#34;":'"',"&#x22;":'"',"&apos;":"'","&#39;":"'","&#x27;":"'","&#96;":"`","&#x60;":"`"});function utilUnescape(str){if(null==str)return"";var val=String(str);return val&&_hasEscapedHtmlRe.test(val)?val.replace(_escapedHtmlRe,(function(entity){return _escapedHtmlMap[entity.toLowerCase()]})):val}var _nowSource=Has.performance?performance:Date;var _cssTimeRe=/^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;var utilScrubEventKey=function(){var separatorKey,decimalKey;if("undefined"!=typeof Intl&&"function"==typeof Intl.NumberFormat){var match=(new Intl.NumberFormat).format(111111.5).match(/(\D*)\d+(\D*)/);match&&(separatorKey=match[1],decimalKey=match[2])}return separatorKey||decimalKey||(separatorKey=",",decimalKey="."),function(key){switch(key){case"Scroll":return"ScrollLock";case"Spacebar":return" ";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp";case"Down":return"ArrowDown";case"Del":return"Delete";case"Crsel":return"CrSel";case"Exsel":return"ExSel";case"Esc":return"Escape";case"Apps":return"ContextMenu";case"Nonconvert":return"NonConvert";case"MediaNextTrack":return"MediaTrackNext";case"MediaPreviousTrack":return"MediaTrackPrevious";case"VolumeUp":return"AudioVolumeUp";case"VolumeDown":return"AudioVolumeDown";case"VolumeMute":return"AudioVolumeMute";case"Zoom":return"ZoomToggle";case"SelectMedia":case"MediaSelect":return"LaunchMediaPlayer";case"Add":return"+";case"Divide":return"/";case"Multiply":return"*";case"Subtract":return"-";case"Decimal":return decimalKey;case"Separator":return separatorKey}return key}}(),utilHasMediaQuery="function"!=typeof window.matchMedia?function(){return!1}:function(mediaQuery){return window.matchMedia(mediaQuery).matches};return Object.freeze(Object.defineProperties({},{getType:{value:utilGetType},isBoolean:{value:function(obj){return"boolean"==typeof obj||"string"==typeof obj&&("true"===obj||"false"===obj)}},isIterable:{value:function(obj){return null!=obj&&"function"==typeof obj[Symbol.iterator]}},isNumeric:{value:function(obj){var num;switch(_typeof(obj)){case"number":num=obj;break;case"string":num=Number(obj);break;default:return!1}return!Number.isNaN(num)&&Number.isFinite(num)}},sameValueZero:{value:function(a,b){return a===b||a!=a&&b!=b}},toEnum:{value:utilToEnum},toStringTag:{value:utilToStringTag},slugify:{value:function(str){var base=String(str).trim(),_legacy=base.replace(/[^\w\s\u2013\u2014-]+/g,"").replace(/[_\s\u2013\u2014-]+/g,"-").toLocaleLowerCase();return _isInvalidSlugRe.test(_legacy)?base.replace(_illegalSlugCharsRe,"").replace(/[_\s\u2013\u2014-]+/g,"-"):_legacy}},sanitizeFilename:{value:function(str){return String(str).trim().replace(_illegalFilenameCharsRE,"")}},escapeMarkup:{value:function(str){if(null==str)return"";var val=String(str);return val&&_hasMarkupCharsRe.test(val)?val.replace(_markupCharsRe,(function(ch){return _markupCharsMap[ch]})):val}},escape:{value:utilEscape},unescape:{value:utilUnescape},charAndPosAt:{value:function(text,position){var str=String(text),pos=Math.trunc(position),code=str.charCodeAt(pos);if(Number.isNaN(code))return{char:"",start:-1,end:-1};var retval={char:str.charAt(pos),start:pos,end:pos};if(code<55296||code>57343)return retval;if(code>=55296&&code<=56319){var nextPos=pos+1;if(nextPos>=str.length)return retval;var nextCode=str.charCodeAt(nextPos);return nextCode<56320||nextCode>57343||(retval.char=retval.char+str.charAt(nextPos),retval.end=nextPos),retval}if(0===pos)return retval;var prevPos=pos-1,prevCode=str.charCodeAt(prevPos);return prevCode<55296||prevCode>56319||(retval.char=str.charAt(prevPos)+retval.char,retval.start=prevPos),retval}},now:{value:function(){return _nowSource.now()}},fromCssTime:{value:function(cssTime){var match=_cssTimeRe.exec(String(cssTime));if(null===match)throw new SyntaxError('invalid time value syntax: "'.concat(cssTime,'"'));var msec=Number(match[1]);if(1===match[2].length&&(msec*=1e3),Number.isNaN(msec)||!Number.isFinite(msec))throw new RangeError('invalid time value: "'.concat(cssTime,'"'));return msec}},toCssTime:{value:function(msec){if("number"!=typeof msec||Number.isNaN(msec)||!Number.isFinite(msec)){var what;switch(_typeof(msec)){case"string":what='"'.concat(msec,'"');break;case"number":what=String(msec);break;default:what=utilToStringTag(msec)}throw new Error("invalid milliseconds: ".concat(what))}return"".concat(msec,"ms")}},fromCssProperty:{value:function(cssName){if(!cssName.includes("-"))switch(cssName){case"bgcolor":return"backgroundColor";case"float":return"cssFloat";default:return cssName}return("-ms-"===cssName.slice(0,4)?cssName.slice(1):cssName).split("-").map((function(part,i){return 0===i?part:part.toUpperFirst()})).join("")}},parseUrl:{value:function(url){var el=document.createElement("a"),queryObj=Object.create(null);el.href=url,el.search&&el.search.replace(/^\?/,"").splitOrEmpty(/(?:&(?:amp;)?|;)/).forEach((function(query){var _query$split2=_slicedToArray(query.split("="),2),key=_query$split2[0],value=_query$split2[1];queryObj[key]=value}));var pathname=el.host&&"/"!==el.pathname[0]?"/".concat(el.pathname):el.pathname;return{href:el.href,protocol:el.protocol,host:el.host,hostname:el.hostname,port:el.port,path:"".concat(pathname).concat(el.search),pathname:pathname,query:el.search,search:el.search,queries:queryObj,searches:queryObj,hash:el.hash}}},newExceptionFrom:{value:function(original,exceptionType,override){if("object"!==_typeof(original)||null===original)throw new Error("Util.newExceptionFrom original parameter must be an object");if("function"!=typeof exceptionType)throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");var ex=new exceptionType(original.message);void 0!==original.name&&(ex.name=original.name),void 0!==original.code&&(ex.code=original.code),void 0!==original.columnNumber&&(ex.columnNumber=original.columnNumber),void 0!==original.description&&(ex.description=original.description),void 0!==original.fileName&&(ex.fileName=original.fileName),void 0!==original.lineNumber&&(ex.lineNumber=original.lineNumber),void 0!==original.number&&(ex.number=original.number),void 0!==original.stack&&(ex.stack=original.stack);var overrideType=_typeof(override);if("undefined"!==overrideType)if("object"===overrideType&&null!==override)Object.assign(ex,override);else{if("string"!==overrideType)throw new Error("Util.newExceptionFrom override parameter must be an object or string");ex.message=override}return ex}},scrubEventKey:{value:utilScrubEventKey},hasMediaQuery:{value:utilHasMediaQuery},random:{value:Math.random},entityEncode:{value:utilEscape},entityDecode:{value:utilUnescape},evalExpression:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),SimpleStore=(_adapters=[],_initialized=null,Object.freeze(Object.defineProperties({},{adapters:{value:_adapters},create:{value:function(storageId,persistent){if(_initialized)return _initialized.create(storageId,persistent);for(var i=0;i<_adapters.length;++i)if(_adapters[i].init(storageId,persistent))return(_initialized=_adapters[i]).create(storageId,persistent);throw new Error("no valid storage adapters found")}}}))),_adapters,_initialized,_ok,_WebStorageAdapter;SimpleStore.adapters.push((_ok=!1,_WebStorageAdapter=function(){function _WebStorageAdapter(storageId,persistent){_classCallCheck(this,_WebStorageAdapter);var prefix="".concat(storageId,"."),engine=null,name=null;persistent?(engine=window.localStorage,name="localStorage"):(engine=window.sessionStorage,name="sessionStorage"),Object.defineProperties(this,{_engine:{value:engine},_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:name},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_WebStorageAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){for(var keys=[],i=0;i<this._engine.length;++i){var key=this._engine.key(i);this._prefixRe.test(key)&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&this._engine.hasOwnProperty(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=this._engine.getItem(this._prefix+key);return null==value?null:_WebStorageAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{this._engine.setItem(this._prefix+key,_WebStorageAdapter._serialize(value))}catch(ex){if(/quota.?(?:exceeded|reached)/i.test(ex.name+ex.message))throw Util.newExceptionFrom(ex,Error,"".concat(this.name," quota exceeded"));throw ex}return!0}},{key:"delete",value:function(key){return!("string"!=typeof key||!key||(this._engine.removeItem(this._prefix+key),0))}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_serialize",value:function(obj){return LZString.compressToUTF16(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromUTF16(str))}}]),_WebStorageAdapter}(),Object.freeze(Object.defineProperties({},{init:{value:function(){function hasWebStorage(storeId){try{var store=window[storeId],tid="_sc_".concat(String(Date.now()));store.setItem(tid,tid);var result=store.getItem(tid)===tid;return store.removeItem(tid),result}catch(ex){}return!1}return _ok=hasWebStorage("localStorage")&&hasWebStorage("sessionStorage")}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _WebStorageAdapter(storageId,persistent)}}})))),SimpleStore.adapters.push(function(){var _MAX_EXPIRY="Tue, 19 Jan 2038 03:14:07 GMT",_MIN_EXPIRY="Thu, 01 Jan 1970 00:00:00 GMT",_ok=!1,_CookieAdapter=function(){function _CookieAdapter(storageId,persistent){_classCallCheck(this,_CookieAdapter);var prefix="".concat(storageId).concat(persistent?"!":"*",".");Object.defineProperties(this,{_prefix:{value:prefix},_prefixRe:{value:new RegExp("^".concat(RegExp.escape(prefix)))},name:{value:"cookie"},id:{value:storageId},persistent:{value:!!persistent}})}return _createClass(_CookieAdapter,[{key:"length",get:function(){return this.keys().length}},{key:"size",value:function(){return this.keys().length}},{key:"keys",value:function(){if(""===document.cookie)return[];for(var cookies=document.cookie.split(/;\s*/),keys=[],i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(this._prefixRe.test(key))""!==decodeURIComponent(kvPair[1])&&keys.push(key.replace(this._prefixRe,""))}return keys}},{key:"has",value:function(key){return!("string"!=typeof key||!key)&&null!==_CookieAdapter._getCookie(this._prefix+key)}},{key:"get",value:function(key){if("string"!=typeof key||!key)return null;var value=_CookieAdapter._getCookie(this._prefix+key);return null===value?null:_CookieAdapter._deserialize(value)}},{key:"set",value:function(key,value){if("string"!=typeof key||!key)return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,_CookieAdapter._serialize(value),this.persistent?"Tue, 19 Jan 2038 03:14:07 GMT":undefined),!this.has(key))throw new Error("unknown validation error during set")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"delete",value:function(key){if("string"!=typeof key||!key||!this.has(key))return!1;try{if(_CookieAdapter._setCookie(this._prefix+key,undefined,_MIN_EXPIRY),this.has(key))throw new Error("unknown validation error during delete")}catch(ex){throw Util.newExceptionFrom(ex,Error,"cookie error: ".concat(ex.message))}return!0}},{key:"clear",value:function(){for(var keys=this.keys(),i=0,iend=keys.length;i<iend;++i)this.delete(keys[i]);return!0}}],[{key:"_getCookie",value:function(prefixedKey){if(!prefixedKey||""===document.cookie)return null;for(var cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("=");if(prefixedKey===decodeURIComponent(kvPair[0]))return decodeURIComponent(kvPair[1])||null}return null}},{key:"_setCookie",value:function(prefixedKey,value,expiry){if(prefixedKey){var payload="".concat(encodeURIComponent(prefixedKey),"=");null!=value&&(payload+=encodeURIComponent(value)),null!=expiry&&(payload+="; expires=".concat(expiry)),payload+="; path=/",document.cookie=payload}}},{key:"_serialize",value:function(obj){return LZString.compressToBase64(JSON.stringify(obj))}},{key:"_deserialize",value:function(str){return JSON.parse(LZString.decompressFromBase64(str))}}]),_CookieAdapter}();return Object.freeze(Object.defineProperties({},{init:{value:function(storageId){try{var tid="_sc_".concat(String(Date.now()));_CookieAdapter._setCookie(tid,_CookieAdapter._serialize(tid),undefined),_ok=_CookieAdapter._deserialize(_CookieAdapter._getCookie(tid))===tid,_CookieAdapter._setCookie(tid,undefined,_MIN_EXPIRY)}catch(ex){_ok=!1}return _ok&&function(storageId){if(""===document.cookie)return;for(var oldPrefix="".concat(storageId,"."),oldPrefixRe=new RegExp("^".concat(RegExp.escape(oldPrefix))),persistPrefix="".concat(storageId,"!."),sessionPrefix="".concat(storageId,"*."),sessionTestRe=/\.(?:state|rcWarn)$/,cookies=document.cookie.split(/;\s*/),i=0;i<cookies.length;++i){var kvPair=cookies[i].split("="),key=decodeURIComponent(kvPair[0]);if(oldPrefixRe.test(key)){var value=decodeURIComponent(kvPair[1]);""!==value&&function(){var persist=!sessionTestRe.test(key);_CookieAdapter._setCookie(key,undefined,_MIN_EXPIRY),_CookieAdapter._setCookie(key.replace(oldPrefixRe,(function(){return persist?persistPrefix:sessionPrefix})),value,persist?_MAX_EXPIRY:undefined)}()}}}(storageId),_ok}},create:{value:function(storageId,persistent){if(!_ok)throw new Error("adapter not initialized");return new _CookieAdapter(storageId,persistent)}}}))}());var DebugView=function(){function DebugView(parent,type,name,title){_classCallCheck(this,DebugView),Object.defineProperties(this,{parent:{value:parent},view:{value:document.createElement("span")},break:{value:document.createElement("wbr")}}),jQuery(this.view).attr({title:title,"aria-label":title,"data-type":null!=type?type:"","data-name":null!=name?name:""}).addClass("debug"),jQuery(this.break).addClass("debug hidden"),this.parent.appendChild(this.view),this.parent.appendChild(this.break)}return _createClass(DebugView,[{key:"output",get:function(){return this.view}},{key:"type",get:function(){return this.view.getAttribute("data-type")},set:function(type){this.view.setAttribute("data-type",null!=type?type:"")}},{key:"name",get:function(){return this.view.getAttribute("data-name")},set:function(name){this.view.setAttribute("data-name",null!=name?name:"")}},{key:"title",get:function(){return this.view.title},set:function(title){this.view.title=title}},{key:"append",value:function(el){return jQuery(this.view).append(el),this}},{key:"modes",value:function(options){if(null==options){var current={};return this.view.className.splitOrEmpty(/\s+/).forEach((function(name){"debug"!==name&&(current[name]=!0)})),current}if("object"===_typeof(options))return Object.keys(options).forEach((function(name){this[options[name]?"addClass":"removeClass"](name)}),jQuery(this.view)),this;throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")}},{key:"remove",value:function(){var $view=jQuery(this.view);this.view.hasChildNodes()&&$view.contents().appendTo(this.parent),$view.remove(),jQuery(this.break).remove()}}],[{key:"isEnabled",value:function(){return"enabled"===jQuery(document.documentElement).attr("data-debug-view")}},{key:"enable",value:function(){jQuery(document.documentElement).attr("data-debug-view","enabled"),jQuery.event.trigger(":debugviewupdate")}},{key:"disable",value:function(){jQuery(document.documentElement).removeAttr("data-debug-view"),jQuery.event.trigger(":debugviewupdate")}},{key:"toggle",value:function(){"enabled"===jQuery(document.documentElement).attr("data-debug-view")?DebugView.disable():DebugView.enable()}}]),DebugView}(),NodeTyper=function(){var NodeTyper=function(){function NodeTyper(config){if(_classCallCheck(this,NodeTyper),"object"!==_typeof(config)||null===config)throw new Error("config parameter must be an object (received: ".concat(Util.getType(config),")"));if(!(config.hasOwnProperty("targetNode")&&config.targetNode instanceof Node))throw new Error('config parameter object "targetNode" property must be a node');Object.defineProperties(this,{node:{value:config.targetNode},childNodes:{value:[]},nodeValue:{writable:!0,value:""},appendTo:{writable:!0,value:config.parentNode||null},classNames:{writable:!0,value:config.classNames||null},finished:{writable:!0,value:!1}});var childNode,node=this.node;for(node.nodeValue&&(this.nodeValue=node.nodeValue,node.nodeValue="");null!==(childNode=node.firstChild);)this.childNodes.push(new NodeTyper({targetNode:childNode,parentNode:node,classNames:this.classNames})),node.removeChild(childNode)}return _createClass(NodeTyper,[{key:"finish",value:function(){for(;this.type(!0););return!1}},{key:"type",value:function(flush){if(this.finished)return!1;if(this.appendTo){if(this.appendTo.appendChild(this.node),this.appendTo=null,this.node.nodeType!==Node.ELEMENT_NODE&&this.node.nodeType!==Node.TEXT_NODE||"none"===jQuery(this.node.parentNode).css("display"))return this.finish();this.node.parentNode&&this.classNames&&jQuery(this.node.parentNode).addClass(this.classNames)}if(this.nodeValue){if(flush)this.node.nodeValue+=this.nodeValue,this.nodeValue="";else{var _Util$charAndPosAt=Util.charAndPosAt(this.nodeValue,0),char=_Util$charAndPosAt.char,start=_Util$charAndPosAt.start,end=_Util$charAndPosAt.end;this.node.nodeValue+=char,this.nodeValue=this.nodeValue.slice(1+end-start)}return!0}this.classNames&&(jQuery(this.node.parentNode).removeClass(this.classNames),this.classNames=null);for(var childNodes=this.childNodes;childNodes.length>0;){if(childNodes[0].type())return!0;childNodes.shift()}return this.finished=!0,!1}}]),NodeTyper}();return NodeTyper}(),PRNGWrapper=function(){function PRNGWrapper(seed,useEntropy){_classCallCheck(this,PRNGWrapper),Object.defineProperties(this,new Math.seedrandom(seed,useEntropy,(function(prng,seed){return{_prng:{value:prng},seed:{writable:!0,value:seed},pull:{writable:!0,value:0},random:{value:function(){return++this.pull,this._prng()}}}})))}return _createClass(PRNGWrapper,null,[{key:"marshal",value:function(prng){if(!prng||!prng.hasOwnProperty("seed")||!prng.hasOwnProperty("pull"))throw new Error("PRNG is missing required data");return{seed:prng.seed,pull:prng.pull}}},{key:"unmarshal",value:function(prngObj){if(!prngObj||!prngObj.hasOwnProperty("seed")||!prngObj.hasOwnProperty("pull"))throw new Error("PRNG object is missing required data");for(var prng=new PRNGWrapper(prngObj.seed,!1),i=prngObj.pull;i>0;--i)prng.random();return prng}}]),PRNGWrapper}(),StyleWrapper=(_imageMarkupRe=new RegExp(Patterns.cssImage,"g"),_hasImageMarkupRe=new RegExp(Patterns.cssImage),function(){function StyleWrapper(style){if(_classCallCheck(this,StyleWrapper),null==style)throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");Object.defineProperties(this,{style:{value:style}})}return _createClass(StyleWrapper,[{key:"isEmpty",value:function(){return 0===this.style.cssRules.length}},{key:"set",value:function(rawCss){this.clear(),this.add(rawCss)}},{key:"add",value:function(rawCss){var css=rawCss;_hasImageMarkupRe.test(css)&&(_imageMarkupRe.lastIndex=0,css=css.replace(_imageMarkupRe,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text.trim())}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),this.style.styleSheet?this.style.styleSheet.cssText+=css:this.style.appendChild(document.createTextNode(css))}},{key:"clear",value:function(){this.style.styleSheet?this.style.styleSheet.cssText="":jQuery(this.style).empty()}}]),StyleWrapper}()),_imageMarkupRe,_hasImageMarkupRe,Diff=(Op=Util.toEnum({Delete:0,SpliceArray:1,Copy:2,CopyDate:3}),Object.freeze(Object.defineProperties({},{Op:{value:Op},diff:{value:function diff(orig,dest){for(var aOpRef,objToString=Object.prototype.toString,origIsArray=orig instanceof Array,keys=[].concat(Object.keys(orig),Object.keys(dest)).sort().filter((function(val,i,arr){return 0===i||arr[i-1]!==val})),diffed={},keyIsAOpRef=function(key){return key===aOpRef},i=0,klen=keys.length;i<klen;++i){var key=keys[i],origP=orig[key],destP=dest[key];if(orig.hasOwnProperty(key))if(dest.hasOwnProperty(key)){if(origP===destP)continue;if(_typeof(origP)===_typeof(destP))if("function"==typeof origP)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,destP]);else if("object"!==_typeof(origP)||null===origP)diffed[key]=[Op.Copy,destP];else{var origPType=objToString.call(origP);if(origPType===objToString.call(destP))if(origP instanceof Date)Number(origP)!==Number(destP)&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Map)diffed[key]=[Op.Copy,clone(destP)];else if(origP instanceof RegExp)origP.toString()!==destP.toString()&&(diffed[key]=[Op.Copy,clone(destP)]);else if(origP instanceof Set)diffed[key]=[Op.Copy,clone(destP)];else if("[object Object]"!==origPType)diffed[key]=[Op.Copy,clone(destP)];else{var recurse=diff(origP,destP);null!==recurse&&(diffed[key]=recurse)}else diffed[key]=[Op.Copy,clone(destP)]}else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}else if(origIsArray&&Util.isNumeric(key)){var nKey=Number(key);if(!aOpRef){aOpRef="";do{aOpRef+="~"}while(keys.some(keyIsAOpRef));diffed[aOpRef]=[Op.SpliceArray,nKey,nKey]}nKey<diffed[aOpRef][1]&&(diffed[aOpRef][1]=nKey),nKey>diffed[aOpRef][2]&&(diffed[aOpRef][2]=nKey)}else diffed[key]=Op.Delete;else diffed[key]=[Op.Copy,"object"!==_typeof(destP)||null===destP?destP:clone(destP)]}return Object.keys(diffed).length>0?diffed:null}},patch:{value:function patch(orig,diffed){for(var keys=Object.keys(diffed||{}),patched=clone(orig),i=0,klen=keys.length;i<klen;++i){var key=keys[i],diffedP=diffed[key];if(diffedP===Op.Delete)delete patched[key];else if(diffedP instanceof Array)switch(diffedP[0]){case Op.SpliceArray:patched.splice(diffedP[1],diffedP[2]-diffedP[1]+1);break;case Op.Copy:patched[key]=clone(diffedP[1]);break;case Op.CopyDate:patched[key]=new Date(diffedP[1])}else patched[key]=patch(patched[key],diffedP)}return patched}}}))),Op,L10n=(_patternRe=/\{\w+\}/g,_hasPatternRe=new RegExp(_patternRe.source),Object.freeze(Object.defineProperties({},{init:{value:function(){strings&&Object.keys(strings).length>0&&Object.keys(l10nStrings).forEach((function(id){try{var value;switch(id){case"identity":value=strings.identity;break;case"aborting":value=strings.aborting;break;case"cancel":value=strings.cancel;break;case"close":value=strings.close;break;case"ok":value=strings.ok;break;case"errorTitle":value=strings.errors.title;break;case"errorNonexistentPassage":value=strings.errors.nonexistentPassage;break;case"errorSaveMissingData":value=strings.errors.saveMissingData;break;case"errorSaveIdMismatch":value=strings.errors.saveIdMismatch;break;case"warningDegraded":value=strings.warnings.degraded;break;case"debugViewTitle":value=strings.debugView.title;break;case"debugViewToggle":value=strings.debugView.toggle;break;case"uiBarToggle":value=strings.uiBar.toggle;break;case"uiBarBackward":value=strings.uiBar.backward;break;case"uiBarForward":value=strings.uiBar.forward;break;case"uiBarJumpto":value=strings.uiBar.jumpto;break;case"jumptoTitle":value=strings.jumpto.title;break;case"jumptoTurn":value=strings.jumpto.turn;break;case"jumptoUnavailable":value=strings.jumpto.unavailable;break;case"savesTitle":value=strings.saves.title;break;case"savesDisallowed":value=strings.saves.disallowed;break;case"savesIncapable":value=strings.saves.incapable;break;case"savesLabelAuto":value=strings.saves.labelAuto;break;case"savesLabelDelete":value=strings.saves.labelDelete;break;case"savesLabelExport":value=strings.saves.labelExport;break;case"savesLabelImport":value=strings.saves.labelImport;break;case"savesLabelLoad":value=strings.saves.labelLoad;break;case"savesLabelClear":value=strings.saves.labelClear;break;case"savesLabelSave":value=strings.saves.labelSave;break;case"savesLabelSlot":value=strings.saves.labelSlot;break;case"savesUnavailable":value=strings.saves.unavailable;break;case"savesUnknownDate":value=strings.saves.unknownDate;break;case"settingsTitle":value=strings.settings.title;break;case"settingsOff":value=strings.settings.off;break;case"settingsOn":value=strings.settings.on;break;case"settingsReset":value=strings.settings.reset;break;case"restartTitle":value=strings.restart.title;break;case"restartPrompt":value=strings.restart.prompt;break;case"shareTitle":value=strings.share.title;break;case"alertTitle":break;case"autoloadTitle":value=strings.autoload.title;break;case"autoloadCancel":value=strings.autoload.cancel;break;case"autoloadOk":value=strings.autoload.ok;break;case"autoloadPrompt":value=strings.autoload.prompt;break;case"macroBackText":value=strings.macros.back.text;break;case"macroReturnText":value=strings.macros.return.text}value&&(l10nStrings[id]=value.replace(/%\w+%/g,(function(pat){return"{".concat(pat.slice(1,-1),"}")})))}catch(ex){}}))}},get:{value:function(ids,overrides){if(!ids)return"";var selectedId,id=((Array.isArray(ids)?ids:[ids]).some((function(id){return!!l10nStrings.hasOwnProperty(id)&&(selectedId=id,!0)})),selectedId);if(!id)return"";for(var processed=l10nStrings[id],iteration=0;_hasPatternRe.test(processed);){if(++iteration>50)throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");_patternRe.lastIndex=0,processed=processed.replace(_patternRe,(function(pat){var subId=pat.slice(1,-1);return overrides&&overrides.hasOwnProperty(subId)?overrides[subId]:l10nStrings.hasOwnProperty(subId)?l10nStrings[subId]:void 0}))}return processed}}}))),_patternRe,_hasPatternRe,strings={errors:{},warnings:{},debugView:{},uiBar:{},jumpto:{},saves:{},settings:{},restart:{},share:{},autoload:{},macros:{back:{},return:{}}},l10nStrings={identity:"game",aborting:"Aborting",cancel:"Cancel",close:"Close",ok:"OK",errorTitle:"Error",errorToggle:"Toggle the error view",errorNonexistentPassage:'the passage "{passage}" does not exist',errorSaveDiskLoadFailed:"failed to load save file from disk",errorSaveMissingData:"save is missing required data. Either the loaded file is not a save or the save has become corrupted",errorSaveIdMismatch:"save is from the wrong {identity}",_warningIntroLacking:"Your browser either lacks or has disabled",_warningOutroDegraded:", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",warningNoWebStorage:"{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",warningDegraded:"{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",debugBarToggle:"Toggle the debug bar",debugBarNoWatches:"— no watches set —",debugBarAddWatch:"Add watch",debugBarDeleteWatch:"Delete watch",debugBarWatchAll:"Watch all",debugBarWatchNone:"Delete all",debugBarLabelAdd:"Add",debugBarLabelWatch:"Watch",debugBarLabelTurn:"Turn",debugBarLabelViews:"Views",debugBarViewsToggle:"Toggle the debug views",debugBarWatchToggle:"Toggle the watch panel",uiBarToggle:"Toggle the UI bar",uiBarBackward:"Go backward within the {identity} history",uiBarForward:"Go forward within the {identity} history",uiBarJumpto:"Jump to a specific point within the {identity} history",jumptoTitle:"Jump To",jumptoTurn:"Turn",jumptoUnavailable:"No jump points currently available…",savesTitle:"Saves",savesDisallowed:"Saving has been disallowed on this passage.",savesIncapable:"{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",savesLabelAuto:"Autosave",savesLabelDelete:"Delete",savesLabelExport:"Save to Disk…",savesLabelImport:"Load from Disk…",savesLabelLoad:"Load",savesLabelClear:"Delete All",savesLabelSave:"Save",savesLabelSlot:"Slot",savesUnavailable:"No save slots found…",savesUnknownDate:"unknown",settingsTitle:"Settings",settingsOff:"Off",settingsOn:"On",settingsReset:"Reset to Defaults",restartTitle:"Restart",restartPrompt:"Are you sure that you want to restart? Unsaved progress will be lost.",shareTitle:"Share",alertTitle:"Alert",autoloadTitle:"Autoload",autoloadCancel:"Go to start",autoloadOk:"Load autosave",autoloadPrompt:"An autosave exists. Load it now or go to the start?",macroBackText:"Back",macroReturnText:"Return"},Config=(_debug=!1,_addVisitedLinkClass=!1,_cleanupWikifierOutput=!1,_loadDelay=0,_audioPauseOnFadeToZero=!0,_audioPreloadMetadata=!0,_historyControls=!0,_historyMaxStates=40,_macrosIfAssignmentError=!0,_macrosMaxLoopIterations=1e3,_macrosTypeSkipKey=" ",_macrosTypeVisitedPassages=!0,_passagesDisplayTitles=!1,_passagesNobr=!1,_savesId="untitled-story",_savesSlots=8,_savesTryDiskOnMobile=!0,_uiStowBarInitially=800,_uiUpdateStoryElements=!0,_errHistoryModeDeprecated="Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code",Object.freeze({get debug(){return _debug},set debug(value){_debug=Boolean(value)},get addVisitedLinkClass(){return _addVisitedLinkClass},set addVisitedLinkClass(value){_addVisitedLinkClass=Boolean(value)},get cleanupWikifierOutput(){return _cleanupWikifierOutput},set cleanupWikifierOutput(value){_cleanupWikifierOutput=Boolean(value)},get loadDelay(){return _loadDelay},set loadDelay(value){if(!Number.isSafeInteger(value)||value<0)throw new RangeError("Config.loadDelay must be a non-negative integer");_loadDelay=value},audio:Object.freeze({get pauseOnFadeToZero(){return _audioPauseOnFadeToZero},set pauseOnFadeToZero(value){_audioPauseOnFadeToZero=Boolean(value)},get preloadMetadata(){return _audioPreloadMetadata},set preloadMetadata(value){_audioPreloadMetadata=Boolean(value)}}),history:Object.freeze({get controls(){return _historyControls},set controls(value){var controls=Boolean(value);if(1===_historyMaxStates&&controls)throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");_historyControls=controls},get maxStates(){return _historyMaxStates},set maxStates(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.history.maxStates must be a positive integer");_historyMaxStates=value,_historyControls&&1===value&&(_historyControls=!1)},get mode(){throw new Error(_errHistoryModeDeprecated)},set mode(_){throw new Error(_errHistoryModeDeprecated)},get tracking(){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")},set tracking(_){throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")}}),macros:Object.freeze({get ifAssignmentError(){return _macrosIfAssignmentError},set ifAssignmentError(value){_macrosIfAssignmentError=Boolean(value)},get maxLoopIterations(){return _macrosMaxLoopIterations},set maxLoopIterations(value){if(!Number.isSafeInteger(value)||value<1)throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");_macrosMaxLoopIterations=value},get typeSkipKey(){return _macrosTypeSkipKey},set typeSkipKey(value){_macrosTypeSkipKey=String(value)},get typeVisitedPassages(){return _macrosTypeVisitedPassages},set typeVisitedPassages(value){_macrosTypeVisitedPassages=Boolean(value)}}),navigation:Object.freeze({get override(){return _navigationOverride},set override(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_navigationOverride=value}}),passages:Object.freeze({get descriptions(){return _passagesDescriptions},set descriptions(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"Object"!==valueType&&"function"!==valueType)throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(valueType,")"))}_passagesDescriptions=value},get displayTitles(){return _passagesDisplayTitles},set displayTitles(value){_passagesDisplayTitles=Boolean(value)},get nobr(){return _passagesNobr},set nobr(value){_passagesNobr=Boolean(value)},get onProcess(){return _passagesOnProcess},set onProcess(value){if(null!=value){var valueType=Util.getType(value);if("function"!==valueType)throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType,")"))}_passagesOnProcess=value},get start(){return _passagesStart},set start(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType)throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType,")"))}_passagesStart=value},get transitionOut(){return _passagesTransitionOut},set transitionOut(value){if(null!=value){var valueType=Util.getType(value);if("string"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType,")"))}_passagesTransitionOut=value}}),saves:Object.freeze({get autoload(){return _savesAutoload},set autoload(value){if(null!=value){var valueType=Util.getType(value);if("boolean"!==valueType&&"string"!==valueType&&"function"!==valueType)throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: ".concat(valueType,")"))}_savesAutoload=value},get autosave(){return _savesAutosave},set autosave(value){if(null!=value){var valueType=Util.getType(value);if("string"===valueType)return void(_savesAutosave=[value]);if("boolean"!==valueType&&("Array"!==valueType||!value.every((function(item){return"string"==typeof item})))&&"function"!==valueType)throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType).concat("Array"===valueType?"<any>":"",")"))}_savesAutosave=value},get id(){return _savesId},set id(value){if("string"!=typeof value||""===value)throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(Util.getType(value),")"));_savesId=value},get isAllowed(){return _savesIsAllowed},set isAllowed(value){if(!(null==value||value instanceof Function))throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(Util.getType(value),")"));_savesIsAllowed=value},get slots(){return _savesSlots},set slots(value){if(!Number.isSafeInteger(value)||value<0)throw new TypeError("Config.saves.slots must be a non-negative integer (received: ".concat(Util.getType(value),")"));_savesSlots=value},get tryDiskOnMobile(){return _savesTryDiskOnMobile},set tryDiskOnMobile(value){_savesTryDiskOnMobile=Boolean(value)},get version(){return _savesVersion},set version(value){_savesVersion=value},get onLoad(){throw new Error("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead")},set onLoad(value){console.warn("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead"),Save.onLoad.add(value)},get onSave(){throw new Error("Config.saves.onSave has been deprecated, use the Save.onSave API instead")},set onSave(value){console.warn("Config.saves.onSave has been deprecated, use the Save.onSave API instead"),Save.onSave.add(value)}}),ui:Object.freeze({get stowBarInitially(){return _uiStowBarInitially},set stowBarInitially(value){var valueType=Util.getType(value);if("boolean"!==valueType&&("number"!==valueType||!Number.isSafeInteger(value)||value<0))throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType,")"));_uiStowBarInitially=value},get updateStoryElements(){return _uiUpdateStoryElements},set updateStoryElements(value){_uiUpdateStoryElements=Boolean(value)}})})),_navigationOverride,_passagesDescriptions,_passagesStart,_passagesOnProcess,_passagesTransitionOut,_savesAutoload,_savesAutosave,_savesIsAllowed,_savesVersion,_debug,_addVisitedLinkClass,_cleanupWikifierOutput,_loadDelay,_audioPauseOnFadeToZero,_audioPreloadMetadata,_historyControls,_historyMaxStates,_macrosIfAssignmentError,_macrosMaxLoopIterations,_macrosTypeSkipKey,_macrosTypeVisitedPassages,_passagesDisplayTitles,_passagesNobr,_savesId,_savesSlots,_savesTryDiskOnMobile,_uiStowBarInitially,_uiUpdateStoryElements,_errHistoryModeDeprecated,SimpleAudio=function(){var _hasPromise,_gestureEventNames=Object.freeze(["click","contextmenu","dblclick","keyup","mouseup","pointerup","touchend"]),_specialIds=Object.freeze([":not",":all",":looped",":muted",":paused",":playing"]),_formatSpecRe=/^([\w-]+)\s*\|\s*(\S.*)$/,_badIdRe=/[:\s]/,_tracks=new Map,_groups=new Map,_lists=new Map,_subscribers=new Map,_masterRate=1,_masterVolume=1,_masterMute=!1,_masterMuteOnHidden=!1,_playReturnsPromise=(_hasPromise=null,function(){if(null!==_hasPromise)return _hasPromise;if(_hasPromise=!1,Has.audio)try{var audio=document.createElement("audio");audio.muted=!0;var value=audio.play();value.catch((function(){})),_hasPromise=value instanceof Promise}catch(ex){}return _hasPromise}),AudioTrack=function(){function AudioTrack(obj){if(_classCallCheck(this,AudioTrack),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioTrack))throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioTrack,[{key:"_create",value:function(sourceList){var dataUriRe=/^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,extRe=/\.([^./\\]+)$/,formats=AudioTrack.formats,usedSources=[],audio=document.createElement("audio");audio.preload="none",sourceList.forEach((function(src){var srcUri=null;switch(_typeof(src)){case"string":var match;if("data:"===src.slice(0,5)){if(null===(match=dataUriRe.exec(src)))throw new Error("source data URI missing media type")}else if(null===(match=extRe.exec(Util.parseUrl(src).pathname)))throw new Error("source URL missing file extension");formats[match[1]]&&(srcUri=src);break;case"object":if(null===src)throw new Error("source object cannot be null");if(!src.hasOwnProperty("src"))throw new Error('source object missing required "src" property');if(!src.hasOwnProperty("format"))throw new Error('source object missing required "format" property');formats[src.format]&&(srcUri=src.src);break;default:throw new Error("invalid source value (type: ".concat(_typeof(src),")"))}if(null!==srcUri){var source=document.createElement("source");source.src=srcUri,audio.appendChild(source),usedSources.push(srcUri)}})),audio.hasChildNodes()&&Config.audio.preloadMetadata&&(audio.preload="metadata"),this._finalize(audio,usedSources,clone(sourceList))}},{key:"_copy",value:function(obj){this._finalize(obj.audio.cloneNode(!0),clone(obj.sources),clone(obj.originals))}},{key:"_finalize",value:function(audio,sources,originals){var _this3=this;Object.defineProperties(this,{audio:{configurable:!0,value:audio},sources:{value:Object.freeze(sources)},originals:{value:Object.freeze(originals)},_error:{writable:!0,value:!1},_faderId:{writable:!0,value:null},_mute:{writable:!0,value:!1},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1}}),jQuery(this.audio).on("loadstart.AudioTrack",(function(){return _this3._error=!1})).on("error.AudioTrack",(function(){return _this3._error=!0})).find("source:last-of-type").on("error.AudioTrack",(function(){return _this3._trigger("error")})),function(id,callback){if("function"!=typeof callback)throw new Error("callback parameter must be a function");_subscribers.set(id,callback)}(this,(function(mesg){if(_this3.audio)switch(mesg){case"loadwithscreen":if(_this3.hasSource()){var lockId=LoadScreen.lock();_this3.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen",(function(){jQuery(this).off(".AudioTrack_loadwithscreen"),LoadScreen.unlock(lockId)})).load()}break;case"load":_this3.load();break;case"mute":_this3._updateAudioMute();break;case"rate":_this3._updateAudioRate();break;case"stop":_this3.stop();break;case"volume":_this3._updateAudioVolume();break;case"unload":_this3.unload()}else unsubscribe(_this3)})),this._updateAudioMute(),this._updateAudioRate(),this._updateAudioVolume()}},{key:"_trigger",value:function(eventName){jQuery(this.audio).triggerHandler(eventName)}},{key:"_destroy",value:function(){unsubscribe(this),this.audio&&(jQuery(this.audio).off(),this.unload(),this._error=!0,delete this.audio)}},{key:"clone",value:function(){return new AudioTrack(this)}},{key:"load",value:function(){var _this4=this;if(this.fadeStop(),this.audio.pause(),!this.audio.hasChildNodes()){if(0===this.sources.length)return;this.sources.forEach((function(srcUri){var source=document.createElement("source");source.src=srcUri,_this4.audio.appendChild(source)}))}"auto"!==this.audio.preload&&(this.audio.preload="auto"),this.isLoading()||this.audio.load()}},{key:"unload",value:function(){this.fadeStop(),this.stop();var audio=this.audio;for(audio.preload="none";audio.hasChildNodes();)audio.removeChild(audio.firstChild);audio.load()}},{key:"play",value:function(){var _this5=this;if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));"auto"!==this.audio.preload&&(this.audio.preload="auto");var namespace=".AudioTrack_play";return _playReturnsPromise()?this.audio.play():new Promise((function(resolve,reject){_this5.isPlaying()?resolve():(jQuery(_this5.audio).off(namespace).one("error".concat(namespace," playing").concat(namespace," timeupdate").concat(namespace),(function(ev){jQuery(_this5).off(namespace),"error"===ev.type?reject(new Error("unknown audio play error")):resolve()})),_this5.audio.play())}))}},{key:"playWhenAllowed",value:function(){var _this6=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioTrack_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioTrack_playWhenAllowed"),_this6.audio.play()}))}))}},{key:"pause",value:function(){this.audio.pause()}},{key:"stop",value:function(){this.audio.pause(),this.time(0),this._trigger(":stopped")}},{key:"fade",value:function(duration,toVol,fromVol){var _this7=this;if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(!this.hasSource())return Promise.reject(new Error("none of the candidate sources were acceptable"));if(this.isUnloaded())return Promise.reject(new Error("no sources are loaded"));if(this.isFailed())return Promise.reject(new Error("failed to load any of the sources"));this.fadeStop();var from=Math.clamp(null==fromVol?this.volume():fromVol,0,1),to=Math.clamp(toVol,0,1);return from!==to?(this.volume(from),jQuery(this.audio).off("timeupdate.AudioTrack_fade").one("timeupdate.AudioTrack_fade",(function(){var min,max;from<to?(min=from,max=to):(min=to,max=from);var time=Math.max(duration,1),delta=(to-from)/(time/.025);_this7._trigger(":fading"),_this7._faderId=setInterval((function(){_this7.isPlaying()?(_this7.volume(Math.clamp(_this7.volume()+delta,min,max)),Config.audio.pauseOnFadeToZero&&0===_this7.volume()&&_this7.pause(),_this7.volume()===to&&(_this7.fadeStop(),_this7._trigger(":faded"))):_this7.fadeStop()}),25)})),this.play()):void 0}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this._faderId&&(clearInterval(this._faderId),this._faderId=null)}},{key:"loop",value:function(_loop){return null==_loop?this.audio.loop:(this.audio.loop=!!_loop,this)}},{key:"mute",value:function(_mute){return null==_mute?this._mute:(this._mute=!!_mute,this._updateAudioMute(),this)}},{key:"_updateAudioMute",value:function(){this.audio.muted=this._mute||_masterMute}},{key:"rate",value:function(_rate){if(null==_rate)return this._rate;if("number"!=typeof _rate)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate,.2,5),this._updateAudioRate(),this}},{key:"_updateAudioRate",value:function(){this.audio.playbackRate=Math.clamp(this._rate*_masterRate,.2,5)}},{key:"time",value:function(_time){var _this8=this;if(null==_time)return this.audio.currentTime;if("number"!=typeof _time)throw new TypeError("time parameter must be a number");return this.hasMetadata()?this.audio.currentTime=_time:jQuery(this.audio).off("loadedmetadata.AudioTrack_time").one("loadedmetadata.AudioTrack_time",(function(){return _this8.audio.currentTime=_time})),this}},{key:"volume",value:function(_volume){if(null==_volume)return this._volume;if("number"!=typeof _volume)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume,0,1),this._updateAudioVolume(),this}},{key:"_updateAudioVolume",value:function(){this.audio.volume=Math.clamp(this._volume*_masterVolume,0,1)}},{key:"duration",value:function(){return this.audio.duration}},{key:"remaining",value:function(){return this.audio.duration-this.audio.currentTime}},{key:"isFailed",value:function(){return this._error}},{key:"isLoading",value:function(){return this.audio.networkState===HTMLMediaElement.NETWORK_LOADING}},{key:"isUnloaded",value:function(){return!this.audio.hasChildNodes()}},{key:"isUnavailable",value:function(){return!this.hasSource()||this.isUnloaded()||this.isFailed()}},{key:"isPlaying",value:function(){return!this.audio.paused&&this.hasSomeData()}},{key:"isPaused",value:function(){return this.audio.paused&&(this.audio.duration===1/0||this.audio.currentTime>0)&&!this.audio.ended}},{key:"isStopped",value:function(){return this.audio.paused&&0===this.audio.currentTime}},{key:"isEnded",value:function(){return this.audio.ended}},{key:"isFading",value:function(){return null!==this._faderId}},{key:"isSeeking",value:function(){return this.audio.seeking}},{key:"hasSource",value:function(){return this.sources.length>0}},{key:"hasNoData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_NOTHING}},{key:"hasMetadata",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_METADATA}},{key:"hasSomeData",value:function(){return this.audio.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA}},{key:"hasData",value:function(){return this.audio.readyState===HTMLMediaElement.HAVE_ENOUGH_DATA}},{key:"on",value:function(){for(var _len5=arguments.length,args=new Array(_len5),_key5=0;_key5<_len5;_key5++)args[_key5]=arguments[_key5];return jQuery.fn.on.apply(jQuery(this.audio),args),this}},{key:"one",value:function(){for(var _len6=arguments.length,args=new Array(_len6),_key6=0;_key6<_len6;_key6++)args[_key6]=arguments[_key6];return jQuery.fn.one.apply(jQuery(this.audio),args),this}},{key:"off",value:function(){for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++)args[_key7]=arguments[_key7];return jQuery.fn.off.apply(jQuery(this.audio),args),this}}]),AudioTrack}();Object.defineProperties(AudioTrack,{formats:{value:function(){var audio=document.createElement("audio"),types=new Map;function canPlay(mimeType){return types.has(mimeType)||types.set(mimeType,""!==audio.canPlayType(mimeType).replace(/^no$/i,"")),types.get(mimeType)}return Object.assign(Object.create(null),{aac:canPlay("audio/aac"),caf:canPlay("audio/x-caf")||canPlay("audio/caf"),flac:canPlay("audio/x-flac")||canPlay("audio/flac"),mp3:canPlay('audio/mpeg; codecs="mp3"')||canPlay("audio/mpeg")||canPlay("audio/mp3")||canPlay("audio/mpa"),mpeg:canPlay("audio/mpeg"),m4a:canPlay("audio/x-m4a")||canPlay("audio/m4a")||canPlay("audio/aac"),mp4:canPlay("audio/x-mp4")||canPlay("audio/mp4")||canPlay("audio/aac"),ogg:canPlay("audio/ogg"),oga:canPlay("audio/ogg"),opus:canPlay('audio/ogg; codecs="opus"')||canPlay("audio/opus"),wav:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),wave:canPlay('audio/wave; codecs="1"')||canPlay('audio/wav; codecs="1"')||canPlay("audio/wave")||canPlay("audio/wav"),weba:canPlay("audio/webm"),webm:canPlay("audio/webm")})}()}});var AudioList=function(){function AudioList(obj){if(_classCallCheck(this,AudioList),obj instanceof Array)this._create(obj);else{if(!(obj instanceof AudioList))throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");this._copy(obj)}}return _createClass(AudioList,[{key:"_create",value:function(trackList){var _this9=this;this._finalize(trackList.map((function(trackObj){if("object"!==_typeof(trackObj))throw new Error("tracks parameter array members must be objects");var own,rate,track,volume;if(trackObj instanceof AudioTrack)own=!0,rate=trackObj.rate(),track=trackObj.clone(),volume=trackObj.volume();else{if(!trackObj.hasOwnProperty("track"))throw new Error('track object missing required "track" property');if(!(trackObj.track instanceof AudioTrack))throw new Error('track object\'s "track" property must be an AudioTrack object');own=trackObj.hasOwnProperty("own")&&trackObj.own,rate=trackObj.hasOwnProperty("rate")?trackObj.rate:trackObj.track.rate(),track=trackObj.track,volume=trackObj.hasOwnProperty("volume")?trackObj.volume:trackObj.track.volume()}return track.stop(),track.loop(!1),track.mute(!1),track.rate(rate),track.volume(volume),track.on("ended.AudioList",(function(){return _this9._onEnd()})),{own:own,track:track,volume:volume,rate:rate}})))}},{key:"_copy",value:function(obj){this._finalize(clone(obj.tracks))}},{key:"_finalize",value:function(tracks){Object.defineProperties(this,{tracks:{configurable:!0,value:Object.freeze(tracks)},queue:{configurable:!0,value:[]},current:{writable:!0,value:null},_rate:{writable:!0,value:1},_volume:{writable:!0,value:1},_mute:{writable:!0,value:!1},_loop:{writable:!0,value:!1},_shuffle:{writable:!0,value:!1}})}},{key:"_destroy",value:function(){this.stop(),this.tracks.filter((function(trackObj){return trackObj.own})).forEach((function(trackObj){return trackObj.track._destroy()})),delete this.tracks,delete this.queue}},{key:"load",value:function(){this.tracks.forEach((function(trackObj){return trackObj.track.load()}))}},{key:"unload",value:function(){this.stop(),this.tracks.forEach((function(trackObj){return trackObj.track.unload()}))}},{key:"play",value:function(){return null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||(0===this.queue.length&&this._fillQueue(),this._next())?this.current.track.play():Promise.reject(new Error("no tracks were available"))}},{key:"playWhenAllowed",value:function(){var _this10=this;this.play().catch((function(){var gestures=_gestureEventNames.map((function(name){return"".concat(name,".AudioList_playWhenAllowed")})).join(" ");jQuery(document).one(gestures,(function(){jQuery(document).off(".AudioList_playWhenAllowed"),_this10.play()}))}))}},{key:"pause",value:function(){null!==this.current&&this.current.track.pause()}},{key:"stop",value:function(){null!==this.current&&(this.current.track.stop(),this.current=null),this._drainQueue()}},{key:"skip",value:function(){this._next()?this.current.track.play():this._loop&&this.play()}},{key:"fade",value:function(duration,toVol,fromVol){if("number"!=typeof duration)throw new TypeError("duration parameter must be a number");if("number"!=typeof toVol)throw new TypeError("toVolume parameter must be a number");if(null!=fromVol&&"number"!=typeof fromVol)throw new TypeError("fromVolume parameter must be a number");if(0===this.queue.length&&this._fillQueue(),null!==this.current&&!this.current.track.isUnavailable()&&!this.current.track.isEnded()||this._next()){var adjFromVol,adjToVol=Math.clamp(toVol,0,1)*this.current.volume;return null!=fromVol&&(adjFromVol=Math.clamp(fromVol,0,1)*this.current.volume),this._volume=toVol,this.current.track.fade(duration,adjToVol,adjFromVol)}}},{key:"fadeIn",value:function(duration,fromVol){return this.fade(duration,1,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){return this.fade(duration,0,fromVol)}},{key:"fadeStop",value:function(){null!==this.current&&this.current.track.fadeStop()}},{key:"loop",value:function(_loop2){return null==_loop2?this._loop:(this._loop=!!_loop2,this)}},{key:"mute",value:function(_mute2){return null==_mute2?this._mute:(this._mute=!!_mute2,null!==this.current&&this.current.track.mute(this._mute),this)}},{key:"rate",value:function(_rate2){if(null==_rate2)return this._rate;if("number"!=typeof _rate2)throw new TypeError("rate parameter must be a number");return this._rate=Math.clamp(_rate2,.2,5),null!==this.current&&this.current.track.rate(this._rate*this.current.rate),this}},{key:"shuffle",value:function(_shuffle){var _this11=this;if(null==_shuffle)return this._shuffle;if(this._shuffle=!!_shuffle,this.queue.length>0&&(this._fillQueue(),!this._shuffle&&null!==this.current&&this.queue.length>1)){var _this$queue,firstIdx=this.queue.findIndex((function(trackObj){return trackObj===_this11.current}));if(-1!==firstIdx)(_this$queue=this.queue).push.apply(_this$queue,_toConsumableArray(this.queue.splice(0,firstIdx+1)))}return this}},{key:"volume",value:function(_volume2){if(null==_volume2)return this._volume;if("number"!=typeof _volume2)throw new TypeError("volume parameter must be a number");return this._volume=Math.clamp(_volume2,0,1),null!==this.current&&this.current.track.volume(this._volume*this.current.volume),this}},{key:"duration",value:function(){if(arguments.length>0)throw new Error("duration takes no parameters");return this.tracks.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0)}},{key:"remaining",value:function(){if(arguments.length>0)throw new Error("remaining takes no parameters");var remainingTime=this.queue.map((function(trackObj){return trackObj.track.duration()})).reduce((function(prev,cur){return prev+cur}),0);return null!==this.current&&(remainingTime+=this.current.track.remaining()),remainingTime}},{key:"time",value:function(){if(arguments.length>0)throw new Error("time takes no parameters");return this.duration()-this.remaining()}},{key:"isPlaying",value:function(){return null!==this.current&&this.current.track.isPlaying()}},{key:"isPaused",value:function(){return null===this.current||this.current.track.isPaused()}},{key:"isStopped",value:function(){return 0===this.queue.length&&null===this.current}},{key:"isEnded",value:function(){return 0===this.queue.length&&(null===this.current||this.current.track.isEnded())}},{key:"isFading",value:function(){return null!==this.current&&this.current.track.isFading()}},{key:"_next",value:function(){var nextTrack;for(null!==this.current&&(this.current.track.stop(),this.current=null);nextTrack=this.queue.shift();)if(!nextTrack.track.isUnavailable()){this.current=nextTrack;break}return null!==this.current&&(this.current.track.mute(this._mute),this.current.track.rate(this._rate*this.current.rate),this.current.track.volume(this._volume*this.current.volume),this.current.track.loop(!1),!0)}},{key:"_onEnd",value:function(){if(0===this.queue.length){if(!this._loop)return;this._fillQueue()}this._next()&&this.current.track.play()}},{key:"_drainQueue",value:function(){this.queue.splice(0)}},{key:"_fillQueue",value:function(){var _this$queue2;this._drainQueue(),(_this$queue2=this.queue).push.apply(_this$queue2,_toConsumableArray(this.tracks.filter((function(trackObj){return!trackObj.track.isUnavailable()})))),0!==this.queue.length&&this._shuffle&&(this.queue.shuffle(),this.queue.length>1&&this.queue[0]===this.current&&this.queue.push(this.queue.shift()))}}]),AudioList}(),AudioRunner=function(){function AudioRunner(list){if(_classCallCheck(this,AudioRunner),!(list instanceof Set||list instanceof AudioRunner))throw new TypeError("list parameter must be a Set or a AudioRunner instance");Object.defineProperties(this,{trackIds:{value:new Set(list instanceof AudioRunner?list.trackIds:list)}})}return _createClass(AudioRunner,[{key:"load",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.load)}},{key:"unload",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.unload)}},{key:"play",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.play)}},{key:"playWhenAllowed",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.playWhenAllowed)}},{key:"pause",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.pause)}},{key:"stop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.stop)}},{key:"fade",value:function(duration,toVol,fromVol){if(null==duration||null==toVol)throw new Error("fade requires parameters");AudioRunner._run(this.trackIds,AudioTrack.prototype.fade,duration,toVol,fromVol)}},{key:"fadeIn",value:function(duration,fromVol){if(null==duration)throw new Error("fadeIn requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeIn,duration,fromVol)}},{key:"fadeOut",value:function(duration,fromVol){if(null==duration)throw new Error("fadeOut requires a parameter");AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeOut,duration,fromVol)}},{key:"fadeStop",value:function(){AudioRunner._run(this.trackIds,AudioTrack.prototype.fadeStop)}},{key:"loop",value:function(_loop3){if(null==_loop3)throw new Error("loop requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.loop,_loop3),this}},{key:"mute",value:function(_mute3){if(null==_mute3)throw new Error("mute requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.mute,_mute3),this}},{key:"rate",value:function(_rate3){if(null==_rate3)throw new Error("rate requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.rate,_rate3),this}},{key:"time",value:function(_time2){if(null==_time2)throw new Error("time requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.time,_time2),this}},{key:"volume",value:function(_volume3){if(null==_volume3)throw new Error("volume requires a parameter");return AudioRunner._run(this.trackIds,AudioTrack.prototype.volume,_volume3),this}},{key:"on",value:function(){for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++)args[_key8]=arguments[_key8];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.on].concat(args)),this}},{key:"one",value:function(){for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++)args[_key9]=arguments[_key9];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.one].concat(args)),this}},{key:"off",value:function(){for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++)args[_key10]=arguments[_key10];return AudioRunner._run.apply(AudioRunner,[this.trackIds,AudioTrack.prototype.off].concat(args)),this}}],[{key:"_run",value:function(ids,fn){for(var _len11=arguments.length,args=new Array(_len11>2?_len11-2:0),_key11=2;_key11<_len11;_key11++)args[_key11-2]=arguments[_key11];ids.forEach((function(id){var track=_tracks.get(id);track&&fn.apply(track,args)}))}}]),AudioRunner}();var _runnerParseSelector=function(){var notWsRe=/\S/g,parenRe=/[()]/g;function processNegation(str,startPos){var match;if(notWsRe.lastIndex=startPos,null===(match=notWsRe.exec(str))||"("!==match[0])throw new Error('invalid ":not()" syntax: missing parentheticals');parenRe.lastIndex=notWsRe.lastIndex;for(var start=notWsRe.lastIndex,result={str:"",nextMatch:-1},depth=1;null!==(match=parenRe.exec(str));)if("("===match[0]?++depth:--depth,depth<1){result.nextMatch=parenRe.lastIndex,result.str=str.slice(start,result.nextMatch-1);break}return result}return function parseSelector(idArg){for(var match,ids=[],idRe=/:?[^\s:()]+/g;null!==(match=idRe.exec(idArg));){var id=match[0];if(":not"===id){if(0===ids.length)throw new Error('invalid negation: no group ID preceded ":not()"');var parent=ids[ids.length-1];if(":"!==parent.id[0])throw new Error('invalid negation of track "'.concat(parent.id,'": only groups may be negated with ":not()"'));var negation=processNegation(idArg,idRe.lastIndex);if(-1===negation.nextMatch)throw new Error('unknown error parsing ":not()"');idRe.lastIndex=negation.nextMatch,parent.not=parseSelector(negation.str)}else ids.push({id:id})}return ids}}();function masterMute(mute){if(null==mute)return _masterMute;publish("mute",_masterMute=!!mute)}function unsubscribe(id){_subscribers.delete(id)}function publish(mesg,data){_subscribers.forEach((function(fn){return fn(mesg,data)}))}function _newTrack(sources){return new AudioTrack(sources.map((function(source){if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);if(passage.tags.includes("Twine.audio"))return passage.text.trim()}var match=_formatSpecRe.exec(source);return null===match?source:{format:match[1],src:match[2]}})))}return Object.freeze(Object.defineProperties({},{tracks:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("track ID"),arguments.length<2&&errors.push("sources"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='track ID "'.concat(id,'"');if(_badIdRe.test(id))throw new Error("invalid ".concat(what,": track IDs must not contain colons or whitespace"));var track,sources=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{track=_newTrack(sources)}catch(ex){throw new Error("".concat(what,": error during track initialization: ").concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("".concat(what,": no supported audio sources found"));_tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.set(id,track)}},delete:{value:function(id){return _tracks.has(id)&&_tracks.get(id)._destroy(),_tracks.delete(id)}},clear:{value:function(){_tracks.forEach((function(track){return track._destroy()})),_tracks.clear()}},has:{value:function(id){return _tracks.has(id)}},get:{value:function(id){return _tracks.get(id)||null}}}))},groups:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("group ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='group ID "'.concat(id,'"');if(":"!==id[0]||_badIdRe.test(id.slice(1)))throw new Error("invalid ".concat(what,": group IDs must start with a colon and must not contain colons or whitespace"));if(_specialIds.includes(id))throw new Error("cannot clobber special ".concat(what));var group,trackIds=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{group=new Set(trackIds.map((function(trackId){if(!_tracks.has(trackId))throw new Error('track "'.concat(trackId,'" does not exist'));return trackId})))}catch(ex){throw new Error("".concat(what,": error during group initialization: ").concat(ex.message))}_groups.set(id,Object.freeze(Array.from(group)))}},delete:{value:function(id){return _groups.delete(id)}},clear:{value:function(){_groups.clear()}},has:{value:function(id){return _groups.has(id)}},get:{value:function(id){return _groups.get(id)||null}}}))},lists:{value:Object.freeze(Object.defineProperties({},{add:{value:function(){if(arguments.length<2){var errors=[];throw arguments.length<1&&errors.push("list ID"),arguments.length<2&&errors.push("track IDs"),new Error("no ".concat(errors.join(" or ")," specified"))}var id=String(arguments[0]).trim(),what='list ID "'.concat(id,'"');if(_badIdRe.test(id))return this.error("invalid ".concat(what,": list IDs must not contain colons or whitespace"));var list,descriptors=Array.isArray(arguments[1])?Array.from(arguments[1]):Array.from(arguments).slice(1);try{list=new AudioList(descriptors.map((function(desc){if(null===desc)throw new Error("track descriptor must be a string or object (type: null)");switch(_typeof(desc)){case"string":desc={id:desc};break;case"object":if(!desc.hasOwnProperty("id")&&!desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain one of either an "id" or a "sources" property');if(desc.hasOwnProperty("id")&&desc.hasOwnProperty("sources"))throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');break;default:throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc),")"))}var own,track,volume;if(desc.hasOwnProperty("id")){if("string"!=typeof desc.id)throw new Error('"id" property must be a string');if(!_tracks.has(desc.id))throw new Error('track "'.concat(desc.id,'" does not exist'));track=_tracks.get(desc.id)}else if(desc.hasOwnProperty("sources")){if(!Array.isArray(desc.sources)||0===desc.sources.length)throw new Error('"sources" property must be a non-empty array');if(desc.hasOwnProperty("own"))throw new Error('"own" property is not allowed with the "sources" property');try{track=_newTrack(desc.sources),own=!0}catch(ex){throw new Error("error during track initialization: ".concat(ex.message))}if(Config.debug&&!track.hasSource())throw new Error("no supported audio sources found")}if(desc.hasOwnProperty("own")){if("boolean"!=typeof desc.own)throw new Error('"own" property must be a boolean');(own=desc.own)&&(track=track.clone())}if(desc.hasOwnProperty("volume")){if("number"!=typeof desc.volume||Number.isNaN(desc.volume)||!Number.isFinite(desc.volume)||desc.volume<0)throw new Error('"volume" property must be a non-negative finite number');volume=desc.volume}return{own:null!=own&&own,track:track,volume:null!=volume?volume:track.volume()}})))}catch(ex){throw new Error("".concat(what,": error during playlist initialization: ").concat(ex.message))}_lists.has(id)&&_lists.get(id)._destroy(),_lists.set(id,list)}},delete:{value:function(id){return _lists.has(id)&&_lists.get(id)._destroy(),_lists.delete(id)}},clear:{value:function(){_lists.forEach((function(list){return list._destroy()})),_lists.clear()}},has:{value:function(id){return _lists.has(id)}},get:{value:function(id){return _lists.get(id)||null}}}))},select:{value:function(){if(0===arguments.length)throw new Error("no track selector specified");var selector=String(arguments[0]).trim(),trackIds=new Set;try{var renderIds=function renderIds(idObj){var ids,id=idObj.id;switch(id){case":all":ids=allIds;break;case":looped":ids=allIds.filter((function(id){return _tracks.get(id).loop()}));break;case":muted":ids=allIds.filter((function(id){return _tracks.get(id).mute()}));break;case":paused":ids=allIds.filter((function(id){return _tracks.get(id).isPaused()}));break;case":playing":ids=allIds.filter((function(id){return _tracks.get(id).isPlaying()}));break;default:ids=":"===id[0]?_groups.get(id):[id]}if(idObj.hasOwnProperty("not")){var negated=idObj.not.map((function(idObj){return renderIds(idObj)})).flat(1/0);ids=ids.filter((function(id){return!negated.includes(id)}))}return ids},allIds=Array.from(_tracks.keys());_runnerParseSelector(selector).forEach((function(idObj){return renderIds(idObj).forEach((function(id){if(!_tracks.has(id))throw new Error('track "'.concat(id,'" does not exist'));trackIds.add(id)}))}))}catch(ex){throw new Error("error during runner initialization: ".concat(ex.message))}return new AudioRunner(trackIds)}},load:{value:function(){publish("load")}},loadWithScreen:{value:function(){publish("loadwithscreen")}},mute:{value:masterMute},muteOnHidden:{value:function(mute){if(!Visibility.isEnabled())return!1;if(null==mute)return _masterMuteOnHidden;var namespace=".SimpleAudio_masterMuteOnHidden";if(_masterMuteOnHidden=!!mute){var visibilityChange="".concat(Visibility.changeEvent).concat(namespace);jQuery(document).off(namespace).on(visibilityChange,(function(){return masterMute(Visibility.isHidden())})),Visibility.isHidden()&&masterMute(!0)}else jQuery(document).off(namespace)}},rate:{value:function(rate){if(null==rate)return _masterRate;if("number"!=typeof rate||Number.isNaN(rate)||!Number.isFinite(rate))throw new Error("rate must be a finite number");publish("rate",_masterRate=Math.clamp(rate,.2,5))}},stop:{value:function(){publish("stop")}},unload:{value:function(){publish("unload")}},volume:{value:function(volume){if(null==volume)return _masterVolume;if("number"!=typeof volume||Number.isNaN(volume)||!Number.isFinite(volume))throw new Error("volume must be a finite number");publish("volume",_masterVolume=Math.clamp(volume,0,1))}}}))}(),State=function(){var _history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null,_tempVariables={};function stateMarshal(noDelta){var stateObj={index:_activeIndex};return noDelta?stateObj.history=clone(_history):stateObj.delta=historyDeltaEncode(_history),_expired.length>0&&(stateObj.expired=_toConsumableArray(_expired)),null!==_prng&&(stateObj.seed=_prng.seed),stateObj}function stateUnmarshal(stateObj,noDelta){if(null==stateObj)throw new Error("state object is null or undefined");if(!stateObj.hasOwnProperty(noDelta?"history":"delta")||0===stateObj[noDelta?"history":"delta"].length)throw new Error("state object has no history or history is empty");if(!stateObj.hasOwnProperty("index"))throw new Error("state object has no index");if(null!==_prng&&!stateObj.hasOwnProperty("seed"))throw new Error("state object has no seed, but PRNG is enabled");if(null===_prng&&stateObj.hasOwnProperty("seed"))throw new Error("state object has seed, but PRNG is disabled");_history=noDelta?clone(stateObj.history):historyDeltaDecode(stateObj.delta),_activeIndex=stateObj.index,_expired=stateObj.hasOwnProperty("expired")?_toConsumableArray(stateObj.expired):[],stateObj.hasOwnProperty("seed")&&(_prng.seed=stateObj.seed),momentActivate(_activeIndex)}function momentCreate(title,variables){return{title:null==title?"":String(title),variables:null==variables?{}:clone(variables)}}function momentActivate(moment){if(null==moment)throw new Error("moment activation attempted with null or undefined");switch(_typeof(moment)){case"object":_active=clone(moment);break;case"number":if(historyIsEmpty())throw new Error("moment activation attempted with index on empty history");if(moment<0||moment>=historySize())throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize()-1,"], got ").concat(moment));_active=clone(_history[moment]);break;default:throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment),'"; must be an object or valid history stack index'))}return null!==_prng&&(_prng=PRNGWrapper.unmarshal({seed:_prng.seed,pull:_active.pull})),session.set("state",stateMarshal()),jQuery.event.trigger(":historyupdate"),_active}function historyLength(){return _activeIndex+1}function historySize(){return _history.length}function historyIsEmpty(){return 0===_history.length}function historyTop(){return _history.length>0?_history[_history.length-1]:null}function historyGoTo(index){return!(null==index||index<0||index>=historySize()||index===_activeIndex)&&(momentActivate(_activeIndex=index),!0)}function historyDeltaEncode(historyArr){if(!Array.isArray(historyArr))return null;if(0===historyArr.length)return[];for(var delta=[historyArr[0]],i=1,iend=historyArr.length;i<iend;++i)delta.push(Diff.diff(historyArr[i-1],historyArr[i]));return delta}function historyDeltaDecode(delta){if(!Array.isArray(delta))return null;if(0===delta.length)return[];for(var historyArr=[clone(delta[0])],i=1,iend=delta.length;i<iend;++i)historyArr.push(Diff.patch(historyArr[i-1],delta[i]));return historyArr}function prngInit(seed,useEntropy){var scriptSection;if(!historyIsEmpty())throw scriptSection="the Story JavaScript",new Error("State.prng.init must be called during initialization, within either ".concat(scriptSection," or the StoryInit special passage"));_prng=new PRNGWrapper(seed,useEntropy),_active.pull=_prng.pull}function metadataDelete(key){if("string"!=typeof key)throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");store&&store.hasOwnProperty(key)&&(1===Object.keys(store).length?storage.delete("metadata"):(delete store[key],storage.set("metadata",store)))}return Object.freeze(Object.defineProperties({},{reset:{value:function(){session.delete("state"),_history=[],_active=momentCreate(),_activeIndex=-1,_expired=[],_prng=null===_prng?null:new PRNGWrapper(_prng.seed,!1)}},restore:{value:function(){if(session.has("state")){var stateObj=session.get("state");return null!=stateObj&&(stateUnmarshal(stateObj),!0)}return!1}},marshalForSave:{value:function(){return stateMarshal(!0)}},unmarshalForSave:{value:function(stateObj){return stateUnmarshal(stateObj,!0)}},expired:{get:function(){return _expired}},turns:{get:function(){return _expired.length+historyLength()}},passages:{get:function(){return _expired.concat(_history.slice(0,historyLength()).map((function(moment){return moment.title})))}},hasPlayed:{value:function(title){return null!=title&&""!==title&&(!!_expired.includes(title)||!!_history.slice(0,historyLength()).some((function(moment){return moment.title===title})))}},active:{get:function(){return _active}},activeIndex:{get:function(){return _activeIndex}},passage:{get:function(){return _active.title}},variables:{get:function(){return _active.variables}},history:{get:function(){return _history}},length:{get:historyLength},size:{get:historySize},isEmpty:{value:historyIsEmpty},current:{get:function(){return _history.length>0?_history[_activeIndex]:null}},top:{get:historyTop},bottom:{get:function(){return _history.length>0?_history[0]:null}},index:{value:function(index){return historyIsEmpty()||index<0||index>_activeIndex?null:_history[index]}},peek:{value:function(offset){if(historyIsEmpty())return null;var lengthOffset=1+(offset?Math.abs(offset):0);return lengthOffset>historyLength()?null:_history[historyLength()-lengthOffset]}},has:{value:function(title){if(historyIsEmpty()||null==title||""===title)return!1;for(var i=_activeIndex;i>=0;--i)if(_history[i].title===title)return!0;return!1}},create:{value:function(title){for(0,historyLength()<historySize()&&_history.splice(historyLength(),historySize()-historyLength()),_history.push(momentCreate(title,_active.variables)),_prng&&(historyTop().pull=_prng.pull);historySize()>Config.history.maxStates;)_expired.push(_history.shift().title);return momentActivate(_activeIndex=historySize()-1),historyLength()}},goTo:{value:historyGoTo},go:{value:function(offset){return null!=offset&&0!==offset&&historyGoTo(_activeIndex+offset)}},deltaEncode:{value:historyDeltaEncode},deltaDecode:{value:historyDeltaDecode},prng:{value:Object.freeze(Object.defineProperties({},{init:{value:prngInit},isEnabled:{value:function(){return null!==_prng}},pull:{get:function(){return _prng?_prng.pull:NaN}},seed:{get:function(){return _prng?_prng.seed:null}}}))},random:{value:function(){return _prng?_prng.random():Math.random()}},clearTemporary:{value:function(){TempVariables=_tempVariables={}}},temporary:{get:function(){return _tempVariables}},getVar:{value:function(varExpression){try{return Scripting.evalTwineScript(varExpression)}catch(ex){}}},setVar:{value:function(varExpression,value){try{return Scripting.evalTwineScript("".concat(varExpression," = evalTwineScript$Data$"),null,value),!0}catch(ex){}return!1}},metadata:{value:Object.freeze(Object.defineProperties({},{clear:{value:function(){storage.delete("metadata")}},delete:{value:metadataDelete},entries:{value:function(){var store=storage.get("metadata");return store&&Object.entries(store)}},get:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)?store[key]:undefined}},has:{value:function(key){if("string"!=typeof key)throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key),")"));var store=storage.get("metadata");return store&&store.hasOwnProperty(key)}},keys:{value:function(){var store=storage.get("metadata");return store&&Object.keys(store)}},set:{value:function(key,value){if("string"!=typeof key)throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key),")"));if(void 0===value)metadataDelete(key);else{var store=storage.get("metadata")||{};store[key]=value,storage.set("metadata",store)}}},size:{get:function(){var store=storage.get("metadata");return store?Object.keys(store).length:0}}}))},initPRNG:{value:prngInit},restart:{value:function(){return Engine.restart()}},backward:{value:function(){return Engine.backward()}},forward:{value:function(){return Engine.forward()}},display:{value:function(){return Engine.display.apply(Engine,arguments)}},show:{value:function(){return Engine.show.apply(Engine,arguments)}},play:{value:function(){return Engine.play.apply(Engine,arguments)}}}))}(),Scripting=function(){function addAccessibleClickHandler(targets,selector,handler,one,namespace){if(arguments.length<2)throw new Error("addAccessibleClickHandler insufficient number of parameters");var fn,opts;if("function"==typeof selector?(fn=selector,opts={namespace:one,one:!!handler}):(fn=handler,opts={namespace:namespace,one:!!one,selector:selector}),"function"!=typeof fn)throw new TypeError("addAccessibleClickHandler handler parameter must be a function");return jQuery(targets).ariaClick(opts,fn)}function insertElement(place,type,id,classNames,text,title){var $el=jQuery(document.createElement(type));return id&&$el.attr("id",id),classNames&&$el.addClass(classNames),title&&$el.attr("title",title),text&&$el.text(text),place&&$el.appendTo(place),$el[0]}function insertText(place,text){jQuery(place).append(document.createTextNode(text))}function removeChildren(node){jQuery(node).empty()}function removeElement(node){jQuery(node).remove()}function fade(el,options){var current,intervalId,direction="in"===options.fade?1:-1,proxy=el.cloneNode(!0);function setOpacity(el,opacity){el.style.zoom=1,el.style.filter="alpha(opacity=".concat(Math.floor(100*opacity),")"),el.style.opacity=opacity}el.parentNode.replaceChild(proxy,el),"in"===options.fade?(current=0,proxy.style.visibility="visible"):current=1,setOpacity(proxy,current),intervalId=window.setInterval((function(){current+=.05*direction,setOpacity(proxy,Math.easeInOut(current)),(1===direction&&current>=1||-1===direction&&current<=0)&&(el.style.visibility="in"===options.fade?"visible":"hidden",proxy.parentNode.replaceChild(el,proxy),proxy=null,window.clearInterval(intervalId),options.onComplete&&options.onComplete())}),25)}function scrollWindowTo(el,incrementBy){var increment=null!=incrementBy?Number(incrementBy):.1;Number.isNaN(increment)||!Number.isFinite(increment)||increment<0?increment=.1:increment>1&&(increment=1);var intervalId,start=window.scrollY?window.scrollY:document.body.scrollTop,end=function(el){var posTop=function(el){var curtop=0;for(;el.offsetParent;)curtop+=el.offsetTop,el=el.offsetParent;return curtop}(el),posBottom=posTop+el.offsetHeight,winTop=window.scrollY?window.scrollY:document.body.scrollTop,winHeight=window.innerHeight?window.innerHeight:document.body.clientHeight,winBottom=winTop+winHeight;return posTop>=winTop&&posBottom>winBottom&&el.offsetHeight<winHeight?posTop-(winHeight-el.offsetHeight)+20:posTop}(el),distance=Math.abs(start-end),direction=start>end?-1:1,progress=0;intervalId=window.setInterval((function(){progress+=increment,window.scroll(0,start+direction*(distance*Math.easeInOut(progress))),progress>=1&&window.clearInterval(intervalId)}),25)}function toStringOrDefault(value){return stringFrom(value)}function either(){if(0!==arguments.length)return Array.prototype.concat.apply([],arguments).random()}function forget(key){if("string"!=typeof key)throw new TypeError("forget key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.delete(key)}function hasVisited(){if(0===arguments.length)throw new Error("hasVisited called with insufficient parameters");if(State.isEmpty())return!1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,i=0,iend=needles.length;i<iend;++i)if(!played.includes(needles[i]))return!1;return!0}function lastVisited(){if(0===arguments.length)throw new Error("lastVisited called with insufficient parameters");if(State.isEmpty())return-1;for(var needles=Array.prototype.concat.apply([],arguments),played=State.passages,uBound=played.length-1,turns=State.turns,i=0,iend=needles.length;i<iend&&turns>-1;++i){var lastIndex=played.lastIndexOf(needles[i]);turns=Math.min(turns,-1===lastIndex?-1:uBound-lastIndex)}return turns}function memorize(key,value){if("string"!=typeof key)throw new TypeError("memorize key parameter must be a string (received: ".concat(Util.getType(key),")"));State.metadata.set(key,value)}function passage(){return State.passage}function previous(){var passages=State.passages;if(arguments.length>0){var offset=Number(arguments[0]);if(!Number.isSafeInteger(offset)||offset<1)throw new RangeError("previous offset parameter must be a positive integer greater than zero");return passages.length>offset?passages[passages.length-1-offset]:""}for(var i=passages.length-2;i>=0;--i)if(passages[i]!==State.passage)return passages[i];return""}function random(){var min,max;switch(arguments.length){case 0:throw new Error("random called with insufficient parameters");case 1:min=0,max=Math.trunc(arguments[0]);break;default:min=Math.trunc(arguments[0]),max=Math.trunc(arguments[1])}if(!Number.isInteger(min))throw new Error("random min parameter must be an integer");if(!Number.isInteger(max))throw new Error("random max parameter must be an integer");if(min>max){var _ref6=[max,min];min=_ref6[0],max=_ref6[1]}return Math.floor(State.random()*(max-min+1))+min}function randomFloat(){var min,max;switch(arguments.length){case 0:throw new Error("randomFloat called with insufficient parameters");case 1:min=0,max=Number(arguments[0]);break;default:min=Number(arguments[0]),max=Number(arguments[1])}if(Number.isNaN(min)||!Number.isFinite(min))throw new Error("randomFloat min parameter must be a number");if(Number.isNaN(max)||!Number.isFinite(max))throw new Error("randomFloat max parameter must be a number");if(min>max){var _ref7=[max,min];min=_ref7[0],max=_ref7[1]}return State.random()*(max-min)+min}function recall(key,defaultValue){if("string"!=typeof key)throw new TypeError("recall key parameter must be a string (received: ".concat(Util.getType(key),")"));return State.metadata.has(key)?State.metadata.get(key):defaultValue}function tags(){if(0===arguments.length)return Story.get(State.passage).tags.slice(0);for(var passages=Array.prototype.concat.apply([],arguments),tags=[],i=0,iend=passages.length;i<iend;++i)tags=tags.concat(Story.get(passages[i]).tags);return tags}function temporary(){return State.temporary}function time(){return null===Engine.lastPlay?0:Util.now()-Engine.lastPlay}function turns(){return State.turns}function variables(){return State.variables}function visited(){if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],0===arguments.length?[State.passage]:arguments),played=State.passages,count=State.turns,i=0,iend=needles.length;i<iend&&count>0;++i)count=Math.min(count,played.count(needles[i]));return count}function visitedTags(){if(0===arguments.length)throw new Error("visitedTags called with insufficient parameters");if(State.isEmpty())return 0;for(var needles=Array.prototype.concat.apply([],arguments),nLength=needles.length,played=State.passages,seen=new Map,count=0,i=0,iend=played.length;i<iend;++i){var title=played[i];if(seen.has(title))seen.get(title)&&++count;else{var _tags2=Story.get(title).tags;if(_tags2.length>0){for(var found=0,j=0;j<nLength;++j)_tags2.includes(needles[j])&&++found;found===nLength?(++count,seen.set(title,!0)):seen.set(title,!1)}}}return count}var _ref8=function(){function slugifyUrl(url){return Util.parseUrl(url).path.replace(/^[^\w]+|[^\w]+$/g,"").replace(/[^\w]+/g,"-").toLocaleLowerCase()}function addScript(url){return new Promise((function(resolve,reject){jQuery(document.createElement("script")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importScripts failed to load the script "'.concat(url,'".')))})).appendTo(document.head).attr({id:"script-imported-".concat(slugifyUrl(url)),type:"text/javascript",src:url})}))}function addStyle(url){return new Promise((function(resolve,reject){jQuery(document.createElement("link")).one("load abort error",(function(ev){jQuery(ev.target).off(),"load"===ev.type?resolve(ev.target):reject(new Error('importStyles failed to load the stylesheet "'.concat(url,'".')))})).appendTo(document.head).attr({id:"style-imported-".concat(slugifyUrl(url)),rel:"stylesheet",href:url})}))}function sequence(callbacks){return callbacks.reduce((function(seq,fn){return seq.then(fn)}),Promise.resolve())}return{importScripts:function(){for(var _len12=arguments.length,urls=new Array(_len12),_key12=0;_key12<_len12;_key12++)urls[_key12]=arguments[_key12];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addScript(url)}}))):addScript(oneOrSeries)})))},importStyles:function(){for(var _len13=arguments.length,urls=new Array(_len13),_key13=0;_key13<_len13;_key13++)urls[_key13]=arguments[_key13];return Promise.all(urls.map((function(oneOrSeries){return Array.isArray(oneOrSeries)?sequence(oneOrSeries.map((function(url){return function(){return addStyle(url)}}))):addStyle(oneOrSeries)})))}}}(),importScripts=_ref8.importScripts,importStyles=_ref8.importStyles,parse=function(){var tokenTable=Util.toEnum({$:"State.variables.",_:"State.temporary.",to:"=",eq:"==",neq:"!=",is:"===",isnot:"!==",gt:">",gte:">=",lt:"<",lte:"<=",and:"&&",or:"||",not:"!",def:'"undefined" !== typeof',ndef:'"undefined" === typeof'}),parseRe=new RegExp(["(?:\"\"|''|``)",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(`(?:\\\\.|[^`\\\\])+`)","(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)","([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"),"g"),notSpaceRe=/\S/,varTest=new RegExp("^".concat(Patterns.variable)),withColonTestRe=/^\s*:/,withNotTestRe=/^\s+not\b/;function parse(rawCodeString){if(0!==parseRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start");for(var match,code=rawCodeString;null!==(match=parseRe.exec(code));)if(match[1]){var rawTemplate=match[1],parsedTemplate=parseTemplate(rawTemplate);parsedTemplate!==rawTemplate&&(code=code.splice(match.index,rawTemplate.length,parsedTemplate),parseRe.lastIndex+=parsedTemplate.length-rawTemplate.length)}else if(match[2]){var token=match[2];if("$"===token||"_"===token)continue;if(varTest.test(token))token=token[0];else if("is"===token){var start=parseRe.lastIndex,ahead=code.slice(start);withNotTestRe.test(ahead)&&(code=code.splice(start,ahead.search(notSpaceRe)),token="isnot")}else{var _ahead=code.slice(parseRe.lastIndex);if(withColonTestRe.test(_ahead))continue}tokenTable[token]&&(code=code.splice(match.index,token.length,tokenTable[token]),parseRe.lastIndex+=tokenTable[token].length-token.length)}return code}var templateGroupStartRe=/\$\{/g,templateGroupParseRe=new RegExp(["(?:\"\"|'')",'(?:"(?:\\\\.|[^"\\\\])+")',"(?:'(?:\\\\.|[^'\\\\])+')","(\\{)","(\\})"].join("|"),"g");function parseTemplate(rawTemplateLiteral){if(0!==templateGroupStartRe.lastIndex)throw new RangeError("Scripting.parse last index is non-zero at start of template literal");for(var startMatch,template=rawTemplateLiteral;null!==(startMatch=templateGroupStartRe.exec(template));){var startIdx=startMatch.index+2,endIdx=startIdx,depth=1,endMatch=void 0;for(templateGroupParseRe.lastIndex=startIdx;null!==(endMatch=templateGroupParseRe.exec(template));)if(endMatch[1]?++depth:endMatch[2]&&--depth,0===depth){endIdx=endMatch.index;break}if(endIdx>startIdx){var parseIndex=parseRe.lastIndex,rawGroup=template.slice(startIdx,endIdx);parseRe.lastIndex=0;var parsedGroup=parse(rawGroup);parseRe.lastIndex=parseIndex,template=template.splice(startIdx,rawGroup.length,parsedGroup),templateGroupStartRe.lastIndex+=parsedGroup.length-rawGroup.length}}return template}return parse}();function evalJavaScript(code,output,data){return function(code,output,evalJavaScript$Data$){return eval(code)}.call(output?{output:output}:null,String(code),output,data)}function evalTwineScript(code,output,data){return function(code,output,evalTwineScript$Data$){return eval(code)}.call(output?{output:output}:null,parse(String(code)),output,data)}return Object.freeze(Object.defineProperties({},{parse:{value:parse},evalJavaScript:{value:evalJavaScript},evalTwineScript:{value:evalTwineScript}}))}(),_ref9=function(){var Lexer=function(){function Lexer(source,initialState){if(_classCallCheck(this,Lexer),arguments.length<2)throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");Object.defineProperties(this,{source:{value:source},initial:{value:initialState},state:{writable:!0,value:initialState},start:{writable:!0,value:0},pos:{writable:!0,value:0},depth:{writable:!0,value:0},items:{writable:!0,value:[]},data:{writable:!0,value:{}}})}return _createClass(Lexer,[{key:"reset",value:function(){this.state=this.initial,this.start=0,this.pos=0,this.depth=0,this.items=[],this.data={}}},{key:"run",value:function(){for(;null!==this.state;)this.state=this.state(this);return this.items}},{key:"nextItem",value:function(){for(;0===this.items.length&&null!==this.state;)this.state=this.state(this);return this.items.shift()}},{key:"next",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos++]}},{key:"peek",value:function(){return this.pos>=this.source.length?-1:this.source[this.pos]}},{key:"backup",value:function(num){this.pos-=num||1}},{key:"forward",value:function(num){this.pos+=num||1}},{key:"ignore",value:function(){this.start=this.pos}},{key:"accept",value:function(valid){var ch=this.next();return-1!==ch&&(!!valid.includes(ch)||(this.backup(),!1))}},{key:"acceptRe",value:function(validRe){var ch=this.next();return-1!==ch&&(!!validRe.test(ch)||(this.backup(),!1))}},{key:"acceptRun",value:function(valid){for(;;){var ch=this.next();if(-1===ch)return;if(!valid.includes(ch))break}this.backup()}},{key:"acceptRunRe",value:function(validRe){for(;;){var ch=this.next();if(-1===ch)return;if(!validRe.test(ch))break}this.backup()}},{key:"emit",value:function(type){this.items.push({type:type,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),this.start=this.pos}},{key:"error",value:function(type,message){if(arguments.length<2)throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");return this.items.push({type:type,message:message,text:this.source.slice(this.start,this.pos),start:this.start,pos:this.pos}),null}}],[{key:"enumFromNames",value:function(names){var obj=names.reduce((function(obj,name,i){return obj[name]=i,obj}),{});return Object.freeze(Object.assign(Object.create(null),obj))}}]),Lexer}();return{EOF:-1,Lexer:Lexer}}(),EOF=_ref9.EOF,Lexer=_ref9.Lexer,Wikifier=function(){var _optionsStack,lookaheadRe,idOrClassRe,_callDepth=0,Wikifier=function(){function Wikifier(destination,source,options){_classCallCheck(this,Wikifier),Wikifier.Parser.Profile.isEmpty()&&Wikifier.Parser.Profile.compile(),Object.defineProperties(this,{source:{value:String(source)},options:{writable:!0,value:Object.assign({profile:"all"},options)},nextMatch:{writable:!0,value:0},output:{writable:!0,value:null},_rawArgs:{writable:!0,value:""}}),null==destination?this.output=document.createDocumentFragment():destination.jquery?this.output=destination[0]:this.output=destination;try{++_callDepth,this.subWikify(this.output),1===_callDepth&&Config.cleanupWikifierOutput&&convertBreaks(this.output)}finally{--_callDepth}}return _createClass(Wikifier,[{key:"subWikify",value:function(output,terminator,options){var newOptions,oldOptions,oldOutput=this.output;this.output=output,Wikifier.Option.length>0&&(newOptions=Object.assign(newOptions||{},Wikifier.Option.options)),null!==options&&"object"===_typeof(options)&&(newOptions=Object.assign(newOptions||{},options)),newOptions&&(oldOptions=this.options,this.options=Object.assign({},this.options,newOptions));var terminatorMatch,parserMatch,parsersProfile=Wikifier.Parser.Profile.get(this.options.profile),terminatorRegExp=terminator?new RegExp("(?:".concat(terminator,")"),this.options.ignoreTerminatorCase?"gim":"gm"):null;do{if(parsersProfile.parserRegExp.lastIndex=this.nextMatch,terminatorRegExp&&(terminatorRegExp.lastIndex=this.nextMatch),parserMatch=parsersProfile.parserRegExp.exec(this.source),(terminatorMatch=terminatorRegExp?terminatorRegExp.exec(this.source):null)&&(!parserMatch||terminatorMatch.index<=parserMatch.index))return terminatorMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,terminatorMatch.index),this.matchStart=terminatorMatch.index,this.matchLength=terminatorMatch[0].length,this.matchText=terminatorMatch[0],this.nextMatch=terminatorRegExp.lastIndex,this.output=oldOutput,void(oldOptions&&(this.options=oldOptions));if(parserMatch){parserMatch.index>this.nextMatch&&this.outputText(this.output,this.nextMatch,parserMatch.index),this.matchStart=parserMatch.index,this.matchLength=parserMatch[0].length,this.matchText=parserMatch[0],this.nextMatch=parsersProfile.parserRegExp.lastIndex;for(var matchingParser=void 0,i=1,iend=parserMatch.length;i<iend;++i)if(parserMatch[i]){matchingParser=i-1;break}if(parsersProfile.parsers[matchingParser].handler(this),null!=TempState.break)break}}while(terminatorMatch||parserMatch);null==TempState.break?this.nextMatch<this.source.length&&(this.outputText(this.output,this.nextMatch,this.source.length),this.nextMatch=this.source.length):this.output.lastChild&&this.output.lastChild.nodeType===Node.ELEMENT_NODE&&"BR"===this.output.lastChild.nodeName.toUpperCase()&&jQuery(this.output.lastChild).remove(),this.output=oldOutput,oldOptions&&(this.options=oldOptions)}},{key:"outputText",value:function(destination,startPos,endPos){jQuery(destination).append(document.createTextNode(this.source.substring(startPos,endPos)))}},{key:"rawArgs",value:function(){return this._rawArgs}},{key:"fullArgs",value:function(){return Scripting.parse(this._rawArgs)}}],[{key:"wikifyEval",value:function(text){var output=document.createDocumentFragment();new Wikifier(output,text);var errors=output.querySelector(".error");if(null!==errors)throw new Error(errors.textContent.replace(errorPrologRegExp,""));return output}},{key:"createInternalLink",value:function(destination,passage,text,callback){var $link=jQuery(document.createElement("a"));return null!=passage&&($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken"),$link.ariaClick({one:!0},(function(){"function"==typeof callback&&callback(),Engine.play(passage)}))),text&&$link.append(document.createTextNode(text)),destination&&$link.appendTo(destination),$link[0]}},{key:"createExternalLink",value:function(destination,url,text){var $link=jQuery(document.createElement("a")).attr("target","_blank").addClass("link-external").text(text).appendTo(destination);return null!=url&&$link.attr({href:url,tabindex:0}),$link[0]}},{key:"isExternalLink",value:function(link){return!Story.has(link)&&(new RegExp("^".concat(Patterns.url),"gim").test(link)||/[/.?#]/.test(link))}}]),Wikifier}();return Object.defineProperty(Wikifier,"Option",{value:(_optionsStack=[],Object.freeze(Object.defineProperties({},{length:{get:function(){return _optionsStack.length}},options:{get:function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray(_optionsStack)))}},clear:{value:function(){_optionsStack=[]}},get:{value:function(idx){return _optionsStack[idx]}},pop:{value:function(){return _optionsStack.pop()}},push:{value:function(options){if("object"!==_typeof(options)||null===options)throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(Util.getType(options),")"));return _optionsStack.push(options)}}})))}),Object.defineProperty(Wikifier,"Parser",{value:function(){var _profiles,_parsers=[];function parsersHas(name){return!!_parsers.find((function(parser){return parser.name===name}))}return Object.freeze(Object.defineProperties({},{parsers:{get:function(){return _parsers}},add:{value:function(parser){if("object"!==_typeof(parser))throw new Error("Wikifier.Parser.add parser parameter must be an object");if(!parser.hasOwnProperty("name"))throw new Error('parser object missing required "name" property');if("string"!=typeof parser.name)throw new Error('parser object "name" property must be a string');if(!parser.hasOwnProperty("match"))throw new Error('parser object missing required "match" property');if("string"!=typeof parser.match)throw new Error('parser object "match" property must be a string');if(!parser.hasOwnProperty("handler"))throw new Error('parser object missing required "handler" property');if("function"!=typeof parser.handler)throw new Error('parser object "handler" property must be a function');if(parser.hasOwnProperty("profiles")&&!Array.isArray(parser.profiles))throw new Error('parser object "profiles" property must be an array');if(parsersHas(parser.name))throw new Error('cannot clobber existing parser "'.concat(parser.name,'"'));_parsers.push(parser)}},delete:{value:function(name){var parser=_parsers.find((function(parser){return parser.name===name}));parser&&_parsers.delete(parser)}},isEmpty:{value:function(){return 0===_parsers.length}},has:{value:parsersHas},get:{value:function(name){return _parsers.find((function(parser){return parser.name===name}))||null}},Profile:{value:Object.freeze(Object.defineProperties({},{profiles:{get:function(){return _profiles}},compile:{value:function(){var all=_parsers,core=all.filter((function(parser){return!Array.isArray(parser.profiles)||parser.profiles.includes("core")}));return _profiles=Object.freeze({all:{parsers:all,parserRegExp:new RegExp(all.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")},core:{parsers:core,parserRegExp:new RegExp(core.map((function(parser){return"(".concat(parser.match,")")})).join("|"),"gm")}})}},isEmpty:{value:function(){return"object"!==_typeof(_profiles)||0===Object.keys(_profiles).length}},has:{value:function(profile){return"object"===_typeof(_profiles)&&_profiles.hasOwnProperty(profile)}},get:{value:function(profile){if("object"!==_typeof(_profiles)||!_profiles.hasOwnProperty(profile))throw new Error('nonexistent parser profile "'.concat(profile,'"'));return _profiles[profile]}}}))}}))}()}),Object.defineProperties(Wikifier,{helpers:{value:{}},getValue:{value:State.getVar},setValue:{value:State.setVar},parse:{value:Scripting.parse},evalExpression:{value:Scripting.evalTwineScript},evalStatements:{value:Scripting.evalTwineScript},textPrimitives:{value:Patterns}}),Object.defineProperties(Wikifier.helpers,{inlineCss:{value:(lookaheadRe=new RegExp(Patterns.inlineCss,"gm"),idOrClassRe=new RegExp("(".concat(Patterns.cssIdOrClassSigil,")(").concat(Patterns.anyLetter,"+)"),"g"),function(w){var matched,css={classes:[],id:"",styles:{}};do{lookaheadRe.lastIndex=w.nextMatch;var match=lookaheadRe.exec(w.source);if(matched=match&&match.index===w.nextMatch){if(match[1])css.styles[Util.fromCssProperty(match[1])]=match[2].trim();else if(match[3])css.styles[Util.fromCssProperty(match[3])]=match[4].trim();else if(match[5]){var subMatch=void 0;for(idOrClassRe.lastIndex=0;null!==(subMatch=idOrClassRe.exec(match[5]));)"."===subMatch[1]?css.classes.push(subMatch[2]):css.id=subMatch[2]}w.nextMatch=lookaheadRe.lastIndex}}while(matched);return css})},evalText:{value:function(text){var result;try{switch(_typeof(result=Scripting.evalTwineScript(text))){case"string":""===result.trim()&&(result=text);break;case"number":result=String(result);break;default:result=text}}catch(ex){result=text}return result}},evalPassageId:{value:function(passage){return null==passage||Story.has(passage)?passage:Wikifier.helpers.evalText(passage)}},hasBlockContext:{value:function(nodes){for(var hasGCS="function"==typeof window.getComputedStyle,i=nodes.length-1;i>=0;--i){var node=nodes[i];switch(node.nodeType){case Node.ELEMENT_NODE:var tagName=node.nodeName.toUpperCase();if("BR"===tagName)return!0;var styles=hasGCS?window.getComputedStyle(node,null):node.currentStyle;if(styles&&styles.display){if("none"===styles.display)continue;return"block"===styles.display}switch(tagName){case"ADDRESS":case"ARTICLE":case"ASIDE":case"BLOCKQUOTE":case"CENTER":case"DIV":case"DL":case"FIGURE":case"FOOTER":case"FORM":case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"HEADER":case"HR":case"MAIN":case"NAV":case"OL":case"P":case"PRE":case"SECTION":case"TABLE":case"UL":return!0}return!1;case Node.COMMENT_NODE:continue;default:return!1}}return!0}},createShadowSetterCallback:{value:function(){var macroParser=null;function getMacroContextShadowView(){for(var macro=macroParser||function(){if(!macroParser&&!(macroParser=Wikifier.Parser.get("macro")))throw new Error('cannot find "macro" parser');return macroParser}(),view=new Set,context=macro.context;null!==context;context=context.parent)context._shadows&&context._shadows.forEach((function(name){return view.add(name)}));return _toConsumableArray(view)}return function(code){var shadowStore={};return getMacroContextShadowView().forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]})),function(){var shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null;try{return shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),Scripting.evalJavaScript(code)}finally{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}}()},parseSquareBracketedMarkup:{value:function(){var Item=Lexer.enumFromNames(["Error","DelimLTR","DelimRTL","InnerMeta","ImageMeta","LinkMeta","Link","RightMeta","Setter","Source","Text"]),Delim=Lexer.enumFromNames(["None","LTR","RTL"]);function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexLeftMeta(lexer){if(!lexer.accept("["))return lexer.error(Item.Error,"malformed square-bracketed markup");if(lexer.accept("["))lexer.data.isLink=!0,lexer.emit(Item.LinkMeta);else{if(lexer.accept("<>"),!(lexer.accept("Ii")&&lexer.accept("Mm")&&lexer.accept("Gg")&&lexer.accept("[")))return lexer.error(Item.Error,"malformed square-bracketed markup");lexer.data.isLink=!1,lexer.emit(Item.ImageMeta)}return lexer.depth=2,lexCoreComponents}function lexCoreComponents(lexer){for(var what=lexer.data.isLink?"link":"image",delim=Delim.None;;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup"));break;case"|":delim===Delim.None&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(),lexer.emit(Item.DelimLTR));break;case"-":delim===Delim.None&&">"===lexer.peek()&&(delim=Delim.LTR,lexer.backup(),lexer.emit(Item.Text),lexer.forward(2),lexer.emit(Item.DelimLTR));break;case"<":delim===Delim.None&&"-"===lexer.peek()&&(delim=Delim.RTL,lexer.backup(),lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.DelimRTL));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.InnerMeta),lexer.data.isLink?lexSetter:lexImageLink;case"]":return--lexer.depth,lexer.backup(),delim===Delim.RTL?lexer.emit(Item.Text):lexer.emit(lexer.data.isLink?Item.Link:Item.Source),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexImageLink(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup link component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)switch(lexer.peek()){case"[":return++lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.InnerMeta),lexSetter;case"]":return--lexer.depth,lexer.backup(),lexer.emit(Item.Link),lexer.forward(2),lexer.emit(Item.RightMeta),null;default:return lexer.error(Item.Error,"malformed ".concat(what," markup"))}}}function lexSetter(lexer){for(var what=lexer.data.isLink?"link":"image";;)switch(lexer.next()){case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case'"':if(slurpQuote(lexer,'"')===EOF)return lexer.error(Item.Error,"unterminated double quoted string in ".concat(what," markup setter component"));break;case"'":if(slurpQuote(lexer,"'")===EOF)return lexer.error(Item.Error,"unterminated single quoted string in ".concat(what," markup setter component"));break;case"[":++lexer.depth;break;case"]":if(--lexer.depth,1===lexer.depth)return"]"!==lexer.peek()?lexer.error(Item.Error,"malformed ".concat(what," markup")):(--lexer.depth,lexer.backup(),lexer.emit(Item.Setter),lexer.forward(2),lexer.emit(Item.RightMeta),null)}}return function(w){var lexer=new Lexer(w.source,lexLeftMeta);lexer.start=lexer.pos=w.matchStart;var markup={},items=lexer.run(),last=items.last();return last&&last.type===Item.Error?markup.error=last.message:items.forEach((function(item){var text=item.text.trim();switch(item.type){case Item.ImageMeta:markup.isImage=!0,"<"===text[1]?markup.align="left":">"===text[1]&&(markup.align="right");break;case Item.LinkMeta:markup.isLink=!0;break;case Item.Link:"~"===text[0]?(markup.forceInternal=!0,markup.link=text.slice(1)):markup.link=text;break;case Item.Setter:markup.setter=text;break;case Item.Source:markup.source=text;break;case Item.Text:markup.text=text}})),markup.pos=lexer.pos,markup}}()}}),Wikifier}();!function(){function _verbatimTagHandler(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createDocumentFragment()).append(match[1]).appendTo(w.output))}Wikifier.Parser.add({name:"quoteByBlock",profiles:["block"],match:"^<<<\\n",terminator:"^<<<\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("blockquote")).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"quoteByLine",profiles:["block"],match:"^>+",lookahead:/^>+/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,i,destStack=[w.output],curLevel=0,newLevel=w.matchLength;do{if(newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement("blockquote")).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();curLevel=newLevel,w.subWikify(destStack[destStack.length-1],this.terminator),jQuery(document.createElement("br")).appendTo(destStack[destStack.length-1]),this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);(matched=match&&match.index===w.nextMatch)&&(newLevel=match[0].length,w.nextMatch+=match[0].length)}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"macro",profiles:["core"],match:"<<",lookahead:new RegExp("<<(/?".concat(Patterns.macroName,")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"),"gm"),working:{source:"",name:"",arguments:"",index:0},context:null,handler:function(w){var matchStart=this.lookahead.lastIndex=w.matchStart;if(this.parseTag(w)){var macro,nextMatch=w.nextMatch,name=this.working.name,rawArgs=this.working.arguments;try{if(!(macro=Macro.get(name))){if(Macro.tags.has(name)){var tags=Macro.tags.get(name);return throwError(w.output,"child tag <<".concat(name,">> was found outside of a call to its parent macro").concat(1===tags.length?"":"s"," <<").concat(tags.join(">>, <<"),">>"),w.source.slice(matchStart,w.nextMatch))}return throwError(w.output,"macro <<".concat(name,">> does not exist"),w.source.slice(matchStart,w.nextMatch))}var payload=null;if(void 0!==macro.tags&&!(payload=this.parseBody(w,macro)))return w.nextMatch=nextMatch,throwError(w.output,"cannot find a closing tag for macro <<".concat(name,">>"),"".concat(w.source.slice(matchStart,w.nextMatch),"…"));if("function"!=typeof macro.handler)return throwError(w.output,"macro <<".concat(name,">> handler function ").concat(void 0===macro.handler?"does not exist":"is not a function"),w.source.slice(matchStart,w.nextMatch));var args=payload?payload[0].args:this.createArgs(rawArgs,this.skipArgs(macro,macro.name));if(void 0!==macro._MACRO_API){this.context=new MacroContext({macro:macro,name:name,args:args,payload:payload,source:w.source.slice(matchStart,w.nextMatch),parent:this.context,parser:w});try{macro.handler.call(this.context)}finally{this.context=this.context.parent}}else{var prevRawArgs=w._rawArgs;w._rawArgs=rawArgs;try{macro.handler(w.output,name,args,w,payload)}finally{w._rawArgs=prevRawArgs}}}catch(ex){return throwError(w.output,"cannot execute ".concat(macro&&macro.isWidget?"widget":"macro"," <<").concat(name,">>: ").concat(ex.message),w.source.slice(matchStart,w.nextMatch))}finally{this.working.source="",this.working.name="",this.working.arguments="",this.working.index=0}}else w.outputText(w.output,w.matchStart,w.nextMatch)},parseTag:function(w){var match=this.lookahead.exec(w.source);return!(!match||match.index!==w.matchStart||!match[1])&&(w.nextMatch=this.lookahead.lastIndex,this.working.source=w.source.slice(match.index,this.lookahead.lastIndex),this.working.name=match[1],this.working.arguments=match[2],this.working.index=match.index,!0)},parseBody:function(w,macro){for(var openTag=this.working.name,closeTag="/".concat(openTag),closeAlt="end".concat(openTag),bodyTags=!!Array.isArray(macro.tags)&&macro.tags,payload=[],end=-1,opened=1,curSource=this.working.source,curTag=this.working.name,curArgument=this.working.arguments,contentStart=w.nextMatch;-1!==(w.matchStart=w.source.indexOf(this.match,w.nextMatch));)if(this.parseTag(w)){var tagSource=this.working.source,tagName=this.working.name,tagArgs=this.working.arguments,tagBegin=this.working.index,tagEnd=w.nextMatch,hasArgs=""!==tagArgs.trim();switch(tagName){case openTag:++opened;break;case closeAlt:case closeTag:if(hasArgs)throw w.nextMatch=tagBegin+2+tagName.length,new Error('malformed closing tag: "'.concat(tagSource,'"'));--opened;break;default:if(hasArgs&&(tagName.startsWith("/")||tagName.startsWith("end"))){this.lookahead.lastIndex=w.nextMatch=tagBegin+2+tagName.length;continue}if(1===opened&&bodyTags)for(var i=0,iend=bodyTags.length;i<iend;++i)tagName===bodyTags[i]&&(payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),curSource=tagSource,curTag=tagName,curArgument=tagArgs,contentStart=tagEnd)}if(0===opened){payload.push({source:curSource,name:curTag,arguments:curArgument,args:this.createArgs(curArgument,this.skipArgs(macro,curTag)),contents:w.source.slice(contentStart,tagBegin)}),end=tagEnd;break}}else this.lookahead.lastIndex=w.nextMatch=w.matchStart+this.match.length;return-1!==end?(w.nextMatch=end,payload):null},createArgs:function(rawArgsString,skipArgs){var args=skipArgs?[]:this.parseArgs(rawArgsString);return Object.defineProperties(args,{raw:{value:rawArgsString},full:{value:Scripting.parse(rawArgsString)}}),args},skipArgs:function(macro,tagName){if(void 0!==macro.skipArgs){var sa=macro.skipArgs;return"boolean"==typeof sa&&sa||Array.isArray(sa)&&sa.includes(tagName)}return void 0!==macro.skipArg0&&(macro.skipArg0&&macro.name===tagName)},parseArgs:function(){var Item=Lexer.enumFromNames(["Error","Bareword","Expression","String","SquareBracket"]),spaceRe=new RegExp(Patterns.space),notSpaceRe=new RegExp(Patterns.notSpace),varTest=new RegExp("^".concat(Patterns.variable));function slurpQuote(lexer,endQuote){loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return EOF;case endQuote:break loop}return lexer.pos}function lexSpace(lexer){var offset=lexer.source.slice(lexer.pos).search(notSpaceRe);if(offset===EOF)return null;switch(0!==offset&&(lexer.pos+=offset,lexer.ignore()),lexer.next()){case"`":return lexExpression;case'"':return lexDoubleQuote;case"'":return lexSingleQuote;case"[":return lexSquareBracket;default:return lexBareword}}function lexExpression(lexer){return slurpQuote(lexer,"`")===EOF?lexer.error(Item.Error,"unterminated backquote expression"):(lexer.emit(Item.Expression),lexSpace)}function lexDoubleQuote(lexer){return slurpQuote(lexer,'"')===EOF?lexer.error(Item.Error,"unterminated double quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSingleQuote(lexer){return slurpQuote(lexer,"'")===EOF?lexer.error(Item.Error,"unterminated single quoted string"):(lexer.emit(Item.String),lexSpace)}function lexSquareBracket(lexer){var what;if(lexer.accept("<>IiMmGg")?(what="image",lexer.acceptRun("<>IiMmGg")):what="link",!lexer.accept("["))return lexer.error(Item.Error,"malformed ".concat(what," markup"));lexer.depth=2;loop:for(;;)switch(lexer.next()){case"\\":var ch=lexer.next();if(ch!==EOF&&"\n"!==ch)break;case EOF:case"\n":return lexer.error(Item.Error,"unterminated ".concat(what," markup"));case"[":++lexer.depth;break;case"]":if(--lexer.depth,lexer.depth<0)return lexer.error(Item.Error,"unexpected right square bracket ']'");if(1===lexer.depth){if("]"===lexer.next()){--lexer.depth;break loop}lexer.backup()}}return lexer.emit(Item.SquareBracket),lexSpace}function lexBareword(lexer){var offset=lexer.source.slice(lexer.pos).search(spaceRe);return lexer.pos=offset===EOF?lexer.source.length:lexer.pos+offset,lexer.emit(Item.Bareword),offset===EOF?null:lexSpace}return function(rawArgsString){var lexer=new Lexer(rawArgsString,lexSpace),args=[];return lexer.run().forEach((function(item){var arg=item.text;switch(item.type){case Item.Error:throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(item.message));case Item.Bareword:if(varTest.test(arg))arg=State.getVar(arg);else if(/^(?:settings|setup)[.[]/.test(arg))try{arg=Scripting.evalTwineScript(arg)}catch(ex){throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(ex.message))}else if("null"===arg)arg=null;else if("undefined"===arg)arg=undefined;else if("true"===arg)arg=!0;else if("false"===arg)arg=!1;else if("NaN"===arg)arg=NaN;else{var argAsNum=Number(arg);Number.isNaN(argAsNum)||(arg=argAsNum)}break;case Item.Expression:if(""===(arg=arg.slice(1,-1).trim()))arg=undefined;else try{arg=Scripting.evalTwineScript("(".concat(arg,")"))}catch(ex){throw new Error('unable to parse macro argument expression "'.concat(arg,'": ').concat(ex.message))}break;case Item.String:try{arg=Scripting.evalJavaScript(arg)}catch(ex){throw new Error('unable to parse macro argument string "'.concat(arg,'": ').concat(ex.message))}break;case Item.SquareBracket:var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:arg,matchStart:0});if(markup.hasOwnProperty("error"))throw new Error('unable to parse macro argument "'.concat(arg,'": ').concat(markup.error));if(markup.pos<arg.length)throw new Error('unable to parse macro argument "'.concat(arg,'": unexpected character(s) "').concat(arg.slice(markup.pos),'" (pos: ').concat(markup.pos,")"));markup.isLink?((arg={isLink:!0}).count=markup.hasOwnProperty("text")?2:1,arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):arg.link,arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null):markup.isImage&&(arg=function(source){var imgObj={source:source,isImage:!0};if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(imgObj.source=passage.text,imgObj.passage=passage.title)}return imgObj}(Wikifier.helpers.evalPassageId(markup.source)),markup.hasOwnProperty("align")&&(arg.align=markup.align),markup.hasOwnProperty("text")&&(arg.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("link")&&(arg.link=Wikifier.helpers.evalPassageId(markup.link),arg.external=!markup.forceInternal&&Wikifier.isExternalLink(arg.link)),arg.setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null)}args.push(arg)})),args}}()}),Wikifier.Parser.add({name:"link",profiles:["core"],match:"\\[\\[[^[]",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{w.nextMatch=markup.pos;var link=Wikifier.helpers.evalPassageId(markup.link),text=markup.hasOwnProperty("text")?Wikifier.helpers.evalText(markup.text):link,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,output=(Config.debug?new DebugView(w.output,"link-markup","[[link]]",w.source.slice(w.matchStart,w.nextMatch)):w).output;markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(output,link,text,setFn):Wikifier.createExternalLink(output,link,text)}}}),Wikifier.Parser.add({name:"urlLink",profiles:["core"],match:Patterns.url,handler:function(w){w.outputText(Wikifier.createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch)}}),Wikifier.Parser.add({name:"image",profiles:["core"],match:"\\[[<>]?[Ii][Mm][Gg]\\[",handler:function(w){var markup=Wikifier.helpers.parseSquareBracketedMarkup(w);if(markup.hasOwnProperty("error"))w.outputText(w.output,w.matchStart,w.nextMatch);else{var debugView;w.nextMatch=markup.pos,Config.debug&&(debugView=new DebugView(w.output,"image-markup",markup.hasOwnProperty("link")?"[img[][link]]":"[img[]]",w.source.slice(w.matchStart,w.nextMatch))).modes({block:!0});var source,setFn=markup.hasOwnProperty("setter")?Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)):null,el=(Config.debug?debugView:w).output;if(markup.hasOwnProperty("link")){var link=Wikifier.helpers.evalPassageId(markup.link);(el=markup.forceInternal||!Wikifier.isExternalLink(link)?Wikifier.createInternalLink(el,link,null,setFn):Wikifier.createExternalLink(el,link)).classList.add("link-image")}if(el=jQuery(document.createElement("img")).appendTo(el).get(0),"data:"!==(source=Wikifier.helpers.evalPassageId(markup.source)).slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(el.setAttribute("data-passage",passage.title),source=passage.text.trim())}el.src=source,markup.hasOwnProperty("text")&&(el.title=Wikifier.helpers.evalText(markup.text)),markup.hasOwnProperty("align")&&(el.align=markup.align)}}}),Wikifier.Parser.add({name:"monospacedByBlock",profiles:["block"],match:"^\\{\\{\\{\\n",lookahead:/^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){var pre=jQuery(document.createElement("pre"));jQuery(document.createElement("code")).text(match[1]).appendTo(pre),pre.appendTo(w.output),w.nextMatch=this.lookahead.lastIndex}}}),Wikifier.Parser.add({name:"formatByChar",profiles:["core"],match:"''|//|__|\\^\\^|~~|==|\\{\\{\\{",handler:function(w){switch(w.matchText){case"''":w.subWikify(jQuery(document.createElement("strong")).appendTo(w.output).get(0),"''");break;case"//":w.subWikify(jQuery(document.createElement("em")).appendTo(w.output).get(0),"//");break;case"__":w.subWikify(jQuery(document.createElement("u")).appendTo(w.output).get(0),"__");break;case"^^":w.subWikify(jQuery(document.createElement("sup")).appendTo(w.output).get(0),"\\^\\^");break;case"~~":w.subWikify(jQuery(document.createElement("sub")).appendTo(w.output).get(0),"~~");break;case"==":w.subWikify(jQuery(document.createElement("s")).appendTo(w.output).get(0),"==");break;case"{{{":var lookahead=/\{\{\{((?:.|\n)*?)\}\}\}/gm;lookahead.lastIndex=w.matchStart;var match=lookahead.exec(w.source);match&&match.index===w.matchStart&&(jQuery(document.createElement("code")).text(match[1]).appendTo(w.output),w.nextMatch=lookahead.lastIndex)}}}),Wikifier.Parser.add({name:"customStyle",profiles:["core"],match:"@@",terminator:"@@",blockRe:/\s*\n/gm,handler:function(w){var css=Wikifier.helpers.inlineCss(w);this.blockRe.lastIndex=w.nextMatch;var blockMatch=this.blockRe.exec(w.source),blockLevel=blockMatch&&blockMatch.index===w.nextMatch,$el=jQuery(document.createElement(blockLevel?"div":"span")).appendTo(w.output);0===css.classes.length&&""===css.id&&0===Object.keys(css.styles).length?$el.addClass("marked"):(css.classes.forEach((function(className){return $el.addClass(className)})),""!==css.id&&$el.attr("id",css.id),$el.css(css.styles)),blockLevel?(w.nextMatch+=blockMatch[0].length,w.subWikify($el[0],"\\n?".concat(this.terminator))):w.subWikify($el[0],this.terminator)}}),Wikifier.Parser.add({name:"verbatimText",profiles:["core"],match:'"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',lookahead:/(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex,jQuery(document.createElement("span")).addClass("verbatim").text(match[1]||match[2]).appendTo(w.output))}}),Wikifier.Parser.add({name:"horizontalRule",profiles:["core"],match:"^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",handler:function(w){jQuery(document.createElement("hr")).appendTo(w.output)}}),Wikifier.Parser.add({name:"emdash",profiles:["core"],match:"--",handler:function(w){jQuery(document.createTextNode("—")).appendTo(w.output)}}),Wikifier.Parser.add({name:"doubleDollarSign",profiles:["core"],match:"\\${2}",handler:function(w){jQuery(document.createTextNode("$")).appendTo(w.output)}}),Wikifier.Parser.add({name:"nakedVariable",profiles:["core"],match:"".concat(Patterns.variable,"(?:(?:\\.").concat(Patterns.identifier,")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[").concat(Patterns.variable,"\\]))*"),handler:function(w){var result=State.getVar(w.matchText);null==result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"variable",w.matchText,w.matchText):w).output,stringFrom(result))}}),Wikifier.Parser.add({name:"template",profiles:["core"],match:"\\?".concat(Patterns.templateName),handler:function(w){var name=w.matchText.slice(1),template=Template.get(name),result=null;switch(template instanceof Array&&(template=template.random()),_typeof(template)){case"function":try{result=stringFrom(template.call({name:name}))}catch(ex){return throwError(w.output,"cannot execute function template ?".concat(name,": ").concat(ex.message),w.source.slice(w.matchStart,w.nextMatch))}break;case"string":result=template}null===result?jQuery(document.createTextNode(w.matchText)).appendTo(w.output):new Wikifier((Config.debug?new DebugView(w.output,"template",w.matchText,w.matchText):w).output,result)}}),Wikifier.Parser.add({name:"heading",profiles:["block"],match:"^!{1,6}",terminator:"\\n",handler:function(w){Wikifier.helpers.hasBlockContext(w.output.childNodes)?w.subWikify(jQuery(document.createElement("h".concat(w.matchLength))).appendTo(w.output).get(0),this.terminator):jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"table",profiles:["block"],match:"^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",lookahead:/^\|([^\n]*)\|([fhck]?)$/gm,rowTerminator:"\\|(?:[cfhk]?)$\\n?",cellPattern:"(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",cellTerminator:"(?:\\u0020*)\\|",rowTypes:{c:"caption",f:"tfoot",h:"thead","":"tbody"},handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){var matched,table=jQuery(document.createElement("table")).appendTo(w.output).get(0),prevColumns=[],curRowType=null,$rowContainer=null,rowCount=0;w.nextMatch=w.matchStart;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var nextRowType=match[2];"k"===nextRowType?(table.className=match[1],w.nextMatch+=match[0].length+1):(nextRowType!==curRowType&&(curRowType=nextRowType,$rowContainer=jQuery(document.createElement(this.rowTypes[nextRowType])).appendTo(table)),"c"===curRowType?($rowContainer.css("caption-side",0===rowCount?"top":"bottom"),w.nextMatch+=1,w.subWikify($rowContainer[0],this.rowTerminator)):this.rowHandler(w,jQuery(document.createElement("tr")).appendTo($rowContainer).get(0),prevColumns),++rowCount)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))},rowHandler:function(w,rowEl,prevColumns){var matched,_this12=this,cellRe=new RegExp(this.cellPattern,"gm"),col=0,curColCount=1;do{cellRe.lastIndex=w.nextMatch;var cellMatch=cellRe.exec(w.source);if(matched=cellMatch&&cellMatch.index===w.nextMatch){if("~"===cellMatch[1]){var last=prevColumns[col];last&&(++last.rowCount,last.$element.attr("rowspan",last.rowCount).css("vertical-align","middle")),w.nextMatch=cellMatch.index+cellMatch[0].length-1}else if(">"===cellMatch[1])++curColCount,w.nextMatch=cellMatch.index+cellMatch[0].length-1;else{if(cellMatch[2]){w.nextMatch=cellMatch.index+cellMatch[0].length;break}!function(){++w.nextMatch;for(var css=Wikifier.helpers.inlineCss(w),spaceLeft=!1,spaceRight=!1,$cell=void 0;" "===w.source.substr(w.nextMatch,1);)spaceLeft=!0,++w.nextMatch;"!"===w.source.substr(w.nextMatch,1)?($cell=jQuery(document.createElement("th")).appendTo(rowEl),++w.nextMatch):$cell=jQuery(document.createElement("td")).appendTo(rowEl),prevColumns[col]={rowCount:1,$element:$cell},curColCount>1&&($cell.attr("colspan",curColCount),curColCount=1),w.subWikify($cell[0],_this12.cellTerminator)," "===w.matchText.substr(w.matchText.length-2,1)&&(spaceRight=!0),css.classes.forEach((function(className){return $cell.addClass(className)})),""!==css.id&&$cell.attr("id",css.id),spaceLeft&&spaceRight?css.styles["text-align"]="center":spaceLeft?css.styles["text-align"]="right":spaceRight&&(css.styles["text-align"]="left"),$cell.css(css.styles),w.nextMatch=w.nextMatch-1}()}++col}}while(matched)}}),Wikifier.Parser.add({name:"list",profiles:["block"],match:"^(?:(?:\\*+)|(?:#+))",lookahead:/^(?:(\*+)|(#+))/gm,terminator:"\\n",handler:function(w){if(Wikifier.helpers.hasBlockContext(w.output.childNodes)){w.nextMatch=w.matchStart;var matched,i,destStack=[w.output],curType=null,curLevel=0;do{this.lookahead.lastIndex=w.nextMatch;var match=this.lookahead.exec(w.source);if(matched=match&&match.index===w.nextMatch){var newType=match[2]?"ol":"ul",newLevel=match[0].length;if(w.nextMatch+=match[0].length,newLevel>curLevel)for(i=curLevel;i<newLevel;++i)destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0));else if(newLevel<curLevel)for(i=curLevel;i>newLevel;--i)destStack.pop();else newLevel===curLevel&&newType!==curType&&(destStack.pop(),destStack.push(jQuery(document.createElement(newType)).appendTo(destStack[destStack.length-1]).get(0)));curLevel=newLevel,curType=newType,w.subWikify(jQuery(document.createElement("li")).appendTo(destStack[destStack.length-1]).get(0),this.terminator)}}while(matched)}else jQuery(w.output).append(document.createTextNode(w.matchText))}}),Wikifier.Parser.add({name:"commentByBlock",profiles:["core"],match:"(?:/(?:%|\\*))|(?:\x3c!--)",lookahead:/(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);match&&match.index===w.matchStart&&(w.nextMatch=this.lookahead.lastIndex)}}),Wikifier.Parser.add({name:"lineContinuation",profiles:["core"],match:"\\\\".concat(Patterns.spaceNoTerminator,"*\\n|\\n").concat(Patterns.spaceNoTerminator,"*\\\\|\\n?\\\\").concat(Patterns.spaceNoTerminator,"*$|^").concat(Patterns.spaceNoTerminator,"*\\\\\\n?"),handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"lineBreak",profiles:["core"],match:"\\n|<[Bb][Rr]\\s*/?>",handler:function(w){w.options.nobr||jQuery(document.createElement("br")).appendTo(w.output)}}),Wikifier.Parser.add({name:"htmlCharacterReference",profiles:["core"],match:"(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",handler:function(w){jQuery(document.createDocumentFragment()).append(w.matchText).appendTo(w.output)}}),Wikifier.Parser.add({name:"xmlProlog",profiles:["core"],match:"<\\?[Xx][Mm][Ll][^>]*\\?>",handler:function(w){w.nextMatch=w.matchStart+w.matchLength}}),Wikifier.Parser.add({name:"verbatimHtml",profiles:["core"],match:"<[Hh][Tt][Mm][Ll]>",lookahead:/<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"verbatimScriptTag",profiles:["core"],match:"<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",lookahead:/(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,handler:_verbatimTagHandler}),Wikifier.Parser.add({name:"styleTag",profiles:["core"],match:"<[Ss][Tt][Yy][Ll][Ee][^>]*>",lookahead:/(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,imageMarkup:new RegExp(Patterns.cssImage,"g"),hasImageMarkup:new RegExp(Patterns.cssImage),handler:function(w){this.lookahead.lastIndex=w.matchStart;var match=this.lookahead.exec(w.source);if(match&&match.index===w.matchStart){w.nextMatch=this.lookahead.lastIndex;var css=match[2];this.hasImageMarkup.test(css)&&(this.imageMarkup.lastIndex=0,css=css.replace(this.imageMarkup,(function(wikiImage){var markup=Wikifier.helpers.parseSquareBracketedMarkup({source:wikiImage,matchStart:0});if(markup.hasOwnProperty("error")||markup.pos<wikiImage.length)return wikiImage;var source=markup.source;if("data:"!==source.slice(0,5)&&Story.has(source)){var passage=Story.get(source);passage.tags.includes("Twine.image")&&(source=passage.text)}return'url("'.concat(source.replace(/"/g,"%22"),'")')}))),jQuery(document.createDocumentFragment()).append(match[1]+css+match[3]).appendTo(w.output)}}}),Wikifier.Parser.add({name:"svgTag",profiles:["core"],match:"<[Ss][Vv][Gg][^>]*>",lookahead:/<(\/?)[Ss][Vv][Gg][^>]*>/gm,namespace:"http://www.w3.org/2000/svg",handler:function(w){var _this13=this;this.lookahead.lastIndex=w.nextMatch;for(var match,depth=1;depth>0&&null!==(match=this.lookahead.exec(w.source));)depth+="/"===match[1]?-1:1;if(0===depth){w.nextMatch=this.lookahead.lastIndex;var svgTag=w.source.slice(w.matchStart,this.lookahead.lastIndex),$frag=jQuery(document.createDocumentFragment()).append(svgTag);$frag.find("a[data-passage],image[data-passage]").each((function(_,el){var tagName=el.tagName.toLowerCase();try{_this13.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"svg|<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}el.hasAttribute("data-passage")&&_this13.processDataAttributes(el,tagName)})),$frag.appendTo(w.output)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref10){var name=_ref10.name,value=_ref10.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if("image"===tagName)"data:"!==passage.slice(0,5)&&Story.has(passage)&&(passage=Story.get(passage)).tags.includes("Twine.image")&&el.setAttribute("href",passage.text.trim());else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}}),Wikifier.Parser.add({name:"htmlTag",profiles:["core"],match:"<".concat(Patterns.htmlTagName,"(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),tagRe:new RegExp("^<(".concat(Patterns.htmlTagName,")")),mediaTags:["audio","img","source","track","video"],nobrTags:["audio","colgroup","datalist","dl","figure","meter","ol","optgroup","picture","progress","ruby","select","table","tbody","tfoot","thead","tr","ul","video"],voidTags:["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],handler:function(w){var tagMatch=this.tagRe.exec(w.matchText),tag=tagMatch&&tagMatch[1],tagName=tag&&tag.toLowerCase();if(tagName){var terminator,terminatorMatch,isVoid=this.voidTags.includes(tagName)||w.matchText.endsWith("/>"),isNobr=this.nobrTags.includes(tagName);if(!isVoid){terminator="<\\/".concat(tagName,"\\s*>");var terminatorRe=new RegExp(terminator,"gim");terminatorRe.lastIndex=w.matchStart,terminatorMatch=terminatorRe.exec(w.source)}if(!isVoid&&!terminatorMatch)return throwError(w.output,"cannot find a closing tag for HTML <".concat(tag,">"),"".concat(w.matchText,"…"));var debugView,output=w.output,el=document.createElement(w.output.tagName);for(el.innerHTML=w.matchText;el.firstChild;)el=el.firstChild;try{this.processAttributeDirectives(el)}catch(ex){return throwError(w.output,"<".concat(tagName,">: ").concat(ex.message),"".concat(w.matchText,"…"))}if(el.hasAttribute("data-passage")&&(this.processDataAttributes(el,tagName),Config.debug&&((debugView=new DebugView(w.output,"html-".concat(tagName),tagName,w.matchText)).modes({block:"img"===tagName,nonvoid:terminatorMatch}),output=debugView.output)),terminatorMatch){try{Wikifier.Option.push({nobr:isNobr}),w.subWikify(el,terminator,{ignoreTerminatorCase:!0})}finally{Wikifier.Option.pop()}debugView&&jQuery(el).find(".debug.block").length>0&&debugView.modes({block:!0})}output.appendChild("track"===tagName?el.cloneNode(!0):el)}},processAttributeDirectives:function(el){_toConsumableArray(el.attributes).forEach((function(_ref11){var name=_ref11.name,value=_ref11.value,evalShorthand="@"===name[0];if(evalShorthand||name.startsWith("sc-eval:")){var result,newName=name.slice(evalShorthand?1:8);if("data-setter"===newName)throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name,'"'));try{result=Scripting.evalTwineScript(value)}catch(ex){throw new Error('bad evaluation from attribute directive "'.concat(name,'": ').concat(ex.message))}try{el.setAttribute(newName,result),el.removeAttribute(name)}catch(ex){throw new Error('cannot transform attribute directive "'.concat(name,'" into attribute "').concat(newName,'"'))}}}))},processDataAttributes:function(el,tagName){var passage=el.getAttribute("data-passage");if(null!=passage){var evaluated=Wikifier.helpers.evalPassageId(passage);if(evaluated!==passage&&(passage=evaluated,el.setAttribute("data-passage",evaluated)),""!==passage)if(this.mediaTags.includes(tagName)){if("data:"!==passage.slice(0,5)&&Story.has(passage)){var parentName,twineTag;switch(passage=Story.get(passage),tagName){case"audio":case"video":twineTag="Twine.".concat(tagName);break;case"img":twineTag="Twine.image";break;case"track":twineTag="Twine.vtt";break;case"source":var $parent=$(el).closest("audio,picture,video");$parent.length&&(parentName=$parent.get(0).tagName.toLowerCase(),twineTag="Twine.".concat("picture"===parentName?"image":parentName))}passage.tags.includes(twineTag)&&(el["picture"===parentName?"srcset":"src"]=passage.text.trim())}}else{var setFn,setter=el.getAttribute("data-setter");null!=setter&&""!==(setter=String(setter).trim())&&(setFn=Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))),Story.has(passage)?(el.classList.add("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&el.classList.add("link-visited")):el.classList.add("link-broken"),jQuery(el).ariaClick({one:!0},(function(){"function"==typeof setFn&&setFn.call(this),Engine.play(passage)}))}}}})}();var Template=(_templates=new Map,_validNameRe=new RegExp("^(?:".concat(Patterns.templateName,")$")),_validType=function(template){var templateType=_typeof(template);return"function"===templateType||"string"===templateType},Object.freeze(Object.defineProperties({},{add:{value:function(name,template){if(!(_validType(template)||template instanceof Array&&template.length>0&&template.every(_validType)))throw new TypeError("invalid template type (".concat(name,"); templates must be: functions, strings, or an array of either"));(name instanceof Array?name:[name]).forEach((function(name){if(!_validNameRe.test(name))throw new Error('invalid template name "'.concat(name,'"'));if(_templates.has(name))throw new Error("cannot clobber existing template ?".concat(name));_templates.set(name,template)}))}},delete:{value:function(name){(name instanceof Array?name:[name]).forEach((function(name){return _templates.delete(name)}))}},get:{value:function(name){return _templates.has(name)?_templates.get(name):null}},has:{value:function(name){return _templates.has(name)}},size:{get:function(){return _templates.size}}}))),_templates,_validNameRe,_validType,Macro=function(){var _macros={},_tags={},_validNameRe=new RegExp("^(?:".concat(Patterns.macroName,")$"));function macrosHas(name){return _macros.hasOwnProperty(name)}function tagsRegister(parent,bodyTags){if(!parent)throw new Error("no parent specified");for(var endTags=["/".concat(parent),"end".concat(parent)],allTags=[].concat(endTags,Array.isArray(bodyTags)?bodyTags:[]),i=0;i<allTags.length;++i){var tag=allTags[i];if(macrosHas(tag))throw new Error("cannot register tag for an existing macro");tagsHas(tag)?_tags[tag].includes(parent)||(_tags[tag].push(parent),_tags[tag].sort()):_tags[tag]=[parent]}}function tagsUnregister(parent){if(!parent)throw new Error("no parent specified");Object.keys(_tags).forEach((function(tag){var i=_tags[tag].indexOf(parent);-1!==i&&(1===_tags[tag].length?delete _tags[tag]:_tags[tag].splice(i,1))}))}function tagsHas(name){return _tags.hasOwnProperty(name)}return Object.freeze(Object.defineProperties({},{add:{value:function macrosAdd(name,def){if(Array.isArray(name))name.forEach((function(name){return macrosAdd(name,def)}));else{if(!_validNameRe.test(name))throw new Error('invalid macro name "'.concat(name,'"'));if(macrosHas(name))throw new Error("cannot clobber existing macro <<".concat(name,">>"));if(tagsHas(name))throw new Error("cannot clobber child tag <<".concat(name,">> of parent macro").concat(1===_tags[name].length?"":"s"," <<").concat(_tags[name].join(">>, <<"),">>"));try{if("object"===_typeof(def))_macros[name]=Object.assign(Object.create(null),def,{_MACRO_API:!0});else{if(!macrosHas(def))throw new Error("cannot create alias of nonexistent macro <<".concat(def,">>"));_macros[name]=Object.create(_macros[def],{_ALIAS_OF:{enumerable:!0,value:def}})}Object.defineProperty(_macros,name,{writable:!1})}catch(ex){throw"TypeError"===ex.name?new Error("cannot clobber protected macro <<".concat(name,">>")):new Error("unknown error when attempting to add macro <<".concat(name,">>: [").concat(ex.name,"] ").concat(ex.message))}if(void 0!==_macros[name].tags)if(null==_macros[name].tags)tagsRegister(name);else{if(!Array.isArray(_macros[name].tags))throw new Error('bad value for "tags" property of macro <<'.concat(name,">>"));tagsRegister(name,_macros[name].tags)}}}},delete:{value:function macrosDelete(name){if(Array.isArray(name))name.forEach((function(name){return macrosDelete(name)}));else if(macrosHas(name)){void 0!==_macros[name].tags&&tagsUnregister(name);try{Object.defineProperty(_macros,name,{writable:!0}),delete _macros[name]}catch(ex){throw new Error("unknown error removing macro <<".concat(name,">>: ").concat(ex.message))}}else if(tagsHas(name))throw new Error("cannot remove child tag <<".concat(name,">> of parent macro <<").concat(_tags[name],">>"))}},isEmpty:{value:function(){return 0===Object.keys(_macros).length}},has:{value:macrosHas},get:{value:function(name){var macro=null;return macrosHas(name)&&"function"==typeof _macros[name].handler?macro=_macros[name]:macros.hasOwnProperty(name)&&"function"==typeof macros[name].handler&&(macro=macros[name]),macro}},init:{value:function(){var handler=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"init";Object.keys(_macros).forEach((function(name){"function"==typeof _macros[name][handler]&&_macros[name][handler](name)})),Object.keys(macros).forEach((function(name){"function"==typeof macros[name][handler]&&macros[name][handler](name)}))}},tags:{value:Object.freeze(Object.defineProperties({},{register:{value:tagsRegister},unregister:{value:tagsUnregister},has:{value:tagsHas},get:{value:function(name){return tagsHas(name)?_tags[name]:null}}}))},evalStatements:{value:function(){return Scripting.evalJavaScript.apply(Scripting,arguments)}}}))}(),MacroContext=function(){var MacroContext=function(){function MacroContext(contextData){_classCallCheck(this,MacroContext);var context=Object.assign({parent:null,macro:null,name:"",displayName:"",args:null,payload:null,parser:null,source:""},contextData);if(null===context.macro||""===context.name||null===context.parser)throw new TypeError("context object missing required properties");Object.defineProperties(this,{self:{value:context.macro},name:{value:void 0===context.macro._ALIAS_OF?context.name:context.macro._ALIAS_OF},displayName:{value:context.name},args:{value:context.args},payload:{value:context.payload},source:{value:context.source},parent:{value:context.parent},parser:{value:context.parser},_output:{value:context.parser.output},_shadows:{writable:!0,value:null},_debugView:{writable:!0,value:null},_debugViewEnabled:{writable:!0,value:Config.debug}})}return _createClass(MacroContext,[{key:"output",get:function(){return this._debugViewEnabled?this.debugView.output:this._output}},{key:"shadows",get:function(){return _toConsumableArray(this._shadows)}},{key:"shadowView",get:function(){var view=new Set;return this.contextSelectAll((function(ctx){return ctx._shadows})).forEach((function(ctx){return ctx._shadows.forEach((function(name){return view.add(name)}))})),_toConsumableArray(view)}},{key:"debugView",get:function(){return this._debugViewEnabled?null!==this._debugView?this._debugView:this.createDebugView():null}},{key:"contextHas",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return!0;return!1}},{key:"contextSelect",value:function(filter){for(var context=this;null!==(context=context.parent);)if(filter(context))return context;return null}},{key:"contextSelectAll",value:function(filter){for(var result=[],context=this;null!==(context=context.parent);)filter(context)&&result.push(context);return result}},{key:"addShadow",value:function(){var _this14=this;this._shadows||(this._shadows=new Set);for(var varRe=new RegExp("^".concat(Patterns.variable,"$")),_len14=arguments.length,names=new Array(_len14),_key14=0;_key14<_len14;_key14++)names[_key14]=arguments[_key14];names.flat(1/0).forEach((function(name){if("string"!=typeof name)throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));if(!varRe.test(name))throw new Error('invalid variable name "'.concat(name,'"'));_this14._shadows.add(name)}))}},{key:"createShadowWrapper",value:function(callback,doneCallback,startCallback){var shadowStore,shadowContext=this;return"function"==typeof callback&&(shadowStore={},this.shadowView.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey]}))),function(){for(var _len15=arguments.length,args=new Array(_len15),_key15=0;_key15<_len15;_key15++)args[_key15]=arguments[_key15];if("function"==typeof startCallback&&startCallback.apply(this,args),"function"==typeof callback){var contextCache,shadowNames=Object.keys(shadowStore),valueCache=shadowNames.length>0?{}:null,macroParser=Wikifier.Parser.get("macro");try{shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),store[varKey]=shadowStore[varName]})),contextCache=macroParser.context,macroParser.context=shadowContext,callback.apply(this,args)}finally{contextCache!==undefined&&(macroParser.context=contextCache),shadowNames.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;shadowStore[varName]=store[varKey],valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}"function"==typeof doneCallback&&doneCallback.apply(this,args)}}},{key:"createDebugView",value:function(name,title){return this._debugView=new DebugView(this._output,"macro",name||this.displayName,title||this.source),null!==this.payload&&this.payload.length>0&&this._debugView.modes({nonvoid:!0}),this._debugViewEnabled=!0,this._debugView}},{key:"removeDebugView",value:function(){null!==this._debugView&&(this._debugView.remove(),this._debugView=null),this._debugViewEnabled=!1}},{key:"error",value:function(message,source){return throwError(this._output,"<<".concat(this.displayName,">>: ").concat(message),source||this.source)}}]),MacroContext}();return MacroContext}();!function(){if(Macro.add("capture",{skipArgs:!0,tags:null,tsVarRe:new RegExp("(".concat(Patterns.variable,")"),"g"),handler:function(){if(0===this.args.raw.length)return this.error("no story/temporary variable list specified");var valueCache={};try{for(var match,tsVarRe=this.self.tsVarRe;null!==(match=tsVarRe.exec(this.args.raw));){var varName=match[1],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;store.hasOwnProperty(varKey)&&(valueCache[varKey]=store[varKey]),this.addShadow(varName)}new Wikifier(this.output,this.payload[0].contents)}finally{this.shadows.forEach((function(varName){var varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary;valueCache.hasOwnProperty(varKey)?store[varKey]=valueCache[varKey]:delete store[varKey]}))}}}),Macro.add("set",{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("unset",{skipArgs:!0,jsVarRe:new RegExp("State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story/temporary variable list specified");for(var match,jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var store=State[match[1]],name=match[2];store.hasOwnProperty(name)&&delete store[name]}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remember",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}for(var match,remember=storage.get("remember")||{},jsVarRe=this.self.jsVarRe;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];remember[name]=State.variables[name]}if(!storage.set("remember",remember))return this.error("unknown error, cannot remember: ".concat(this.args.raw));Config.debug&&this.debugView.modes({hidden:!0})},init:function(){var remember=storage.get("remember");remember&&Object.keys(remember).forEach((function(name){return State.variables[name]=remember[name]}))}}),Macro.add("forget",{skipArgs:!0,jsVarRe:new RegExp("State\\.variables\\.(".concat(Patterns.identifier,")"),"g"),handler:function(){if(0===this.args.full.length)return this.error("no story variable list specified");for(var match,remember=storage.get("remember"),jsVarRe=this.self.jsVarRe,needStore=!1;null!==(match=jsVarRe.exec(this.args.full));){var name=match[1];State.variables.hasOwnProperty(name)&&delete State.variables[name],remember&&remember.hasOwnProperty(name)&&(needStore=!0,delete remember[name])}if(needStore)if(0===Object.keys(remember).length){if(!storage.delete("remember"))return this.error("unknown error, cannot update remember store")}else if(!storage.set("remember",remember))return this.error("unknown error, cannot update remember store");Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("run","set"),Macro.add("script",{skipArgs:!0,tags:null,handler:function(){var output=document.createDocumentFragment();try{Scripting.evalJavaScript(this.payload[0].contents,output)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}Config.debug&&this.createDebugView(),output.hasChildNodes()&&this.output.appendChild(output)}}),Macro.add("include",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?(Config.debug&&this.debugView.modes({block:!0}),passage=Story.get(passage),void(this.args[1]?jQuery(document.createElement(this.args[1])).addClass("".concat(passage.domId," macro-").concat(this.name)).attr("data-passage",passage.title).appendTo(this.output):jQuery(this.output)).wiki(passage.processText())):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("nobr",{skipArgs:!0,tags:null,handler:function(){new Wikifier(this.output,this.payload[0].contents.replace(/^\n+|\n+$/g,"").replace(/\n+/g," "))}}),Macro.add(["print","=","-"],{skipArgs:!0,handler:function(){if(0===this.args.full.length)return this.error("no expression specified");try{var result=stringFrom(Scripting.evalJavaScript(this.args.full));null!==result&&new Wikifier(this.output,"-"===this.name?Util.escape(result):result)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("silently",{skipArgs:!0,tags:null,handler:function(){var frag=document.createDocumentFragment();if(new Wikifier(frag,this.payload[0].contents.trim()),Config.debug)this.debugView.modes({block:!0,hidden:!0}),this.output.appendChild(frag);else{var errList=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent}));if(errList.length>0)return this.error("error".concat(1===errList.length?"":"s"," within contents (").concat(errList.join("; "),")"))}}}),Macro.add("type",{isAsync:!0,tags:null,typeId:0,handler:function(){if(0===this.args.length)return this.error("no speed specified");var cursor,speed=Util.fromCssTime(this.args[0]);if(speed<0)return this.error("speed time value must be non-negative (received: ".concat(this.args[0],")"));for(var elClass="",elId="",elTag="div",skipKey=Config.macros.typeSkipKey,start=400,options=this.args.slice(1);options.length>0;){var option=options.shift();switch(option){case"class":if(0===options.length)return this.error("class option missing required class name(s)");if(""===(elClass=options.shift()))throw new Error('class option class name(s) must be non-empty (received: "")');break;case"element":if(0===options.length)return this.error("element option missing required element tag name");if(""===(elTag=options.shift()))throw new Error('element option tag name must be non-empty (received: "")');break;case"id":if(0===options.length)return this.error("id option missing required ID");if(""===(elId=options.shift()))throw new Error('id option ID must be non-empty (received: "")');break;case"keep":cursor="keep";break;case"none":cursor="none";break;case"skipkey":if(0===options.length)return this.error("skipkey option missing required key value");if(""===(skipKey=options.shift()))throw new Error('skipkey option key value must be non-empty (received: "")');break;case"start":if(0===options.length)return this.error("start option missing required time value");var value=options.shift();if((start=Util.fromCssTime(value))<0)throw new Error("start option time value must be non-negative (received: ".concat(value,")"));break;default:return this.error("unknown option: ".concat(option))}}var contents=this.payload[0].contents;if(""!==contents.trim()){Config.debug&&this.debugView.modes({block:!0});var className="macro-".concat(this.name),namespace=".".concat(className),$target=jQuery(document.createElement(elTag)).addClass("".concat(className," ").concat(className,"-target")).appendTo(this.output);TempState.macroTypeQueue||(TempState.macroTypeQueue=[],$(document).off(namespace).one(":passageinit".concat(namespace),(function(){return $(document).off(namespace)})));var startTyping=0===TempState.macroTypeQueue.length,selfId=++this.self.typeId;TempState.macroTypeQueue.push({id:selfId,handler:function(){var $wrapper=jQuery(document.createElement(elTag)).addClass(className);elId&&$wrapper.attr("id",elId),elClass&&$wrapper.addClass(elClass),new Wikifier($wrapper,contents);var passage=State.passage,turn=State.turns;if(!Config.macros.typeVisitedPassages&&State.passages.slice(0,-1).some((function(title){return title===passage}))||$wrapper.find(".error").length>0)return $target.replaceWith($wrapper),TempState.macroTypeQueue.shift(),void(TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().handler());var typer=new NodeTyper({targetNode:$wrapper.get(0),classNames:"none"===cursor?null:"".concat(className,"-cursor")});$target.replaceWith($wrapper);var keydownAndNS="keydown".concat(namespace),typingStopAndNS="".concat(":typingstop").concat(namespace);$(document).off(keydownAndNS).on(keydownAndNS,(function(ev){Util.scrubEventKey(ev.key)!==skipKey||ev.target!==document.body&&ev.target!==document.documentElement||(ev.preventDefault(),$(document).off(keydownAndNS),typer.finish())})).one(typingStopAndNS,(function(){TempState.macroTypeQueue&&(0===TempState.macroTypeQueue.length?jQuery.event.trigger(":typingcomplete"):TempState.macroTypeQueue.first().handler())}));var typeNode=function(){var typeNodeMember=function(typeIntervalId){State.passage===passage&&State.turns===turn&&typer.type()||(typeIntervalId&&clearInterval(typeIntervalId),TempState.macroTypeQueue&&TempState.macroTypeQueue.length>0&&TempState.macroTypeQueue.first().id===selfId&&TempState.macroTypeQueue.shift(),$wrapper.trigger(":typingstop"),$wrapper.addClass("".concat(className,"-done")),"keep"===cursor&&$wrapper.addClass("".concat(className,"-cursor")))};$wrapper.trigger(":typingstart"),typeNodeMember();var typeNodeMemberId=setInterval((function(){return typeNodeMember(typeNodeMemberId)}),speed)};start?setTimeout(typeNode,start):typeNode()}}),startTyping&&(Engine.isPlaying()?$(document).one(":passageend".concat(namespace),(function(){return TempState.macroTypeQueue.first().handler()})):TempState.macroTypeQueue.first().handler())}}}),Macro.add("display","include"),Macro.add("if",{skipArgs:!0,tags:["elseif","else"],elseifWsRe:/^\s*if\b/i,ifAssignRe:/[^!=&^|<>*/%+-]=[^=>]/,handler:function(){var i;try{var len=this.payload.length,elseifWsRe=this.self.elseifWsRe,ifAssignRe=this.self.ifAssignRe;for(i=0;i<len;++i)if("else"===this.payload[i].name){if(this.payload[i].args.raw.length>0)return elseifWsRe.test(this.payload[i].args.raw)?this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i>0?" (#"+i+")":"")):this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<else>> must be the final clause")}else{if(0===this.payload[i].args.full.length)return this.error("no conditional expression specified for <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""));if(Config.macros.ifAssignmentError&&ifAssignRe.test(this.payload[i].args.full))return this.error("assignment operator found within <<".concat(this.payload[i].name,">> clause").concat(i>0?" (#"+i+")":""," (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ").concat(this.payload[i].args.raw))}var evalJavaScript=Scripting.evalJavaScript,success=!1;for(i=0;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"else"===this.payload[i].name||evalJavaScript(this.payload[i].args.full)){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!success,invalid:!success})}}catch(ex){return this.error("bad conditional expression in <<".concat(0===i?"if":"elseif",">> clause").concat(i>0?" (#"+i+")":"",": ").concat("object"===_typeof(ex)?ex.message:ex))}}}),Macro.add("switch",{skipArgs:["switch"],tags:["case","default"],handler:function(){if(0===this.args.full.length)return this.error("no expression specified");var i,result,len=this.payload.length;if(1===len)return this.error("no cases specified");for(i=1;i<len;++i)if("default"===this.payload[i].name){if(this.payload[i].args.length>0)return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));if(i+1!==len)return this.error("<<default>> must be the final case")}else if(0===this.payload[i].args.length)return this.error("no value(s) specified for <<".concat(this.payload[i].name,">> (#").concat(i,")"));try{result=Scripting.evalJavaScript(this.args.full)}catch(ex){return this.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}var debugView=this.debugView,success=!1;for(Config.debug&&debugView.modes({nonvoid:!1,hidden:!0}),i=1;i<len;++i){if(Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1}),"default"===this.payload[i].name||this.payload[i].args.some((function(val){return val===result}))){success=!0,new Wikifier(this.output,this.payload[i].contents);break}Config.debug&&this.debugView.modes({hidden:!0,invalid:!0})}if(Config.debug){for(++i;i<len;++i)this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0,invalid:!0});debugView.modes({nonvoid:!1,hidden:!0,invalid:!success}),this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0,invalid:!success})}}}),Macro.add("for",{skipArgs:!0,tags:null,hasRangeRe:new RegExp("^\\S".concat(Patterns.anyChar,"*?\\s+range\\s+\\S").concat(Patterns.anyChar,"*?$")),rangeRe:new RegExp("^(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier,")\\s*,\\s*)?State\\.(variables|temporary)\\.(").concat(Patterns.identifier,")\\s+range\\s+(\\S").concat(Patterns.anyChar,"*?)$")),threePartRe:/^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,forInRe:/^\S+\s+in\s+\S+/i,forOfRe:/^\S+\s+of\s+\S+/i,handler:function(){var argsStr=this.args.full.trim(),payload=this.payload[0].contents.replace(/\n$/,"");if(0===argsStr.length)this.self.handleFor.call(this,payload,null,!0,null);else if(this.self.hasRangeRe.test(argsStr)){var parts=argsStr.match(this.self.rangeRe);if(null===parts)return this.error("invalid range form syntax, format: [index ,] value range collection");this.self.handleForRange.call(this,payload,{type:parts[1],name:parts[2]},{type:parts[3],name:parts[4]},parts[5])}else{var init,condition,post;if(-1===argsStr.indexOf(";")){if(this.self.forInRe.test(argsStr))return this.error("invalid syntax, for…in is not supported; see: for…range");if(this.self.forOfRe.test(argsStr))return this.error("invalid syntax, for…of is not supported; see: for…range");condition=argsStr}else{var _parts=argsStr.match(this.self.threePartRe);if(null===_parts)return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");init=_parts[1],condition=_parts[2].trim(),post=_parts[3],0===condition.length&&(condition=!0)}this.self.handleFor.call(this,payload,init,condition,post)}},handleFor:function(payload,init,condition,post){var evalJavaScript=Scripting.evalJavaScript,first=!0,safety=Config.macros.maxLoopIterations;Config.debug&&this.debugView.modes({block:!0});try{if(TempState.break=null,init)try{evalJavaScript(init)}catch(ex){return this.error("bad init expression: ".concat("object"===_typeof(ex)?ex.message:ex))}for(;evalJavaScript(condition);){if(--safety<0)return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations,")"));if(new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}if(post)try{evalJavaScript(post)}catch(ex){return this.error("bad post expression: ".concat("object"===_typeof(ex)?ex.message:ex))}}}catch(ex){return this.error("bad conditional expression: ".concat("object"===_typeof(ex)?ex.message:ex))}finally{TempState.break=null}},handleForRange:function(payload,indexVar,valueVar,rangeExp){var rangeList,first=!0;try{rangeList=this.self.toRangeList(rangeExp)}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});try{TempState.break=null;for(var i=0;i<rangeList.length;++i)if(indexVar.name&&(State[indexVar.type][indexVar.name]=rangeList[i][0]),State[valueVar.type][valueVar.name]=rangeList[i][1],new Wikifier(this.output,first?payload.replace(/^\n/,""):payload),first&&(first=!1),null!=TempState.break)if(1===TempState.break)TempState.break=null;else if(2===TempState.break){TempState.break=null;break}}catch(ex){return this.error("object"===_typeof(ex)?ex.message:ex)}finally{TempState.break=null}},toRangeList:function(rangeExp){var value,list,evalJavaScript=Scripting.evalJavaScript;try{value=evalJavaScript("{"===rangeExp[0]?"(".concat(rangeExp,")"):rangeExp)}catch(ex){if("object"!==_typeof(ex))throw new Error("bad range expression: ".concat(ex));throw ex.message="bad range expression: ".concat(ex.message),ex}switch(_typeof(value)){case"string":list=[];for(var i=0;i<value.length;){var obj=Util.charAndPosAt(value,i);list.push([i,obj.char]),i=1+obj.end}break;case"object":if(Array.isArray(value))list=value.map((function(val,i){return[i,val]}));else if(value instanceof Set)list=_toConsumableArray(value).map((function(val,i){return[i,val]}));else if(value instanceof Map)list=_toConsumableArray(value.entries());else{if("Object"!==Util.toStringTag(value))throw new Error("unsupported range expression type: ".concat(Util.toStringTag(value)));list=Object.keys(value).map((function(key){return[key,value[key]]}))}break;default:throw new Error("unsupported range expression type: ".concat(_typeof(value)))}return list}}),Macro.add(["break","continue"],{skipArgs:!0,handler:function(){if(!this.contextHas((function(ctx){return"for"===ctx.name})))return this.error("must only be used in conjunction with its parent macro <<for>>");TempState.break="continue"===this.name?1:2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["button","link"],{isAsync:!0,tags:null,handler:function(){var _this15=this;if(0===this.args.length)return this.error("no ".concat("button"===this.name?"button":"link"," text specified"));var passage,$link=jQuery(document.createElement("button"===this.name?"button":"a"));if("object"===_typeof(this.args[0]))if(this.args[0].isImage){var $image=jQuery(document.createElement("img")).attr("src",this.args[0].source).appendTo($link);$link.addClass("link-image"),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link}else $link.append(document.createTextNode(this.args[0].text)),passage=this.args[0].link;else $link.wikiWithOptions({profile:"core"},this.args[0]),passage=this.args.length>1?this.args[1]:undefined;null!=passage?($link.attr("data-passage",passage),Story.has(passage)?($link.addClass("link-internal"),Config.addVisitedLinkClass&&State.hasPlayed(passage)&&$link.addClass("link-visited")):$link.addClass("link-broken")):$link.addClass("link-internal"),$link.addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:null!=passage?"link":"button",one:null!=passage},this.createShadowWrapper(""!==this.payload[0].contents?function(){return Wikifier.wikifyEval(_this15.payload[0].contents.trim())}:null,null!=passage?function(){return Engine.play(passage)}:null)).appendTo(this.output)}}),Macro.add("checkbox",{isAsync:!0,handler:function(){if(this.args.length<3){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("unchecked value"),this.args.length<3&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),uncheckValue=this.args[1],checkValue=this.args[2],el=document.createElement("input");switch(jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:"checkbox",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.checked?checkValue:uncheckValue)}))).appendTo(this.output),this.args[3]){case"autocheck":State.getVar(varName)===checkValue?el.checked=!0:State.setVar(varName,uncheckValue);break;case"checked":el.checked=!0,State.setVar(varName,checkValue);break;default:State.setVar(varName,uncheckValue)}}}),Macro.add(["cycle","listbox"],{isAsync:!0,skipArgs:["optionsfrom"],tags:["option","optionsfrom"],handler:function(){var _this16=this;if(0===this.args.length)return this.error("no variable name specified");if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),len=this.payload.length;if(1===len)return this.error("no options specified");for(var config={autoselect:!1,once:!1},i=1;i<this.args.length;++i){var arg=this.args[i];switch(arg){case"once":config.once=!0;break;case"autoselect":config.autoselect=!0;break;default:return this.error("unknown argument: ".concat(arg))}}for(var options=[],tagCount={option:0,optionsfrom:0},selectedIdx=-1,_i5=1;_i5<len;++_i5){var payload=this.payload[_i5];if("option"===payload.name){if(++tagCount.option,0===payload.args.length)return this.error("no arguments specified for <<".concat(payload.name,">> (#").concat(tagCount.option,")"));var option={label:String(payload.args[0])},isSelected=!1;switch(payload.args.length){case 1:option.value=payload.args[0];break;case 2:"selected"===payload.args[1]?(option.value=payload.args[0],isSelected=!0):option.value=payload.args[1];break;default:option.value=payload.args[1],"selected"===payload.args[2]&&(isSelected=!0)}if(options.push(option),isSelected){if(config.autoselect)return this.error("cannot specify both the autoselect and selected keywords");if(-1!==selectedIdx)return this.error("multiple selected keywords specified for <<".concat(payload.name,">> (#").concat(selectedIdx+1," & #").concat(tagCount.option,")"));selectedIdx=options.length-1}}else{var _ret=function(){if(++tagCount.optionsfrom,0===payload.args.full.length)return{v:_this16.error("no expression specified for <<".concat(payload.name,">> (#").concat(tagCount.optionsfrom,")"))};var result=void 0;try{var exp=payload.args.full;result=Scripting.evalJavaScript("{"===exp[0]?"(".concat(exp,")"):exp)}catch(ex){return{v:_this16.error("bad evaluation: ".concat("object"===_typeof(ex)?ex.message:ex))}}if("object"!==_typeof(result)||null===result)return{v:_this16.error("expression must yield a supported collection or generic object (type: ".concat(null===result?"null":_typeof(result),")"))};if(result instanceof Array||result instanceof Set)result.forEach((function(val){return options.push({label:String(val),value:val})}));else if(result instanceof Map)result.forEach((function(val,key){return options.push({label:String(key),value:val})}));else{var oType=Util.toStringTag(result);if("Object"!==oType)return{v:_this16.error("expression must yield a supported collection or generic object (object type: ".concat(oType,")"))};Object.keys(result).forEach((function(key){return options.push({label:key,value:result[key]})}))}}();if("object"===_typeof(_ret))return _ret.v}}if(-1===selectedIdx)if(config.autoselect){var sameValueZero=Util.sameValueZero,curValue=State.getVar(varName),curValueIdx=options.findIndex((function(opt){return sameValueZero(opt.value,curValue)}));selectedIdx=-1===curValueIdx?0:curValueIdx}else selectedIdx=0;if("cycle"===this.name){var lastIdx=options.length-1;if(config.once&&selectedIdx===lastIdx)jQuery(this.output).wikiWithOptions({profile:"core"},options[selectedIdx].label);else{var cycleIdx=selectedIdx;jQuery(document.createElement("a")).wikiWithOptions({profile:"core"},options[selectedIdx].label).attr("id","".concat(this.name,"-").concat(varId)).addClass("macro-".concat(this.name)).ariaClick({namespace:".macros",role:"button"},this.createShadowWrapper((function(){var $this=$(this);cycleIdx=(cycleIdx+1)%options.length,State.setVar(varName,options[cycleIdx].value),$this.empty().wikiWithOptions({profile:"core"},options[cycleIdx].label),config.once&&cycleIdx===lastIdx&&$this.off().contents().unwrap()}))).appendTo(this.output)}}else{var $select=jQuery(document.createElement("select"));options.forEach((function(opt,i){jQuery(document.createElement("option")).val(i).text(opt.label).appendTo($select)})),$select.attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),tabindex:0}).addClass("macro-".concat(this.name)).val(selectedIdx).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,options[Number(this.value)].value)}))).appendTo(this.output)}State.setVar(varName,options[selectedIdx].value)}}),Macro.add(["linkappend","linkprepend","linkreplace"],{isAsync:!0,tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this17=this;if(0===this.args.length)return this.error("no link text specified");var $link=jQuery(document.createElement("a")),$insert=jQuery(document.createElement("span")),transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]);$link.wikiWithOptions({profile:"core"},this.args[0]).addClass("link-internal macro-".concat(this.name)).ariaClick({namespace:".macros",one:!0},this.createShadowWrapper((function(){if("linkreplace"===_this17.name?$link.remove():$link.wrap('<span class="macro-'.concat(_this17.name,'"></span>')).replaceWith((function(){return $link.html()})),""!==_this17.payload[0].contents){var frag=document.createDocumentFragment();new Wikifier(frag,_this17.payload[0].contents),$insert.append(frag)}transition&&setTimeout((function(){return $insert.removeClass("macro-".concat(_this17.name,"-in"))}),Engine.minDomActionDelay)}))).appendTo(this.output),$insert.addClass("macro-".concat(this.name,"-insert")),transition&&$insert.addClass("macro-".concat(this.name,"-in")),"linkprepend"===this.name?$insert.insertBefore($link):$insert.insertAfter($link)}}),Macro.add(["numberbox","textbox"],{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var asNumber="numberbox"===this.name,defaultValue=asNumber?Number(this.args[1]):this.args[1];if(asNumber&&Number.isNaN(defaultValue))return this.error('default value "'.concat(this.args[1],'" is neither a number nor can it be parsed into a number'));var passage,varId=Util.slugify(varName),el=document.createElement("input"),autofocus=!1;this.args.length>3?(passage=this.args[2],autofocus="autofocus"===this.args[3]):this.args.length>2&&("autofocus"===this.args[2]?autofocus=!0:passage=this.args[2]),"object"===_typeof(passage)&&(passage=passage.link),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),type:asNumber?"number":"text",inputmode:asNumber?"decimal":"text",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,asNumber?Number(this.value):this.value)}))).on("keypress.macros",this.createShadowWrapper((function(ev){13===ev.which&&(ev.preventDefault(),State.setVar(varName,asNumber?Number(this.value):this.value),null!=passage&&Engine.play(passage))}))).appendTo(this.output),asNumber&&(el.step="any"),State.setVar(varName,defaultValue),el.value=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("radiobutton",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("checked value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));var varId=Util.slugify(varName),checkValue=this.args[1],el=document.createElement("input");switch(TempState.hasOwnProperty(this.name)||(TempState[this.name]={}),TempState[this.name].hasOwnProperty(varId)||(TempState[this.name][varId]=0),jQuery(el).attr({id:"".concat(this.name,"-").concat(varId,"-").concat(TempState[this.name][varId]++),name:"".concat(this.name,"-").concat(varId),type:"radio",tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){this.checked&&State.setVar(varName,checkValue)}))).appendTo(this.output),this.args[2]){case"autocheck":State.getVar(varName)===checkValue&&(el.checked=!0);break;case"checked":el.checked=!0,State.setVar(varName,checkValue)}}}),Macro.add("textarea",{isAsync:!0,handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("variable name"),this.args.length<2&&errors.push("default value"),this.error("no ".concat(errors.join(" or ")," specified"))}if("string"!=typeof this.args[0])return this.error("variable name argument is not a string");var varName=this.args[0].trim();if("$"!==varName[0]&&"_"!==varName[0])return this.error('variable name "'.concat(this.args[0],'" is missing its sigil ($ or _)'));Config.debug&&this.debugView.modes({block:!0});var varId=Util.slugify(varName),defaultValue=this.args[1],autofocus="autofocus"===this.args[2],el=document.createElement("textarea");jQuery(el).attr({id:"".concat(this.name,"-").concat(varId),name:"".concat(this.name,"-").concat(varId),rows:4,tabindex:0}).addClass("macro-".concat(this.name)).on("change.macros",this.createShadowWrapper((function(){State.setVar(varName,this.value)}))).appendTo(this.output),State.setVar(varName,defaultValue),el.textContent=defaultValue,autofocus&&(el.setAttribute("autofocus","autofocus"),postdisplay["#autofocus:".concat(el.id)]=function(task){delete postdisplay[task],setTimeout((function(){return el.focus()}),Engine.minDomActionDelay)})}}),Macro.add("click","link"),Macro.add("actions",{handler:function(){for(var $list=jQuery(document.createElement("ul")).addClass(this.name).appendTo(this.output),i=0;i<this.args.length;++i){var passage=void 0,text=void 0,$image=void 0,setFn=void 0;if("object"===_typeof(this.args[i])?this.args[i].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[i].source),this.args[i].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[i].passage),this.args[i].hasOwnProperty("title")&&$image.attr("title",this.args[i].title),this.args[i].hasOwnProperty("align")&&$image.attr("align",this.args[i].align),passage=this.args[i].link,setFn=this.args[i].setFn):(text=this.args[i].text,passage=this.args[i].link,setFn=this.args[i].setFn):text=passage=this.args[i],!(State.variables.hasOwnProperty("#actions")&&State.variables["#actions"].hasOwnProperty(passage)&&State.variables["#actions"][passage])){var $link=jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li")).appendTo($list),passage,null,function(passage,fn){return function(){State.variables.hasOwnProperty("#actions")||(State.variables["#actions"]={}),State.variables["#actions"][passage]=!0,"function"==typeof fn&&fn()}}(passage,setFn))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text));$image&&$link.addClass("link-image")}}}}),Macro.add(["back","return"],{handler:function(){if(this.args.length>1)return this.error("too many arguments specified, check the documentation for details");var passage,text,$image,$link,momentIndex=-1;if(1===this.args.length&&("object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),this.args[0].hasOwnProperty("link")&&(passage=this.args[0].link)):(1===this.args[0].count||(text=this.args[0].text),passage=this.args[0].link):1===this.args.length&&(text=this.args[0])),null==passage){for(var i=State.length-2;i>=0;--i)if(State.history[i].title!==State.passage){momentIndex=i,passage=State.history[i].title;break}if(null==passage&&"return"===this.name)for(var _i6=State.expired.length-1;_i6>=0;--_i6)if(State.expired[_i6]!==State.passage){passage=State.expired[_i6];break}}else{if(!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));if("back"===this.name){for(var _i7=State.length-2;_i7>=0;--_i7)if(State.history[_i7].title===passage){momentIndex=_i7;break}if(-1===momentIndex)return this.error('cannot find passage "'.concat(passage,'" in the current story history'))}}if(null==passage)return this.error("cannot find passage");"back"!==this.name||-1!==momentIndex?($link=jQuery(document.createElement("a")).addClass("link-internal").ariaClick({one:!0},"return"===this.name?function(){return Engine.play(passage)}:function(){return Engine.goTo(momentIndex)}),$image&&$link.addClass("link-image")):$link=jQuery(document.createElement("span")).addClass("link-disabled"),$link.addClass("macro-".concat(this.name)).append($image||document.createTextNode(text||L10n.get("macro".concat(this.name.toUpperFirst(),"Text")))).appendTo(this.output)}}),Macro.add("choice",{handler:function(){if(0===this.args.length)return this.error("no passage specified");var passage,text,$image,setFn,$link,choiceId=State.passage;if(1===this.args.length?"object"===_typeof(this.args[0])?this.args[0].isImage?($image=jQuery(document.createElement("img")).attr("src",this.args[0].source),this.args[0].hasOwnProperty("passage")&&$image.attr("data-passage",this.args[0].passage),this.args[0].hasOwnProperty("title")&&$image.attr("title",this.args[0].title),this.args[0].hasOwnProperty("align")&&$image.attr("align",this.args[0].align),passage=this.args[0].link,setFn=this.args[0].setFn):(text=this.args[0].text,passage=this.args[0].link,setFn=this.args[0].setFn):text=passage=this.args[0]:(passage=this.args[0],text=this.args[1]),State.variables.hasOwnProperty("#choice")&&State.variables["#choice"].hasOwnProperty(choiceId)&&State.variables["#choice"][choiceId])return $link=jQuery(document.createElement("span")).addClass("link-disabled macro-".concat(this.name)).attr("tabindex",-1).append($image||document.createTextNode(text)).appendTo(this.output),void($image&&$link.addClass("link-image"));$link=jQuery(Wikifier.createInternalLink(this.output,passage,null,(function(){State.variables.hasOwnProperty("#choice")||(State.variables["#choice"]={}),State.variables["#choice"][choiceId]=!0,"function"==typeof setFn&&setFn()}))).addClass("macro-".concat(this.name)).append($image||document.createTextNode(text)),$image&&$link.addClass("link-image")}}),Macro.add(["addclass","toggleclass"],{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("selector"),this.args.length<2&&errors.push("class names"),this.error("no ".concat(errors.join(" or ")," specified"))}var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));switch(this.name){case"addclass":$targets.addClass(this.args[1].trim());break;case"toggleclass":$targets.toggleClass(this.args[1].trim())}Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeclass",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));this.args.length>1?$targets.removeClass(this.args[1].trim()):$targets.removeClass(),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("copy",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));jQuery(this.output).append($targets.html()),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add(["append","prepend","replace"],{tags:null,t8nRe:/^(?:transition|t8n)$/,handler:function(){var _this18=this;if(0===this.args.length)return this.error("no selector specified");var $insert,$targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));if(""!==this.payload[0].contents)switch(this.args.length>1&&this.self.t8nRe.test(this.args[1])?(($insert=jQuery(document.createElement("span"))).addClass("macro-".concat(this.name,"-insert macro-").concat(this.name,"-in")),setTimeout((function(){return $insert.removeClass("macro-".concat(_this18.name,"-in"))}),Engine.minDomActionDelay)):$insert=jQuery(document.createDocumentFragment()),$insert.wiki(this.payload[0].contents),this.name){case"replace":$targets.empty();case"append":$targets.append($insert);break;case"prepend":$targets.prepend($insert)}else"replace"===this.name&&$targets.empty();Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("remove",{handler:function(){if(0===this.args.length)return this.error("no selector specified");var $targets=jQuery(this.args[0]);if(0===$targets.length)return this.error('no elements matched the selector "'.concat(this.args[0],'"'));$targets.remove(),Config.debug&&this.debugView.modes({hidden:!0})}}),Has.audio){var errorOnePlaybackAction=function(cur,prev){return'only one playback action allowed per invocation, "'.concat(cur,'" cannot be combined with "').concat(prev,'"')};Macro.add("audio",{handler:function(){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track and/or group IDs"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var selected;try{selected=SimpleAudio.select(this.args[0])}catch(ex){return this.error(ex.message)}for(var action,fadeTo,loop,mute,passage,time,volume,args=this.args.slice(1),fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors=[];return args.length<1&&_errors.push("seconds"),args.length<2&&_errors.push("level"),this.error("fadeoverto missing required ".concat(_errors.join(" and ")," value").concat(_errors.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"time":if(0===args.length)return this.error("time missing required seconds value");if(raw=args.shift(),time=Number.parseFloat(raw),Number.isNaN(time)||!Number.isFinite(time))return this.error("cannot parse time: ".concat(raw));break;case"loop":case"unloop":loop="loop"===arg;break;case"goto":if(0===args.length)return this.error("goto missing required passage title");if(raw=args.shift(),passage="object"===_typeof(raw)?raw.link:raw,!Story.has(passage))return this.error('passage "'.concat(passage,'" does not exist'));break;default:return this.error("unknown action: ".concat(arg))}}try{if(null!=volume&&selected.volume(volume),null!=time&&selected.time(time),null!=mute&&selected.mute(mute),null!=loop&&selected.loop(loop),null!=passage){var nsEnded="ended.macros.macro-".concat(this.name,"_goto");selected.off(nsEnded).one(nsEnded,(function(){selected.off(nsEnded),Engine.play(passage)}))}switch(action){case"fade":selected.fade(fadeOver,fadeTo);break;case"load":selected.load();break;case"pause":selected.pause();break;case"play":selected.playWhenAllowed();break;case"stop":selected.stop();break;case"unload":selected.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("cacheaudio",{handler:function(){var _this19=this;if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("track ID"),this.args.length<2&&errors.push("sources"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim(),oldFmtRe=/^format:\s*([\w-]+)\s*;\s*/i;try{SimpleAudio.tracks.add(id,this.args.slice(1).map((function(source){if(oldFmtRe.test(source)){if(Config.debug)return _this19.error('track ID "'.concat(id,'": format specifier migration required, "format:formatId;" → "formatId|"'));source=source.replace(oldFmtRe,"$1|")}return source})))}catch(ex){return this.error(ex.message)}if(Config.debug&&!SimpleAudio.tracks.get(id).hasSource())return this.error('track ID "'.concat(id,'": no supported audio sources found'));Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("createaudiogroup",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no group ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var groupId=String(this.args[0]).trim(),trackIds=[],i=1,len=this.payload.length;i<len;++i){if(this.payload[i].args.length<1)return this.error("no track ID specified");trackIds.push(String(this.payload[i].args[0]).trim()),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.groups.add(groupId,trackIds)}catch(ex){return this.error(ex.message)}Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("createplaylist",{tags:["track"],handler:function(){if(0===this.args.length)return this.error("no list ID specified");if(1===this.payload.length)return this.error("no tracks defined via <<track>>");var playlist=Macro.get("playlist");if(null!==playlist.from&&"createplaylist"!==playlist.from)return this.error("a playlist has already been defined with <<setplaylist>>");Config.debug&&this.debugView.modes({nonvoid:!1,hidden:!0});for(var listId=String(this.args[0]).trim(),trackObjs=[],i=1,len=this.payload.length;i<len;++i){if(0===this.payload[i].args.length)return this.error("no track ID specified");for(var trackObj={id:String(this.payload[i].args[0]).trim()},args=this.payload[i].args.slice(1);args.length>0;){var arg=args.shift(),raw=void 0,parsed=void 0;switch(arg){case"copy":case"own":trackObj.own=!0;break;case"rate":args.length>0&&args.shift();break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),parsed=Number.parseFloat(raw),Number.isNaN(parsed)||!Number.isFinite(parsed))return this.error("cannot parse volume: ".concat(raw));trackObj.volume=parsed;break;default:return this.error("unknown action: ".concat(arg))}}trackObjs.push(trackObj),Config.debug&&this.createDebugView(this.payload[i].name,this.payload[i].source).modes({nonvoid:!1,hidden:!0})}try{SimpleAudio.lists.add(listId,trackObjs)}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="createplaylist"),Config.debug&&this.createDebugView("/".concat(this.name),"<</".concat(this.name,">>")).modes({nonvoid:!1,hidden:!0})}}),Macro.add("masteraudio",{handler:function(){if(0===this.args.length)return this.error("no actions specified");for(var action,mute,muteOnHide,volume,args=this.args.slice(0);args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"mute":case"unmute":mute="mute"===arg;break;case"muteonhide":case"nomuteonhide":muteOnHide="muteonhide"===arg;break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=mute&&SimpleAudio.mute(mute),null!=muteOnHide&&SimpleAudio.muteOnHidden(muteOnHide),null!=volume&&SimpleAudio.volume(volume),action){case"load":SimpleAudio.load();break;case"stop":SimpleAudio.stop();break;case"unload":SimpleAudio.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("playlist",{from:null,handler:function(){var list,args,action,from=this.self.from;if(null===from)return this.error("no playlists have been created");if("createplaylist"===from){if(this.args.length<2){var errors=[];return this.args.length<1&&errors.push("list ID"),this.args.length<2&&errors.push("actions"),this.error("no ".concat(errors.join(" or ")," specified"))}var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));list=SimpleAudio.lists.get(id),args=this.args.slice(1)}else{if(0===this.args.length)return this.error("no actions specified");list=SimpleAudio.lists.get("setplaylist"),args=this.args.slice(0)}for(var fadeTo,loop,mute,shuffle,volume,fadeOver=5;args.length>0;){var arg=args.shift(),raw=void 0;switch(arg){case"load":case"pause":case"play":case"skip":case"stop":case"unload":if(action)return this.error(errorOnePlaybackAction(arg,action));action=arg;break;case"fadein":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=1;break;case"fadeout":if(action)return this.error(errorOnePlaybackAction(arg,action));action="fade",fadeTo=0;break;case"fadeto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(0===args.length)return this.error("fadeto missing required level value");if(action="fade",raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeto: ".concat(raw));break;case"fadeoverto":if(action)return this.error(errorOnePlaybackAction(arg,action));if(args.length<2){var _errors2=[];return args.length<1&&_errors2.push("seconds"),args.length<2&&_errors2.push("level"),this.error("fadeoverto missing required ".concat(_errors2.join(" and ")," value").concat(_errors2.length>1?"s":""))}if(action="fade",raw=args.shift(),fadeOver=Number.parseFloat(raw),Number.isNaN(fadeOver)||!Number.isFinite(fadeOver))return this.error("cannot parse fadeoverto: ".concat(raw));if(raw=args.shift(),fadeTo=Number.parseFloat(raw),Number.isNaN(fadeTo)||!Number.isFinite(fadeTo))return this.error("cannot parse fadeoverto: ".concat(raw));break;case"volume":if(0===args.length)return this.error("volume missing required level value");if(raw=args.shift(),volume=Number.parseFloat(raw),Number.isNaN(volume)||!Number.isFinite(volume))return this.error("cannot parse volume: ".concat(raw));break;case"mute":case"unmute":mute="mute"===arg;break;case"loop":case"unloop":loop="loop"===arg;break;case"shuffle":case"unshuffle":shuffle="shuffle"===arg;break;default:return this.error("unknown action: ".concat(arg))}}try{switch(null!=volume&&list.volume(volume),null!=mute&&list.mute(mute),null!=loop&&list.loop(loop),null!=shuffle&&list.shuffle(shuffle),action){case"fade":list.fade(fadeOver,fadeTo);break;case"load":list.load();break;case"pause":list.pause();break;case"play":list.playWhenAllowed();break;case"skip":list.skip();break;case"stop":list.stop();break;case"unload":list.unload()}Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error("error executing action: ".concat(ex.message))}}}),Macro.add("removeaudiogroup",{handler:function(){if(0===this.args.length)return this.error("no group ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.groups.has(id))return this.error('group "'.concat(id,'" does not exist'));SimpleAudio.groups.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("removeplaylist",{handler:function(){if(0===this.args.length)return this.error("no list ID specified");var id=String(this.args[0]).trim();if(!SimpleAudio.lists.has(id))return this.error('playlist "'.concat(id,'" does not exist'));SimpleAudio.lists.delete(id),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("waitforaudio",{skipArgs:!0,handler:function(){SimpleAudio.loadWithScreen()}}),Macro.add("setplaylist",{handler:function(){if(0===this.args.length)return this.error("no track ID(s) specified");var playlist=Macro.get("playlist");if(null!==playlist.from&&"setplaylist"!==playlist.from)return this.error("playlists have already been defined with <<createplaylist>>");try{SimpleAudio.lists.add("setplaylist",this.args.slice(0))}catch(ex){return this.error(ex.message)}null===playlist.from&&(playlist.from="setplaylist"),Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("stopallaudio",{skipArgs:!0,handler:function(){SimpleAudio.select(":all").stop(),Config.debug&&this.debugView.modes({hidden:!0})}})}else Macro.add(["audio","cacheaudio","createaudiogroup","createplaylist","masteraudio","playlist","removeaudiogroup","removeplaylist","waitforaudio","setplaylist","stopallaudio"],{skipArgs:!0,handler:function(){Config.debug&&this.debugView.modes({hidden:!0})}});Macro.add("done",{skipArgs:!0,tags:null,handler:function(){var contents=this.payload[0].contents.trim();""!==contents&&setTimeout(this.createShadowWrapper((function(){return $.wiki(contents)})),Engine.minDomActionDelay)}}),Macro.add("goto",{handler:function(){return 0===this.args.length?this.error("no passage specified"):(passage="object"===_typeof(this.args[0])?this.args[0].link:this.args[0],Story.has(passage)?void setTimeout((function(){return Engine.play(passage)}),Engine.minDomActionDelay):this.error('passage "'.concat(passage,'" does not exist')));var passage}}),Macro.add("repeat",{isAsync:!0,tags:null,timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){var delay,_this20=this;if(0===this.args.length)return this.error("no time value specified");try{delay=Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0]))}catch(ex){return this.error(ex.message)}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerInterval(this.createShadowWrapper((function(){var frag=document.createDocumentFragment();new Wikifier(frag,_this20.payload[0].contents);var $output=$wrapper;transition&&($output=jQuery(document.createElement("span")).addClass("macro-repeat-insert macro-repeat-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-repeat-in")}),Engine.minDomActionDelay)})),delay)},registerInterval:function(callback,delay){var _this21=this;if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null;timerId=setInterval((function(){if(State.passage!==passage||State.turns!==turn)return clearInterval(timerId),void timers.delete(timerId);var timerIdCache;try{TempState.break=null,TempState.hasOwnProperty("repeatTimerId")&&(timerIdCache=TempState.repeatTimerId),TempState.repeatTimerId=timerId,callback.call(_this21)}finally{void 0!==timerIdCache?TempState.repeatTimerId=timerIdCache:delete TempState.repeatTimerId,TempState.break=null}}),delay),timers.add(timerId),prehistory.hasOwnProperty("#repeat-timers-cleanup")||(prehistory["#repeat-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearInterval(timerId)})),timers.clear()})}}),Macro.add("stop",{skipArgs:!0,handler:function(){if(!TempState.hasOwnProperty("repeatTimerId"))return this.error("must only be used in conjunction with its parent macro <<repeat>>");var timers=Macro.get("repeat").timers,timerId=TempState.repeatTimerId;clearInterval(timerId),timers.delete(timerId),TempState.break=2,Config.debug&&this.debugView.modes({hidden:!0})}}),Macro.add("timed",{isAsync:!0,tags:["next"],timers:new Set,t8nRe:/^(?:transition|t8n)$/,handler:function(){if(0===this.args.length)return this.error("no time value specified in <<timed>>");var i,items=[];try{items.push({name:this.name,source:this.source,delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.args[0])),content:this.payload[0].contents})}catch(ex){return this.error("".concat(ex.message," in <<timed>>"))}if(this.payload.length>1)try{var len;for(i=1,len=this.payload.length;i<len;++i)items.push({name:this.payload[i].name,source:this.payload[i].source,delay:0===this.payload[i].args.length?items[items.length-1].delay:Math.max(Engine.minDomActionDelay,Util.fromCssTime(this.payload[i].args[0])),content:this.payload[i].contents})}catch(ex){return this.error("".concat(ex.message," in <<next>> (#").concat(i,")"))}Config.debug&&this.debugView.modes({block:!0});var transition=this.args.length>1&&this.self.t8nRe.test(this.args[1]),$wrapper=jQuery(document.createElement("span")).addClass("macro-".concat(this.name)).appendTo(this.output);this.self.registerTimeout(this.createShadowWrapper((function(item){var frag=document.createDocumentFragment();new Wikifier(frag,item.content);var $output=$wrapper;Config.debug&&"next"===item.name&&($output=jQuery(new DebugView($output[0],"macro",item.name,item.source).output)),transition&&($output=jQuery(document.createElement("span")).addClass("macro-timed-insert macro-timed-in").appendTo($output)),$output.append(frag),transition&&setTimeout((function(){return $output.removeClass("macro-timed-in")}),Engine.minDomActionDelay)})),items)},registerTimeout:function(callback,items){if("function"!=typeof callback)throw new TypeError("callback parameter must be a function");var passage=State.passage,turn=State.turns,timers=this.timers,timerId=null,nextItem=items.shift();timerId=setTimeout((function worker(){if(timers.delete(timerId),State.passage===passage&&State.turns===turn){var curItem=nextItem;null!=(nextItem=items.shift())&&(timerId=setTimeout(worker,nextItem.delay),timers.add(timerId)),callback.call(this,curItem)}}),nextItem.delay),timers.add(timerId),prehistory.hasOwnProperty("#timed-timers-cleanup")||(prehistory["#timed-timers-cleanup"]=function(task){delete prehistory[task],timers.forEach((function(timerId){return clearTimeout(timerId)})),timers.clear()})}}),Macro.add("widget",{tags:null,handler:function(){if(0===this.args.length)return this.error("no widget name specified");var widgetCode,widgetName=this.args[0],isNonVoid=this.args.length>1&&"container"===this.args[1];if(Macro.has(widgetName)){if(!Macro.get(widgetName).isWidget)return this.error('cannot clobber existing macro "'.concat(widgetName,'"'));Macro.delete(widgetName)}try{var widgetDef={isWidget:!0,handler:(widgetCode=this.payload[0].contents,function(){var shadowStore={};State.temporary.hasOwnProperty("args")&&(shadowStore._args=State.temporary.args),State.temporary.args=_toConsumableArray(this.args),State.temporary.args.raw=this.args.raw,State.temporary.args.full=this.args.full,this.addShadow("_args"),isNonVoid&&(State.temporary.hasOwnProperty("contents")&&(shadowStore._contents=State.temporary.contents),State.temporary.contents=this.payload[0].contents,this.addShadow("_contents")),State.variables.hasOwnProperty("args")&&(shadowStore.$args=State.variables.args),State.variables.args=State.temporary.args,this.addShadow("$args");try{var resFrag=document.createDocumentFragment(),errList=[];if(new Wikifier(resFrag,widgetCode),Array.from(resFrag.querySelectorAll(".error")).forEach((function(errEl){errList.push(errEl.textContent)})),0!==errList.length)return this.error("error".concat(errList.length>1?"s":""," within widget code (").concat(errList.join("; "),")"));this.output.appendChild(resFrag)}catch(ex){return this.error("cannot execute widget: ".concat(ex.message))}finally{shadowStore.hasOwnProperty("_args")?State.temporary.args=shadowStore._args:delete State.temporary.args,isNonVoid&&(shadowStore.hasOwnProperty("_contents")?State.temporary.contents=shadowStore._contents:delete State.temporary.contents),shadowStore.hasOwnProperty("$args")?State.variables.args=shadowStore.$args:delete State.variables.args}})};isNonVoid&&(widgetDef.tags=[]),Macro.add(widgetName,widgetDef),Config.debug&&this.debugView.modes({hidden:!0})}catch(ex){return this.error('cannot create widget macro "'.concat(widgetName,'": ').concat(ex.message))}}})}();var Dialog=function(){var _$overlay=null,_$dialog=null,_$dialogTitle=null,_$dialogBody=null,_lastActive=null,_scrollbarWidth=0,_dialogObserver=null;function dialogClose(ev){return _$dialogBody.trigger(":dialogclosing"),jQuery(document).off(".dialog-close"),_dialogObserver?(_dialogObserver.disconnect(),_dialogObserver=null):_$dialogBody.off(".dialog-resize"),jQuery(window).off(".dialog-resize"),_$dialog.removeClass("open").css({left:"",right:"",top:"",bottom:""}),jQuery("#ui-bar,#story").find("[tabindex=-2]").removeAttr("aria-hidden").attr("tabindex",0),jQuery("body>[tabindex=-3]").removeAttr("aria-hidden").removeAttr("tabindex"),_$overlay.removeClass("open"),jQuery(document.documentElement).removeAttr("data-dialog"),_$dialogTitle.empty(),_$dialogBody.empty().removeClass(),null!==_lastActive&&(jQuery(_lastActive).focus(),_lastActive=null),ev&&ev.data&&"function"==typeof ev.data.closeFn&&ev.data.closeFn(ev),_$dialogBody.trigger(":dialogclose"),_$dialogBody.trigger(":dialogclosed"),Dialog}function dialogIsOpen(classNames){return _$dialog.hasClass("open")&&(!classNames||classNames.splitOrEmpty(/\s+/).every((function(cn){return _$dialogBody.hasClass(cn)})))}function dialogOpen(options,closeFn){_$dialogBody.trigger(":dialogopening");var top=jQuery.extend({top:50},options).top;return dialogIsOpen()||(_lastActive=safeActiveElement()),jQuery(document.documentElement).attr("data-dialog","open"),_$overlay.addClass("open"),null!==_$dialogBody[0].querySelector("img")&&_$dialogBody.imagesLoaded().always((function(){return _resizeHandler({data:{top:top}})})),jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)").attr("tabindex",-3).attr("aria-hidden",!0),jQuery("#ui-bar,#story").find("[tabindex]:not([tabindex^=-])").attr("tabindex",-2).attr("aria-hidden",!0),_$dialog.css(_calcPosition(top)).addClass("open").focus(),jQuery(window).on("resize.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),Has.mutationObserver?(_dialogObserver=new MutationObserver((function(mutations){for(var i=0;i<mutations.length;++i)if("childList"===mutations[i].type){_resizeHandler({data:{top:top}});break}}))).observe(_$dialogBody[0],{childList:!0,subtree:!0}):_$dialogBody.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize",null,{top:top},jQuery.throttle(40,_resizeHandler)),jQuery(document).one("click.dialog-close",".ui-close",{closeFn:closeFn},(function(ev){dialogClose(ev)})).one("keypress.dialog-close",".ui-close",(function(ev){13!==ev.which&&32!==ev.which||jQuery(this).trigger("click")})),_$dialogBody.trigger(":dialogopen"),_$dialogBody.trigger(":dialogopened"),Dialog}function _calcPosition(topPos){var top=null!=topPos?topPos:50,$parent=jQuery(window),dialogPos={left:"",right:"",top:"",bottom:""};_$dialog.css(dialogPos);var horzSpace=$parent.width()-_$dialog.outerWidth(!0)-1,vertSpace=$parent.height()-_$dialog.outerHeight(!0)-1;return horzSpace<=32+_scrollbarWidth&&(vertSpace-=_scrollbarWidth),vertSpace<=32+_scrollbarWidth&&(horzSpace-=_scrollbarWidth),dialogPos.left=dialogPos.right=horzSpace<=32?16:horzSpace/2>>0,dialogPos.top=vertSpace<=32?dialogPos.bottom=16:vertSpace/2>top?top:dialogPos.bottom=vertSpace/2>>0,Object.keys(dialogPos).forEach((function(key){""!==dialogPos[key]&&(dialogPos[key]+="px")})),dialogPos}function _resizeHandler(ev){var top=ev&&ev.data&&void 0!==ev.data.top?ev.data.top:50;"block"===_$dialog.css("display")&&(_$dialog.css({display:"none"}),_$dialog.css(jQuery.extend({display:""},_calcPosition(top))))}return Object.freeze(Object.defineProperties({},{append:{value:function(){var _$dialogBody2;return(_$dialogBody2=_$dialogBody).append.apply(_$dialogBody2,arguments),Dialog}},body:{value:function(){return _$dialogBody.get(0)}},close:{value:dialogClose},init:{value:function(){if(!document.getElementById("ui-dialog")){_scrollbarWidth=function(){var scrollbarWidth;try{var inner=document.createElement("p"),outer=document.createElement("div");inner.style.width="100%",inner.style.height="200px",outer.style.position="absolute",outer.style.left="0px",outer.style.top="0px",outer.style.width="100px",outer.style.height="100px",outer.style.visibility="hidden",outer.style.overflow="hidden",outer.appendChild(inner),document.body.appendChild(outer);var w1=inner.offsetWidth;outer.style.overflow="auto";var w2=inner.offsetWidth;w1===w2&&(w2=outer.clientWidth),document.body.removeChild(outer),scrollbarWidth=w1-w2}catch(ex){}return scrollbarWidth||17}();var $elems=jQuery(document.createDocumentFragment()).append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>'+'<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("close"),'"></button>')+'</div><div id="ui-dialog-body"></div></div>');_$overlay=jQuery($elems.find("#ui-overlay").get(0)),_$dialog=jQuery($elems.find("#ui-dialog").get(0)),_$dialogTitle=jQuery($elems.find("#ui-dialog-title").get(0)),_$dialogBody=jQuery($elems.find("#ui-dialog-body").get(0)),$elems.insertBefore("body>script#script-sugarcube")}}},isOpen:{value:dialogIsOpen},open:{value:dialogOpen},resize:{value:function(data){return _resizeHandler("object"===_typeof(data)?{data:data}:undefined)}},setup:{value:function(title,classNames){return _$dialogBody.empty().removeClass(),null!=classNames&&_$dialogBody.addClass(classNames),_$dialogTitle.empty().append((null!=title?String(title):"")||" "),_$dialogBody.get(0)}},wiki:{value:function(){var _$dialogBody3;return(_$dialogBody3=_$dialogBody).wiki.apply(_$dialogBody3,arguments),Dialog}},addClickHandler:{value:function(targets,options,startFn,doneFn,closeFn){return jQuery(targets).ariaClick((function(ev){ev.preventDefault(),"function"==typeof startFn&&startFn(ev),dialogOpen(options,closeFn),"function"==typeof doneFn&&doneFn(ev)}))}}}))}(),Engine=function(){var States=Util.toEnum({Idle:"idle",Playing:"playing",Rendering:"rendering"}),_initDebugViews=[],_state=States.Idle,_lastPlay=null,_outlinePatch=null,_updating=null;function engineGo(offset){var succeded=State.go(offset);return succeded&&engineShow(),succeded}function engineShow(){return enginePlay(State.passage,!0)}function enginePlay(title,noHistory){var passageReadyOutput,passageDoneOutput,passageTitle=title;if(_state=States.Playing,TempState={},State.clearTemporary(),"function"==typeof Config.navigation.override)try{var overrideTitle=Config.navigation.override(passageTitle);overrideTitle&&(passageTitle=overrideTitle)}catch(ex){}var passage=Story.get(passageTitle);if(jQuery.event.trigger({type:":passageinit",passage:passage}),Object.keys(prehistory).forEach((function(task){"function"==typeof prehistory[task]&&prehistory[task].call(passage,task)})),noHistory||State.create(passage.title),document.body.className&&(document.body.className=""),_lastPlay=Util.now(),Object.keys(predisplay).forEach((function(task){"function"==typeof predisplay[task]&&predisplay[task].call(passage,task)})),Story.has("PassageReady"))try{passageReadyOutput=Wikifier.wikifyEval(Story.get("PassageReady").text)}catch(ex){console.error(ex),Alert.error("PassageReady",ex.message)}_state=States.Rendering;var dataTags=passage.tags.length>0?passage.tags.join(" "):null,passageEl=document.createElement("div");jQuery(passageEl).attr({id:passage.domId,"data-passage":passage.title,"data-tags":dataTags}).addClass("passage ".concat(passage.className)),jQuery(document.body).attr("data-tags",dataTags).addClass(passage.className),jQuery(document.documentElement).attr("data-tags",dataTags),jQuery.event.trigger({type:":passagestart",content:passageEl,passage:passage}),Object.keys(prerender).forEach((function(task){"function"==typeof prerender[task]&&prerender[task].call(passage,passageEl,task)})),Story.has("PassageHeader")&&new Wikifier(passageEl,Story.get("PassageHeader").processText()),passageEl.appendChild(passage.render()),Story.has("PassageFooter")&&new Wikifier(passageEl,Story.get("PassageFooter").processText()),jQuery.event.trigger({type:":passagerender",content:passageEl,passage:passage}),Object.keys(postrender).forEach((function(task){"function"==typeof postrender[task]&&postrender[task].call(passage,passageEl,task)}));var debugView,containerEl=document.getElementById("passages");if(containerEl.hasChildNodes()&&("number"==typeof Config.passages.transitionOut||"string"==typeof Config.passages.transitionOut&&""!==Config.passages.transitionOut&&Has.transitionEndEvent?_toConsumableArray(containerEl.childNodes).forEach((function(outgoing){var $outgoing=jQuery(outgoing);if(outgoing.nodeType===Node.ELEMENT_NODE&&$outgoing.hasClass("passage")){if($outgoing.hasClass("passage-out"))return;$outgoing.attr({id:"out-".concat($outgoing.attr("id")),"aria-live":"off"}).addClass("passage-out"),"string"==typeof Config.passages.transitionOut?$outgoing.on(Has.transitionEndEvent,(function(ev){ev.propertyName===Config.passages.transitionOut&&$outgoing.remove()})):setTimeout((function(){return $outgoing.remove()}),Math.max(40,Config.passages.transitionOut))}else $outgoing.remove()})):jQuery(containerEl).empty()),jQuery(passageEl).addClass("passage-in").appendTo(containerEl),setTimeout((function(){return jQuery(passageEl).removeClass("passage-in")}),40),Story.has("StoryDisplayTitle")?null===_updating&&Config.ui.updateStoryElements||setDisplayTitle(Story.get("StoryDisplayTitle").processText()):Config.passages.displayTitles&&passage.title!==Config.passages.start&&(document.title="".concat(passage.title," | ").concat(Story.title)),window.scroll(0,0),_state=States.Playing,Story.has("PassageDone"))try{passageDoneOutput=Wikifier.wikifyEval(Story.get("PassageDone").text)}catch(ex){console.error(ex),Alert.error("PassageDone",ex.message)}(jQuery.event.trigger({type:":passagedisplay",content:passageEl,passage:passage}),Object.keys(postdisplay).forEach((function(task){"function"==typeof postdisplay[task]&&postdisplay[task].call(passage,task)})),null!==_updating?_updating.forEach((function(pair){jQuery(pair.element).empty(),new Wikifier(pair.element,Story.get(pair.passage).processText().trim())})):Config.ui.updateStoryElements&&UIBar.update(),Config.debug)&&(null!=passageReadyOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageReady","PassageReady")).modes({hidden:!0}),debugView.append(passageReadyOutput),jQuery(passageEl).prepend(debugView.output)),null!=passageDoneOutput&&((debugView=new DebugView(document.createDocumentFragment(),"special","PassageDone","PassageDone")).modes({hidden:!0}),debugView.append(passageDoneOutput),jQuery(passageEl).append(debugView.output)),1===State.turns&&_initDebugViews.length>0&&jQuery(passageEl).prepend(_initDebugViews));switch(jQuery("#story").find("a[href]:not(.link-external)").addClass("link-external").end().find("a,link,button,input,select,textarea").not("[tabindex]").attr("tabindex",0),_typeof(Config.saves.autosave)){case"boolean":Config.saves.autosave&&Save.autosave.save();break;case"object":passage.tags.some((function(tag){return Config.saves.autosave.includes(tag)}))&&Save.autosave.save();break;case"function":Config.saves.autosave()&&Save.autosave.save()}return jQuery.event.trigger({type:":passageend",content:passageEl,passage:passage}),_state=States.Idle,_lastPlay=Util.now(),passageEl}function _hideOutlines(){_outlinePatch.set("*:focus{outline:none;}")}return Object.freeze(Object.defineProperties({},{States:{value:States},minDomActionDelay:{value:40},init:{value:function(){var _lastOutlineEvent;jQuery("#init-no-js,#init-lacking").remove(),function(){var $elems=jQuery(document.createDocumentFragment()),markup=Story.has("StoryInterface")&&Story.get("StoryInterface").text.trim();if(markup){UIBar.destroy(),jQuery(document.head).find("#style-core-display").remove(),$elems.append(markup);var $passages=$elems.find("#passages");if(0===$passages.length)throw new Error('no element with ID "passages" found within "StoryInterface" special passage');$passages.empty().not("[aria-live]").attr("aria-live","polite").end(),$elems.find("[data-init-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-init-passage" content attribute'));var passage=el.getAttribute("data-init-passage").trim();if(el.hasAttribute("data-passage"))throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> must not contain a "data-passage" content attribute'));if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-init-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&jQuery(el).empty().wiki(Story.get(passage).processText().trim())}));var updating=[];$elems.find("[data-passage]").each((function(i,el){if("passages"===el.id)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' id="passages"> must not contain a "data-passage" content attribute'));var passage=el.getAttribute("data-passage").trim();if(null!==el.firstElementChild)throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(),' data-passage="').concat(passage,'"> contains child elements'));Story.has(passage)&&updating.push({passage:passage,element:el})})),updating.length>0&&(_updating=updating),Config.ui.updateStoryElements=!1}else $elems.append('<div id="story" role="main"><div id="passages" aria-live="polite"></div></div>');$elems.insertBefore("body>script#script-sugarcube")}(),_outlinePatch=new StyleWrapper(jQuery(document.createElement("style")).attr({id:"style-aria-outlines",type:"text/css"}).appendTo(document.head).get(0)),_hideOutlines(),jQuery(document).on("mousedown.aria-outlines keydown.aria-outlines",(function(ev){ev.type!==_lastOutlineEvent&&(_lastOutlineEvent=ev.type,"keydown"===ev.type?_outlinePatch.clear():_hideOutlines())}))}},start:{value:function(){if(Story.getAllInit().forEach((function(passage){try{var debugBuffer=Wikifier.wikifyEval(passage.text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","".concat(passage.title," [init-tagged]"),"".concat(passage.title," [init-tagged]"));debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("".concat(passage.title," [init-tagged]"),"object"===_typeof(ex)?ex.message:ex)}})),Story.has("StoryInit"))try{var debugBuffer=Wikifier.wikifyEval(Story.get("StoryInit").text);if(Config.debug){var debugView=new DebugView(document.createDocumentFragment(),"special","StoryInit","StoryInit");debugView.modes({hidden:!0}),debugView.append(debugBuffer),_initDebugViews.push(debugView.output)}}catch(ex){console.error(ex),Alert.error("StoryInit","object"===_typeof(ex)?ex.message:ex)}if(null==Config.passages.start)throw new Error("starting passage not selected");if(!Story.has(Config.passages.start))throw new Error('starting passage ("'.concat(Config.passages.start,'") not found'));if(jQuery(document.documentElement).focus(),State.restore())engineShow();else{var loadStart=!0;switch(_typeof(Config.saves.autoload)){case"boolean":Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!Save.autosave.load());break;case"string":"prompt"===Config.saves.autoload&&Save.autosave.ok()&&Save.autosave.has()&&(loadStart=!1,UI.buildAutoload(),Dialog.open());break;case"function":Save.autosave.ok()&&Save.autosave.has()&&Config.saves.autoload()&&(loadStart=!Save.autosave.load())}loadStart&&enginePlay(Config.passages.start)}}},restart:{value:function(){LoadScreen.show(),window.scroll(0,0),State.reset(),jQuery.event.trigger(":enginerestart"),window.location.reload()}},state:{get:function(){return _state}},isIdle:{value:function(){return _state===States.Idle}},isPlaying:{value:function(){return _state!==States.Idle}},isRendering:{value:function(){return _state===States.Rendering}},lastPlay:{get:function(){return _lastPlay}},goTo:{value:function(idx){var succeded=State.goTo(idx);return succeded&&engineShow(),succeded}},go:{value:engineGo},backward:{value:function(){return engineGo(-1)}},forward:{value:function(){return engineGo(1)}},show:{value:engineShow},play:{value:enginePlay},display:{value:function(title,link,option){var noHistory=!1;switch(option){case undefined:break;case"replace":case"back":noHistory=!0;break;default:throw new Error('Engine.display option parameter called with obsolete value "'.concat(option,'"; please notify the developer'))}enginePlay(title,noHistory)}}}))}(),Passage=(_tagsToSkip=/^(?:debug|nobr|passage|widget|twine\..*)$/i,function(){function Passage(title,el){var _this22=this;_classCallCheck(this,Passage),Object.defineProperties(this,{title:{value:Util.unescape(title)},element:{value:el||null},tags:{value:Object.freeze(el&&el.hasAttribute("tags")?Array.from(new Set(el.getAttribute("tags").trim().splitOrEmpty(/\s+/))):[])},_excerpt:{writable:!0,value:null}}),Object.defineProperties(this,{domId:{value:"passage-".concat(Util.slugify(this.title))},classes:{value:Object.freeze(0===this.tags.length?[]:_this22.tags.filter((function(tag){return!_tagsToSkip.test(tag)})).map((function(tag){return Util.slugify(tag)})))}})}return _createClass(Passage,[{key:"className",get:function(){return this.classes.join(" ")}},{key:"text",get:function(){if(null==this.element){var passage=Util.escapeMarkup(this.title),mesg="".concat(L10n.get("errorTitle"),": ").concat(L10n.get("errorNonexistentPassage",{passage:passage}));return'<div class="error-view"><span class="error">'.concat(mesg,"</span></div>")}return this.element.textContent.replace(/\r/g,"")}},{key:"description",value:function(){var descriptions=Config.passages.descriptions;switch(_typeof(descriptions)){case"boolean":if(descriptions)return this.title;break;case"object":if(descriptions.hasOwnProperty(this.title))return descriptions[this.title];break;case"function":var result=descriptions.call(this);if(result)return result}return null===this._excerpt&&(this._excerpt=Passage.getExcerptFromText(this.text)),this._excerpt}},{key:"processText",value:function(){if(null==this.element)return this.text;if(this.tags.includes("Twine.image"))return"[img[".concat(this.text,"]]");var processed=this.text;return Config.passages.onProcess&&(processed=Config.passages.onProcess.call(null,{title:this.title,tags:this.tags,text:processed})),(Config.passages.nobr||this.tags.includes("nobr"))&&(processed=processed.replace(/^\n+|\n+$/g,"").replace(/\n+/g," ")),processed}},{key:"render",value:function(options){var frag=document.createDocumentFragment();return new Wikifier(frag,this.processText(),options),this._excerpt=Passage.getExcerptFromNode(frag),frag}}],[{key:"getExcerptFromNode",value:function(node,count){if(!node.hasChildNodes())return"";var excerpt=node.textContent.trim();if(""!==excerpt){var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})"));excerpt=excerpt.replace(/\s+/g," ").match(excerptRe)}return excerpt?"".concat(excerpt[1],"…"):"…"}},{key:"getExcerptFromText",value:function(text,count){if(""===text)return"";var excerptRe=new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count>0?count-1:7,"})")),excerpt=text.replace(/<<.*?>>/g," ").replace(/<.*?>/g," ").trim().replace(/^\s*\|.*\|.*?$/gm,"").replace(/\[[<>]?img\[[^\]]*\]\]/g,"").replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g,"$1").replace(/^\s*!+(.*?)$/gm,"$1").replace(/'{2}|\/{2}|_{2}|@{2}/g,"").trim().replace(/\s+/g," ").match(excerptRe);return excerpt?"".concat(excerpt[1],"…"):"…"}}]),Passage}()),_tagsToSkip,Save=function(){var Type=Util.toEnum({Autosave:"autosave",Disk:"disk",Serialize:"serialize",Slot:"slot"}),_slotsUBound=-1,_onLoadHandlers=new Set,_onSaveHandlers=new Set;function savesObjGet(){var saves=storage.get("saves");return null===saves?{autosave:null,slots:_appendSlots([],Config.saves.slots)}:saves}function savesObjClear(){return storage.delete("saves"),!0}function autosaveOk(){return"cookie"!==storage.name&&void 0!==Config.saves.autosave}function slotsOk(){return"cookie"!==storage.name&&-1!==_slotsUBound}function slotsCount(){if(!slotsOk())return 0;for(var saves=savesObjGet(),count=0,i=0,iend=saves.slots.length;i<iend;++i)null!==saves.slots[i]&&++count;return count}function _appendSlots(array,num){for(var i=0;i<num;++i)array.push(null);return array}function _savesObjIsEmpty(saves){for(var slots=saves.slots,isSlotsEmpty=!0,i=0,iend=slots.length;i<iend;++i)if(null!==slots[i]){isSlotsEmpty=!1;break}return null===saves.autosave&&isSlotsEmpty}function _savesObjSave(saves){return _savesObjIsEmpty(saves)?(storage.delete("saves"),!0):storage.set("saves",saves)}function _savesObjUpdate(saveObj){if(null==saveObj||"object"!==_typeof(saveObj))return!1;var updated=!1;return saveObj.hasOwnProperty("state")&&saveObj.state.hasOwnProperty("delta")&&saveObj.state.hasOwnProperty("index")||(saveObj.hasOwnProperty("data")?(delete saveObj.mode,saveObj.state={delta:State.deltaEncode(saveObj.data)},delete saveObj.data):saveObj.state.hasOwnProperty("delta")?saveObj.state.hasOwnProperty("index")||delete saveObj.state.mode:(delete saveObj.state.mode,saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history),saveObj.state.index=saveObj.state.delta.length-1,updated=!0),saveObj.state.hasOwnProperty("rseed")&&(saveObj.state.seed=saveObj.state.rseed,delete saveObj.state.rseed,saveObj.state.delta.forEach((function(_,i,delta){delta[i].hasOwnProperty("rcount")&&(delta[i].pull=delta[i].rcount,delete delta[i].rcount)})),updated=!0),(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired||saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.hasOwnProperty("expired")&&"number"==typeof saveObj.state.expired&&delete saveObj.state.expired,(saveObj.state.hasOwnProperty("unique")||saveObj.state.hasOwnProperty("last"))&&(saveObj.state.expired=[],saveObj.state.hasOwnProperty("unique")&&(saveObj.state.expired.push(saveObj.state.unique),delete saveObj.state.unique),saveObj.state.hasOwnProperty("last")&&(saveObj.state.expired.push(saveObj.state.last),delete saveObj.state.last)),updated=!0),updated}function _marshal(supplemental,details){if(null!=supplemental&&"object"!==_typeof(supplemental))throw new Error("supplemental parameter must be an object");var saveObj=Object.assign({},supplemental,{id:Config.saves.id,state:State.marshalForSave()});return Config.saves.version&&(saveObj.version=Config.saves.version),_onSaveHandlers.forEach((function(fn){return fn(saveObj,details)})),saveObj.state.delta=State.deltaEncode(saveObj.state.history),delete saveObj.state.history,saveObj}function _unmarshal(saveObj){try{if(_savesObjUpdate(saveObj),!saveObj||!saveObj.hasOwnProperty("id")||!saveObj.hasOwnProperty("state"))throw new Error(L10n.get("errorSaveMissingData"));if(saveObj.state.history=State.deltaDecode(saveObj.state.delta),delete saveObj.state.delta,_onLoadHandlers.forEach((function(fn){return fn(saveObj)})),saveObj.id!==Config.saves.id)throw new Error(L10n.get("errorSaveIdMismatch"));State.unmarshalForSave(saveObj.state),Engine.show()}catch(ex){return UI.alert("".concat(ex.message.toUpperFirst(),".</p><p>").concat(L10n.get("aborting"),".")),!1}return!0}return Object.freeze(Object.defineProperties({},{init:{value:function(){if("cookie"===storage.name)return savesObjClear(),Config.saves.autoload=undefined,Config.saves.autosave=undefined,Config.saves.slots=0,!1;var saves=savesObjGet(),updated=!1;Array.isArray(saves)&&(saves={autosave:null,slots:saves},updated=!0),Config.saves.slots!==saves.slots.length&&(Config.saves.slots<saves.slots.length?(saves.slots.reverse(),saves.slots=saves.slots.filter((function(val){return!(null===val&&this.count>0)||(--this.count,!1)}),{count:saves.slots.length-Config.saves.slots}),saves.slots.reverse()):Config.saves.slots>saves.slots.length&&_appendSlots(saves.slots,Config.saves.slots-saves.slots.length),updated=!0),_savesObjUpdate(saves.autosave)&&(updated=!0);for(var i=0;i<saves.slots.length;++i)_savesObjUpdate(saves.slots[i])&&(updated=!0);return _savesObjIsEmpty(saves)&&(storage.delete("saves"),updated=!1),updated&&_savesObjSave(saves),_slotsUBound=saves.slots.length-1,!0}},get:{value:savesObjGet},clear:{value:savesObjClear},ok:{value:function(){return autosaveOk()||slotsOk()}},autosave:{value:Object.freeze(Object.defineProperties({},{ok:{value:autosaveOk},has:{value:function(){return null!==savesObjGet().autosave}},get:{value:function(){return savesObjGet().autosave}},load:{value:function(){var saves=savesObjGet();return null!==saves.autosave&&_unmarshal(saves.autosave)}},save:{value:function(title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return!1;var saves=savesObjGet(),supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.autosave=_marshal(supplemental,{type:Type.Autosave}),_savesObjSave(saves)}},delete:{value:function(){var saves=savesObjGet();return saves.autosave=null,_savesObjSave(saves)}}}))},slots:{value:Object.freeze(Object.defineProperties({},{ok:{value:slotsOk},length:{get:function(){return _slotsUBound+1}},isEmpty:{value:function(){return 0===slotsCount()}},count:{value:slotsCount},has:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])}},get:{value:function(slot){if(slot<0||slot>_slotsUBound)return null;var saves=savesObjGet();return slot>=saves.slots.length?null:saves.slots[slot]}},load:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length||null===saves.slots[slot])&&_unmarshal(saves.slots[slot])}},save:{value:function(slot,title,metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),!1;if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();if(slot>=saves.slots.length)return!1;var supplemental={title:title||Story.get(State.passage).description(),date:Date.now()};return null!=metadata&&(supplemental.metadata=metadata),saves.slots[slot]=_marshal(supplemental,{type:Type.Slot}),_savesObjSave(saves)}},delete:{value:function(slot){if(slot<0||slot>_slotsUBound)return!1;var saves=savesObjGet();return!(slot>=saves.slots.length)&&(saves.slots[slot]=null,_savesObjSave(saves))}}}))},export:{value:function(filename,metadata){if("function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed()){var str,now,MM,DD,hh,mm,ss,baseName=null==filename?Story.domId:(str=filename,Util.sanitizeFilename(str).replace(/[_\s\u2013\u2014-]+/g,"-")),saveName="".concat(baseName,"-").concat((now=new Date,MM=now.getMonth()+1,DD=now.getDate(),hh=now.getHours(),mm=now.getMinutes(),ss=now.getSeconds(),MM<10&&(MM="0".concat(MM)),DD<10&&(DD="0".concat(DD)),hh<10&&(hh="0".concat(hh)),mm<10&&(mm="0".concat(mm)),ss<10&&(ss="0".concat(ss)),"".concat(now.getFullYear()).concat(MM).concat(DD,"-").concat(hh).concat(mm).concat(ss)),".save"),supplemental=null==metadata?{}:{metadata:metadata},saveObj=LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Disk})));saveAs(new Blob([saveObj],{type:"text/plain;charset=UTF-8"}),saveName)}else Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed"))}},import:{value:function(event){var file=event.target.files[0],reader=new FileReader;jQuery(reader).one("loadend",(function(){if(reader.error){var ex=reader.error;UI.alert("".concat(L10n.get("errorSaveDiskLoadFailed").toUpperFirst()," (").concat(ex.name,": ").concat(ex.message,").</p><p>").concat(L10n.get("aborting"),"."))}else{var saveObj;try{saveObj=JSON.parse(/\.json$/i.test(file.name)||/^\{/.test(reader.result)?reader.result:LZString.decompressFromBase64(reader.result))}catch(ex){}_unmarshal(saveObj)}})),reader.readAsText(file)}},serialize:{value:function(metadata){if("function"==typeof Config.saves.isAllowed&&!Config.saves.isAllowed())return Dialog.isOpen()?$(document).one(":dialogclosed",(function(){return UI.alert(L10n.get("savesDisallowed"))})):UI.alert(L10n.get("savesDisallowed")),null;var supplemental=null==metadata?{}:{metadata:metadata};return LZString.compressToBase64(JSON.stringify(_marshal(supplemental,{type:Type.Serialize})))}},deserialize:{value:function(base64Str){var saveObj;try{saveObj=JSON.parse(LZString.decompressFromBase64(base64Str))}catch(ex){}return _unmarshal(saveObj)?saveObj.metadata:null}},onLoad:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType,")"));_onLoadHandlers.add(handler)}},clear:{value:function(){_onLoadHandlers.clear()}},delete:{value:function(handler){return _onLoadHandlers.delete(handler)}},size:{get:function(){return _onLoadHandlers.size}}}))},onSave:{value:Object.freeze(Object.defineProperties({},{add:{value:function(handler){var valueType=Util.getType(handler);if("function"!==valueType)throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType,")"));_onSaveHandlers.add(handler)}},clear:{value:function(){_onSaveHandlers.clear()}},delete:{value:function(handler){return _onSaveHandlers.delete(handler)}},size:{get:function(){return _onSaveHandlers.size}}}))}}))}(),Setting=function(){var Types=Util.toEnum({Header:0,Toggle:1,List:2,Range:3}),_definitions=[];function settingsCreate(){return Object.create(null)}function settingsSave(){var savedSettings=settingsCreate();return Object.keys(settings).length>0&&_definitions.filter((function(def){return def.type!==Types.Header&&settings[def.name]!==def.default})).forEach((function(def){return savedSettings[def.name]=settings[def.name]})),0===Object.keys(savedSettings).length?(storage.delete("settings"),!0):storage.set("settings",savedSettings)}function settingsLoad(){var defaultSettings=settingsCreate(),loadedSettings=storage.get("settings")||settingsCreate();_definitions.filter((function(def){return def.type!==Types.Header})).forEach((function(def){return defaultSettings[def.name]=def.default})),window.SugarCube.settings=settings=Object.assign(defaultSettings,loadedSettings)}function settingsClear(){return window.SugarCube.settings=settings=settingsCreate(),storage.delete("settings"),!0}function definitionsAdd(type,name,def){if(arguments.length<3){var errors=[];throw arguments.length<1&&errors.push("type"),arguments.length<2&&errors.push("name"),arguments.length<3&&errors.push("definition"),new Error("missing parameters, no ".concat(errors.join(" or ")," specified"))}if("object"!==_typeof(def))throw new TypeError("definition parameter must be an object");if(definitionsHas(name))throw new Error('cannot clobber existing setting "'.concat(name,'"'));var str,pos,definition={type:type,name:name,label:"string"==typeof def.label?def.label.trim():""};if("string"==typeof def.desc){var desc=def.desc.trim();""!==desc&&(definition.desc=desc)}switch(type){case Types.Header:break;case Types.Toggle:definition.default=!!def.default;break;case Types.List:if(!def.hasOwnProperty("list"))throw new Error("no list specified");if(!Array.isArray(def.list))throw new TypeError("list must be an array");if(0===def.list.length)throw new Error("list must not be empty");if(definition.list=Object.freeze(def.list),null==def.default)definition.default=def.list[0];else{var defaultIndex=def.list.indexOf(def.default);if(-1===defaultIndex)throw new Error("list does not contain default");definition.default=def.list[defaultIndex]}break;case Types.Range:if(!def.hasOwnProperty("min"))throw new Error("no min specified");if("number"!=typeof def.min||Number.isNaN(def.min)||!Number.isFinite(def.min))throw new TypeError("min must be a finite number");if(!def.hasOwnProperty("max"))throw new Error("no max specified");if("number"!=typeof def.max||Number.isNaN(def.max)||!Number.isFinite(def.max))throw new TypeError("max must be a finite number");if(!def.hasOwnProperty("step"))throw new Error("no step specified");if("number"!=typeof def.step||Number.isNaN(def.step)||!Number.isFinite(def.step)||def.step<=0)throw new TypeError("step must be a finite number greater than zero");var stepValidate=function(value){if(fracDigits>0){var ma=Number("".concat(def.min,"e").concat(fracDigits)),sa=Number("".concat(def.step,"e").concat(fracDigits)),_va=Number("".concat(value,"e").concat(fracDigits))-ma;return Number("".concat(_va-_va%sa+ma,"e-").concat(fracDigits))}var va=value-def.min;return va-va%def.step+def.min},fracDigits=(str=String(def.step),-1===(pos=str.lastIndexOf("."))?0:str.length-pos-1);if(stepValidate(def.max)!==def.max)throw new RangeError("max (".concat(def.max,") is not a multiple of the step (").concat(def.step,") plus the min (").concat(def.min,")"));if(definition.max=def.max,definition.min=def.min,definition.step=def.step,null==def.default)definition.default=def.max;else{if("number"!=typeof def.default||Number.isNaN(def.default)||!Number.isFinite(def.default))throw new TypeError("default must be a finite number");if(def.default<def.min)throw new RangeError("default (".concat(def.default,") is less than min (").concat(def.min,")"));if(def.default>def.max)throw new RangeError("default (".concat(def.default,") is greater than max (").concat(def.max,")"));definition.default=def.default}break;default:throw new Error("unknown Setting type: ".concat(type))}"function"==typeof def.onInit&&(definition.onInit=Object.freeze(def.onInit)),"function"==typeof def.onChange&&(definition.onChange=Object.freeze(def.onChange)),_definitions.push(Object.freeze(definition))}function definitionsHas(name){return _definitions.some((function(definition){return definition.name===name}))}function definitionsGet(name){return _definitions.find((function(definition){return definition.name===name}))}return Object.freeze(Object.defineProperties({},{Types:{value:Types},init:{value:function(){if(storage.has("options")){var old=storage.get("options");null!==old&&(window.SugarCube.settings=settings=Object.assign(settingsCreate(),old)),settingsSave(),storage.delete("options")}settingsLoad(),_definitions.forEach((function(def){if(def.hasOwnProperty("onInit")){var thisArg={name:def.name,value:settings[def.name],default:def.default};def.hasOwnProperty("list")&&(thisArg.list=def.list),def.onInit.call(thisArg)}}))}},create:{value:settingsCreate},save:{value:settingsSave},load:{value:settingsLoad},clear:{value:settingsClear},reset:{value:function(name){if(0===arguments.length)settingsClear(),settingsLoad();else{if(null==name||!definitionsHas(name))throw new Error('nonexistent setting "'.concat(name,'"'));var def=definitionsGet(name);def.type!==Types.Header&&(settings[name]=def.default)}return settingsSave()}},forEach:{value:function(callback,thisArg){_definitions.forEach(callback,thisArg)}},add:{value:definitionsAdd},addHeader:{value:function(name,desc){definitionsAdd(Types.Header,name,{desc:desc})}},addToggle:{value:function(){for(var _len16=arguments.length,args=new Array(_len16),_key16=0;_key16<_len16;_key16++)args[_key16]=arguments[_key16];definitionsAdd.apply(void 0,[Types.Toggle].concat(args))}},addList:{value:function(){for(var _len17=arguments.length,args=new Array(_len17),_key17=0;_key17<_len17;_key17++)args[_key17]=arguments[_key17];definitionsAdd.apply(void 0,[Types.List].concat(args))}},addRange:{value:function(){for(var _len18=arguments.length,args=new Array(_len18),_key18=0;_key18<_len18;_key18++)args[_key18]=arguments[_key18];definitionsAdd.apply(void 0,[Types.Range].concat(args))}},isEmpty:{value:function(){return 0===_definitions.length}},has:{value:definitionsHas},get:{value:definitionsGet},delete:{value:function definitionsDelete(name){definitionsHas(name)&&delete settings[name];for(var i=0;i<_definitions.length;++i)if(_definitions[i].name===name){_definitions.splice(i,1),definitionsDelete(name);break}}}}))}(),Story=function(){var _passages={},_inits=[],_scripts=[],_styles=[],_widgets=[],_title="",_ifId="",_domId="";function _storySetTitle(rawTitle){if(null==rawTitle)throw new Error("story title must not be null or undefined");var title=Util.unescape(String(rawTitle)).trim();if(""===title)throw new Error("story title must not be empty or consist solely of whitespace");if(document.title=_title=title,""===(_domId=Util.slugify(_title)))if(""!==_ifId)_domId=_ifId;else for(var i=0,len=_title.length;i<len;++i){var _Util$charAndPosAt2=Util.charAndPosAt(_title,i),char=_Util$charAndPosAt2.char,start=_Util$charAndPosAt2.start,end=_Util$charAndPosAt2.end;_domId+=char.codePointAt(0).toString(16),i+=end-start}}return Object.freeze(Object.defineProperties({},{load:{value:function(){var validationCodeTags=["init","widget"],validationNoCodeTagPassages=["PassageDone","PassageFooter","PassageHeader","PassageReady","StoryAuthor","StoryBanner","StoryCaption","StoryInit","StoryMenu","StoryShare","StorySubtitle"];function validateStartingPassage(passage){if(passage.tags.includesAny(validationCodeTags))throw new Error('starting passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(passage.tags.filter((function(tag){return validationCodeTags.includes(tag)})).sort().join('", "'),'"'))}function validateSpecialPassages(passage){if(validationNoCodeTagPassages.includes(passage.title)){for(var _len19=arguments.length,tags=new Array(_len19>1?_len19-1:0),_key19=1;_key19<_len19;_key19++)tags[_key19-1]=arguments[_key19];throw new Error('special passage "'.concat(passage.title,'" contains special tags; invalid: "').concat(tags.sort().join('", "'),'"'))}var codeTags=[].concat(validationCodeTags),foundTags=[];if(passage.tags.forEach((function(tag){codeTags.includes(tag)&&foundTags.push.apply(foundTags,_toConsumableArray(codeTags.delete(tag)))})),foundTags.length>1)throw new Error('passage "'.concat(passage.title,'" contains multiple special tags; invalid: "').concat(foundTags.sort().join('", "'),'"'))}var $storydata=jQuery("tw-storydata"),startNode=$storydata.attr("startnode")||"";Config.passages.start=null,Config.debug=/\bdebug\b/.test($storydata.attr("options")),$storydata.children("style").each((function(i){_styles.push(new Passage("tw-user-style-".concat(i),this))})),$storydata.children("script").each((function(i){_scripts.push(new Passage("tw-user-script-".concat(i),this))})),$storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])').each((function(){var $this=jQuery(this),pid=$this.attr("pid")||"",passage=new Passage($this.attr("name"),this);pid===startNode&&""!==startNode?(Config.passages.start=passage.title,validateStartingPassage(passage),_passages[passage.title]=passage):passage.tags.includes("init")?(validateSpecialPassages(passage,"init"),_inits.push(passage)):passage.tags.includes("widget")?(validateSpecialPassages(passage,"widget"),_widgets.push(passage)):_passages[passage.title]=passage})),_ifId=$storydata.attr("ifid"),_storySetTitle("The Night Markets Forgotten Memories"),Config.saves.id=Story.domId}},init:{value:function(){var storyStyle;storyStyle=document.createElement("style"),new StyleWrapper(storyStyle).add(_styles.map((function(style){return style.text.trim()})).join("\n")),jQuery(storyStyle).appendTo(document.head).attr({id:"style-story",type:"text/css"});for(var i=0;i<_scripts.length;++i)try{Scripting.evalJavaScript(_scripts[i].text)}catch(ex){console.error(ex),Alert.error(_scripts[i].title,"object"===_typeof(ex)?ex.message:ex)}for(var _i8=0;_i8<_widgets.length;++_i8)try{Wikifier.wikifyEval(_widgets[_i8].processText())}catch(ex){console.error(ex),Alert.error(_widgets[_i8].title,"object"===_typeof(ex)?ex.message:ex)}}},title:{get:function(){return _title}},domId:{get:function(){return _domId}},ifId:{get:function(){return _ifId}},add:{value:function(passage){if(!(passage instanceof Passage))throw new TypeError("Story.add passage parameter must be an instance of Passage");var title=passage.title;return!_passages.hasOwnProperty(title)&&(_passages[title]=passage,!0)}},has:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":return _passages.hasOwnProperty(String(title));case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.has title parameter cannot be ".concat(type))}},get:{value:function(title){var type=_typeof(title);switch(type){case"number":case"string":var id=String(title);return _passages.hasOwnProperty(id)?_passages[id]:new Passage(id||"(unknown)");case"undefined":break;case"object":type=null===title?"null":"an object";break;default:type="a ".concat(type)}throw new TypeError("Story.get title parameter cannot be ".concat(type))}},getAllInit:{value:function(){return Object.freeze(Array.from(_inits))}},getAllRegular:{value:function(){return Object.freeze(Object.assign({},_passages))}},getAllScript:{value:function(){return Object.freeze(Array.from(_scripts))}},getAllStylesheet:{value:function(){return Object.freeze(Array.from(_styles))}},getAllWidget:{value:function(){return Object.freeze(Array.from(_widgets))}},lookup:{value:function(key,value){var sortKey=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"title",results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];"object"===_typeof(passage[key])&&null!==passage[key]?passage[key]instanceof Array&&passage[key].some((function(m){return Util.sameValueZero(m,value)}))&&results.push(passage):Util.sameValueZero(passage[key],value)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}},lookupWith:{value:function(predicate){var sortKey=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"title";if("function"!=typeof predicate)throw new TypeError("Story.lookupWith predicate parameter must be a function");var results=[];return Object.keys(_passages).forEach((function(name){var passage=_passages[name];predicate(passage)&&results.push(passage)})),results.sort((function(a,b){return a[sortKey]==b[sortKey]?0:a[sortKey]<b[sortKey]?-1:1})),results}}}))}(),UI=function(){function uiAssembleLinkList(passage,listEl){var list=listEl,debugState=Config.debug,cleanState=Config.cleanupWikifierOutput;Config.debug=!1,Config.cleanupWikifierOutput=!1;try{null==list&&(list=document.createElement("ul"));var frag=document.createDocumentFragment();new Wikifier(frag,Story.get(passage).processText().trim());var errors=_toConsumableArray(frag.querySelectorAll(".error")).map((function(errEl){return errEl.textContent.replace(errorPrologRegExp,"")}));if(errors.length>0)throw new Error(errors.join("; "));for(;frag.hasChildNodes();){var node=frag.firstChild;if(node.nodeType===Node.ELEMENT_NODE&&"A"===node.nodeName.toUpperCase()){var li=document.createElement("li");list.appendChild(li),li.appendChild(node)}else frag.removeChild(node)}}finally{Config.cleanupWikifierOutput=cleanState,Config.debug=debugState}return list}function uiOpenAlert(message){jQuery(Dialog.setup(L10n.get("alertTitle"),"alert")).append("<p>".concat(message,'</p><ul class="buttons">')+'<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertOk","ok"]),"</button></li>")+"</ul>");for(var _len20=arguments.length,args=new Array(_len20>1?_len20-1:0),_key20=1;_key20<_len20;_key20++)args[_key20-1]=arguments[_key20];Dialog.open.apply(Dialog,args)}function uiBuildAutoload(){return jQuery(Dialog.setup(L10n.get("autoloadTitle"),"autoload")).append("<p>".concat(L10n.get("autoloadPrompt"),'</p><ul class="buttons">')+'<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadOk","ok"]),"</button></li>")+'<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadCancel","cancel"]),"</button></li>")+"</ul>"),jQuery(document).one("click.autoload",".ui-close",(function(ev){var isAutoloadOk="autoload-ok"===ev.target.id;jQuery(document).one(":dialogclosed",(function(){isAutoloadOk&&Save.autosave.load()||Engine.play(Config.passages.start)}))})),!0}function uiBuildJumpto(){var list=document.createElement("ul");jQuery(Dialog.setup(L10n.get("jumptoTitle"),"jumpto list")).append(list);for(var expired=State.expired.length,i=State.size-1;i>=0;--i)if(i!==State.activeIndex){var passage=Story.get(State.history[i].title);passage&&passage.tags.includes("bookmark")&&jQuery(document.createElement("li")).append(jQuery(document.createElement("a")).ariaClick({one:!0},function(idx){return function(){return jQuery(document).one(":dialogclosed",(function(){return Engine.goTo(idx)}))}}(i)).addClass("ui-close").text("".concat(L10n.get("jumptoTurn")," ").concat(expired+i+1,": ").concat(passage.description()))).appendTo(list)}list.hasChildNodes()||jQuery(list).append("<li><a><em>".concat(L10n.get("jumptoUnavailable"),"</em></a></li>"))}function uiBuildRestart(){return jQuery(Dialog.setup(L10n.get("restartTitle"),"restart")).append("<p>".concat(L10n.get("restartPrompt"),'</p><ul class="buttons">')+'<li><button id="restart-ok">'.concat(L10n.get(["restartOk","ok"]),"</button></li>")+'<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartCancel","cancel"]),"</button></li>")+"</ul>").find("#restart-ok").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){return Engine.restart()})),Dialog.close()})),!0}function uiBuildSaves(){var savesAllowed="function"!=typeof Config.saves.isAllowed||Config.saves.isAllowed();function createActionItem(bId,bClass,bText,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId)).html(bText);return bClass&&$btn.addClass(bClass),bAction?$btn.ariaClick(bAction):$btn.ariaDisabled(!0),jQuery(document.createElement("li")).append($btn)}var $dialogBody=jQuery(Dialog.setup(L10n.get("savesTitle"),"saves")),savesOk=Save.ok(),fileOk=Has.fileAPI&&(Config.saves.tryDiskOnMobile||!Browser.isMobile.any());if(savesOk&&$dialogBody.append(function(){function createButton(bId,bClass,bText,bSlot,bAction){var $btn=jQuery(document.createElement("button")).attr("id","saves-".concat(bId,"-").concat(bSlot)).addClass(bId).html(bText);return bClass&&$btn.addClass(bClass),bAction?"auto"===bSlot?$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelAuto"))},(function(){return bAction()})):$btn.ariaClick({label:"".concat(bText," ").concat(L10n.get("savesLabelSlot")," ").concat(bSlot+1)},(function(){return bAction(bSlot)})):$btn.ariaDisabled(!0),$btn}var saves=Save.get(),$tbody=jQuery(document.createElement("tbody"));if(Save.autosave.ok()){var $tdSlot=jQuery(document.createElement("td")),$tdLoad=jQuery(document.createElement("td")),$tdDesc=jQuery(document.createElement("td")),$tdDele=jQuery(document.createElement("td"));jQuery(document.createElement("b")).attr({title:L10n.get("savesLabelAuto"),"aria-label":L10n.get("savesLabelAuto")}).text("A").appendTo($tdSlot),saves.autosave?($tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),"auto",(function(){jQuery(document).one(":dialogclosed",(function(){return Save.autosave.load()}))}))),jQuery(document.createElement("div")).text(saves.autosave.title).appendTo($tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.autosave.date?"".concat(new Date(saves.autosave.date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo($tdDesc),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto",(function(){Save.autosave.delete(),uiBuildSaves()})))):($tdLoad.append(createButton("load",null,L10n.get("savesLabelLoad"),"auto")),$tdDesc.addClass("empty").text("•  •  •"),$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),"auto"))),jQuery(document.createElement("tr")).append($tdSlot).append($tdLoad).append($tdDesc).append($tdDele).appendTo($tbody)}for(var i=0,iend=saves.slots.length;i<iend;++i){var _$tdSlot=jQuery(document.createElement("td")),_$tdLoad=jQuery(document.createElement("td")),_$tdDesc=jQuery(document.createElement("td")),_$tdDele=jQuery(document.createElement("td"));_$tdSlot.append(document.createTextNode(i+1)),saves.slots[i]?(_$tdLoad.append(createButton("load","ui-close",L10n.get("savesLabelLoad"),i,(function(slot){jQuery(document).one(":dialogclosed",(function(){return Save.slots.load(slot)}))}))),jQuery(document.createElement("div")).text(saves.slots[i].title).appendTo(_$tdDesc),jQuery(document.createElement("div")).addClass("datestamp").html(saves.slots[i].date?"".concat(new Date(saves.slots[i].date).toLocaleString()):"<em>".concat(L10n.get("savesUnknownDate"),"</em>")).appendTo(_$tdDesc),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i,(function(slot){Save.slots.delete(slot),uiBuildSaves()})))):(_$tdLoad.append(createButton("save","ui-close",L10n.get("savesLabelSave"),i,savesAllowed?Save.slots.save:null)),_$tdDesc.addClass("empty").text("•  •  •"),_$tdDele.append(createButton("delete",null,L10n.get("savesLabelDelete"),i))),jQuery(document.createElement("tr")).append(_$tdSlot).append(_$tdLoad).append(_$tdDesc).append(_$tdDele).appendTo($tbody)}return jQuery(document.createElement("table")).attr("id","saves-list").append($tbody)}()),savesOk||fileOk){var $btnBar=jQuery(document.createElement("ul")).addClass("buttons").appendTo($dialogBody);return fileOk&&($btnBar.append(createActionItem("export","ui-close",L10n.get("savesLabelExport"),savesAllowed?function(){return Save.export()}:null)),$btnBar.append(createActionItem("import",null,L10n.get("savesLabelImport"),(function(){return $dialogBody.find("#saves-import-file").trigger("click")}))),jQuery(document.createElement("input")).css({display:"block",visibility:"hidden",position:"fixed",left:"-9999px",top:"-9999px",width:"1px",height:"1px"}).attr({type:"file",id:"saves-import-file",tabindex:-1,"aria-hidden":!0}).on("change",(function(ev){jQuery(document).one(":dialogclosed",(function(){return Save.import(ev)})),Dialog.close()})).appendTo($dialogBody)),savesOk&&$btnBar.append(createActionItem("clear",null,L10n.get("savesLabelClear"),Save.autosave.has()||!Save.slots.isEmpty()?function(){Save.clear(),uiBuildSaves()}:null)),!0}return uiOpenAlert(L10n.get("savesIncapable")),!1}function uiBuildSettings(){var $dialogBody=jQuery(Dialog.setup(L10n.get("settingsTitle"),"settings"));return Setting.forEach((function(control){if(control.type===Setting.Types.Header){var _name=control.name,_id=Util.slugify(_name),$header=jQuery(document.createElement("div")),$heading=jQuery(document.createElement("h2"));return $header.attr("id","header-body-".concat(_id)).append($heading).appendTo($dialogBody),$heading.attr("id","header-heading-".concat(_id)).wiki(_name),void(control.desc&&jQuery(document.createElement("p")).attr("id","header-desc-".concat(_id)).wiki(control.desc).appendTo($header))}var $control,name=control.name,id=Util.slugify(name),$setting=jQuery(document.createElement("div")),$label=jQuery(document.createElement("label")),$controlBox=jQuery(document.createElement("div"));switch(jQuery(document.createElement("div")).append($label).append($controlBox).appendTo($setting),control.desc&&jQuery(document.createElement("p")).attr("id","setting-desc-".concat(id)).wiki(control.desc).appendTo($setting),$label.attr({id:"setting-label-".concat(id),for:"setting-control-".concat(id)}).wiki(control.label),null==settings[name]&&(settings[name]=control.default),control.type){case Setting.Types.Toggle:$control=jQuery(document.createElement("button")),settings[name]?$control.addClass("enabled").text(L10n.get("settingsOn")):$control.text(L10n.get("settingsOff")),$control.ariaClick((function(){settings[name]?(jQuery(this).removeClass("enabled").text(L10n.get("settingsOff")),settings[name]=!1):(jQuery(this).addClass("enabled").text(L10n.get("settingsOn")),settings[name]=!0),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default})}));break;case Setting.Types.List:$control=jQuery(document.createElement("select"));for(var i=0,iend=control.list.length;i<iend;++i)jQuery(document.createElement("option")).val(i).text(control.list[i]).appendTo($control);$control.val(control.list.indexOf(settings[name])).attr("tabindex",0).on("change",(function(){settings[name]=control.list[Number(this.value)],Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,list:control.list})}));break;case Setting.Types.Range:($control=jQuery(document.createElement("input"))).attr({type:"range",min:control.min,max:control.max,step:control.step,value:settings[name],tabindex:0}).on("change input",(function(){settings[name]=Number(this.value),Setting.save(),control.hasOwnProperty("onChange")&&control.onChange.call({name:name,value:settings[name],default:control.default,min:control.min,max:control.max,step:control.step})})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$control.trigger("change"))}))}$control.attr("id","setting-control-".concat(id)).appendTo($controlBox),$setting.attr("id","setting-body-".concat(id)).appendTo($dialogBody)})),$dialogBody.append('<ul class="buttons">'+'<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsOk","ok"]),"</button></li>")+'<li><button id="settings-reset">'.concat(L10n.get("settingsReset"),"</button></li>")+"</ul>").find("#settings-reset").ariaClick({one:!0},(function(){jQuery(document).one(":dialogclosed",(function(){Setting.reset(),window.location.reload()})),Dialog.close()})),!0}function uiBuildShare(){try{jQuery(Dialog.setup(L10n.get("shareTitle"),"share list")).append(uiAssembleLinkList("StoryShare"))}catch(ex){return console.error(ex),Alert.error("StoryShare",ex.message),!1}return!0}return Object.freeze(Object.defineProperties({},{assembleLinkList:{value:uiAssembleLinkList},alert:{value:uiOpenAlert},jumpto:{value:function(){uiBuildJumpto(),Dialog.open.apply(Dialog,arguments)}},restart:{value:function(){uiBuildRestart(),Dialog.open.apply(Dialog,arguments)}},saves:{value:function(){uiBuildSaves(),Dialog.open.apply(Dialog,arguments)}},settings:{value:function(){uiBuildSettings(),Dialog.open.apply(Dialog,arguments)}},share:{value:function(){uiBuildShare(),Dialog.open.apply(Dialog,arguments)}},buildAutoload:{value:uiBuildAutoload},buildJumpto:{value:uiBuildJumpto},buildRestart:{value:uiBuildRestart},buildSaves:{value:uiBuildSaves},buildSettings:{value:uiBuildSettings},buildShare:{value:uiBuildShare},stow:{value:function(){return UIBar.stow()}},unstow:{value:function(){return UIBar.unstow()}},setStoryElements:{value:function(){return UIBar.update()}},isOpen:{value:function(){return Dialog.isOpen.apply(Dialog,arguments)}},body:{value:function(){return Dialog.body()}},setup:{value:function(){return Dialog.setup.apply(Dialog,arguments)}},addClickHandler:{value:function(){return Dialog.addClickHandler.apply(Dialog,arguments)}},open:{value:function(){return Dialog.open.apply(Dialog,arguments)}},close:{value:function(){return Dialog.close.apply(Dialog,arguments)}},resize:{value:function(){return Dialog.resize()}},buildDialogAutoload:{value:uiBuildAutoload},buildDialogJumpto:{value:uiBuildJumpto},buildDialogRestart:{value:uiBuildRestart},buildDialogSaves:{value:uiBuildSaves},buildDialogSettings:{value:uiBuildSettings},buildDialogShare:{value:uiBuildShare},buildLinkListFromPassage:{value:uiAssembleLinkList}}))}(),UIBar=function(){var _$uiBar=null;function uiBarStow(noAnimation){var $story;_$uiBar&&!_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.addClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay));return this}function uiBarUpdate(){if(Story.has("StoryDisplayTitle")&&setDisplayTitle(Story.get("StoryDisplayTitle").processText()),_$uiBar){setPageElement("story-banner","StoryBanner"),setPageElement("story-subtitle","StorySubtitle"),setPageElement("story-author","StoryAuthor"),setPageElement("story-caption","StoryCaption");var menuStory=document.getElementById("menu-story");if(null!==menuStory&&(jQuery(menuStory).empty(),Story.has("StoryMenu")))try{UI.assembleLinkList("StoryMenu",menuStory)}catch(ex){console.error(ex),Alert.error("StoryMenu",ex.message)}}}return Object.freeze(Object.defineProperties({},{destroy:{value:function(){_$uiBar&&(_$uiBar.hide(),jQuery(document).off(".ui-bar"),jQuery(document.head).find("#style-ui-bar").remove(),_$uiBar.remove(),_$uiBar=null)}},hide:{value:function(){return _$uiBar&&_$uiBar.hide(),this}},init:{value:function(){if(!document.getElementById("ui-bar")){var toggleLabel,backwardLabel,jumptoLabel,forwardLabel,$backward,$forward,$elems=(toggleLabel=L10n.get("uiBarToggle"),backwardLabel=L10n.get("uiBarBackward"),jumptoLabel=L10n.get("uiBarJumpto"),forwardLabel=L10n.get("uiBarForward"),jQuery(document.createDocumentFragment()).append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">'+'<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel,'" aria-label="').concat(toggleLabel,'"></button>')+'<div id="ui-bar-history">'+'<button id="history-backward" tabindex="0" title="'.concat(backwardLabel,'" aria-label="').concat(backwardLabel,'"></button>')+'<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel,'" aria-label="').concat(jumptoLabel,'"></button>')+'<button id="history-forward" tabindex="0" title="'.concat(forwardLabel,'" aria-label="').concat(forwardLabel,'"></button>')+'</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">'+'<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"),"</a></li>")+'<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"),"</a></li>")+'<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"),"</a></li>")+'<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"),"</a></li>")+"</ul></nav></div></div>"));_$uiBar=jQuery($elems.find("#ui-bar").get(0)),$elems.insertBefore("body>script#script-sugarcube"),jQuery(document).on(":historyupdate.ui-bar",($backward=jQuery("#history-backward"),$forward=jQuery("#history-forward"),function(){$backward.ariaDisabled(State.length<2),$forward.ariaDisabled(State.length===State.size)}))}}},isHidden:{value:function(){return _$uiBar&&"none"===_$uiBar.css("display")}},isStowed:{value:function(){return _$uiBar&&_$uiBar.hasClass("stowed")}},show:{value:function(){return _$uiBar&&_$uiBar.show(),this}},start:{value:function(){_$uiBar&&(("boolean"==typeof Config.ui.stowBarInitially?Config.ui.stowBarInitially:jQuery(window).width()<=Config.ui.stowBarInitially)&&uiBarStow(!0),jQuery("#ui-bar-toggle").ariaClick({label:L10n.get("uiBarToggle")},(function(){return _$uiBar.toggleClass("stowed")})),Config.history.controls?(jQuery("#history-backward").ariaDisabled(State.length<2).ariaClick({label:L10n.get("uiBarBackward")},(function(){return Engine.backward()})),Story.lookup("tags","bookmark").length>0?jQuery("#history-jumpto").ariaClick({label:L10n.get("uiBarJumpto")},(function(){return UI.jumpto()})):jQuery("#history-jumpto").remove(),jQuery("#history-forward").ariaDisabled(State.length===State.size).ariaClick({label:L10n.get("uiBarForward")},(function(){return Engine.forward()}))):jQuery("#ui-bar-history").remove(),Story.has("StoryDisplayTitle")?setDisplayTitle(Story.get("StoryDisplayTitle").processText()):jQuery("#story-title").text(Story.title),Story.has("StoryCaption")||jQuery("#story-caption").remove(),Story.has("StoryMenu")||jQuery("#menu-story").remove(),Config.ui.updateStoryElements||uiBarUpdate(),jQuery("#menu-item-saves a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSaves(),Dialog.open()})).text(L10n.get("savesTitle")),Setting.isEmpty()?jQuery("#menu-item-settings").remove():jQuery("#menu-item-settings a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildSettings(),Dialog.open()})).text(L10n.get("settingsTitle")),jQuery("#menu-item-restart a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildRestart(),Dialog.open()})).text(L10n.get("restartTitle")),Story.has("StoryShare")?jQuery("#menu-item-share a").ariaClick({role:"button"},(function(ev){ev.preventDefault(),UI.buildShare(),Dialog.open()})).text(L10n.get("shareTitle")):jQuery("#menu-item-share").remove())}},stow:{value:uiBarStow},unstow:{value:function(noAnimation){var $story;return _$uiBar&&_$uiBar.hasClass("stowed")&&(noAnimation&&(($story=jQuery("#story")).addClass("no-transition"),_$uiBar.addClass("no-transition")),_$uiBar.removeClass("stowed"),noAnimation&&setTimeout((function(){$story.removeClass("no-transition"),_$uiBar.removeClass("no-transition")}),Engine.minDomActionDelay)),this}},update:{value:uiBarUpdate},setStoryElements:{value:uiBarUpdate}}))}(),DebugBar=function(){var _variableRe=new RegExp("^".concat(Patterns.variable,"$")),_numericKeyRe=/^\d+$/,_watchList=[],_$debugBar=null,_$watchBody=null,_$watchList=null,_$turnSelect=null,_stowed=!0;function debugBarStow(){_$debugBar.css("right","-".concat(_$debugBar.outerWidth(),"px")),_stowed=!0,_updateSession()}function debugBarUnstow(){_$debugBar.css("right",0),_stowed=!1,_updateSession()}function debugBarToggle(){_stowed?debugBarUnstow():debugBarStow()}function debugBarWatchAdd(varName){_variableRe.test(varName)&&(_watchList.pushUnique(varName),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession())}function debugBarWatchAddAll(){Object.keys(State.variables).map((function(name){return _watchList.pushUnique("$".concat(name))})),Object.keys(State.temporary).map((function(name){return _watchList.pushUnique("_".concat(name))})),_watchList.sort(),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchClear(){for(var i=_watchList.length-1;i>=0;--i)_watchList.pop();_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDelete(varName){_watchList.delete(varName),_updateWatchBody(),_updateWatchList(),_updateSession()}function debugBarWatchDisable(){_debugBarWatchDisableNoUpdate(),_updateSession()}function debugBarWatchEnable(){_debugBarWatchEnableNoUpdate(),_updateSession()}function debugBarWatchIsEnabled(){return!_$watchBody.attr("hidden")}function debugBarWatchToggle(){_$watchBody.attr("hidden")?debugBarWatchEnable():debugBarWatchDisable()}function _debugBarWatchDisableNoUpdate(){_$watchBody.attr({"aria-hidden":!0,hidden:"hidden"})}function _debugBarWatchEnableNoUpdate(){_$watchBody.removeAttr("aria-hidden hidden")}function _clearSession(){session.delete("debugState")}function _hasSession(){return session.has("debugState")}function _updateSession(){session.set("debugState",{stowed:_stowed,watchList:_watchList,watchEnabled:debugBarWatchIsEnabled(),viewsEnabled:DebugView.isEnabled()})}function _updateWatchBody(){if(0!==_watchList.length){for(var delLabel=L10n.get("debugBarDeleteWatch"),$table=jQuery(document.createElement("table")),$tbody=jQuery(document.createElement("tbody")),_loop4=function(i,len){var varName=_watchList[i],varKey=varName.slice(1),store="$"===varName[0]?State.variables:State.temporary,$row=jQuery(document.createElement("tr")),$delBtn=jQuery(document.createElement("button")),$code=jQuery(document.createElement("code"));$delBtn.addClass("watch-delete").attr("data-name",varName).ariaClick({one:!0,label:delLabel},(function(){return debugBarWatchDelete(varName)})),$code.text(_toWatchString(store[varKey])),jQuery(document.createElement("td")).append($delBtn).appendTo($row),jQuery(document.createElement("td")).text(varName).appendTo($row),jQuery(document.createElement("td")).append($code).appendTo($row),$row.appendTo($tbody)},i=0,len=_watchList.length;i<len;++i)_loop4(i);$table.append($tbody),_$watchBody.empty().append($table)}else _$watchBody.empty().append("<div>".concat(L10n.get("debugBarNoWatches"),"</div>"))}function _updateWatchList(){var svn=Object.keys(State.variables),tvn=Object.keys(State.temporary);if(0!==svn.length||0!==tvn.length){var names=[].concat(_toConsumableArray(svn.map((function(name){return"$".concat(name)}))),_toConsumableArray(tvn.map((function(name){return"_".concat(name)})))).sort(),options=document.createDocumentFragment();names.delete(_watchList);for(var i=0,len=names.length;i<len;++i)jQuery(document.createElement("option")).val(names[i]).appendTo(options);_$watchList.empty().append(options)}else _$watchList.empty()}function _updateTurnSelect(){for(var histLen=State.size,expLen=State.expired.length,options=document.createDocumentFragment(),i=0;i<histLen;++i)jQuery(document.createElement("option")).val(i).text("".concat(expLen+i+1,". ").concat(Util.escape(State.history[i].title))).appendTo(options);_$turnSelect.empty().ariaDisabled(histLen<2).append(options).val(State.activeIndex)}function _toWatchString(value){if(null===value)return"null";switch(_typeof(value)){case"number":if(Number.isNaN(value))return"NaN";if(!Number.isFinite(value))return"Infinity";case"boolean":case"symbol":case"undefined":return String(value);case"string":return JSON.stringify(value);case"function":return"Function"}var objType=Util.toStringTag(value);if("Date"===objType)return"Date {".concat(value.toLocaleString(),"}");if("RegExp"===objType)return"RegExp ".concat(value.toString());var result=[];if(value instanceof Array||value instanceof Set){for(var list=value instanceof Array?value:Array.from(value),i=0,len=list.length;i<len;++i)result.push(list.hasOwnProperty(i)?_toWatchString(list[i]):"<empty>");return Object.keys(list).filter((function(key){return!_numericKeyRe.test(key)})).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(list[key])))})),"".concat(objType,"(").concat(list.length,") [").concat(result.join(", "),"]")}return value instanceof Map?(value.forEach((function(val,key){return result.push("".concat(_toWatchString(key)," → ").concat(_toWatchString(val)))})),"".concat(objType,"(").concat(value.size,") {").concat(result.join(", "),"}")):(Object.keys(value).forEach((function(key){return result.push("".concat(_toWatchString(key),": ").concat(_toWatchString(value[key])))})),"".concat(objType," {").concat(result.join(", "),"}"))}return Object.freeze(Object.defineProperties({},{init:{value:function(){var barToggleLabel=L10n.get("debugBarToggle"),watchAddLabel=L10n.get("debugBarAddWatch"),watchAllLabel=L10n.get("debugBarWatchAll"),watchNoneLabel=L10n.get("debugBarWatchNone"),watchToggleLabel=L10n.get("debugBarWatchToggle"),viewsToggleLabel=L10n.get("debugBarViewsToggle");jQuery(document.createDocumentFragment()).append('<div id="debug-bar"><div id="debug-bar-watch">'+"<div>".concat(L10n.get("debugBarNoWatches"),"</div>>")+"</div><div>"+'<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel,'" aria-label="').concat(watchToggleLabel,'">').concat(L10n.get("debugBarLabelWatch"),"</button>")+'<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarLabelAdd"),"</label>")+'<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist>'+'<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel,'" aria-label="').concat(watchAddLabel,'"></button>')+'<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel,'" aria-label="').concat(watchAllLabel,'"></button>')+'<button id="debug-bar-watch-none" tabindex="0" title="'.concat(watchNoneLabel,'" aria-label="').concat(watchNoneLabel,'"></button>')+"</div><div>"+'<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel,'" aria-label="').concat(viewsToggleLabel,'">').concat(L10n.get("debugBarLabelViews"),"</button>")+'<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("debugBarLabelTurn"),"</label>")+'<select id="debug-bar-turn-select" tabindex="0"></select></div>'+'<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel,'" aria-label="').concat(barToggleLabel,'"></button>')+'</div><div id="debug-bar-hint"></div>').appendTo("body"),_$debugBar=jQuery("#debug-bar"),_$watchBody=jQuery(_$debugBar.find("#debug-bar-watch").get(0)),_$watchList=jQuery(_$debugBar.find("#debug-bar-watch-list").get(0)),_$turnSelect=jQuery(_$debugBar.find("#debug-bar-turn-select").get(0));var $barToggle=jQuery(_$debugBar.find("#debug-bar-toggle").get(0)),$watchToggle=jQuery(_$debugBar.find("#debug-bar-watch-toggle").get(0)),$watchInput=jQuery(_$debugBar.find("#debug-bar-watch-input").get(0)),$watchAdd=jQuery(_$debugBar.find("#debug-bar-watch-add").get(0)),$watchAll=jQuery(_$debugBar.find("#debug-bar-watch-all").get(0)),$watchNone=jQuery(_$debugBar.find("#debug-bar-watch-none").get(0)),$viewsToggle=jQuery(_$debugBar.find("#debug-bar-views-toggle").get(0));$barToggle.ariaClick(debugBarToggle),$watchToggle.ariaClick(debugBarWatchToggle),$watchInput.on(":addwatch",(function(){debugBarWatchAdd(this.value.trim()),this.value=""})).on("keypress",(function(ev){13===ev.which&&(ev.preventDefault(),$watchInput.trigger(":addwatch"))})),$watchAdd.ariaClick((function(){return $watchInput.trigger(":addwatch")})),$watchAll.ariaClick(debugBarWatchAddAll),$watchNone.ariaClick(debugBarWatchClear),_$turnSelect.on("change",(function(){Engine.goTo(Number(this.value))})),$viewsToggle.ariaClick((function(){DebugView.toggle(),_updateSession()})),jQuery(document).on(":historyupdate.debug-bar",_updateTurnSelect).on(":passageend.debug-bar",(function(){_updateWatchBody(),_updateWatchList()})).on(":enginerestart.debug-bar",_clearSession),_hasSession()||DebugView.enable()}},isStowed:{value:function(){return _stowed}},start:{value:function(){(function(){if(!_hasSession())return!1;var debugState=session.get("debugState");_stowed=debugState.stowed,_watchList.push.apply(_watchList,_toConsumableArray(debugState.watchList)),debugState.watchEnabled?_debugBarWatchEnableNoUpdate():_debugBarWatchDisableNoUpdate();debugState.viewsEnabled?DebugView.enable():DebugView.disable()})(),_stowed?debugBarStow():debugBarUnstow(),_updateTurnSelect(),_updateWatchBody(),_updateWatchList()}},stow:{value:debugBarStow},toggle:{value:debugBarToggle},unstow:{value:debugBarUnstow},watch:{value:Object.freeze(Object.defineProperties({},{add:{value:debugBarWatchAdd},all:{value:debugBarWatchAddAll},clear:{value:debugBarWatchClear},delete:{value:debugBarWatchDelete},disable:{value:debugBarWatchDisable},enable:{value:debugBarWatchEnable},isEnabled:{value:debugBarWatchIsEnabled},toggle:{value:debugBarWatchToggle}}))}}))}(),LoadScreen=function(){var _locks=new Set,_autoId=0;function loadScreenHide(){jQuery(document.documentElement).removeAttr("data-init")}function loadScreenShow(){jQuery(document.documentElement).attr("data-init","loading")}return Object.freeze(Object.defineProperties({},{init:{value:function(){jQuery(document).on("readystatechange.SugarCube",(function(){_locks.size>0||("complete"===document.readyState?"loading"===jQuery(document.documentElement).attr("data-init")&&(Config.loadDelay>0?setTimeout((function(){0===_locks.size&&loadScreenHide()}),Math.max(Engine.minDomActionDelay,Config.loadDelay)):loadScreenHide()):loadScreenShow())}))}},clear:{value:function(){jQuery(document).off("readystatechange.SugarCube"),_locks.clear(),loadScreenHide()}},hide:{value:loadScreenHide},show:{value:loadScreenShow},lock:{value:function(){return++_autoId,_locks.add(_autoId),loadScreenShow(),_autoId}},unlock:{value:function(id){if(null==id)throw new Error("LoadScreen.unlock called with a null or undefined ID");_locks.has(id)&&_locks.delete(id),0===_locks.size&&jQuery(document).trigger("readystatechange")}}}))}(),version=Object.freeze({title:"SugarCube",major:2,minor:36,patch:1,prerelease:null,build:9717,date:new Date("2021-12-22T05:37:33.467Z"),extensions:{},toString:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,"+").concat(this.build)},short:function(){var prerelease=this.prerelease?"-".concat(this.prerelease):"";return"".concat(this.title," (v").concat(this.major,".").concat(this.minor,".").concat(this.patch).concat(prerelease,")")},long:function(){return"".concat(this.title," v").concat(this.toString()," (").concat(this.date.toUTCString(),")")}}),TempState={},macros={},postdisplay={},postrender={},predisplay={},prehistory={},prerender={},session=null,settings={},setup={},storage=null,browser=Browser,config=Config,has=Has,History=State,state=State,tale=Story,TempVariables=State.temporary;window.SugarCube={},jQuery((function(){try{var lockId=LoadScreen.lock();LoadScreen.init(),document.normalize&&document.normalize(),Story.load(),storage=SimpleStore.create(Story.domId,!0),session=SimpleStore.create(Story.domId,!1),Dialog.init(),UIBar.init(),Engine.init(),Story.init(),L10n.init(),session.has("rcWarn")||"cookie"!==storage.name||(session.set("rcWarn",1),window.alert(L10n.get("warningNoWebStorage"))),Save.init(),Setting.init(),Macro.init(),Engine.start(),Config.debug&&DebugBar.init();var $window=$(window),vprCheckId=setInterval((function(){$window.width()&&(clearInterval(vprCheckId),UIBar.start(),Config.debug&&DebugBar.start(),jQuery.event.trigger({type:":storyready"}),setTimeout((function(){return LoadScreen.unlock(lockId)}),2*Engine.minDomActionDelay))}),Engine.minDomActionDelay);Object.defineProperty(window,"SugarCube",{value:Object.seal(Object.assign(Object.create(null),{Browser:Browser,Config:Config,Dialog:Dialog,Engine:Engine,Fullscreen:Fullscreen,Has:Has,L10n:L10n,Macro:Macro,Passage:Passage,Save:Save,Scripting:Scripting,Setting:Setting,SimpleAudio:SimpleAudio,State:State,Story:Story,UI:UI,UIBar:UIBar,DebugBar:DebugBar,Util:Util,Visibility:Visibility,Wikifier:Wikifier,session:session,settings:settings,setup:setup,storage:storage,version:version}))})}catch(ex){return console.error(ex),LoadScreen.clear(),Alert.fatal(null,ex.message,ex)}}))})(window,window.document,jQuery);}
	</script>
</body>
</html>
